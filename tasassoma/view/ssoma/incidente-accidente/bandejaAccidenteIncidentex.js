/****************************************************************************************
* VISUAL SAT - [2021]
* PROYECTO : SIGTASA
* ESQUEMA : SSOMA
* SPRINT  : 4
* MODULO : GESTIÓN DE PLAN ANUAL
* OPERADORES_________________________________________________________________________
* | # | PROGRAMADOR     |  |      FECHA   |  |   HORA   |           CORREO           |
* | 1 | Andy Vásquez    |  |  04/01/2021  |  | 07:28:50 |    caracas1348@gmail.com   |
* |___|_________________|__|______________|__|__________|____________________________|
*
* DESCRIPCION: ARCHIVO FRONT DE FUNCIONALIDAD EN CLIENTE DE LAS OPCIONES DE LOS INCIDENTES Y 
* EN EL FRONT END ACCIDENTES- (LISTADO, FILTRADO, VER)
*
* ARCHIVOS DE SERVICIOS   _________________________________________
* | # |     MODULO             |  |         NOMBRE                 |
* | 1 |      SSOMA             |  |     Get-AccidenteIncidente     |
* |________________________________________________________________|
*
* VERSION: 0.1 Beta
*******************************************************************************************/


/*------------------------------------------  class PlanAnual ------------------end---------------------------------*/
function PlanAnual()
 {

        this.a = [];

        this.Code;    //: "PASSTTSUP21001"
        this.Code_Gerencia;
        this.Color_Plan;//: "#000000"
        this.Equipo;//: "Equipo1"
        this.EquipoId;//: 1
        this.Estado_Plan;//: "Creado"
        this.Estado_PlanId;//: 1
        this.Fecha_Creacion;//: "01/01/2021"
        this.Gerencia;//: "Gerencia de adminstración y finanzas"
        this.GerenciaId;//: 2
        this.Id;//: 1
        this.Num_Objetivos;//: 5
        this.Objetivos = [];//: (5) [{…}, {…}, {…}, {…}, {…}]
        this.Programa;//: "PASST"
        this.ProgramaId;//: 1
        this.Sede;//: "Callao Norte"
        this.SedeId;//: 1
        this.Year_Plan;
        this.accion; //indica si es un nuevo Plan o es una modificación del Plan


        this.Create_By;
        this.Create_Date;
        this.Last_Update_By;
        this.Last_Update_Date;
        this.LA  = [];//: (5) [{…}, {…}, {…}, {…}, {…}]


       PlanAnual.prototype.cargarData = function (data)
        {

            this.a = data;
            this.a.AdjuntoIncidente = 0;
            this.a.IdAlerta = 0;
            this.a.AdjuntoAlerta = 0;
            this.a.hayEvidenciaBD = 0;
            this.a.LA = [];
        }

    }
//.............................................. CLASE classHallazgo ...........................................

/*------------------------------------------  class PlanAnual ------------------end---------------------------------*/



/*------------------------------------------  class PlanAnual ------------------end---------------------------------*/
function Objetivo()
 {

        this.Code;//: "1"
        this.Id;//: 1
        this.Nun_Actividades;//: 2
        this.Objetivo_Name;   //: "PASSTTSUP21001"
        this.Actividades = [ ]; //: (2) [{…}, {…}]
        this.SubObjetivos = [ ];//: (5) [{…}, {…}, {…}, {…}, {…}]

}
//.............................................. CLASE classHallazgo ...........................................


/*------------------------------------------  class PlanAnual ------------------end---------------------------------*/
function SubObjetivo()
 {

        this.Code;//: "1"
        this.Id;//: 1
        this.Nun_Actividades;//: 2
        this.SubObjetivo_Name;    //: "PASSTTSUP21001"
        this.Actividades = [ ];//: (2) [{…}, {…}]

}
//.............................................. CLASE classHallazgo ...........................................



/*------------------------------------------  class PlanAnualDG ------------------ini---------------------------------*/
/*------------------------------------------  class Dtaos Generales ------------------ini---------------------------------*/
function PlanAnualDG()
 {

        this.a = [];


       PlanAnualDG.prototype.cargarData = function (data)
        {

            this.a = data;
            // this.a.AdjuntoIncidente = 0;
            // this.a.IdAlerta = 0;
            // this.a.AdjuntoAlerta = 0;
            // this.a.hayEvidenciaBD = 0;
        }

    }
//.............................................. class Dtaos Generales ...........................................

/*------------------------------------------  class PlanAnualDG ------------------end---------------------------------*/


var mayorIdDG;
var guardarEnviarDG;
var paObjDG = new Array();
var AccionBD_DG = 0; //INDICA SI SE VA A INSERTAR O A MODIFICAR LOS DATOS SSO DEL PLAN ANUAL
var FinalizadoA = 0; //indica si esta o se va a finalizar los datos de un evento Ambiental
var FinalizadoSSO = 0; //indica si esta o se va a finalizar los datos de un evento SSO
var FinalizadoMat = 0; //indica si esta o se va a finalizar los datos de un evento SSO
//svar form_DG_STEP = 0;// IINDICA SI LA PESTAÑANA MOSTRADA DE LOS DATOS GENERALES PERTENES A (0= Datos de evento SSO) ó  (1 = Datos de Evento MA-Ambie)






var paObj = new Array();
var istAud = "0";//contiene el datos del Plan auditor que actualmente se esta editando o trabajando
var istLA = "0";//contiene el datos de la Leccion Aprendida que actualmente se esta editando o trabajando
var accPlanAnual = 0; //indica si se va a crear = 0, a mofificar = 1 o a mostrar = 2 el plan
var objetivo; //variable que indica si es un objetivo o subobjetivo lo seleccionado
var objNewPA;//objeto que manejará la concepción de un nuevo plan anual
var objNewPA2;
var selGerencia = [];
var selPrograma = [];
var selSede = [];
var numSobj=0;
var LTE = new Array();; //VARIABLE GLOBAL QUE CONTIENE LOS TOPO DE EVENTOS QUE EXISTEN DESDE BASE DE DATOS
var LTS = new Array();; //VARIABLE GLOBAL QUE CONTIENE LAS SEDES QUE EXISTEN DESDE BASE DE DATOS
var LTA = new Array();; //VARIABLE GLOBAL QUE CONTIENE LAS AREAS QUE EXISTEN DESDE BASE DE DATOS
var LTZ = new Array();; //VARIABLE GLOBAL QUE CONTIENE LAS ZONAS QUE EXISTEN DESDE BASE DE DATOS

var verCalendario = 0; 

var dImgLA = []; //VARIABLE DONDE SE GUARDAN LOS ID DE LAS IMAGENES PRECARGADAS COMO EVIDENCIAS


var LTE_LA1 = new Array(); //VARIABLE GLOBAL QUE CONTIENE LOS TOPO DE EVENTOS QUE EXISTEN DESDE BASE DE DATOS PARA LAS LECCIONES APRENDIDAS PERSONAL
var LTE_LA2 = new Array(); //VARIABLE GLOBAL QUE CONTIENE LOS TOPO DE EVENTOS QUE EXISTEN DESDE BASE DE DATOS PARA LAS LECCIONES APRENDIDAS DANNIO
var LTE_LA3 = new Array(); //VARIABLE GLOBAL QUE CONTIENE LOS TOPO DE EVENTOS QUE EXISTEN DESDE BASE DE DATOS PARA LAS LECCIONES APRENDIDAS AMBIENTAL


/*


class ObjetivoSubObjetivo

{
    constructor (objson)
    {
        if(objson == 0)
        {
            this.Tipo = 'SubOjbetivo';
            this.Nun_Actividad = 'SubOjbetivo';
            this.Actividad = 'SubOjbetivo';
            this.Peso = 'SubOjbetivo';
            this.Responsable = 'SubOjbetivo';
            this.Tipo = 'SubOjbetivo';
        }

    }

}


const paObj = new PlanAnual(0);
      console.clear();
      console.log('parametro de la clase . = ',paObj.IdPlan);
      console.log('parametro de la clase . = ',paObj.IdPrograma);
      console.log('parametro de la clase . = ',paObj.IdGerencia);
      console.log('parametro de la clase . = ',paObj.IdSede);
      console.log('parametro de la clase . = ',paObj.IdEquipo);
      console.log('parametro de la clase . = ',paObj.obj.Tipo);



*/

















function _init_fnSp3PlanAnualEstadoInicial()
{//------------------------------------- ini   fnSp3AdministrarHallazgosEstadoInicial() -------------------------------------
    //showLoading();
    console.log("Arrancamos............................ _init_fnSp3PlanAnualEstadoInicial");
    if(getStorage("vtas_rolexternalrol", "text") == "ROL_OBSERVADORPLANANUAL"){
        $(".btn_edit").css("display",'none')
    }
    if(getStorage("vtas_rolexternalrol", "text") != "ROL_REPSONSABLEPLANANUAL"){
        $(".btn_new_").css("display",'none')
    }

    //responsive
     fnSp3ResponsiveAdmHallazgos();
     //fnSp3CargarFuncionesAdmHallazgosDinamicasDOM();
     fnSp3CargaFiltroEstadoInicialPlanAnual();
      vw_principal.init();// necesario para inicializar el servicio busca persona


}//------------------------------------- fini   fnSp3AdministrarHallazgosEstadoInicial() -------------------------------------



var mayorId;
function fnSp3CargaFiltroEstadoInicialPlanAnual()
{//------------------------------------- ini   fnSp3CargaFiltroEstadoInicialPlanAnual() -------------------------------------
    console.log("Arrancamos.................4444444444444444444444444444........... fnSp3CargaFiltroEstadoInicialPlanAnual");
    //$('#modalMsgError').modal("show").addClass("fade")

    showLoading();
    guardarEnviar = 0;
    $("#sp3BtFiltroPlanAnual").html("Buscando.....")
    $("#sp3BtFiltroPlanAnual").attr("disabled",true);


     var programa =  $('#sel_filter_programa_p').val();    if(programa == null){programa = 0;}
     var gerencia =  $('#sel_filter_gerencia_p').val();     if(gerencia == null){gerencia = 0;}
     var sedepa =  $('#sel_filter_sede_p').val();    if(sedepa == null){sedepa = 0;}
     var estadopa =  $('#sel_filter_estado_p').val();  if(estadopa == null){estadopa = 0;}
     var anio =  $('#sel_anioeNew').val();  if(anio == null){anio = 0;}


     var f1,f2,f11,f22;

    f11 = $('#sp3_txt_fecha_desde_p').val();
    f22 = $('#sp3_txt_fecha_hasta_p').val();
    if($('#sp3_txt_fecha_desde_p').val() != "")
    {
        if(($('#sp3_txt_fecha_desde_p').val() != '0001-01-01')){
        f1 =  date1_DD_MM_AAAA_to_AAAA_MM_DD_T_HH_MM_S(f11)}else{ f1 = "";}
    }
    else{ f1 = "";}



    if($('#sp3_txt_fecha_hasta_p').val() != ""){
        if(($('#sp3_txt_fecha_hasta_p').val() != '0001-01-01')){
        f2 =  date1_DD_MM_AAAA_to_AAAA_MM_DD_T_HH_MM_S(f22)
        }else{ f2 = "";}
    }
    else{ f2 = "";}

    var url = apiUrlssoma+"/api/Get-Incidente-AccidenteWeb?code=GY7/yooa3Zl5sKu7zgakDbaCn4uvOKXjfwe/JkbSuIwDPOs/baiZFQ==&httpmethod=objectlist&IdTipoEvento="+programa+"&IdEmpresa="+gerencia+"&IdSede="+sedepa+"&FechaInicio="+f1+"&FechaFin="+f2+"&IdEmbarcacion="+estadopa
    //var url = "https://550m44ud1tmg7454-inspection-dev.azurewebsites.net/api/Get-Incidente-AccidenteWeb?code=GY7/yooa3Zl5sKu7zgakDbaCn4uvOKXjfwe/JkbSuIwDPOs/baiZFQ==&httpmethod=objectlist";

    console.log("URL",url )
    var headers ={
        "apikey":constantes.apiKey
    }

    var settings = {
        "url": url,
        "method": "GET",
        "timeout": 0,
        "crossDomain": true,
        "dataType": "json",
        "headers": headers,
    };





    $.ajax(settings).done(function (response) {
        console.log("**todos**",response);
       
        mayorId = 0;






        //------------------------------- CARGAMOS SELECT PROGRAMA ---------------------------------TipoEvento
            $("#"+'sel_filter_programa_p').css('font-size','13px');
            //$("#"+'sel_filter_programa_p option').remove();
            $("#"+'sel_filter_programa_p').html(" "); 
           
            $("#"+'sel_filter_programa_p').html("<option selected value='0'>          </option>");
            
            //$("#"+'sel_filter_programa_p').html("<option selected value='0'>          </option>");




            $("#"+'sel_tipo_evento2').html(" "); $("#"+'sel_tipo_evento2').css('font-size','13px');
            $("#"+'sel_tipo_evento2').html("<option selected value='0'>          </option>");
            //$("#"+'sel_tipo_evento2').html("<option selected value='0'>          </option>");

            console.info("response ",response)
            LTE = response.Programas;
            response.Programas.map(function(item)
            {
                console.info("Eventos =  ",item.Evento)
                // $("#"+'sel_filter_programa_p').append(`<option value='${item.Id}' title='${item.Code}' style='font-weight: bold;'>${item.Programa}</option>`);
                $("#"+'sel_filter_programa_p').append(`<option value='${item.Id}' title='${item.Code} - ${item.Evento}' style='font-weight: bold;'>${item.Evento}</option>`);
                $("#"+'sel_tipo_evento2').append(`<option value='${item.Id}' title='${item.Code} - ${item.Evento}' style='font-weight: bold;'>${item.Evento}</option>`);
                //$('#sel_tipo_evento2').val('1');//momentaneamnete
            });
            
            




        //------------------------------- CARGAMOS SELECT VEDA ---------------------------------

        

        //------------------------------- CARGAMOS SELECT VEDA ---------------------------------TipoEvento
            $("#"+'sel_f_dg_gv_18_3').css('font-size','13px');$("#"+'sel_f_dg_gv_18_3').html(" "); 
            $("#"+'sel_f_dg_gv_18_3').html("<option selected value='0'>          </option>");

            $("#"+'sel_f_dg_gv_18_0').css('font-size','13px');$("#"+'sel_f_dg_gv_18_0').html(" "); 
            $("#"+'sel_f_dg_gv_18_0').html("<option selected value='0'>          </option>");

            $("#"+'sel_f_dg_gv_18_1k').css('font-size','13px');$("#"+'sel_f_dg_gv_18_1k').html(" "); 
            $("#"+'sel_f_dg_gv_18_1k').html("<option selected value='0'>          </option>");
            

            console.info("response ",response)
            //LTE = response.Programas2;
            response.Programas2.map(function(item)
            {
                console.info("Veda =  ",item.Temporada)
                
                $("#"+'sel_f_dg_gv_18_1k').append(`<option value='${item.Id}' title='${item.Code} - ${item.Temporada}' style='font-weight: bold;'>${item.Temporada}</option>`);
                $("#"+'sel_f_dg_gv_18_0').append(`<option value='${item.Id}' title='${item.Code} - ${item.Temporada}' style='font-weight: bold;'>${item.Temporada}</option>`);
                $("#"+'sel_f_dg_gv_18_3').append(`<option value='${item.Id}' title='${item.Code} - ${item.Temporada}' style='font-weight: bold;'>${item.Temporada}</option>`);
                
            });
            
            




        //------------------------------- CARGAMOS SELECT VEDA ---------------------------------




































        //------------------------------- CARGAMOS SELECT GERENCIA ---------------------------------Empresas

        $("#"+'sel_filter_gerencia_p').html(""); $("#"+'sel_filter_gerencia_p').css('font-size','13px');
        $("#"+'sel_filter_gerencia_p').html("<option selected value='0'>          </option>");
        //$("#"+'sel_filter_gerencia_p').html("<option selected value='0'>          </option>");


        $("#"+'sel_fuente_empresa').html(" "); $("#"+'sel_fuente_empresa').css('font-size','13px');
        $("#"+'sel_fuente_empresa').html("<option selected value='0'>          </option>");
        //$("#"+'sel_fuente_empresa').html("<option selected value='0'>          </option>");

        $("#"+'sel_f_dg_gv_10').html(" "); $("#"+'sel_f_dg_gv_10').css('font-size','13px');
        $("#"+'sel_f_dg_gv_10').html("<option selected value='0'>          </option>");

         // $("#"+'sel_f_dg_gv_10y').html(" "); $("#"+'sel_f_dg_gv_10y').css('font-size','13px');
         // $("#"+'sel_f_dg_gv_10y').html("<option selected value='0'>          </option>");




        response.Gerencias.map(function(item)
        {
            // $("#"+'sel_filter_gerencia_p').append(`<option value='${item.Id}' title='${item.Gerencia}' style='font-weight: bold;'>${item.Gerencia}</option>`);
            $("#"+'sel_filter_gerencia_p').append(`<option value='${item.Id}' title='${item.RucEmpresa}' style='font-weight: bold;'>${item.Empresa}</option>`);

            $("#"+'sel_fuente_empresa').append(`<option value='${item.Id}' title='${item.RucEmpresa}' style='font-weight: bold;'>${item.Empresa}</option>`);
            $("#"+'sel_f_dg_gv_10').append(`<option value='${item.Id}' title='${item.RucEmpresa}' style='font-weight: bold;'>${item.Empresa}</option>`);
            //$("#"+'sel_f_dg_gv_10y').append(`<option value='${item.Id}' title='${item.RucEmpresa}' style='font-weight: bold;'>${item.Empresa}</option>`);
        });
       //------------------------------- CARGAMOS SELECT GERENCIA ---------------------------------


        //------------------------------- CARGAMOS SELECT SEDES ---------------------------------

        $("#"+'sel_filter_sede_p').html(""); $("#"+'sel_filter_sede_p').css('font-size','13px');
        $("#"+'sel_filter_sede_p').html("<option selected value='0'>          </option>");
       

        $("#"+'sel_filter_sede_p2').html(" "); $("#"+'sel_filter_sede_p2').css('font-size','13px');
        $("#"+'sel_filter_sede_p2').html("<option selected value='0'>          </option>");
        

        $("#"+'sel_filter_sede_p2AL').html(" "); $("#"+'sel_filter_sede_p2AL').css('font-size','13px');
        $("#"+'sel_filter_sede_p2AL').html("<option selected value='0'>          </option>");


        $("#"+'sel_f_dg_gv_6').html(" "); $("#"+'sel_f_dg_gv_6').css('font-size','13px');
        $("#"+'sel_f_dg_gv_6').html("<option selected value='0'>          </option>");//sel_f_dg_gv_6

        $("#"+'sel_f_dg_gv_6k').html(" "); $("#"+'sel_f_dg_gv_6k').css('font-size','13px');
        $("#"+'sel_f_dg_gv_6k').html("<option selected value='0'>          </option>");//sel_f_dg_gv_6

        $("#"+'sel_f_dg_gv_6y').html(" "); $("#"+'sel_f_dg_gv_6y').css('font-size','13px');
        $("#"+'sel_f_dg_gv_6y').html("<option selected value='0'>          </option>");//sel_f_dg_gv_6


        $("#"+'dat_la_sede').html(" "); $("#"+'dat_la_sede').css('font-size','13px');//lecciones aprendidas
        $("#"+'dat_la_sede').html("<option selected value='0'>          </option>");


      



        LTS = response.Sedes;
        response.Sedes.map(function(item)
        {  
            $("#"+'sel_filter_sede_p').append(`<option value='${item.Id}' title='${item.Sede}' style='font-weight: bold;'>${item.Sede}</option>`);
            $("#"+'sel_filter_sede_p2').append(`<option value='${item.Id}' title='${item.Sede}' style='font-weight: bold;'>${item.Sede}</option>`);
            $("#"+'sel_filter_sede_p2AL').append(`<option value='${item.Id}' title='${item.Sede}' style='font-weight: bold;'>${item.Sede}</option>`);

            $("#"+'sel_f_dg_gv_6').append(`<option value='${item.Id}' title='${item.UnidadNegocioId}' style='font-weight: bold;'>${item.Sede}</option>`);
            $("#"+'sel_f_dg_gv_6k').append(`<option value='${item.Id}' title='${item.UnidadNegocioId}' style='font-weight: bold;'>${item.Sede}</option>`);
            $("#"+'sel_f_dg_gv_6y').append(`<option value='${item.Id}' title='${item.UnidadNegocioId}' style='font-weight: bold;'>${item.Sede}</option>`);

            $("#"+'dat_la_sede').append(`<option value='${item.Id}' title='${item.UnidadNegocioId}' style='font-weight: bold;'>${item.Sede}</option>`);
        });
       //------------------------------- CARGAMOS SELECT SEDES ---------------------------------

       

       //------------------------------- CARGAMOS SELECT ESTADO PLAN ---------------------------------

       $("#"+'sel_filter_estado_p').html(""); $("#"+'sel_filter_estado_p').css('font-size','13px');
       $("#"+'sel_filter_estado_p').html("<option selected value='0'>          </option>");
       //$("#"+'sel_filter_estado_p').html("<option selected value='0'>          </option>");

       $("#"+'sel_filter_embarcacion_p').html(""); $("#"+'sel_filter_estado_p').css('font-size','13px');
       $("#"+'sel_filter_embarcacion_p').html("<option selected value='0'>          </option>");
       //$("#"+'sel_filter_embarcacion_p').html("<option selected value='0'>          </option>");

        $("#"+'sel_f_dg_gv_7').html(" "); $("#"+'sel_f_dg_gv_7').css('font-size','13px');
        $("#"+'sel_f_dg_gv_7').html("<option selected value='0'>          </option>");

        $("#"+'sel_f_dg_gv_7k').html(" "); $("#"+'sel_f_dg_gv_7').css('font-size','13px');
        $("#"+'sel_f_dg_gv_7k').html("<option selected value='0'>          </option>");


       response.Estado_Planes.map(function(item)
       {
           $("#"+'sel_filter_estado_p').append(`<option value='${item.Id}' title='${item.Embarcacion}' >${item.Embarcacion}</option>`);
           $("#"+'sel_filter_embarcacion_p').append(`<option value='${item.Id}' title='${item.Embarcacion}' >${item.Embarcacion}</option>`);
           $("#"+'sel_f_dg_gv_7').append(`<option value='${item.Id}' title='${item.Embarcacion}' >${item.Embarcacion}</option>`);
           $("#"+'sel_f_dg_gv_7k').append(`<option value='${item.Id}' title='${item.Embarcacion}' >${item.Embarcacion}</option>`);
       });
      //------------------------------- CARGAMOS SELECT ESTADO PLAN ---------------------------------

         //------------------------------- CARGAMOS SELECT AREAS --------------------------------- 

         $("#"+'sel_fuente_area2').html(" "); $("#"+'sel_filter_estado_p').css('font-size','13px');
         $("#"+'sel_fuente_area2').html("<option selected value='0'>          </option>");
         

         $("#"+'sel_f_dg_gv_16').html(" "); $("#"+'sel_filter_estado_p').css('font-size','13px');
         $("#"+'sel_f_dg_gv_16').html("<option selected value='0'>          </option>");

          $("#"+'sel_f_dg_gv_16k').html(" "); $("#"+'sel_filter_estado_p').css('font-size','13px');
         $("#"+'sel_f_dg_gv_16k').html("<option selected value='0'>          </option>");
  
         $("#"+'sel_f_dg_gv_32').html(" "); $("#"+'sel_filter_estado_p').css('font-size','13px');
         $("#"+'sel_f_dg_gv_32').html("<option selected value='0'>          </option>");

         LTA = response.Areas;
         response.Areas.map(function(item)
         {
             $("#"+'sel_f_dg_gv_16').append(`<option value='${item.Id}' title='${item.Area}' >${item.Area}</option>`);
              $("#"+'sel_f_dg_gv_16k').append(`<option value='${item.Id}' title='${item.Area}' >${item.Area}</option>`);
             $("#"+'sel_fuente_area2').append(`<option value='${item.Id}' title='${item.Area}' >${item.Area}</option>`);
             //$("#"+'sel_f_dg_gv_32').append(`<option value='${item.Id}' title='${item.UnidadNegocioId}' >${item.Area}rr</option>`); andy 07/06/21 duplicidad tentativo
             
         });
        //------------------------------- CARGAMOS SELECT AREAS ---------------------------------

         //------------------------------- CARGAMOS SELECT ZONA EQUIPO ---------------------------------

         $("#"+'sel_fuente_zona2').html(" "); $("#"+'sel_filter_estado_p').css('font-size','13px');
         $("#"+'sel_fuente_zona2').html("<option selected value='0'>          </option>");
         //$("#"+'sel_fuente_zona2').html("<option selected value='0'>          </option>");
  
         //sel_fuente_zona2AL

         $("#"+'sel_fuente_zona2AL').html(" "); $("#"+'sel_fuente_zona2AL').css('font-size','13px');
         $("#"+'sel_fuente_zona2AL').html("<option selected value='0'>          </option>");
         //$("#"+'sel_fuente_zona2AL').html("<option selected value='0'>          </option>");

         $("#"+'sel_f_dg_gv_17').html(" "); $("#"+'sel_f_dg_gv_17').css('font-size','13px');
         $("#"+'sel_f_dg_gv_17').html("<option selected value='0'>          </option>");

          $("#"+'sel_f_dg_gv_17k').html(" "); $("#"+'sel_f_dg_gv_17').css('font-size','13px');
         $("#"+'sel_f_dg_gv_17k').html("<option selected value='0'>          </option>");


          $("#"+'sel_f_dg_gv_7y').html(" "); $("#"+'sel_f_dg_gv_7y').css('font-size','13px');
          $("#"+'sel_f_dg_gv_7y').html("<option selected value='0'>          </option>");


         LTZ = response.Zonas;
         response.Zonas.map(function(item)
         {
             $("#"+'sel_fuente_zona2').append(`<option value='${item.Id}' title='${item.Zona}' >${item.Zona}</option>`);
             $("#"+'sel_fuente_zona2AL').append(`<option value='${item.Id}' title='${item.Zona}' >${item.Zona}</option>`);

             $("#"+'sel_f_dg_gv_17').append(`<option value='${item.Id}' title='${item.UnidadNegocioId}' >${item.Zona}</option>`);
             $("#"+'sel_f_dg_gv_17k').append(`<option value='${item.Id}' title='${item.UnidadNegocioId}' >${item.Zona}</option>`);

             $("#"+'sel_f_dg_gv_7y').append(`<option value='${item.Id}' title='${item.UnidadNegocioId}' >${item.Zona}</option>`);
             
         });
        //------------------------------- CARGAMOS ZONA EQUIPO ---------------------------------
  
  



            //------------------------------- CARGAMOS SELECT PROGRAMA ---------------------------------TipoLesion

            $("#"+'sel_fuente_tipo_incidente').html(" "); $("#"+'sel_fuente_tipo_incidente').css('font-size','13px');
            $("#"+'sel_fuente_tipo_incidente').html("<option selected value='0'>          </option>");

            
            
            $("#"+'sel_f_dg_gv_1').html(" "); $("#"+'sel_fuente_tipo_incidente').css('font-size','13px');
            $("#"+'sel_f_dg_gv_1').html("<option selected value='0'>          </option>");

            $("#"+'dat_x_clasificacion').html(" "); $("#"+'dat_x_clasificacion').css('font-size','13px');
            $("#"+'dat_x_clasificacion').html("<option selected value='0'>          </option>");

            //$("#"+'sel_fuente_tipo_incidente').html("<option selected value='0'>          </option>");

            $("#"+'sel_f_dg_gv_1k').html(" "); $("#"+'sel_fuente_tipo_incidente').css('font-size','13px');
            $("#"+'sel_f_dg_gv_1k').html("<option selected value='0'>          </option>");


            $("#"+'dat_la_tipo').html(" "); $("#"+'dat_la_tipo').css('font-size','13px');//lecciones aprendidas
            $("#"+'dat_la_tipo').html("<option selected value='0'>          </option>");



           // console.info("response ",response)
            //LTE = response.Programas1;
            response.Programas1.map(function(item)
            {
                console.info("LESION**** =  ",item.Evento)
                // $("#"+'sel_filter_programa_p').append(`<option value='${item.Id}' title='${item.Code}' style='font-weight: bold;'>${item.Programa}</option>`);
                $("#"+'sel_fuente_tipo_incidente').append(`<option value='${item.Id}' title='${item.Code} - ${item.Evento}' style='font-weight: bold;'>${item.Evento}</option>`);

                if((item.Grupo != 4)&&(item.Grupo != 5)){
                $("#"+'sel_f_dg_gv_1').append(`<option value='${item.Id}' title='${item.Code} - ${item.Evento}' style='font-weight: bold;'>${item.Evento}</option>`);
                LTE_LA1[item.Id] = item.Evento;
                                   }
                
                 if(item.Grupo == 4){
                $("#"+'dat_x_clasificacion').append(`<option value='${item.Id}' title='${item.Code} - ${item.Evento}' style='font-weight: bold;'>${item.Evento}</option>`);
                LTE_LA2[item.Id] = item.Evento;
                                   }

                 if(item.Grupo == 5){
                $("#"+'sel_f_dg_gv_1k').append(`<option value='${item.Id}' title='${item.Code} - ${item.Evento}' style='font-weight: bold;'>${item.Evento}</option>`);
                LTE_LA3[item.Id] = item.Evento;
                                   }

            //leecciones aprendidas
            $("#"+'dat_la_tipo').append(`<option value='${item.Id}' title='${item.Code} - ${item.Evento}' style='font-weight: bold;'>${item.Evento}</option>`);

                //$("#"+'sel_fuente_tipo_incidente').append(`<option value='${item.Id}' title='${item.Code} - ${item.Evento}' style='font-weight: bold;'>${item.Evento}</option>`);
                //$('#sel_fuente_zona2AL').val('1');//momentaneamnete
            });
            
            




        //------------------------------- CARGAMOS SELECT PROGRAMA ---------------------------------TipoLesion



        
         //------------------------------- CARGAMOS SELECT POTENCIAL DEL INCIDENTE ---------------------------------

         $("#"+'sel_f_dg_gv_2').html(" "); $("#"+'sel_f_dg_gv_2').css('font-size','13px');
         $("#"+'sel_f_dg_gv_2').html("<option selected value='0'>          </option>");

         $("#"+'sel_f_dg_gv_2y').html(" "); $("#"+'sel_f_dg_gv_2y').css('font-size','13px');
         $("#"+'sel_f_dg_gv_2y').html("<option selected value='0'>          </option>");

         $("#"+'dat_la_potencial').html(" "); $("#"+'sel_f_dg_gv_2y').css('font-size','13px');
         $("#"+'dat_la_potencial').html("<option selected value='0'>          </option>");//leccion aprendida
         
  
  
         response.Potencial_Incidentes.map(function(item)
         {
             $("#"+'sel_f_dg_gv_2').append(`<option value='${item.Id}' title='${item.Potencial}' >${item.Potencial}</option>`);
             $("#"+'sel_f_dg_gv_2y').append(`<option value='${item.Id}' title='${item.Potencial}' >${item.Potencial}</option>`);
             $("#"+'dat_la_potencial').append(`<option value='${item.Id}' title='${item.Potencial}' >${item.Potencial}</option>`);
             
         });
        //------------------------------- CARGAMOS SELECT POTENCIAL DEL INCIDENTE ---------------------------------
         


          //------------------------------- CARGAMOS SELECT Accidente Proceso ---------------------------------

         $("#"+'sel_f_dg_gv_3').html(" "); $("#"+'sel_f_dg_gv_3').css('font-size','13px');
         $("#"+'sel_f_dg_gv_3').html("<option selected value='0'>          </option>");
         $("#"+'sel_f_dg_gv_3').append(`<option value='1' title='Si' >Si</option>`);
         $("#"+'sel_f_dg_gv_3').append(`<option value='2' title='No' >No</option>`);


         $("#"+'sel_f_dg_gv_3y').html(" "); $("#"+'sel_f_dg_gv_3y').css('font-size','13px');
         $("#"+'sel_f_dg_gv_3y').html("<option selected value='0'>          </option>");
         $("#"+'sel_f_dg_gv_3y').append(`<option value='1' title='Si' >Si</option>`);
         $("#"+'sel_f_dg_gv_3y').append(`<option value='2' title='No' >No</option>`);
             
         
        //------------------------------- CARGAMOS SELECT Accidente Proceso ---------------------------------



         //------------------------------- CARGAMOS SELECT Condición de Embarcación ---------------------------------

         $("#"+'sel_f_dg_gv_12').html(" "); $("#"+'sel_f_dg_gv_12').css('font-size','13px');
         $("#"+'sel_f_dg_gv_12').html("<option selected value='0'>          </option>");
         //$("#"+'sel_fuente_area2').html("<option selected value='0'>          </option>");
  
  
         response.Condicion_Embarcacion.map(function(item)
         {
             $("#"+'sel_f_dg_gv_12').append(`<option value='${item.Id}' title='${item.Condicion}' >${item.Condicion}</option>`);
             
         });
         
        //------------------------------- CARGAMOS SELECT Condición de Embarcación ---------------------------------


         //------------------------------- CARGAMOS SELECT Proceso de la Operación ---------------------------------

         $("#"+'sel_f_dg_gv_13').html(" "); $("#"+'sel_f_dg_gv_13').css('font-size','13px');
         $("#"+'sel_f_dg_gv_13').html("<option selected value='0'>          </option>");
         
        $("#"+'sel_f_dg_gv_13k').html(" "); $("#"+'sel_f_dg_gv_13k').css('font-size','13px');
         $("#"+'sel_f_dg_gv_13k').html("<option selected value='0'>          </option>");

  
  
         response.Proceso.map(function(item)
         {
            $("#"+'sel_f_dg_gv_13').append(`<option value='${item.Id}' title='${item.Proceso1}' >${item.Proceso1}</option>`);
             $("#"+'sel_f_dg_gv_13k').append(`<option value='${item.Id}' title='${item.Proceso1}' >${item.Proceso1}</option>`);
             
         });
         
        //------------------------------- CARGAMOS SELECT Proceso de la Operación ---------------------------------
        

         //------------------------------- CARGAMOS SELECT SUBProceso de la Operación ---------------------------------

         $("#"+'sel_f_dg_gv_14').html(" "); $("#"+'sel_f_dg_gv_14').css('font-size','13px');
         $("#"+'sel_f_dg_gv_14').html("<option selected value='0'>          </option>");

          $("#"+'sel_f_dg_gv_14k').html(" "); $("#"+'sel_f_dg_gv_14k').css('font-size','13px');
         $("#"+'sel_f_dg_gv_14k').html("<option selected value='0'>          </option>");
         //$("#"+'sel_fuente_area2').html("<option selected value='0'>          </option>");
  
  
         response.Subproceso.map(function(item)
         {
             $("#"+'sel_f_dg_gv_14').append(`<option value='${item.Id}' title='${item.ProcesoId}' >${item.Subproceso1}</option>`);
             $("#"+'sel_f_dg_gv_14k').append(`<option value='${item.Id}' title='${item.ProcesoId}' >${item.Subproceso1}</option>`);
             
         });
         
        //------------------------------- CARGAMOS SELECT SUBProceso de la Operación ---------------------------------


       //------------------------------- CARGAMOS SELECT Probabilidades de Recurrencia ---------------------------------

         $("#"+'sel_f_dg_gv_15').html(" "); $("#"+'sel_f_dg_gv_15').css('font-size','13px');
         $("#"+'sel_f_dg_gv_15').html("<option selected value='0'>          </option>");
         
         $("#"+'sel_f_dg_gv_15k').html(" "); $("#"+'sel_f_dg_gv_15k').css('font-size','13px');
         $("#"+'sel_f_dg_gv_15k').html("<option selected value='0'>          </option>");
  
  
         response.Ocurrencia_Incidente.map(function(item)
         {
             $("#"+'sel_f_dg_gv_15').append(`<option value='${item.Id}' title='${item.Ocurrencia}' >${item.Ocurrencia}</option>`);
             $("#"+'sel_f_dg_gv_15k').append(`<option value='${item.Id}' title='${item.Ocurrencia}' >${item.Ocurrencia}</option>`);
             
         });
         
        //------------------------------- CARGAMOS SELECT Probabilidades de Recurrencia ---------------------------------
        


        //------------------------------- CARGAMOS SELECT Lugar Específico de la tarea ---------------------------------

         $("#"+'sel_f_dg_gv_18').html(" "); $("#"+'sel_f_dg_gv_18').css('font-size','13px');
         $("#"+'sel_f_dg_gv_18').html("<option selected value='0'>          </option>");
         //$("#"+'sel_fuente_area2').html("<option selected value='0'>          </option>");

         $("#"+'sel_f_dg_gv_18k').html(" "); $("#"+'sel_f_dg_gv_18k').css('font-size','13px');
         $("#"+'sel_f_dg_gv_18k').html("<option selected value='0'>          </option>");
  
  
         response.Lugar.map(function(item)
         {
             $("#"+'sel_f_dg_gv_18').append(`<option value='${item.Id}' title='${item.Lugar1}' >${item.Lugar1}</option>`);
             $("#"+'sel_f_dg_gv_18k').append(`<option value='${item.Id}' title='${item.Lugar1}' >${item.Lugar1}</option>`);
             
         });
         
        //------------------------------- CARGAMOS SELECT Lugar Específico de la tarea ---------------------------------


        fnGetPersonCorrecionSp3($("#ReportanteNameDG_119"),119); //ReportanteCargoDG_311
        fnGetPersonCorrecionSp3($("#ReportanteNameDG_311"),311);
        fnGetPersonCorrecionSp3($("#ReportanteNameDG_311k"),312);


         //------------------------------- CARGAMOS SELECT Lesión/ Daño ---------------------------------

         // $("#"+'sel_f_dg_gv_27').html(" "); $("#"+'sel_f_dg_gv_27').css('font-size','13px');
         // $("#"+'sel_f_dg_gv_27').html("<option selected value='0'>          </option>");
         // //$("#"+'sel_fuente_area2').html("<option selected value='0'>          </option>");
  
  
         // response.Dannio_Lesion.map(function(item)
         // {
         //     $("#"+'sel_f_dg_gv_27').append(`<option value='${item.Id}' title='${item.Dannio_Lesion1}' >${item.Dannio_Lesion1}</option>`);
             
         // });
         

         $("#"+'sel_f_dg_gv_45').html(" "); $("#"+'sel_f_dg_gv_45').css('font-size','13px');
         $("#"+'sel_f_dg_gv_45').html("<option selected value='0'>          </option>");
         //$("#"+'sel_fuente_area2').html("<option selected value='0'>          </option>");

          $("#"+'sel_f_dg_gv_45k').html(" "); $("#"+'sel_f_dg_gv_45k').css('font-size','13px');
         $("#"+'sel_f_dg_gv_45k').html("<option selected value='0'>          </option>");
  
  
         response.Carga_Accidente.map(function(item)
         {
             $("#"+'sel_f_dg_gv_45').append(`<option value='${item.Id}' title='${item.Carga}' >${item.Carga}</option>`);
             $("#"+'sel_f_dg_gv_45k').append(`<option value='${item.Id}' title='${item.Carga}' >${item.Carga}</option>`);
             
         });



        //------------------------------- CARGAMOS SELECT Lugar Lesión/ Daño ---------------------------------





         //------------------------------- CARGAMOS SELECT Partes del cuerpo lesionadas ---------------------------------

         $("#"+'sel_f_dg_gv_28').html(" "); $("#"+'sel_f_dg_gv_28').css('font-size','13px');
         $("#"+'sel_f_dg_gv_28').html("<option selected value='0'>          </option>");
         //$("#"+'sel_fuente_area2').html("<option selected value='0'>          </option>");
  
  
         response.Parte_Cuerpo_Lesion.map(function(item)
         {
             $("#"+'sel_f_dg_gv_28').append(`<option value='${item.Id}' title='${item.Dannio_LesionId}' >${item.Parte_Cuerpo}</option>`);
             
         });
         
        //------------------------------- CARGAMOS SELECT Lugar Partes del cuerpo lesionadas ---------------------------------




         //------------------------------- CARGAMOS SELECT dias de descanzo semaforo ---------------------------------

         $("#"+'sel_f_dg_gv_30').html(" "); $("#"+'sel_f_dg_gv_30').css('font-size','13px');
        
         $("#"+'sel_f_dg_gv_30').append(`<option value='1' title='Abierto' >Abierto</option>`);
         $("#"+'sel_f_dg_gv_30').append(`<option value='0' title='Cerrado' >Cerrado</option>`);
             
         
        //------------------------------- CARGAMOS SELECT de descanzo semaforo ---------------------------------


          //------------------------------- CARGAMOS SELECT Asesor ---------------------------------

         $("#"+'sel_f_dg_gv_33').html(" "); $("#"+'sel_f_dg_gv_33').css('font-size','13px');
         $("#"+'sel_f_dg_gv_33').html("<option selected value='0'>          </option>");
         //$("#"+'sel_fuente_area2').html("<option selected value='0'>          </option>");

         $("#"+'sel_f_dg_gv_33k').html(" "); $("#"+'sel_f_dg_gv_33k').css('font-size','13px');
         $("#"+'sel_f_dg_gv_33k').html("<option selected value='0'>          </option>");
  
  
         response.Asesor.map(function(item)
         {
             $("#"+'sel_f_dg_gv_33').append(`<option value='${item.Id}' title='${item.Especialidad}' >${item.Asesor1}</option>`);
             $("#"+'sel_f_dg_gv_33k').append(`<option value='${item.Id}' title='${item.Especialidad}' >${item.Asesor1}</option>`);
             
         });
         
        //------------------------------- CARGAMOS SELECT Lugar Asesor ---------------------------------



         //------------------------------- CARGAMOS SELECT Gerencias ---------------------------------

         $("#"+'sel_f_dg_gv_42').html(" "); $("#"+'sel_f_dg_gv_42').css('font-size','13px');
         $("#"+'sel_f_dg_gv_42').html("<option selected value='0'>          </option>");
         //$("#"+'sel_fuente_area2').html("<option selected value='0'>          </option>");sel_f_dg_gv_3y

         $("#"+'sel_f_dg_gv_42k').html(" "); $("#"+'sel_f_dg_gv_42k').css('font-size','13px');
         $("#"+'sel_f_dg_gv_42k').html("<option selected value='0'>          </option>");
  
         $("#"+'sel_f_dg_gv_3y').html(" "); $("#"+'sel_f_dg_gv_3y').css('font-size','13px');
         $("#"+'sel_f_dg_gv_3y').html("<option selected value='0'>          </option>");


         response.Gerencia1.map(function(item)
         {
             $("#"+'sel_f_dg_gv_42').append(`<option value='${item.Id}' title='${item.Gerencia}' >(${item.Code}) ${item.Gerencia}</option>`);
             $("#"+'sel_f_dg_gv_42k').append(`<option value='${item.Id}' title='${item.Gerencia}' >(${item.Code}) ${item.Gerencia}</option>`);
             $("#"+'sel_f_dg_gv_3y').append(`<option value='${item.Id}' title='${item.Gerencia}' >(${item.Code}) ${item.Gerencia}</option>`);
             
         });
         
        //------------------------------- CARGAMOS SELECT Gerencias ---------------------------------



           //------------------------------- CARGAMOS SELECT Gerencias ---------------------------------

         $("#"+'sel_f_dg_gv_44').html(" "); $("#"+'sel_f_dg_gv_44').css('font-size','13px');
         $("#"+'sel_f_dg_gv_44').html("<option selected value='0'>          </option>");
         //$("#"+'sel_fuente_area2').html("<option selected value='0'>          </option>");

         $("#"+'sel_f_dg_gv_44k').html(" "); $("#"+'sel_f_dg_gv_44k').css('font-size','13px');
         $("#"+'sel_f_dg_gv_44k').html("<option selected value='0'>          </option>");
  
  
         response.Region.map(function(item)
         {
             $("#"+'sel_f_dg_gv_44').append(`<option value='${item.Id}' title='${item.Region1}' >${item.Region1}</option>`);
             $("#"+'sel_f_dg_gv_44k').append(`<option value='${item.Id}' title='${item.Region1}' >${item.Region1}</option>`);
             
         });
         
        //------------------------------- CARGAMOS SELECT Gerencias ---------------------------------



          //------------------------------- CARGAMOS SELECT Contaminante ---------------------------------

         $("#"+'dat_x_contaminante').html(" "); $("#"+'sel_f_dg_gv_44').css('font-size','13px');
         $("#"+'dat_x_contaminante').html("<option selected value='0'>          </option>");
         //$("#"+'sel_fuente_area2').html("<option selected value='0'>          </option>");


         $("#"+'dat_la_impacto_ambiental').html(" "); $("#"+'dat_la_impacto_ambiental').css('font-size','13px');
         $("#"+'dat_la_impacto_ambiental').html("<option selected value='0'>          </option>");//lecciones aprendidas
  
  
         response.Contaminante.map(function(item)
         {
             $("#"+'dat_x_contaminante').append(`<option value='${item.Id}' title='${item.Contaminante1}' >${item.Contaminante1}</option>`);
             $("#"+'dat_la_impacto_ambiental').append(`<option value='${item.Id}' title='${item.Contaminante1}' >${item.Contaminante1}</option>`);
             
             
         });
         
        //------------------------------- CARGAMOS SELECT Contaminante ---------------------------------

        //-------------------------------- LUEGO CARGAR DESDE LA BASE DE DATOS -------------------------
        //--------------------OCUPACION 2


          $("#"+'txta_f_dg_gv_24').html(" "); $("#"+'txta_f_dg_gv_24').css('font-size','13px');
         $("#"+'txta_f_dg_gv_24').html("<option selected value='0'>          </option>");
        
  
         // //response.Ocupacion2.map(function(item){

             $("#"+'txta_f_dg_gv_24').append(`<option value='Obrero'     title='Obrero'     >Obrero</option>`);
             $("#"+'txta_f_dg_gv_24').append(`<option value='Empleado'   title='Empleado'   >Empleado</option>`);
             $("#"+'txta_f_dg_gv_24').append(`<option value='Tripulante' title='Tripulante' >Tripulante</option>`);
             
         // //});


        //-------------------------------- LUEGO CARGAR DESDE LA BASE DE DATOS -------------------------






         $("#"+'dat_x_unidad').html(" "); $("#"+'dat_x_unidad').css('font-size','13px');
         $("#"+'dat_x_unidad').html("<option selected value='0'>          </option>");
         $("#"+'dat_x_unidad').append("<option selected value='1'>(m3) Metros Cúbicos</option>");
         $("#"+'dat_x_unidad').append("<option selected value='2'>(Gal) Galones</option>");
         $("#"+'dat_x_unidad').append("<option selected value='3'>(TM) Toneladas Métricas</option>");





        //------------------------------- CARGAMOS SELECT Impacto_Ambiental ---------------------------------

         $("#"+'dat_x_impacto_ambiental').html(" "); $("#"+'dat_x_impacto_ambiental').css('font-size','13px');
         $("#"+'dat_x_impacto_ambiental').html("<option selected value='0'>          </option>");
         //$("#"+'sel_fuente_area2').html("<option selected value='0'>          </option>");
  
         $("#"+'dat_la_impacto_ambiental2').html(" "); $("#"+'dat_la_impacto_ambiental2').css('font-size','13px');
         $("#"+'dat_la_impacto_ambiental2').html("<option selected value='0'>          </option>");


         response.Impacto_Ambiental.map(function(item)
         {
             $("#"+'dat_x_impacto_ambiental').append(`<option value='${item.Id}' title='${item.Impacto}' >${item.Impacto}</option>`);

             $("#"+'dat_la_impacto_ambiental2').append(`<option value='${item.Id}' title='${item.Impacto}' >${item.Impacto}</option>`);
             
         });
         
        //------------------------------- CARGAMOS SELECT Impacto_Ambiental ---------------------------------



        //------------------------------- CARGAMOS SELECT Impacto_Ambiental ---------------------------------

         $("#"+'dat_x_descripcion_evento').html(" "); $("#"+'dat_x_descripcion_evento').css('font-size','13px');
         $("#"+'dat_x_descripcion_evento').html("<option selected value='0'>          </option>");
         //$("#"+'sel_fuente_area2').html("<option selected value='0'>          </option>");
  
  
         response.Descripcion_Evento_Ambiental.map(function(item)
         {
             $("#"+'dat_x_descripcion_evento').append(`<option value='${item.Id}' title='${item.Descripcion}' >${item.Descripcion}</option>`);
             
         });
         
        //------------------------------- CARGAMOS SELECT Impacto_Ambiental ---------------------------------


        //------------------------------- CARGAMOS SELECT Impacto_Ambiental ---------------------------------

         // $("#"+'dat_x_impacto_ambiental').html(" "); $("#"+'dat_x_impacto_ambiental').css('font-size','13px');
         // $("#"+'dat_x_impacto_ambiental').html("<option selected value='0'>          </option>")
  
         
         //       $("#"+'dat_x_impacto_ambiental').append(`<option value='2' title='2' >2</option>`);
         //       $("#"+'dat_x_impacto_ambiental').append(`<option value='4' title='4' >4</option>`);
         //       $("#"+'dat_x_impacto_ambiental').append(`<option value='6' title='6' >6</option>`);
         
         
        //------------------------------- CARGAMOS SELECT Impacto_Ambiental ---------------------------------


        //------------------------------- CARGAMOS SELECT Impacto_Ambiental ---------------------------------

         $("#"+'dat_x_impacto_ambiental2').html(" "); $("#"+'dat_x_impacto_ambiental2').css('font-size','13px');
         $("#"+'dat_x_impacto_ambiental2').html("<option selected value='0'>          </option>")
  
         
               $("#"+'dat_x_impacto_ambiental2').append(`<option value='2' title='2' >2</option>`);
               $("#"+'dat_x_impacto_ambiental2').append(`<option value='4' title='4' >4</option>`);
               $("#"+'dat_x_impacto_ambiental2').append(`<option value='6' title='6' >6</option>`);
         
         
        //------------------------------- CARGAMOS SELECT Impacto_Ambiental ---------------------------------


        //------------------------------- CARGAMOS SELECT dat_x_reaccion_publica ---------------------------------

         $("#"+'dat_x_reaccion_publica').html(" "); $("#"+'dat_x_reaccion_publica').css('font-size','13px');
         $("#"+'dat_x_reaccion_publica').html("<option selected value='0'>          </option>")
  
         
               $("#"+'dat_x_reaccion_publica').append(`<option value='2' title='2' >2</option>`);
               $("#"+'dat_x_reaccion_publica').append(`<option value='4' title='4' >4</option>`);
               $("#"+'dat_x_reaccion_publica').append(`<option value='6' title='6' >6</option>`);
         
         
        //------------------------------- CARGAMOS SELECT dat_x_reaccion_publica ---------------------------------



          //------------------------------- CARGAMOS SELECT dat_x_relacion_comunidad ---------------------------------

         $("#"+'dat_x_relacion_comunidad').html(" "); $("#"+'dat_x_relacion_comunidad').css('font-size','13px');
         $("#"+'dat_x_relacion_comunidad').html("<option selected value='0'>          </option>")
  
         
               $("#"+'dat_x_relacion_comunidad').append(`<option value='2' title='2' >2</option>`);
               $("#"+'dat_x_relacion_comunidad').append(`<option value='4' title='4' >4</option>`);
               $("#"+'dat_x_relacion_comunidad').append(`<option value='6' title='6' >6</option>`);
         
         
        //------------------------------- CARGAMOS SELECT dat_x_reaccion_publica ---------------------------------



         //------------------------------- CARGAMOS SELECT dat_x_relacion_comunidad ---------------------------------

         $("#"+'dat_x_legal').html(" "); $("#"+'dat_x_legal').css('font-size','13px');
         $("#"+'dat_x_legal').html("<option selected value='0'>          </option>")
  
         
               $("#"+'dat_x_legal').append(`<option value='2' title='2' >2</option>`);
               $("#"+'dat_x_legal').append(`<option value='4' title='4' >4</option>`);
               $("#"+'dat_x_legal').append(`<option value='6' title='6' >6</option>`);
               $("#"+'dat_x_legal').append(`<option value='8' title='8' >8</option>`);

         
         
        //------------------------------- CARGAMOS SELECT dat_x_reaccion_publica ---------------------------------










         

         




      // sel_f_dg_gv_30

/*
      var fech =  new Date();
      var anioAc = fech.getFullYear();
      var anioSi = anioAc+1;
      $("#"+'sel_anioeNew').html(" "); $("#"+'sel_anioeNew').css('font-size','13px');
      $("#"+'sel_anioeNew').html("<option selected value='0'>          </option>");

          $("#"+'sel_anioeNew').append(`<option value='${anioAc}' title='${anioAc}' style='font-weight: bold; '>${anioAc}</option>`);
          $("#"+'sel_anioeNew').append(`<option value='${anioSi}' title='${anioSi}' style='font-weight: bold; '>${anioSi}</option>`);

        $("#"+'sel_year_frecuencia').html(" "); $("#"+'sel_year_frecuencia').css('font-size','13px');
        $("#"+'sel_year_frecuencia').html("<option selected value='0'>          </option>");

        $("#"+'sel_year_frecuencia').append(`<option value='${anioAc}' title='${anioAc}' style='font-weight: bold; '>${anioAc}</option>`);
        $("#"+'sel_year_frecuencia').append(`<option value='${anioSi}' title='${anioSi}' style='font-weight: bold; '>${anioSi}</option>`);

     //------------------------------- CARGAMOS SELECT DE LOS AÑOS ---------------------------------

*/




     response.PlanAnual.map(function(item)
       {
        if(item.Id > mayorId) {
           mayorId  = item.Id;

       }
       });


      $("#cant_adm_plan_anual").html('<b> '+ response.PlanAnual.length+'</b> ');
      objNewPA2 = response.PlanAnual;

      var t = 1;
      
      if(response.PlanAnual.length > 0)
      {



         //alert('si entre aqui ');

          //$('#body-tabla-list-EvalAud').html(" ");
          //$('#bodyTablaSinAuditorias').css('display','none');

          $('#bodyTablaSinAuditorias').css('display','none');// comentar momentaneamente activa en la logica anterior a incidentes

          $('#pagination-container-EvalAud').pagination({
              dataSource: response.PlanAnual,
              pageSize: 4,
              callback: function(data, pagination) {
                  var html = fnSp3ListarTablaGeneralH(data);


                  $('#body-tabla-list-EvalAud').html(html);

                  $("#sp3BtFiltroPlanAnual").html("Buscar")
                  $("#sp3BtFiltroPlanAnual").attr("disabled",false);

                  //debemos colocar los campos con su valores de busqueda si existen
                      $('#sel_filter_programa_p').val(programa);
                      $('#sel_filter_gerencia_p').val(gerencia);
                      $('#sel_filter_sede_p').val(sedepa);
                      $('#sel_filter_estado_p').val(estadopa);
                      $('#sp3_txt_fecha_desde_p').val(f11)
                      $('#sp3_txt_fecha_hasta_p').val(f22)
                      
                      // console.log("** los id son[0]",response.PlanAnual[0].Id);
                      // if(response.PlanAnual.Id)

                                      // var n = response.PlanAnual.length;
                                      //   if((n >0)&&( n <= 4))
                                      //   {
                                      //       Sp4BuscarAdjuntosIncidente_y_Alerta(response.PlanAnual[0].Id);
                                      //       Sp4BuscarAdjuntosIncidente_y_Alerta(response.PlanAnual[1].Id);
                                      //       Sp4BuscarAdjuntosIncidente_y_Alerta(response.PlanAnual[2].Id);
                                      //       Sp4BuscarAdjuntosIncidente_y_Alerta(response.PlanAnual[3].Id);
                                      //   }
                     //*-----------------------------------------

              }
          })

              
           
      }
      else
      {
          $('#body-tabla-list-EvalAud').html(" ");
          $('#bodyTablaSinAuditorias').css('display','block');
          $("#sp3BtFiltroPlanAnual").html("Buscar")
          $("#sp3BtFiltroPlanAnual").attr("disabled",false);

          //debemos colocar los campos con su valores de busqueda si existen
          $('#sel_filter_programa_p').val(programa);
          $('#sel_filter_gerencia_p').val(gerencia);

          $('#sel_filter_sede_p').val(sedepa);
          $('#sel_filter_estado_p').val(estadopa);
          $('#sp3_txt_fecha_desde_p').val(f11)
          $('#sp3_txt_fecha_hasta_p').val(f22)







          hideLoading();
      }





    });




}//------------------------------------- fin   fnSp3CargaFiltroEstadoInicialPlanAnual() -------------------------------------




function fnSp3ListarTablaGeneralH(data)
{//------------------------------------------------------- ini   fnSp3ListarTablaGeneralH() -----------------------------------
    var html = '';
    var o = 0;
    var primeraCargap =1;

    var indiceGerencia = 0;
    var indicePrograma = 0;
    var indiceSede = 0;
    selGerencia = [];
    selPrograma = [];
    selSede = [];

        data.forEach((Item)=>{
            console.log(Item)
            if (Item.GerenciaId != 0){
                indiceGerencia = selGerencia.indexOf(Item.GerenciaId)
                if( indiceGerencia < 0 )
                {
                    selGerencia.push(Item.GerenciaId);
                    //$("#"+'sel_filter_gerencia_p').append(`<option value='${Item.GerenciaId}' title='${Item.Gerencia}' style='font-weight: bold;'>${Item.Gerencia}</option>`);
                }

            }

            if (Item.SedeId != 0){
                indiceSede = selSede.indexOf(Item.SedeId)
                if( indiceSede < 0 )
                {
                    selSede.push(Item.SedeId);
                   // $("#"+'sel_filter_sede_p').append(`<option value='${Item.SedeId}' title='${Item.Sede}' style='font-weight: bold;'>${Item.Sede}</option>`);
                }

            }

            if (Item.ProgramaId != 0){
                indicePrograma = selPrograma.indexOf(Item.ProgramaId)
                if( indicePrograma < 0 )
                {
                    selPrograma.push(Item.ProgramaId);
                    //$("#"+'sel_filter_programa_p').append(`<option value='${Item.ProgramaId}' title='${Item.Programa}' style='font-weight: bold;'>${Item.Programa}</option>`);
                }

            }




           paObj[Item.Id] = new PlanAnual();
           paObj[Item.Id].cargarData(Item);
           

console.log(".."+Item.Equipo+"..")

            //console.log("SP3_HALL -->> ",data)
                if(primeraCargap==1)
                {
                    if(getStorage("vtas_rolexternalrol", "text") == "ROL_REPSONSABLEPLANANUAL"){

                        var btEdit = 'style="background-color:#b2b2b2 !important;"';
                    if(Item.Estado_PlanId === 1 || Item.Estado_PlanId === 2){
                        btEdit=`onclick="accPlanAnual = 1; fnSp3VentanaMostrarPlanAnual(${Item.Id})" style="background-color:#58c25d !important;"} `;
                    }
                    var btNew  ='';
                        if(Item.Id == mayorId){
                        btNew = "<div  class='check-blue text-center'>Nuevo</div>";}
                        
                        
                        


                        html += `

                        <div class="item-tabla p-2" style="z-index: 1;display:relative;" style="width: 1233px !important;">${btNew}
                            <div class="row m-0 justify-content-between align-items-center tbody_trainning">
                                <div class="col-12 text-center" style="font-size: 15px; padding: 4px !important; ">
                                    <div class="row">
                                        <table width = "100%" border="0">
                                        <tr >
                                            <td width = "10%" align="center"><div id="c1TabGeny" class="text-left lbCabezaTabla1" style='margin: 0px 0px 0px 13px !important;'  >${Item.Code}</div></td>
                                            <td width = "10%" align="center"><div id="c2TabGeny" class="text-left lbCabezaTabla1"  >${Item.Programa != null ? Item.Programa : "---"}</div></td>
                                            <td width = "14%" align="center"><div id="c3TabGeny" class="text-left lbCabezaTabla1"  >${Item.Gerencia != null ? Item.Gerencia : "---"}</div></td>
                                            <td width = "10%" align="center"><div id="c4TabGeny" class="text-left lbCabezaTabla1"  >${Item.Sede     != null ? Item.Sede : "---"}</div></td>
                                            <td width = "8%" align="center"><div id="c5TabGeny" class="text-left lbCabezaTabla1"  >${Item.Equipo != "" ? Item.Equipo : "---"}</div></td>

                                            <td width = "8%" align="center"><div id="c6TabGeny" class="text-center  lbCabezaTabla1"  >${Item.Objetivos.length}</div></td>
                                            <td width = "10%" align="center"><div id="c7TabGeny" class="text-left   lbCabezaTabla1"  >${Item.Fecha_Creacion}</div></td>
                                            <td width = "8%" align="center"><div id="c8TabGeny" class="text-left   lbCabezaTabla1" style='color: ${Item.Color_Plan}; font-weight: bold; '  >${Item.Estado_Plan} </div></td>





                                            <td width = "3%" class="btn_edit" align="center"><div id="c12TabGeny" class="text-center lbCabezaTabla1"  >
                                                <button type='button' title='Editar del Hallazgo' ${btEdit} class='btn-circle btn_read border-0'  id='btn_verHallago${Item.Id}'>
                                                    <img src='./images/iconos/edit_1.svg' class='ojo-1'  >
                                                </button>
                                           </td>

                                            <td width = "3%" align="center"><div id="c12TabGeny" class="text-center lbCabezaTabla1"  >
                                                    <button type='button' title='Ver el Plan Anual' onclick="  accPlanAnual = 2; fnSp3MostrarModalVerPlanAnual(${Item.Id})"   class='btn-circle btn_read border-0' style='background-color:#34559c !important;' id='btn_verHallago${Item.Id}'>
                                                        <img src='./images/iconos/ojo_1.svg' class='ojo-1'  >
                                                    </button>

                                            </td>

                                           <td width = "1%" align="center"><div id="c12TabGeny" class="text-center lbCabezaTabla1"  >
                                               &nbsp;
                                           </td>


                                        </tr>
                                    </table>


                                    </div>
                                </div>
                            </div>
                        </div>


                            `;
                    }else{
                        var btEdit = 'style="background-color:#b2b2b2 !important;"';
                        if(Item.Estado_PlanId === 1){
                            btEdit=`onclick="accPlanAnual = 1; fnSp3VentanaMostrarPlanAnual(${Item.Id})" style="background-color:#58c25d !important;"} `;                        }
                        var btNew  ='';
                            if(Item.Id == mayorId){
                            //btNew = "<div  class='check-blue text-center' >Nuevo</div>";}
                            btNew = "<div   ></div>";}

                        var ttitle = '';
                        var ttitle2 = '';
                        var ttitle3 = 'Informe de Investigaciòn';
                        var ttitle4 = 'Lecciones Aprendidas';
                        var ttitle5 = 'Informe de Investigación';
                        var ccolor = '';
                        var ccolor2 = '';
                        var ccolor3 = '#cd8338'; // informe de investigacion
                        var ccolor4 = '#254373'; //lecciones aprendidas
                        var readonly = '';
                        var readonly2 = '';//para el boton alerta
                        var readonly3 = '';//para el boton informe de investigacion
                        var readonly4 = '';//para el boton lñecciones aprendidas

                        //if((Item.IdHallazgo > 0)||())




                        if(Item.IdDatosGenerales >0)
                        {
                           console.log(Item.Id," == Si tiene Datos Generales")
                            readonly2 = '';
                            ccolor2 = '#b3c258';
                             if(Item.yIdAlerta> 0)
                           {
                                    ttitle = 'Visualizar Alerta Generada (1)';
                                    ccolor4 = '#254373';  
                                    readonly4 = '';
                                    ttitle4 = 'Lecciones Aprendidas1';

                            }
                            else{ttitle = 'Generar Alerta';

                                  


                           }
                                   

                        }
                        else
                        {
                            if(Item.IdDatosGenerales2 >0)
                                {
                                   console.log(Item.Id," == Si tiene Datos Generales 2")
                                    readonly = '';
                                    ccolor2 = '#b3c258';
                                     if(Item.yIdAlerta> 0)
                                    {ttitle = 'Visualizar Alerta Generada (1)';}else{ttitle = 'Generar Alerta';}

                                     if(Item.yIdAlerta  > 0)
                                           {
                                                    ttitle = 'Visualizar Alerta Generada (1)';
                                                    ccolor4 = '#254373';  
                                                    readonly4 = '';
                                                    ttitle4 = 'Lecciones Aprendidas1';

                                            }
                                            else{ttitle = 'Generar Alerta'; }

                                }
                            else
                                {
                                    if(Item.IdDatosGenerales3 >0)
                                    {
                                           console.log(Item.Id," == Si tiene Datos Generales 2")
                                            readonly = '';
                                            ccolor2 = '#b3c258';
                                             if(Item.yIdAlerta> 0)
                                            {
                                                    ttitle = 'Visualizar Alerta Generada (1)';
                                                    ccolor4 = '#254373';  
                                                    readonly4 = '';
                                                    ttitle4 = 'Lecciones Aprendidas1';

                                            }
                                            else{ttitle = 'Generar Alerta'; }
                                            
                                           

                                     }
                                    else
                                     {

                                           console.log(Item.Id,"==== NO tiene Datos Generales");
                                          readonly2 = 'disabled';
                                          ccolor2 = '#cdcdcd';
                                          ttitle = 'Se deben registrar los Datos Generales para activar la Alerta';
                                          ccolor4 = '#cdcdcd';  
                                          readonly4 = 'disabled';
                                          ttitle4 = 'Para Generar Las Lecciones Aprendidas, Primerop registre los Datos Generales';
                                    }
                                }
                            
                        }

                        if(Item.InformeInvestigacion == 1)
                        {

                            ccolor4 = '#254373';  
                            readonly4 = '';
                            ttitle4 = 'Lecciones Aprendidas3';
                                if(Item.IdHallazgo > 0)
                                {
                                    ttitle2 = 'Este Incidente ya fue registrado como Hallazgo';
                                    //ccolor = '#254373';
                                    ccolor = '#cdcdcd';
                                    readonly = 'disabled';
                                }
                                else
                                {
                                     ttitle2 = 'Clic para registrar como Hallazgo';
                                     ccolor = '#254373';
                                     //readonly3 = '';
                                     //ccolor3 = '#cd8338';
                                }

                        }
                        else
                        {
                                //ccolor = '#254373';
                                ccolor = '#cdcdcd';
                                readonly = 'disabled';
                                ttitle2 = 'Este Incidente no Tiene Expediente de Investigacion Abierto';

                               // readonly3 = 'disabled';
                                //ccolor3 = '#cdcdcd';
                                // readonly4 = 'disabled';
                                // ccolor4 = '#cdcdcd';
                                // ttitle4 = 'Para Generar Las Lecciones Aprendidas, Debe Generar el Informe de Investigacion';
                               
                               
                               
                            if(Item.IdHallazgo > 0)
                            {
                                ttitle2 = 'Este Incidente ya fue registrado como Hallazgo';
                                //ccolor = '#254373';
                                ccolor = '#cdcdcd';
                                readonly = 'disabled';
                               // readonly3 = '';
                                //ccolor3 = '#cd8338';
                            }
                                                      
                        }

                       //SI POR CASUALIDAD ES UN INCIDENTE AMBIENTAL, AUTOMATICAMENTE PUEDE TENER HALLAZGO
                             if(Item.GrupoEvento == 2)
                                {
                                         //alert("este incidente ("+Item.Id+") es AMBIENTAL")
                                          ttitle2 = 'Clic para registrar como Hallazgo';
                                          ccolor = '#254373';
                                          readonly = '';
                                          // readonly3 = '';
                                          // ccolor3 = '#cd8338';

                                            //  ccolor4 = '#254373';  
                                            // readonly4 = '';
                                            // ttitle4 = 'Lecciones Aprendidas2';
     


                                           if(Item.IdHallazgo > 0)
                                                {
                                                    ttitle2 = 'Este Incidente ya fue registrado como Hallazgo';
                                                    //ccolor = '#254373'                  ccolor = '#cdcdcd';
                                                    readonly = 'disabled';

                                                    // readonly3 = '';
                                                    // ccolor3 = '#cd8338';
                                                }

                                             if(Item.yIdAlerta> 0)
                                                        {
                                                                
                                                                ccolor4 = '#254373';  
                                                                readonly4 = '';
                                                                ttitle4 = 'Lecciones Aprendidas2';

                                                        }
                                                        else{

                                                             readonly4 = 'disabled';
                                                             ccolor4 = '#cdcdcd';
                                                             ttitle4 = 'Para Generar Las Lecciones Aprendidas, Debe Generar la Alerta';
                                                        }


                                //  console.log("xxxxx = ",paObjDG[Item.Id]);


                                // if(Item.ReporteExterno == 1)
                                //    {
                                //             ccolor4 = '#254373';  
                                //             readonly4 = '';
                                //             ttitle4 = 'Lecciones Aprendidas2';
                                //    }
                                // else 
                                //    {
                                //             readonly4 = 'disabled';
                                //             ccolor4 = '#cdcdcd';
                                //             ttitle4 = 'Para Generar Las Lecciones Aprendidas, Debe Generar el Informe de Investigacion xxx';
                                //    }
    



                                }

                           if(Item.GrupoEvento == 3)
                                {
                                    //alert('1426'+Item.InformeInvestigacion);
                                    if(Item.InformeInvestigacion3 == 1)
                                    {
                                         //alert("este incidente ("+Item.Id+") es AMBIENTAL")
                                          ttitle2 = 'Clic para registrar como Hallazgo';
                                          ccolor = '#254373';
                                          readonly = '';
                                          //readonly3 = '';
                                          //ccolor3 = '#cd8338';

                                           
                                           if(Item.IdHallazgo > 0)
                                                {
                                                    ttitle2 = 'Este Incidente ya fue registrado como Hallazgo';
                                                    //ccolor = '#254373'                  ccolor = '#cdcdcd';
                                                    ccolor = '#cdcdcd';
                                                    readonly = 'disabled';
                                                    //readonly3 = '';
                                                     //ccolor3 = '#cd8338';
                                                }
                                            else
                                                {
                                                     ttitle2 = 'Clic para registrar como Hallazgo';
                                                     ccolor = '#254373';
                                                      //readonly3 = '';
                                                     // ccolor3 = '#cd8338';
                                                }

                                                 if(Item.yIdAlerta> 0)
                                                        {
                                                                
                                                                ccolor4 = '#254373';  
                                                                readonly4 = '';
                                                                ttitle4 = 'Lecciones Aprendidas1';

                                                        }
                                                        else{

                                                             readonly4 = 'disabled';
                                                             ccolor4 = '#cdcdcd';
                                                             ttitle4 = 'Para Generar Las Lecciones Aprendidas, Debe Generar la Alerta';
                                                        }


                                     }
                                      else
                                    {
                                                    //ccolor = '#254373';
                                                    ccolor = '#cdcdcd';
                                                    readonly = 'disabled';
                                                    ttitle2 = 'Este Incidente no Tiene Expediente de Investigacion Abierto';
                                                     //readonly3 = 'disabled';
                                                     //ccolor3 = '#cdcdcd';

                                                    
                                                if(Item.yIdAlerta> 0)
                                                        {
                                                                
                                                                ccolor4 = '#254373';  
                                                                readonly4 = '';
                                                                ttitle4 = 'Lecciones Aprendidas1';

                                                        }
                                                        else{

                                                             readonly4 = 'disabled';
                                                             ccolor4 = '#cdcdcd';
                                                             ttitle4 = 'Para Generar Las Lecciones Aprendidas, Debe Generar la Alerta';
                                                        }
                                                   
                                                if(Item.IdHallazgo > 0)
                                                {
                                                    ttitle2 = 'Este Incidente ya fue registrado como Hallazgo';
                                                    //ccolor = '#254373';
                                                    ccolor = '#cdcdcd';
                                                    readonly = 'disabled';
                                                     //readonly3 = '';
                                                     //ccolor3 = '#cd8338';
                                                }
                                                      
                                     }
                                }


                       
                           var ffx = date_AAAA_MM_DD_T_HH_MM_S_to_DD_MM_AAAA(Item.Fecha);




var respF = fnSp3ResponsiveAdmHallazgos2();
var clasifx = '';

//alert("ClasificacionA = "+Item.ClasificacionA);

//alert("Item.GrupoEvento = "+Item.GrupoEvento);

if(Item.GrupoEvento == 1)
  {
    
    clasifx = Item.ClasificacionSSO;
   //alert("Item.Entreeeeeeeeeeeeeee = "+clasifx);
  }

if(Item.GrupoEvento == 2)  
{
    clasifx = Item.ClasificacionA; 
}

if(Item.GrupoEvento == 3)  
{
    clasifx = Item.ClasificacionMat; 
}


//alert(Item.HayPersonalAfectado+' = code ='+Item.Code);
if(Item.HayPersonalAfectado == 0){Item.NombreEmpresa = 'Tasa';}

  

 //alert("Clasificacion = "+clasifx);

                            html += `

                            <div class="item-tabla p-2" style="z-index: 1;display:relative;" style="width: 1233px !important;">${btNew}
                                <div class="row m-0 justify-content-between align-items-center tbody_trainning">
                                    <div class="col-12 text-center" style="font-size: 15px; padding: 4px !important; ">
                                        <div class="row">
                                        <table style=" width:1314px !important;" border="0">
                                            <tr>
                                            <!-- listados de datos  -->
                                            <td style=" width:834px !important;">
                                            <table style=" width:834px !important;" border="0">
                                            <tr>
                                                <td style = 'width:100px;' align="center"><div id="c1TabGeny" class="text-left lbCabezaTabla1"  ${respF} color:#000000 !important; margin: 0px 0px 0px 13px !important; '  >${Item.Code}</div></td>
                                                <td style = 'width:100px;' align="center"><div id="c2TabGeny" class="text-left lbCabezaTabla1"  ${respF}' >${Item.Tipo_Evento != null ? Item.Tipo_Evento : "---"}</div></td>
                                                <td style = 'width:100px;' align="center"><div id="c3TabGeny" class="text-left lbCabezaTabla1"  ${respF}' >${clasifx != null ? clasifx : "---"}</div></td>
                                                <td style = 'width:90px;' align="center"><div id="c4TabGeny" class="text-left lbCabezaTabla1"  ${respF}' >${Item.NombreEmpresa     != null ? Item.NombreEmpresa : "---"}</div></td>

                                                <td style = 'width:90px;'  align="center"><div id="c5TabGeny" class="text-left lbCabezaTabla1"  ${respF}' >${Item.Sede     != null ? Item.Sede : "---"}</div></td>
    
                                                <td style = 'width:90px;' align="center"><div id="c6TabGeny" class="text-left   lbCabezaTabla1"  ${respF}' >${Item.Embarcacion     != null ? Item.Embarcacion : "---"} </div></td>
                                                <td style = 'width:100px;' align="center"><div id="c7TabGeny" class="text-left   lbCabezaTabla1"  ${respF}' >${Item.Zona     != null ? Item.Zona : "---"}</div></td>
                                                <td style = 'width:80px;'  align="center"><div id="c7TabGeny" class="text-left   lbCabezaTabla1"  ${respF}' >${ffx}</div></td>
                                                <td style = 'width:84px;'  align="center"><div id="c8TabGeny" class="text-left   lbCabezaTabla1"  ${respF} color: ${Item.Color} !important; font-weight:bold !important;'    >${Item.Estado_Incidente}</div></td>
                                                
                                                
                                               


                                             </tr>
                                            </table>
                                        </td>
                                 
                                            <!-- iconosss  -->
                                        <td style=" width:480px !important;" >
                                            <table style=" width:480px !important;"  border="0">
                                                <tr >
                                                <td style = 'width:60px;' align="center"><div id="c12TabGeny" class="text-center lbCabezaTabla1" ${respF}' >
                                                    <button type='button' title='Ver Incidente/ Accidente'  onclick="  accPlanAnual = 2;  fnSp3MostrarModalVerPlanAnual(${Item.Id})"   class='btn-circle btn_read border-0' style='background-color:#2d7099 !important;' id='btn_genAlerta${Item.Id}'>
                                                        <img src='./images/iconos/ojo_1.svg' class='ojo-1'  >
                                                    </button>
                                                </td>


                                                <td style = 'width:60px;' align="center"><div id="c12TabGeny" class="text-center lbCabezaTabla1"  ${respF}'  >
                                                        <button type='button' title='${ttitle}' onclick="  fnSp4MostrarModalGenAlerta(${Item.Id}); "   class='btn-circle btn_read border-0' style='background-color:${ccolor2} !important;' id='btn_verHallago${Item.Id}' ${readonly2}>
                                                            <img src='./images/iconos/alert3.svg' class='ojo-1'  >
                                                        </button>

                                                </td>

                                                <td style = 'width:60px;' align="center"><div id="c12TabGeny" class="text-center lbCabezaTabla1"  ${respF}'  >
                                                <button type='button' title='Evidencia' onclick="  accPlanAnual = 2; fnSp4MostrarModalEvidenciasIncidente(${Item.Id})"   class='btn-circle btn_read border-0' style='background-color:#61b4f9 !important;' id='btn_verEvidenciaIncidemte${Item.Id}'>
                                                    <img src='./images/iconos/googleDocuments3.svg' class='ojo-1'  >
                                                </button>

                                                </td>

                                                <td style = 'width:60px;' align="center"><div id="c13TabGeny" class="text-center lbCabezaTabla1"  ${respF}'  >
                                                <button type='button' title='Datos Generales' onclick="  accPlanAnual = 2; sp4FnModalDatosGnerales(${Item.Id})"   class='btn-circle btn_read border-0' style='background-color:#f9bc61 !important;' id='btn_verHallago${Item.Id}'>
                                                    <img src='./images/iconos/file3.svg' class='ojo-1'  >
                                                </button>

                                                 </td>

                                                <td style = 'width:60px;' align="center"><div id="c14TabGeny" class="text-center lbCabezaTabla1"  ${respF}'  >
                                                <button type='button' title='${ttitle2}' onclick="  accPlanAnual = 2; sp4FnTrasformaIncidenteEnHallazgo(${Item.Id})"   class='btn-circle btn_read border-0' style='background-color:${ccolor} !important;' id='btn_verHallago${Item.Id}' ${readonly}>
                                                    <img src='./images/iconos/search5.svg' class='ojo-1'  >
                                                </button>

                                                </td>

                                               
                                                 <td style = 'width:90px;' align="center"><div id="c12TabGeny" class="text-center lbCabezaTabla1"  ${respF}'  >
                                                <button type='button' title='${ttitle5}' onclick="  accPlanAnual = 2; sp4FnVentanaInformeInvestigacion(${Item.Id})"   class='btn-circle btn_read border-0' style='background-color:${ccolor3} !important;' id='btn_verHallago${Item.Id}' ${readonly3}>
                                                    <img src='./images/iconos/writing1.svg' class='ojo-1'  >
                                                </button>

                                                </td>

                                              

                                                  <td style = 'width:90px;' align="center"><div id="c12TabGeny" class="text-center lbCabezaTabla1"  ${respF}'  >
                                                <button type='button' title='${ttitle4}' onclick="  accPlanAnual = 2; sp4FnVentanaLeccionAprendidada(${Item.Id})"   class='btn-circle btn_read border-0' style='background-color:${ccolor4} !important;' id='btn_verHallago${Item.Id}' ${readonly4}>
                                                    <img src='./images/iconos/group_l.svg' class='ojo-1'  >
                                                </button>

                                                </td>

                                           
                                                
                                                </tr>
                                            </table>
                                        </td>


                                    </tr>
                                           
                                </table> 

                                        




                                        </div>
       </div>
                                </div>
                            </div>


                                `;          


                                 }





           }
        })
    hideLoading();
    //console.log(html);

return html;

  // <td style = 'width:90px;' align="center"><div id="c12TabGeny" class="text-center lbCabezaTabla1"  ${respF}'  >
  //                                               <button type='button' title='${ttitle3}' onclick="  accPlanAnual = 2; sp4FnVentanaInformeInvestigacion(${Item.Id})"   class='btn-circle btn_read border-0' style='background-color:${ccolor3} !important;' id='btn_verHallago${Item.Id}' ${readonly3}>
  //                                                   <img src='./images/iconos/writing1.svg' class='ojo-1'  >
  //                                               </button>

  //                                               </td>

}
//------------------------------------- fin   fnSp3ListarTablaGeneralH() -------------------------------------




function fnSp3CerrarVentanaMostrarPlanAnual()
{//------------------------------------- ini   fnSp3CerrarVentanaMostrarPlanAnual() -------------------------------------
    // if(accPlanAnual == 0)//verificamos si se va a crear  los nuevo plan
    // {
    //     verModalAdvertencia('Existen Datos Cargados','¿Estás seguro que desea cancelar la Creación de este Plan Anual?')
    //      //$("#Sp3VentanaPlanAnualEditView").modal("hide").removeClass("fade");
    // }
    verModalAdvertencia('Existen Datos Cargados','¿Estás seguro que desea cancelar la Creación de este Plan Anual?')

}//------------------------------------- ini   fnSp3CerrarVentanaMostrarPlanAnual() -------------------------------------

function addActividadObjetivoPlan()
{
    if(accPlanAnual == 0){
        fnSp3agregaActividadObjetivoPlan(-1,0,0)
    }else{
        fnSp3agregaActividadObjetivoPlanEditar(-1,0,0)

    }
}

function fnSp3VentanaMostrarPlanAnual(pos)
{//------------------------------------- ini   fnSp3VentanaMostrarPlanAnual() -------------------------------------
    console.log("Arrancamos............................ fnSp3VentanaMostrarPlanAnual");
    istAud = pos;
    // accionH = 0;
    // vw_principal.init();

  document.getElementById('rbtn_si_40').style.visibility = 'visible' ;
  document.getElementById('rbtn_no_41').style.visibility = 'visible' ;
    $("#Sp3VentanaPlanAnualEditView").modal("show").addClass("fade");

//alert(paObj[istAud].a.GrupoEvento);

    if( paObj[istAud].a.GrupoEvento == 1)
    {
      //alert('aaaaaaaaaaaaaaaaffffffffffffff')
             //----------------------------------  ***** titulo   *****  ---------------------------------------------
            $("#titleModalDatosGenerales").html("<b>Datos Generales - "+paObj[istAud].a.Code+"</b>");
            fnSp3onchangeObjetivoSubojetitiv2('si', 'rbtn_si_8', 'rbtn_no_9'); 
            fnSp3onchangeObjetivoSubojetitiv2('si', 'rbtn_si_35', 'rbtn_no_36');
            fnSp3onchangeObjetivoSubojetitiv2('si', 'rbtn_si_40', 'rbtn_no_41'); 

            //----------------- estado inicial de los campos inabilitados u en gris --------------------------//

                    
            

        $('#divBordeDG_4').css('background-color','#efefef');
        $('#txtd_f_dg_gv_4').css('background-color','#efefef');
        $('#txtd_f_dg_gv_4').prop('disabled', true);
        $('#txtd_f_dg_gv_4').val(date_AAAA_MM_DD_T_HH_MM_S_to_DD_MM_AAAA(paObj[istAud].a.Fecha));

        // $('#divBordeDG_5').css('background-color','#efefef');
        // $('#txtt_f_dg_gv_5').css('background-color','#efefef');
        // $('#txtt_f_dg_gv_5').prop('disabled', true);
        $('#txtt_f_dg_gv_5').val(paObj[istAud].a.Hora)

        $('#divBordeDG_6').css('background-color','#efefef');
        $('#sel_f_dg_gv_6').css('background-color','#efefef');
        
        $('#sel_f_dg_gv_6').val(paObj[istAud].a.IdSede)
        $('#sel_f_dg_gv_6').prop('disabled', true);

      
        

        //si hay embarcacion no hay sede por ende condicion de embarcacion habilitada
        $('#divBordeDG_7').css('background-color','#efefef');
        $('#sel_f_dg_gv_7').css('background-color','#efefef');
        $('#sel_f_dg_gv_7').prop('disabled', true);
        $('#sel_f_dg_gv_7').val(paObj[istAud].a.IdEmbarcacion)


        $('#divBordeDG_8').css('background-color','#efefef');
        $('#sel_f_dg_gv_10').css('background-color','#efefef');
        $('#sel_f_dg_gv_10').prop('disabled', true);//NombreEmpresa
        //$('#sel_f_dg_gv_10').val(paObj[istAud].a.IdEmpresa);//antes id por que era un listado ahora es tecleado
        $('#sel_f_dg_gv_10').val(paObj[istAud].a.NombreEmpresa);
        //alert('1475 sp4FnModalDatosGnerales');

         if(paObj[istAud].a.HayPersonalAfectado == 0) // es personal de tasa
            {
                 fnSp3onchangeObjetivoSubojetitiv2('si', 'rbtn_si_8', 'rbtn_no_9'); 
            }
             else
              {

                  if(paObj[istAud].a.HayPersonalAfectado == 1) // es algun contratista
                  {
                      fnSp3onchangeObjetivoSubojetitiv2('no', 'rbtn_si_8', 'rbtn_no_9');
                  }

              }
        

         $('#rbtn_si_8').prop('disabled', true); 
         $('#rbtn_no_9').prop('disabled', true); 

        $('#txta_f_dg_gv_11').val(paObj[istAud].a.DescripcionEvento);

        $('#txta_f_dg_gv_11').val(paObj[istAud].a.DescripcionEvento);
       //var ct = paObj[istAud].a.DescripcionEvento.length;
       //if(ct <= 500){$('#lb_cant_desc1').html(ct+'/500');}




        $('#divBordeDG_10').css('background-color','#efefef');
        $('#sel_f_dg_gv_12').css('background-color','#efefef');
        $('#sel_f_dg_gv_12').prop('disabled', true);


        //area
        $('#divBordeDG_14').css('background-color','#ffffff');
        $('#sel_f_dg_gv_16').css('background-color','#ffffff');
        $('#sel_f_dg_gv_16').prop('disabled', false);

        //zona
        // $('#divBordeDG_15').css('background-color','#efefef');
        // $('#sel_f_dg_gv_17').css('background-color','#efefef');
        // $('#sel_f_dg_gv_17').prop('disabled', true);


        //puerto_arrribo
        $('#divBordeDG_31').css('background-color','#efefef');
        $('#txt_f_dg_gv_34').css('background-color','#efefef');
        $('#txt_f_dg_gv_34').prop('disabled', true);
       
        //si hay sede condicion de embarcacion inabilitado
           
           //alert("DDDDDDDDDDDDDDDDDDDDDDDDDD = "+paObj[istAud].a.A_NombrePersonalAccidentado);

        var bal18 =  paObj[istAud].a.A_NombrePersonalAccidentado;
        $('#ReportanteNameDG_119').val(bal18);// alert(bal18);

        $('#ReportanteUserHashDG_119').val(paObj[istAud].a.A_IdPersonalAccidentado);//IdHash

         var bal19 =  paObj[istAud].a.A_PuestoCargoAccidentado;
         $('#txta_f_dg_gv_23').val(bal19);

         var bal20 =  paObj[istAud].a.A_DniPersonalAccidentado;
         $('#txta_f_dg_gv_21').val(bal20);

          $('#sel_f_dg_gv_30').val(1);
        

         $("#"+'sel_f_dg_gv_16').html(" "); $("#"+'sel_filter_estado_p').css('font-size','13px');
         $("#"+'sel_f_dg_gv_16').html("<option selected value='0'>          </option>");

         $("#"+'sel_f_dg_gv_17').html(" "); $("#"+'sel_filter_estado_p').css('font-size','13px');
         $("#"+'sel_f_dg_gv_17').html("<option selected value='0'>          </option>");
         
         

          let n = $('#sel_f_dg_gv_6 option:selected').attr('title')
          n = parseInt(n);
          LTA.map(function(item)
         {
             //console.log('fueraaaaaaaaaaaaa 8',i,")=", item.Area); i++;
            if(item.UnidadNegocioId == n)
            {
             $("#"+'sel_f_dg_gv_16').append(`<option value='${item.Id}' title='${item.UnidadNegocioId}' >${item.Area}</option>`);
             //$("#"+'sel_f_dg_gv_16k').append(`<option value='${item.Id}' title='${item.UnidadNegocioId}' >${item.Area}</option>`);
             $("#"+'sel_f_dg_gv_32').append(`<option value='${item.Id}' title='${item.UnidadNegocioId}' >${item.Area}</option>`);
           
            }
                        
         });

           let i = 1;

          LTZ.map(function(item)
         {
            //console.log('fueraaaaaaaaaaaaa 8',i,")=", item.Zona); i++;
            if(item.UnidadNegocioId == n)
            {
            // $("#"+'sel_f_dg_gv_17').append(`<option value='${item.Id}' title='${item.UnidadNegocioId}' >${item.Zona}</option>`);
             $("#"+'sel_f_dg_gv_17').append(`<option value='${item.Id}' title='${item.UnidadNegocioId}' >${item.Zona}</option>`);
             console.log('zooooooooooooooooona = ',i,")=", item.Zona); i++;
            }
                        
         });


         

         if((paObj[istAud].a.IdSede == 0)||(paObj[istAud].a.IdSede == null ) ||(paObj[istAud].a.IdSede == '' ))
         {
                $('#divBordeDG_10').css('background-color','#efefef');
                $('#sel_f_dg_gv_12').css('background-color','#efefef');
                $('#sel_f_dg_gv_12').prop('disabled', true);

                if(paObj[istAud].a.IdEmbarcacion >0)
                      {

                              $('#divBordeDG_10').css('background-color','#ffffff');
                              $('#sel_f_dg_gv_12').css('background-color','#ffffff');
                              $('#sel_f_dg_gv_12').prop('disabled', false);

                              //inabilitar el area

                              $('#divBordeDG_14').css('background-color','#efefef');
                              $('#sel_f_dg_gv_16').css('background-color','#efefef');
                              $('#sel_f_dg_gv_16').prop('disabled', true);


                              $('#divBordeDG_15').css('background-color','#ffffff');
                              $('#sel_f_dg_gv_17').css('background-color','#ffffff');
                              $('#sel_f_dg_gv_17').prop('disabled', false);


                              //pueto de arrivo
                                $('#divBordeDG_31').css('background-color','#ffffff');
                                $('#txt_f_dg_gv_34').css('background-color','#ffffff');
                                $('#txt_f_dg_gv_34').prop('disabled', false);


                                  $("#"+'sel_f_dg_gv_17').html(" "); $("#"+'sel_filter_estado_p').css('font-size','13px');
                                  $("#"+'sel_f_dg_gv_17').html("<option selected value='0'>          </option>");
                                   let i = 1;
                                 
                                  let n = 5;
                                  n = parseInt(n);
                                  LTZ.map(function(item)
                                 {
                                    
                                     if(item.UnidadNegocioId == n)
                                       {
                                     $("#"+'sel_f_dg_gv_17').append(`<option value='${item.Id}' title='${item.UnidadNegocioId}' >${item.Zona}</option>`);
                                     console.log('zooxxxxxxxxxxxxxxxxxxxxx = ',i,")=", item.Zona); i++;
                                       }
                                    
                                                
                                 });

       
                      }
         }
        


        





        $('#divBordeDG_26').css('background-color','#efefef');
        $('#txt_f_dg_gv_29').css('background-color','#efefef');
        $('#txt_f_dg_gv_29').prop('disabled', true);


       


        $('#divBordeDG_32').css('background-color','#efefef');
        $('#txtd_f_dg_gv_37').css('background-color','#efefef');
        $('#txtd_f_dg_gv_37').prop('disabled', true);

       
                                                      

      

        var f = new Date();
        var m = f.getMonth()+1; if(m < 10){m = '0'+m;}
        var fechaActualg = f.getDate() + "/" + m + "/" + f.getFullYear();
        $('#txtd_f_dg_gv_37').val(fechaActualg);
       // $('#txtd_f_dg_gv_38').val(fechaActualg);  //12-05-21
        //txtd_f_dg_gv_38

        //var salida = fecha_calcula_dias($('#txtd_f_dg_gv_37').val(), $('#txtd_f_dg_gv_38').val())

         //$('#txt_f_dg_gv_39').val(salida);

        $('#divBordeDG_34').css('background-color','#efefef');
        $('#txt_f_dg_gv_39').css('background-color','#efefef');
        $('#txt_f_dg_gv_39').prop('disabled', true);

     //----------------- estado inicial de los campos inabilitados u en gris --------------------------//

    fnSp3onchangeObjetivoSubojetitivo('si');
    

    fnSp3CargaFiltroEstadoInicialPlanAnualDG();
    }
    else
    {
         if( paObj[istAud].a.GrupoEvento == 2)
            {
              //===============================================================================================================

                       //----------------------------------  ***** titulo   *****  ---------------------------------------------
                        $("#titleModalDatosGenerales").html("<b>Datos Generales - "+paObj[istAud].a.Code+"</b>");


                        $('#divBordeDG_x4').css('background-color','#efefef');
                        $('#txtd_f_dg_gv_4y').css('background-color','#efefef');
                        $('#txtd_f_dg_gv_4y').prop('disabled', true);
                        $('#txtd_f_dg_gv_4y').val(date_AAAA_MM_DD_T_HH_MM_S_to_DD_MM_AAAA(paObj[istAud].a.Fecha));

                        // $('#divBordeDG_x5').css('background-color','#efefef');
                        // $('#txtt_f_dg_gv_5y').css('background-color','#efefef');
                        // $('#txtt_f_dg_gv_5y').prop('disabled', true);
                        $('#txtt_f_dg_gv_5y').val(paObj[istAud].a.Hora)

                        $('#divBordeDG_x6').css('background-color','#efefef');
                        $('#sel_f_dg_gv_6y').css('background-color','#efefef');
                        $('#sel_f_dg_gv_6y').prop('disabled', true);
                        $('#sel_f_dg_gv_6y').val(paObj[istAud].a.IdSede)

                        
                        
                        //si hay embarcacion no hay sede por ende condicion de embarcacion habilitada
                        $('#divBordeDG_x8').css('background-color','#efefef');
                        $('#sel_f_dg_gv_10y').css('background-color','#efefef');
                        $('#sel_f_dg_gv_10y').prop('disabled', true);
                        //$('#sel_f_dg_gv_10y').val(paObj[istAud].a.IdEmpresa);

                         if(paObj[istAud].a.HayPersonalAfectado == 0) // es personal de tasa
                            {
                                 fnSp3onchangeObjetivoSubojetitiv2('si', 'rbtn_si_8y', 'rbtn_no_9y'); 
                            }
                             else
                              {

                                  if(paObj[istAud].a.HayPersonalAfectado == 1) // es algun contratista
                                  {
                                      fnSp3onchangeObjetivoSubojetitiv2('no', 'rbtn_si_8y', 'rbtn_no_9y');
                                  }

                              }


                         $('#sel_f_dg_gv_10y').val(paObj[istAud].a.NombreEmpresa);

                           $('#dat_x_valumen').val(parseInt(paObj[istAud].a.B_Volumen)); 
                           $('#dat_x_unidad').val(1); 
                           $('#dat_x_area_inpactada').val(parseInt(paObj[istAud].a.B_Area)); //
                          
                        
                        $('#divBordeDG_xy22').css('background-color','#efefef');
                        $('#dat_x_calificacion').css('background-color','#efefef');
                        $('#dat_x_calificacion').prop('disabled', true);
                        //$('#dat_x_calificacion').val(paObj[istAud].a.IdEmpresa);
                        
                        for (var i = 23; i<45; i++) {$('#divBordeDG_xy'+i).css('background-color','#efefef');    }

                       

                        $('#dat_x_nivel_severidad').css('background-color','#efefef');
                        $('#dat_x_nivel_severidad').prop('disabled', true);
                        //$('#dat_x').val(paObj[istAud].a.IdEmpresa);

                        $('#dat_x_iia_unidad').css('background-color','#efefef');
                        $('#dat_x_iia_unidad').prop('disabled', true);
                        //$('#dat_x').val(paObj[istAud].a.IdEmpresa);


                         $('#dat_x_iia_corporativo').css('background-color','#efefef');
                        $('#dat_x_iia_corporativo').prop('disabled', true);
                        //$('#dat_x').val(paObj[istAud].a.IdEmpresa);
                         
                         $('#dat_x_meta_corporativa').css('background-color','#efefef');
                        $('#dat_x_meta_corporativa').prop('disabled', true);


                         $('#dat_x_iia_unidad_pesca').css('background-color','#efefef');
                        $('#dat_x_iia_unidad_pesca').prop('disabled', true);
                        //$('#dat_x').val(paObj[istAud].a.IdEmpresa);




                        $('#dat_x_iia_corporativo_pesca').css('background-color','#efefef');
                        $('#dat_x_iia_corporativo_pesca').prop('disabled', true);
                        //$('#dat_x').val(paObj[istAud].a.IdEmpresa);

                         $('#dat_x_meta_pesac').css('background-color','#efefef');
                        $('#dat_x_meta_pesac').prop('disabled', true);
                        //$('#dat_x').val(paObj[istAud].a.IdEmpresa);


                         $('#dat_x_ii_operaciones').css('background-color','#efefef');
                        $('#dat_x_ii_operaciones').prop('disabled', true);
                        //$('#dat_x').val(paObj[istAud].a.IdEmpresa);


                         $('#dat_x_iia_corp_operaciones').css('background-color','#efefef');
                        $('#dat_x_iia_corp_operaciones').prop('disabled', true);
                        //$('#dat_x').val(paObj[istAud].a.IdEmpresa);




                        
                        //$('#dat_x').val(paObj[istAud].a.IdEmpresa);

                         $('#dat_x_iia_meta_operaciones').css('background-color','#efefef');
                        $('#dat_x_iia_meta_operaciones').prop('disabled', true);
                        //$('#dat_x').val(paObj[istAud].a.IdEmpresa);


                         $('#dat_x_iia_adm_finanza').css('background-color','#efefef');
                        $('#dat_x_iia_adm_finanza').prop('disabled', true);
                        //$('#dat_x').val(paObj[istAud].a.IdEmpresa);


                         $('#dat_x_iia_corp_adm_finanza').css('background-color','#efefef');
                        $('#dat_x_iia_corp_adm_finanza').prop('disabled', true);
                        //$('#dat_x').val(paObj[istAud].a.IdEmpresa);


                        $('#dat_x_meta_adm_finanza').css('background-color','#efefef');
                        $('#dat_x_meta_adm_finanza').prop('disabled', true);
                        //$('#dat_x').val(paObj[istAud].a.IdEmpresa);






                        $('#dat_x_costo_mo').css('background-color','#efefef');
                        $('#dat_x_costo_mo').prop('disabled', true);
                        //$('#dat_x').val(paObj[istAud].a.IdEmpresa);

                        $('#dat_x_costo_mo_s').css('background-color','#efefef');
                        $('#dat_x_costo_mo_s').prop('disabled', true);
                        //$('#dat_x').val(paObj[istAud].a.IdEmpresa);

                        $('#dat_x_costo_producto_s').css('background-color','#efefef');
                        $('#dat_x_costo_producto_s').prop('disabled', true);
                        //$('#dat_x').val(paObj[istAud].a.IdEmpresa);



                         $('#dat_x_costo_total_s').css('background-color','#efefef');
                        $('#dat_x_costo_total_s').prop('disabled', true);
                        //$('#dat_x').val(paObj[istAud].a.IdEmpresa);

                        $('#dat_x_costo_total_dolar').css('background-color','#efefef');
                        $('#dat_x_costo_total_dolar').prop('disabled', true);
                        //$('#dat_x').val(paObj[istAud].a.IdEmpresa);
                        
                        $('#dat_x_oefa_s').css('background-color','#efefef');
                        $('#dat_x_oefa_s').prop('disabled', true);
                        //$('#dat_x').val(paObj[istAud].a.IdEmpresa);



                         $('#dat_x_oefa_usd').css('background-color','#efefef');
                        $('#dat_x_oefa_usd').prop('disabled', true);
                        //$('#dat_x').val(paObj[istAud].a.IdEmpresa);

                        $('#dat_x_dicapi_s').css('background-color','#efefef');
                        $('#dat_x_dicapi_s').prop('disabled', true);
                        //$('#dat_x').val(paObj[istAud].a.IdEmpresa);
                        
                        $('#dat_x_dicapi_usd').css('background-color','#efefef');
                        $('#dat_x_dicapi_usd').prop('disabled', true);
                        //$('#dat_x').val(paObj[istAud].a.IdEmpresa);

                        
                        
                       
                       fnSp3CargaFiltroEstadoInicialPlanAnualDG2();


                       




              //===============================================================================================================
            }
         else
         {
               if( paObj[istAud].a.GrupoEvento == 3)
                 {

                         $("#titleModalDatosGenerales").html("<b>Datos Generales - "+paObj[istAud].a.Code+"</b>");
                         //alert('Daños Materiales');
                               //----------------------------------  ***** titulo   *****  ---------------------------------------------
                                $("#titleModalDatosGenerales").html("<b>Datos Generales - "+paObj[istAud].a.Code+"</b>");
                                fnSp3onchangeObjetivoSubojetitiv2('si', 'rbtn_si_8k', 'rbtn_no_9k'); 
                                fnSp3onchangeObjetivoSubojetitiv2('si', 'rbtn_si_40k', 'rbtn_no_41k'); 

                                $('#divBordeDG_4k').css('background-color','#efefef');
                                $('#txtd_f_dg_gv_4k').css('background-color','#efefef');
                                $('#txtd_f_dg_gv_4k').prop('disabled', true);
                                $('#txtd_f_dg_gv_4k').val(date_AAAA_MM_DD_T_HH_MM_S_to_DD_MM_AAAA(paObj[istAud].a.Fecha));

                                
                                $('#txtt_f_dg_gv_5k').val(paObj[istAud].a.Hora)

                                $('#divBordeDG_6k').css('background-color','#efefef');
                                $('#sel_f_dg_gv_6k').css('background-color','#efefef');
                                
                                $('#sel_f_dg_gv_6k').val(paObj[istAud].a.IdSede)
                                $('#sel_f_dg_gv_6k').prop('disabled', true);

                                //----------------- estado inicial de los campos inabilitados u en gris --------------------------//

                                  //si hay embarcacion no hay sede por ende condicion de embarcacion habilitada
                                    $('#divBordeDG_7k').css('background-color','#efefef');
                                    $('#sel_f_dg_gv_7k').css('background-color','#efefef');
                                    $('#sel_f_dg_gv_7k').prop('disabled', true);
                                    $('#sel_f_dg_gv_7k').val(paObj[istAud].a.IdEmbarcacion)


                                    $('#divBordeDG_8k').css('background-color','#efefef');
                                    $('#sel_f_dg_gv_10k').css('background-color','#efefef');
                                    $('#sel_f_dg_gv_10k').prop('disabled', true);//NombreEmpresa
                                    //$('#sel_f_dg_gv_10').val(paObj[istAud].a.IdEmpresa);//antes id por que era un listado ahora es tecleado
                                    $('#sel_f_dg_gv_10k').val(paObj[istAud].a.NombreEmpresa);
                                    //alert('2061 sp4FnModalDatosGnerales');

                                      if(paObj[istAud].a.HayPersonalAfectado == 0) // es personal de tasa
                                                {
                                                     fnSp3onchangeObjetivoSubojetitiv2('si', 'rbtn_si_8k', 'rbtn_no_9k'); 
                                                }
                                                 else
                                                  {

                                                      if(paObj[istAud].a.HayPersonalAfectado == 1) // es algun contratista
                                                      {
                                                          fnSp3onchangeObjetivoSubojetitiv2('no', 'rbtn_si_8k', 'rbtn_no_9k');
                                                      }

                                                  }
                                            

                                             $('#rbtn_si_8k').prop('disabled', true); 
                                             $('#rbtn_no_9k').prop('disabled', true); 

                                            $('#txta_f_dg_gv_11k').val(paObj[istAud].a.DescripcionEvento);

                                            $('#txta_f_dg_gv_11k').val(paObj[istAud].a.DescripcionEvento);
                                           //var ct = paObj[istAud].a.DescripcionEvento.length;
                                           //if(ct <= 500){$('#lb_cant_desc1').html(ct+'/500');}




                                            $('#divBordeDG_10k').css('background-color','#efefef');
                                            $('#sel_f_dg_gv_12k').css('background-color','#efefef');
                                            $('#sel_f_dg_gv_12k').prop('disabled', true);


                                            //area
                                            $('#divBordeDG_14k').css('background-color','#ffffff');
                                            $('#sel_f_dg_gv_16k').css('background-color','#ffffff');
                                            $('#sel_f_dg_gv_16k').prop('disabled', false);

                                            //zona
                                            // $('#divBordeDG_15').css('background-color','#efefef');
                                            // $('#sel_f_dg_gv_17').css('background-color','#efefef');
                                            // $('#sel_f_dg_gv_17').prop('disabled', true);


                                            //puerto_arrribo
                                            $('#divBordeDG_31k').css('background-color','#efefef');
                                            $('#txt_f_dg_gv_34k').css('background-color','#efefef');
                                            $('#txt_f_dg_gv_34k').prop('disabled', true);

                                             var bal18 =  paObj[istAud].a.A_NombrePersonalAccidentado;
                                            $('#ReportanteNameDG_119k').val(bal18);// alert(bal18);

                                            $('#ReportanteUserHashDG_119k').val(paObj[istAud].a.A_IdPersonalAccidentado);//IdHash

                                             var bal19 =  paObj[istAud].a.A_PuestoCargoAccidentado;
                                             $('#txta_f_dg_gv_23k').val(bal19);

                                             var bal20 =  paObj[istAud].a.A_DniPersonalAccidentado;
                                             $('#txta_f_dg_gv_21k').val(bal20);

                                              $('#sel_f_dg_gv_30k').val(1);
                                            

                                             $("#"+'sel_f_dg_gv_16k').html(" "); $("#"+'sel_f_dg_gv_16k').css('font-size','13px');
                                             $("#"+'sel_f_dg_gv_16k').html("<option selected value='0'>          </option>");

                                             $("#"+'sel_f_dg_gv_17k').html(" "); $("#"+'sel_f_dg_gv_17k').css('font-size','13px');
                                             $("#"+'sel_f_dg_gv_17k').html("<option selected value='0'>          </option>");

                                             $("#"+'sel_f_dg_gv_32k').html(" "); $("#"+'sel_f_dg_gv_32k').css('font-size','13px');
                                             $("#"+'sel_f_dg_gv_32k').html("<option selected value='0'>          </option>");
                                             
                                              let n = $('#sel_f_dg_gv_6k option:selected').attr('title')
                                              n = parseInt(n);
                                              LTA.map(function(item)
                                             {
                                                 //console.log('fueraaaaaaaaaaaaa 8',i,")=", item.Area); i++;
                                                if(item.UnidadNegocioId == n)
                                                {
                                                 $("#"+'sel_f_dg_gv_16k').append(`<option value='${item.Id}' title='${item.UnidadNegocioId}' >${item.Area}</option>`);
                                                 $("#"+'sel_f_dg_gv_32k').append(`<option value='${item.Id}' title='${item.UnidadNegocioId}' >${item.Area}</option>`);
                                               
                                                }
                                                            
                                             });

                                               let i = 1;

                                              LTZ.map(function(item)
                                             {
                                                //console.log('fueraaaaaaaaaaaaa 8',i,")=", item.Zona); i++;
                                                if(item.UnidadNegocioId == n)
                                                {
                                                 $("#"+'sel_f_dg_gv_17k').append(`<option value='${item.Id}' title='${item.UnidadNegocioId}' >${item.Zona}</option>`);
                                                 console.log('zooooooooooooooooona = ',i,")=", item.Zona); i++;
                                                }
                                                            
                                             });


                                             

                                             if((paObj[istAud].a.IdSede == 0)||(paObj[istAud].a.IdSede == null ) ||(paObj[istAud].a.IdSede == '' ))
                                             {
                                                    $('#divBordeDG_10k').css('background-color','#efefef');
                                                    $('#sel_f_dg_gv_12k').css('background-color','#efefef');
                                                    $('#sel_f_dg_gv_12k').prop('disabled', true);

                                                    if(paObj[istAud].a.IdEmbarcacion >0)
                                                          {

                                                                  $('#divBordeDG_10k').css('background-color','#ffffff');
                                                                  $('#sel_f_dg_gv_12k').css('background-color','#ffffff');
                                                                  $('#sel_f_dg_gv_12k').prop('disabled', false);

                                                                  //inabilitar el area

                                                                  $('#divBordeDG_14k').css('background-color','#efefef');
                                                                  $('#sel_f_dg_gv_16k').css('background-color','#efefef');
                                                                  $('#sel_f_dg_gv_16k').prop('disabled', true);


                                                                  $('#divBordeDG_15k').css('background-color','#ffffff');
                                                                  $('#sel_f_dg_gv_17k').css('background-color','#ffffff');
                                                                  $('#sel_f_dg_gv_17k').prop('disabled', false);


                                                                  //pueto de arrivo
                                                                    $('#divBordeDG_31k').css('background-color','#ffffff');
                                                                    $('#txt_f_dg_gv_34k').css('background-color','#ffffff');
                                                                    $('#txt_f_dg_gv_34k').prop('disabled', false);


                                                                      $("#"+'sel_f_dg_gv_17k').html(" "); $("#"+'sel_filter_estado_p').css('font-size','13px');
                                                                      $("#"+'sel_f_dg_gv_17k').html("<option selected value='0'>          </option>");
                                                                       let i = 1;
                                                                     
                                                                      let n = 5;
                                                                      n = parseInt(n);
                                                                      LTZ.map(function(item)
                                                                     {
                                                                        
                                                                         if(item.UnidadNegocioId == n)
                                                                           {
                                                                         $("#"+'sel_f_dg_gv_17k').append(`<option value='${item.Id}' title='${item.UnidadNegocioId}' >${item.Zona}</option>`);
                                                                         console.log('zooxxxxxxxxxxxxxxxxxxxxx = ',i,")=", item.Zona); i++;
                                                                           }
                                                                        
                                                                                    
                                                                     });

                                           
                                                          }
                                             }
                                            


                                            





                                            $('#divBordeDG_26k').css('background-color','#efefef');
                                            $('#txt_f_dg_gv_29k').css('background-color','#efefef');
                                            $('#txt_f_dg_gv_29k').prop('disabled', true);


                                           


                                            $('#divBordeDG_32k').css('background-color','#efefef');
                                            $('#txtd_f_dg_gv_37k').css('background-color','#efefef');
                                            $('#txtd_f_dg_gv_37k').prop('disabled', true);

                                           
                                                                                          

                                          
                     //alert("2258");
                                            var f = new Date();
                                            var m = f.getMonth()+1; if(m < 10){m = '0'+m;}
                                            var fechaActualg = f.getDate() + "/" + m + "/" + f.getFullYear();
                                            $('#txtd_f_dg_gv_37k').val(fechaActualg);
                                           // $('#txtd_f_dg_gv_38').val(fechaActualg);  //12-05-21
                                            //txtd_f_dg_gv_38

                                            //var salida = fecha_calcula_dias($('#txtd_f_dg_gv_37').val(), $('#txtd_f_dg_gv_38').val())

                                             //$('#txt_f_dg_gv_39').val(salida);

                                            $('#divBordeDG_34k').css('background-color','#efefef');
                                            $('#txt_f_dg_gv_39k').css('background-color','#efefef');
                                            $('#txt_f_dg_gv_39k').prop('disabled', true);

                                         //----------------- estado inicial de los campos inabilitados u en gris --------------------------//

                                        fnSp3onchangeObjetivoSubojetitivok('si');
                                        

                                        fnSp3CargaFiltroEstadoInicialPlanAnualDGK();

                                           

                
                 }
         }
    }

  
   

}//----------------------------------------- ini fnSp3VentanaMostrarHallazgo  ---------------------------------


function sp4ChangeImpactoAmbiental_1()
{
          //alert("sp4ChangeImpactoAmbiental_1");
          sp4Formula1();
          sp4Formula2();
          sp4Formula3();
          
}



function sp4Formula1()
{
     var d1 = $('#dat_x_impacto_ambiental2').val(); d1= parseInt(d1, 10);
     var d2 = $('#dat_x_reaccion_publica').val();   d2= parseInt(d2, 10);
     var d3 = $('#dat_x_relacion_comunidad').val(); d3= parseInt(d3, 10);
     var d4 = $('#dat_x_legal').val();              d4= parseInt(d4, 10);

     var calificacion = d1 + d2 + d3 + d4;
     $('#dat_x_calificacion').val(calificacion);

}


function sp4Formula2()
{
     var d1 = $('#dat_x_impacto_ambiental2').val(); d1= parseInt(d1, 10);
     var d2 = $('#dat_x_reaccion_publica').val();   d2= parseInt(d2, 10);
     var d3 = $('#dat_x_relacion_comunidad').val(); d3= parseInt(d3, 10);
     var d4 = $('#dat_x_legal').val();              d4= parseInt(d4, 10);

     var calificacion = d1 + d2 + d3 + d4;
     var iiaUnidad = 0;
     

     if(calificacion == 8)
     {

         $('#dat_x_nivel_severidad').val('BAJO')
         $('#dat_x_iia_unidad').val(2); iiaUnidad = 2;

         
     }

     if((calificacion >= 9) && (calificacion <= 16))
     {

         $('#dat_x_nivel_severidad').val('MEDIO');
         $('#dat_x_iia_unidad').val(5);  iiaUnidad = 5;
     }


      if((calificacion >= 17) && (calificacion <= 24))
     {

         $('#dat_x_nivel_severidad').val('ALTO');
         $('#dat_x_iia_unidad').val(10);  iiaUnidad = 10;
     }



      if((calificacion >= 25) && (calificacion <= 27))
     {

         $('#dat_x_nivel_severidad').val('CRITICO');
         $('#dat_x_iia_unidad').val(20); iiaUnidad = 20;
     }

         var iia_corp = iiaUnidad/25;

         $('#dat_x_iia_corporativo').val(iia_corp);
         $('#dat_x_ii_operaciones').val(iiaUnidad);

          var corpOp = iiaUnidad/13;
          $('#dat_x_iia_corp_operaciones').val(corpOp);




    sp4Formula4();

}

function sp4Formula3()
{
    
    var datte = $('#txtd_f_dg_gv_4y').val();

    var part = datte.split('/');
    var varmp = ''; //variable con resultado de la formula del meta pesac
    var metOp = ''; //variable de entorno para el campo de metaoperaciones
    var metAdmFin = '';

    var mes = parseInt(part[1], 10);
    var vari = 0;

                switch (mes) 
                 {
                     case 1:
                        vari = 9.24/12;

                        varmp = 1.25/12;

                        metOp = 15.15/12;

                        metAdmFin = 6/12;
                     break;

                     case 2:
                        vari = 18.48/12;
                        varmp = 2.5/12;
                        metOp = 30.3/12;
                        metAdmFin = 12/12;

                     break;

                     case 3:
                         vari = 27.72/12;    
                         varmp = 3.75/12;
                         metOp = 45.45/12;
                         metAdmFin = 18/12;


                     break;

                     case 4:
                         vari = 36.96/12;
                         varmp =  5/12; 
                         metOp = 60.6/12; 
                         metAdmFin = 24/12;

                     break;


                     case 5:
                         vari = 46.2/12; 
                         varmp = 6.25/12;
                         metOp = 75.75/12;
                         metAdmFin = 30/12;

                     break;

                     case 6:
                         vari = 55.44/12;
                         varmp =  7.5/12;
                         metOp =  90.9/12; 
                         metAdmFin = 36/12;

                     break;

                     case 7:
                         vari = 64.68/12;
                         varmp = 8.75/12;
                         metOp = 106.05/12;
                         metAdmFin = 42/12;

                     break;

                     case 8:
                          vari = 73.92/12;//agosto 
                          varmp =  10/12;
                          metOp = 121.2/12;
                          metAdmFin = 48/12;

                     break;


                     case 9:
                         vari = 83.16/12;  
                         varmp =  11.25/12; 
                         metOp = 136.35/12;
                         metAdmFin = 54/12;

                     break;

                     case 10:
                         vari = 92.4/12;  
                         varmp = 12.5/12; 
                         metOp = 151.5/12;
                         metAdmFin = 60/12;

                     break;

                     case 11:
                        vari = 101.64/12;
                        varmp = 13.75/12;
                        metOp = 166.65/12;
                        metAdmFin = 66/12;

                     break;

                     case 12:
                        vari = 110.88/12;  
                        varmp = 15/12;
                        metOp = 181.8/12;
                        metAdmFin = 72/12;

                     break;
              

                }

   $('#dat_x_meta_corporativa').val(vari);

   $('#dat_x_meta_pesac').val(varmp);

   $('#dat_x_iia_meta_operaciones').val(metOp);


    $('#dat_x_meta_adm_finanza').val(metAdmFin);

   


   
}

function sp4Formula4()
{
     // alert($('#dat_x_nivel_severidad').val());
      var CGP = 1;//ID DE LA BASE DE DATOS
           switch ($('#dat_x_nivel_severidad').val()) 
                 {
                     case 'BAJO':
                      //alert("bajp = HAY GCP ="+$('#sel_f_dg_gv_3y').val());
                        if($('#sel_f_dg_gv_3y').val() == CGP)//GCP
                          {
                            $('#dat_x_iia_unidad_pesca').val(2); let op = 2/8;
                            $('#dat_x_iia_corporativo_pesca').val(op);
                            $('#dat_x_iia_adm_finanza').val(2); 
                          }  
                       else{ $('#dat_x_iia_unidad_pesca').val(0);$('#dat_x_iia_adm_finanza').val(0);}


                     break;

                     case 'MEDIO':
                          if($('#sel_f_dg_gv_3y').val() == CGP)//GCP
                          {
                            $('#dat_x_iia_unidad_pesca').val(5); let op =5/8;
                            $('#dat_x_iia_corporativo_pesca').val(op);
                            $('#dat_x_iia_adm_finanza').val(5);
                          }  
                          else{ $('#dat_x_iia_unidad_pesca').val(0); $('#dat_x_iia_adm_finanza').val(0);}
                     break;
                    

                     case 'ALTO':
                         if($('#sel_f_dg_gv_3y').val() == CGP)//GCP
                          {
                            $('#dat_x_iia_unidad_pesca').val(10); let op = 10/8;
                            $('#dat_x_iia_corporativo_pesca').val(op);
                            $('#dat_x_iia_adm_finanza').val(10);
                          } 
                          else{ $('#dat_x_iia_unidad_pesca').val(0); $('#dat_x_iia_adm_finanza').val(0);}
                     break;
                     

                     case 'CRITICO':
                         if($('#sel_f_dg_gv_3y').val() == CGP)//GCP
                          {
                             $('#dat_x_iia_unidad_pesca').val(20); let op = 20/8;
                             $('#dat_x_iia_corporativo_pesca').val(op);
                             $('#dat_x_iia_adm_finanza').val(20);
                          }  
                          else{ $('#dat_x_iia_unidad_pesca').val(0); $('#dat_x_iia_adm_finanza').val(0);}
                     break;

                     default:
                            $('#dat_x_iia_unidad_pesca').val(0);
                            $('#dat_x_iia_adm_finanza').val(0);
                     break;
                 }

        var op1 = $('#dat_x_iia_adm_finanza').val();

        if(op1 > 0){op1 = op1/4;}

         $('#dat_x_iia_corp_adm_finanza').val(op1);

}


function sp4Formula5()
{

    var p1 = 0;
    var p2 = 0;
    p1 = $('#dat_x_num_colaboradores').val();
    p2 = $('#dat_x_num_horas').val();
    
    var sal = p1*p2*9;
    
    
     $('#dat_x_costo_mo').val(sal);
    
}


function sp4Formula6()
{

    var p1 = 0;
    var p2 = 0;
    p1 = $('#dat_x_num_colaborador_2').val();
    p2 = $('#dat_x_num_hora_2').val();
    
    var sal = p1*p2*9;
    
    
     $('#dat_x_costo_mo_s').val(sal);
    
}


function sp4Formula7()
{

    var p1 = 0;
    var p2 = 0;
    p1 = $('#dat_x_cant_producto').val();
    p2 = $('#dat_x_costo_producto').val();
    
    var sal = p1*p2;
    
    
     $('#dat_x_costo_producto_s').val(sal);
    
}

function sp4Formula8()
{

    var p1 = 0;
    var p2 = 0;
    var p3 = 0;
    var p4 = 0;
    var p5 = 0;
    var p6 = 0;

    p1 = $('#dat_x_costo_mo').val(); p1 = p1*1;
    p2 = $('#dat_x_costo_mo_s').val(); p2 = p2*1;

    p3 = $('#dat_x_costo_producto_s').val(); p3 = p3*1;
    p4 = $('#dat_x_costo_materiales_s').val(); p4 = p4*1;


    p5 = $('#dat_x_costo_servicio_s2').val(); p5 = p5*1;
    p6 = $('#dat_x_costo_multas_s').val(); p6 = p6*1;
    p7 = $('#dat_x_otros').val(); p7 = p7*1;



    
    var sal1 = p1+p2+p3+p3+p5+p6+p7;
    var sal2 = sal1/3.6;
    
     $('#dat_x_costo_total_s').val(sal1);

      $('#dat_x_costo_total_dolar').val(sal2);
    
}



function sp4Formula9()
{

    var p1 = 0;
    var p2 = 0;
    var CONSST = 4300;
    var CONSST2 = 3.38;
    p1 = $('#dat_x_oefa_uit').val(); p1 = p1*1;
    var sal1 = p1*CONSST;
    var sal2 = sal1/CONSST2;
    
       $('#dat_x_oefa_s').val(sal1);

      $('#dat_x_oefa_usd').val(sal2);
}


function sp4Formula10()
{

    var p1 = 0;
    var p2 = 0;
    var CONSST = 4300;
    var CONSST2 = 3.38;
    p1 = $('#dat_x_dicapi_uit').val(); p1 = p1*1;
    var sal1 = p1*CONSST;
    var sal2 = sal1/CONSST2;
    
       $('#dat_x_dicapi_s').val(sal1);

       $('#dat_x_dicapi_usd').val(sal2);
    
}




var levantCalendar = 0;

function sp4FnVerCalRangoFecha()
{

   levantCalendar = 1;
 $('#modalCalRangoFecha').modal('hide').removeClass('fade');

if($('#sel_f_dg_gv_30').val() == 1)
  {
  
    $('#modalCalRangoFecha').modal('show').addClass('fade');
    $('#Sp3VentanaPlanAnualEditView').modal('hide').removeClass('fade');
    if(verCalendario == 1)
    {
        //alert($('#modalCalRangoFecha').modal('show').hasClass("fade"))
        $('#txtd_f_dg_gv_037').trigger('click');
        $('#andyDiv').css('visibility', 'visible');
    }
    else
      {
        //alert(screen.width);

        var lleft = screen.width/2;
            //lleft = lleft-170.5;//1024
            //lleft = lleft-245.5;//1366
            //lleft = lleft-245.5;//1440
            //lleft = lleft-245.5;//1600
            //lleft = lleft-245.5;//1680
            lleft = lleft-245.5;//2560

             //lleft = lleft-245.5;//1024
        $('#txtd_f_dg_gv_037').trigger('click');
        $('#andyDiv').css('left', lleft);//1920
        //$('#andyDiv').css('left', '504.5px');//1500
      }

  }


}


function cierraModalFechaDescanso()
 {

     $('#modalCalRangoFecha').modal('hide').removeClass('fade');  
     $('#Sp3VentanaPlanAnualEditView').modal('show').addClass('fade');
     $('#andyDiv').css('visibility', 'hidden');
}








var nDayFreex = '0';
function sp4FnGuardaCalRangoFecha()
{

if(levantCalendar == 0)
{
    $('#txt_f_dg_gv_29').val(nDayFreex);
    cierraModalFechaDescanso();
}
else
{
    verModalError("Por favor Revise","al seleccionar los dias de descanzo, confirme en Aceptar y luego Guardar");
}
 

// $('#modalCalRangoFecha').css('visibility','hidden');
// $('#modalCalRangoFecha').modal('hide')/*.addClass('fade');*/
// $('#modalCalRangoFecha').modal('hide').removeClass('fade');


 //$('#modalCalRangoFecha').css('visibility','hidden'); $('#Sp3VentanaPlanAnualEditView').modal('show').addClass('fade');

}


function sp4FnMuestraFechaRangoEnTxt()
{
    //alert("AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA");

   var dd = $( "#date_range").val();
   var p = dd.split('-');

   var f1 = p[2]+'/'+p[1]+'/'+p[0];

   var f2 = p[5]+'/'+p[4]+'/'+p[3];

   $('#txtd_f_dg_gv_037').val(f1);

   $('#txtd_f_dg_gv_038').val(f2);



   var f1 = p[0].trim()+'/'+p[1].trim()+'/'+p[2].trim();

   var f2 = p[3].trim()+'/'+p[4].trim()+'/'+p[5].trim();

   f1 = f1.toString();
   f2 = f2.toString();
   nDayFreex = fecha_calcula_dias( $('#txtd_f_dg_gv_037').val(),$('#txtd_f_dg_gv_038').val())

   $('#nDiaslb').html(' Ha seleccionado <b>( '+nDayFreex+' ) Días</b> de Descanso Médico')

}



function sp4FnVerCargaAccidente()
{

          // $("#"+'sel_f_dg_gv_45').html(" "); $("#"+'sel_filter_estado_p').css('font-size','13px');
          // let etext = $('#sel_f_dg_gv_42 option:selected').text();
          // $("#"+'sel_f_dg_gv_45').append(`<option value='0' title='${etext}' >${etext}</option>`);
             
}


function sp4FbTiempoTrascurridoInv()
{

 var salida = fecha_calcula_dias($('#txtd_f_dg_gv_37').val(), $('#txtd_f_dg_gv_38').val())
 $('#txt_f_dg_gv_39').val(salida);

}


function sp4FbTiempoTrascurridoInvk()
{

 var salida = fecha_calcula_dias($('#txtd_f_dg_gv_37k').val(), $('#txtd_f_dg_gv_38k').val())
 $('#txt_f_dg_gv_39k').val(salida);

}



function fecha_calcula_dias(f1,f2) //pasando en formato dia/mes/año
{

console.log("legooooooo = "+f1);
console.log("legooooooo = "+f2);


  var af1 = f1.split('/');
  var nf1 = af1[2].trim()+'-'+af1[1].trim()+'-'+af1[0].trim();

  var af2 = f2.split('/');
  var nf2 = af2[2].trim()+'-'+af2[1].trim()+'-'+af2[0].trim();

console.log("volteo = "+nf1);
console.log("volteo = "+nf2);

      nf1 = nf1.toString();
      nf2 = nf2.toString();

  var fecha1x = moment(nf1);
  var fecha2x = moment(nf2);

console.log("moment = "+fecha1x);
console.log("moment = "+fecha2x);

var rr = fecha2x.diff(fecha1x, 'days');
if(rr <0){rr = 0}
  return rr;


}






function fnSp3onchangeObjetivoSubojetitiv2(si_no, id1, id2)
{//------------------------------------- ini   fnSp3onchangeNecAnalisis() -------------------------------------

       if(paObjDG[istAud_DG])
       {
        //alert('id2 = '+id2)
        if((id2 == 'rbtn_no_36')&&(paObjDG[istAud_DG].a.InformeInvestigacion == 0)) // o sea esta pasando de quue no hay a que hay
            {
                
                    var f = new Date();
                    var m = f.getMonth()+1; if(m < 10){m = '0'+m;}
                    var fechaActualg = f.getDate() + "/" + m + "/" + f.getFullYear();
                    $('#txtd_f_dg_gv_37').val(fechaActualg);
                    $('#txtd_f_dg_gv_38').val(fechaActualg);
                    sp4FbTiempoTrascurridoInv();
                    //alert("PONIENDO FECHA POR PRIMERA VEZ"+fechaActualg);
                    
                    m = m-1;
                    $("#txtd_f_dg_gv_38").datetimepicker({
                                            timepicker:false,
                                            format:'d/m/Y',
                                            minDate: new Date(f.getFullYear(), m, f.getDate(), 8, 30),
                                            maxDate: new Date(2032, 01, 01, 12, 0)
                                            });
                                        //*.......................................... */   
   
    

            }
       }
        

    if(si_no == 'si')//si
    {

        //rbtn_si
        //alert('aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa = '+ $('#rbtn_si').attr('src'));
        $('#'+id1).attr('src','./images/iconos/aprobarbien.svg');
        $('#'+id2).attr('src','./images/iconos/aprobarvoid.svg');
        objetivo = 1;
    }
    else//no
    {
        if(si_no == 'no')//si
        {

                $('#'+id2).attr('src','./images/iconos/aprobarbien.svg');
                $('#'+id1).attr('src','./images/iconos/aprobarvoid.svg');
                objetivo = 0;

        }
    }

}//------------------------------------- fini   fnSp3onchangeNecAnalisis() -------------------------------------




function fnSp3onchangeObjetivoSubojetitivo(si_no)
{//------------------------------------- ini   fnSp3onchangeNecAnalisis() -------------------------------------


    if(si_no == 'si')//si
    {

        //rbtn_si
        //alert('aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa = '+ $('#rbtn_si').attr('src'));
        $('#rbtn_si').attr('src','./images/iconos/aprobarbien.svg');
        $('#rbtn_no').attr('src','./images/iconos/aprobarvoid.svg');
        objetivo = 1;
    }
    else//no
    {
        if(si_no == 'no')//si
        {

                $('#rbtn_no').attr('src','./images/iconos/aprobarbien.svg');
                $('#rbtn_si').attr('src','./images/iconos/aprobarvoid.svg');
                objetivo = 0;

        }
    }

}//------------------------------------- fini   fnSp3onchangeNecAnalisis() -------------------------------------
function fnSp3onchangeObjetivoSubojetitivok(si_no)
{//------------------------------------- ini   fnSp3onchangeNecAnalisis() -------------------------------------


    if(si_no == 'si')//si
    {

        //rbtn_si
        //alert('aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa = '+ $('#rbtn_si').attr('src'));
        $('#rbtn_si_35k').attr('src','./images/iconos/aprobarbien.svg');
        $('#rbtn_no_35k').attr('src','./images/iconos/aprobarvoid.svg');
        objetivo = 1;
    }
    else//no
    {
        if(si_no == 'no')//si
        {

                $('#rbtn_no_35k').attr('src','./images/iconos/aprobarbien.svg');
                $('#rbtn_si_35k').attr('src','./images/iconos/aprobarvoid.svg');
                objetivo = 0;

        }
    }

}//------------------------------------- fini   fnSp3onchangeNecAnalisis() -------------------------------------

var nObjSub = 0;
var Objetivos = [];
var SubObjetivos = [];//manejarlo mejor con una clase

// public class Objetivo
// {
//     public  int ObjetivoId
//     public  string Objetivo
//     public int [50] SubObjetivoId
//     public string[50] SubObjetivo

//     public function agregarObjetivo();
// }


var iddd;
var nObj = 0;
var nSobj = 0;
var CodePai = -1;//mantiene el ultimo padre objetivo creado -1 es que no hay ningun objetivo creado


$('#btn_file_control_cambio').click(function(){
    if(paObj[istAud].a.yIdAlerta> 0)
    {
      //alert('no se debe buscar la foto');
    }else{$('#file_control_cambio').trigger('click');}
    

});

$('#btn_file_control_cambio2').click(function(){

    

    if(paObj[istAud].a.yIdAlerta> 0)
    {
      //alert('no se debe buscar la foto');
    }else{$('#file_control_cambio2').trigger('click');}

});


//ANDY LECCIONES APRENDIDAS

$('#btn_file_control_cambio_la').click(function(){
    // if(paObj[istAud].a.yIdAlerta> 0)
    // {
    //   //alert('no se debe buscar la foto');
    // }else{
    //     $('#file_control_cambio_la').trigger('click');
    //    }
    $('#file_control_cambio_la').trigger('click');

});


$('#btn_file_control_cambio_la2').click(function(){
    // if(paObj[istAud].a.yIdAlerta> 0)
    // {
    //   //alert('no se debe buscar la foto');
    // }else{
    //     $('#file_control_cambio_la').trigger('click');
    //    }
    $('#file_control_cambio_la2').trigger('click');

});



$('#btn_file_control_cambio_la3').click(function(){
    // if(paObj[istAud].a.yIdAlerta> 0)
    // {
    //   //alert('no se debe buscar la foto');
    // }else{
    //     $('#file_control_cambio_la').trigger('click');
    //    }
    $('#file_control_cambio_la3').trigger('click');

});






function sp4FnModificarGuardarLeccion() 
{
  
     $('#modalLeccionesAprendidas').modal('hide').removeClass('fade'); 
     $('#Sp4ConfirmaGuardarLeccionAprendida').modal('show').addClass('fade'); 

}























function sp4FnModificarGuardarLeccionConfirmado() 
{
  
 $("#btnConfirmarEvidencia_la").attr("disabled",true);//btnConfirmarEvidencia btnConfirmarEvidencia  
 $("#btnCancelarEvidencia_la").attr("disabled",true);

 $('#btnConfirmarEvidencia_la').html('Guardando..');



     //solo despues de guardar
    

     
     //alert('idLeccionBD = '+istLA);
     let IdTipoEvento_ =  $("#"+'dat_la_tipo').val();
     let zede = $("#"+'dat_la_sede').val();
     let fescha =  $("#"+'dat_la_fecha').val();
     let ffrase_c = $("#"+'dat_la_frase').val();
     let descripp = $("#"+'dat_la_descripcion').val();
     let potenciall = $("#"+'dat_la_potencial').val();
     let lesionDannio = $("#"+'dat_la_tipo_lesion').val();
     let contaminant = $("#"+'dat_la_impacto_ambiental').val();
     let impactoa =  $("#"+'dat_la_impacto_ambiental2').val();
     let TipoDatoGeneral = 1;


      if(paObj[istAud].a.GrupoEvento == 1)
            {
               TipoDatoGeneral = 1;
            }//--------------------------------------------------------------------------


      // Tipos de Incidentes del Grupo 2 (Accidente Ambiente-1, Incidente Ambiental-2)
            if(paObj[istAud].a.GrupoEvento == 2)
            {
               TipoDatoGeneral = 2;

            }//--------------------------------------------------------------------------

      // Tipos de Incidentes del Grupo 3 (Accidente Con Daños Materiales-3, Accidente de Seg Procesos -4 )
            if(paObj[istAud].a.GrupoEvento == 3)
            {
               TipoDatoGeneral = 3;
            }//------------


      var body = {
                "Id1": istLA,
                "AccionBD":3,// 3 MODIFICAR APP
                "IdTipoEvento_":IdTipoEvento_,
                "IdIncidente1":istAud,
                "IdSede":zede, 
                "Fecha": "2021-06-07",
                "FraseCorta":ffrase_c, 
                "Descripcion":descripp,
                "Codigo":"AAA-45454",
                "TipoDatoGeneral":TipoDatoGeneral,//pendiente aqui es donde debemos decir si es ambiental2, material3, personal1
                "Potencial":potenciall,   
                "TipoLesionDanio":lesionDannio,
                "Mortal":0,     
                "Create_By":"no editar",
                "Create_Date":"2021-07-04 15:15:18.270", 
                "B_Contaminante":contaminant,
                "B_Impacto_Ambiental":impactoa
               }

         


                console.log('enviando........r:', body)

                var url = apiUrlssoma+ "/api/Post-LeccionAprendida?code=3SZLZvJm1g4qEdObbrPAWiDaiGa6EFKE9RFyIN1Q5osMz6ozxWX/xQ==&httpmethod=post";

                 console.log('urlr:', url)

                        var headers ={
                        "apikey":constantes.apiKey,
                        "Content-Type": "application/json",
                        }

                        $.ajax({
                            method: 'POST',
                            url:  url,
                            headers:headers,
                            data: JSON.stringify(body),
                            crossDomain: true,
                            dataType: "json",
                        }).done(function (data) {

                            console.log('despues modificar',data);
                            if(data.Id > 0)
                            {
                                
                                hideLoading();
                                //$("#btnConfirmarEvidencia").attr("disabled",true);
                                

                                  
                                 $('#Sp4ConfirmaGuardarLeccionAprendida').modal('hide').removeClass('fade'); 
                                 $('#Sp3VentanaPruebas3_la').modal('show').addClass('fade');

                                 $("#btnConfirmarEvidencia_la").attr("disabled",false);//btnConfirmarEvidencia btnConfirmarEvidencia  
                                 $("#btnConfirmarEvidencia_la").attr("disabled",false);
                                 $('#btnConfirmarEvidencia_la').html('Confirmar');

                            }

                            //fnEnviarInformeAuditoriaOk()

                        })
                        .fail(function( jqXHR, textStatus, errorThrown ) {

                            verModalError('Al Modificar el Incidente', 'Intente Nuevamente');
                            // $("#btGuardarModificar2").html("<b>Guardar</b>")
                            // $("#btGuardarModificar2").attr("disabled",false);

                               $("#sp4BtModificarGuardar1").attr("disabled",true);
                               $('#sp4BtModificarGuardar1').html('Modificar');
                        })
                        .always(function( jqXHR, textStatus, errorThrown ) {

                        });





}


























function sp4FnCancelarGuardarLeccion()   
{

    //limpiar formulario
    $('#modalLeccionesAprendidas').modal('hide').removeClass('fade');
}























function fnSp3agregaObjetivoSubojetivo(tipo, objjt,Code, CodePadre, nAct, Id)
{//------------------------------------- ini   fnSp3agregaObjetivoSubojetivo() -------------------------------------

    var yeah = $('#sel_anioeNew').val();

    if(parseInt(yeah) != 0 )
    {




        if(Id != 0)
                {//###############################################################################################################################################################################



                      //alert("=============["+$('#txt_obj_subobj').val()+"]==============");
                      var padrex;

                    if(objjt != "")
                    {
                        var nameobj = objjt;
                        var Id2 = '';
                        if(tipo == 1)
                        {console.log('cargar objetivos');}else{if(tipo == 0)console.log('cargar subbjetivos');}

                        var btNew = '';
                        var o = paObj[istAud].a.Objetivos.length;
                        var color = '#000000';
                        if(tipo == 1)
                        {
                            nObj++;
                            objjt = "Objetivo "+Code+" : "+objjt;
                            // Objetivos[Objetivos.length] = $('#txt_obj_subobj').val();
                            // var objjt = "Objetivo "+Objetivos.length+" : "+$('#txt_obj_subobj').val();
                            iddd = 'obj_'+nObj;//+"_"+nSobj;
                            color = '#000000';
                            Id2 = Id;
                            racimoAbre =  ` <div id='racimo_${nObj}'>`;
                            racimoCierra =  ` </div>`;
                            padrex = undefined;
                        }
                        else{
                            if(tipo == 0) //subobjetivos
                            {
                                // SubObjetivos[SubObjetivos.length] = $('#txt_obj_subobj').val();
                                // var objjt = "&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  Subobjetivo "+Objetivos.length+"."+SubObjetivos.length+" : "+$('#txt_obj_subobj').val();
                                // iddd = 'item'+Objetivos.length+"_"+SubObjetivos.length;
                                objjt = "&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; SubObjetivo "+Code+"."+CodePadre+" : "+objjt;
                                iddd = 'subobj_'+nObj+"_"+nSobj;
                                color = '#5c5c5c';
                                racimoAbre =  ` `;
                                racimoCierra =  ` `;
                                padrex = nObj;
                                Id2 = Id+'_'+padrex;
                                nSobj++;

                            }
                        }

                    $('#c1TabGenyCol1').html("Objetivos ( "+nObj+" )/ Subobjetivos ( "+nSobj+" ) ");

                        var html1 = '     ';


                        if(nObjSub == 0)
                        {
                            $('#body-tabla-list-EvalAud1').html("     "); nObjSub = 1;
                        }


                            html1 += `
                            ${racimoAbre}
                            <div id = '${iddd}'  class="item-tabla p-2" style="z-index: 1;display:relative;  padding: 0px !important; margin: 10px 8px 0px !important; width: 1223px !important;">
                            <div class="row m-0 justify-content-between align-items-center tbody_trainning">
                                <div class="col-12 text-center" style="font-size: 15px; padding: 4px !important; ">
                                    <div class="row">
                                        <table width = "100%" border="0">
                                        <tr >
                                            <td width = "55%" align="center"><div id="c1TabGeny" onclick='fnSp3SeleccionaFilaObjSub("${iddd}",${nObj},${nSobj})' class="text-left lbCabezaTabla1" style='margin: 0px 0px 0px 13px !important; font-size:15px !important; color:${color}'  >
                                            <div id="name_tag_obj_${Id2}">${objjt}</div>
                                            <div id="capa_name_obj_${Id2}"  style="display:none; ">
                                            <input type="text"  id="hdd_name_obj_${Id2}" class="text-justify textarea-fecha2 autocompletecollaborator" style="width: 70% !important;" value="${nameobj}">
                                            <div style="width: 10%; text-align: center;"><button type='button' title='Editar del Plan Anual' onclick="fnSp3EditarObj(${Id},${padrex})"   class='btn-circle btn_read border-0 btn-footer-active' style='background-color:#58c25d !important;' id='btn_verPlanAnual${Id}'>
                                            <img src='./images/iconos/img-check-mark-1.svg' class='ojo-1'  >
                                            </button></div>
                                            <div style="width: 10%; text-align: center;"><button type='button' title='Editar del Plan Anual' onclick="fnSp3NoEditarObj(${Id},${padrex})"   class='btn-circle btn_read border-0' style='background-color:#58c25d !important;' id='btn_verPlanAnual${Id}'>
                                            <img src='./images/iconos/delete.svg' class='ojo-1'  >
                                            </button></div>                                            </div></div></td>
                                            <td width = "14%" align="center"><div id="nAct_${iddd}" class="text-left lbCabezaTabla1" style='margin-left:50px;'  >${nAct}</div></td>


                                            <td width = "10%" align="center"><div id="c12TabGeny" class="text-center lbCabezaTabla1"  >
                                                <button type='button' title='Actividades del Objetivo' onclick="fnSp3NuevasActividadesObjetivoPlan(${Id},${padrex},${tipo})"   class='btn-circle btn_read border-0' style='background-color:#ffb72b !important;' id='btn_ActividadPlan${Id}'>
                                                    <img src='./images/iconos/folder1.svg' class='ojo-1'  >
                                                </button>

                                            </td>

                                            <td width = "10%" align="center"><div id="c12TabGeny" class="text-center lbCabezaTabla1"  >
                                                    <button type='button' title='Editar del Plan Anual' onclick="fnSp3EditarPlanAnual(${Id},${padrex})"   class='btn-circle btn_read border-0' style='background-color:#58c25d !important;' id='btn_verPlanAnual${Id}'>
                                                    <img src='./images/iconos/edit_1.svg' class='ojo-1'  >
                                                    </button>

                                            </td>

                                            <td width = "9%" align="center"><div id="c12TabGeny" class="text-center lbCabezaTabla1"  >
                                                <button type='button' title='Editar del Hallazgo' onmouseup="fnSp3eliminarObjetivoSubojetivo('${iddd}')"   class='btn-circle btn_read border-0' style='background-color:#ff6767 !important;' id='btn_verEliminarPlan${Id}'>
                                                    <img src='./images/iconos/delete.svg' class='ojo-1'  >
                                                </button>
                                        </td>

                                        <td width = "2%" align="center"><div id="c12TabGeny" class="text-center lbCabezaTabla1"  >
                                                <img src='./images/marca_fila.png' class='ojo-1' style='margin-left:-8px;'   onclick='fnSp3SeleccionaFilaObjSub("${iddd}",${nObj},${nSobj})'>
                                        </td>


                                        </tr>



                                        </table>


                                        </div>
                                    </div>
                                </div>
                            </div>
                        ${racimoCierra}

                            `;

                            if(objetivo == 0)
                            {

                                //alert('MI PADRE ES = #obj_'+nObj )
                                var k = nObj;
                                $('#racimo_'+k).append(html1);
                            }
                            else{
                                if(objetivo == 1) //subobjetivos
                                {
                                    $('#body-tabla-list-EvalAud1').append(html1);
                                }
                            }


                    //$('#body-tabla-list-EvalAud1').append(html1);
                    $('#txt_obj_subobj').val("");



                    }
                }//###############################################################################################################################################################################
                else
                {//###############################################fnSp3agregaObjetivoSubojetivo(tipo, objjt,Code, CodePadre, nAct, Id)#########################################################################################################################






                        var racimoAbre;
                        var racimoCierra;

                        var fecha = new Date();fecha.getFullYear()
                        var p = String();
                         p = p.substr(2,4);

                        var hoy = new Date();

                        if(objNewPA.Id === undefined)
                        {
                            objNewPA.Code =   $("#sel_programaNew option:selected").attr("title")+p+'001'  //: "-PASST-TSUP -21- 001" debe generarse en backend
                            objNewPA.Code_Gerencia  = $('#sel_gerenciaNew').val();//: "GayF"//: "GayF"
                            objNewPA.Color_Plan;//: "#000000"
                            objNewPA.Equipo;//: "Equipo1"
                            objNewPA.EquipoId =  $('#sel_equipoNew').val();
                            //objNewPA.Estado_Plan;//: "Creado"
                            objNewPA.Estado_PlanId = 1;//: 1
                            objNewPA.Fecha_Creacion = hoy.getDate()+'/'+(hoy.getMonth()+1)+'/'+hoy.getFullYear()
                            //objNewPA.Gerencia;//: "Gerencia de adminstración y finanzas"
                            objNewPA.GerenciaId = $('#sel_gerenciaNew').val();
                            objNewPA.Id = 0;//: 1
                            objNewPA.Num_Objetivos;//: 5
                            objNewPA.Objetivos;//: (5) [{…}, {…}, {…}, {…}, {…}]
                            //objNewPA.Programa;//: "PASST"
                            objNewPA.ProgramaId =  $('#sel_programaNew').val();//: 1
                            //objNewPA.Sede;//: "Callao Norte"
                            objNewPA.SedeId =  $('#sel_sedeNew').val();//: 1
                            objNewPA.Year_Plan = $('#sel_anioeNew').val();
                            objNewPA.accion = 'nuevo'; //indica si es un nuevo Plan o es una modificación del Plan

                        }

                        var btNew = '';
                        Id = 0;
                        nAct = 0;

                        var objjt = $('#txt_obj_subobj').val();
                    if(objjt != "")
                    {//***************************************************************************************** */
                        var nameobj = objjt;
                        var Id2 = '';


                      //VAMOS A VALIDAR QUE SIEMPRE QUE EXISTA UN OBJETIVO AL CUAL SE LE VAN A GREGAR SUBOBJETIVOS
                       //alert('en que objetivo vamos a meter subobjetos? = '+idfilaSelecta)
                      //VAMOS A VALIDAR QUE SIEMPRE QUE EXISTA UN OBJETIVO AL CUAL SE LE VAN A GREGAR SUBOBJETIVOS
                      //var filaSelecta = '';
                      //var idfilaSelecta = 0;
                        //var o = paObj[istAud].a.Objetivos.length;
                        var color = '#000000';
                                    if(objetivo === 1)
                                    {

                                        // Objetivos[Objetivos.length] = $('#txt_obj_subobj').val();
                                        // var objjt = "Objetivo "+Objetivos.length+" : "+$('#txt_obj_subobj').val();
                                        //iddd = 'obj_'+nObj+"_"+nSobj;


                                      /* PENDIENTE= Validar con Andy
                                      *  if(idfilaSelecta != -1)
                                      *  {nObj = idfilaSelecta;}else{nObj++;}
                                      * */
                                     nObj++;




                                        //si es un objetivo creamos un objeto o subobjetivo
                                        var iu = objNewPA.Objetivos.length

                                        //alert('seleccionado('+CodePai+') ==? '+iu);

                                        objNewPA.Objetivos[iu] = new Objetivo();//this.Objetivo_Name;/
                                        objNewPA.Objetivos[iu].Objetivo_Name = $('#txt_obj_subobj').val();
                                        objNewPA.Objetivos[iu].Id = 0;
                                       // objNewPA.Objetivos[iu].Id = iu;

                                        //console.log('OBJETIVOS**', objNewPA.Objetivos);
                                        Code = iu+1;

                                        //alert(objNewPA.Objetivos.length);
                                        objjt = "Objetivo "+Code+" : "+objjt;

                                        nObj = Code;
                                        iddd = 'obj_'+nObj;
                                        var nObj1 = nObj;
                                        color = '#000000';
                                       // var idu = objNewPA.Objetivos[iu].Id;
                                        var idu = iu;
                                        Id2 = iu;
                                        racimoAbre =  ` <div id='racimo_${nObj}'>`;
                                        racimoCierra =  ` </div>`;
                                        CodePai = nObj;
                                    }
                                    else{

                                        if((objetivo == 0)&&(CodePai == -1)){ verModalError("Por favor Revise","Debe Agregar primero un objetivo al Plan Anual")/*fnSp3onchangeObjetivoSubojetitivo('si');*/ }
                                        if((objetivo == 0)&&(CodePai != -1)) //subobjetivos
                                        {
                                            // SubObjetivos[SubObjetivos.length] = $('#txt_obj_subobj').val();
                                            // var objjt = "&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  Subobjetivo "+Objetivos.length+"."+SubObjetivos.length+" : "+$('#txt_obj_subobj').val();
                                            // iddd = 'item'+Objetivos.length+"_"+SubObjetivos.length;
                                            //objjt = "&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; SubObjetivo "+Code+"."+CodePadre+" : "+objjt;
                                            //iddd = 'subobj_'+nObj+"_"+nSobj;
                                            nSobj++;
                                            var kk;
                                            var kk1;
                                            if(idfilaSelecta != -1)
                                                {kk1 = idfilaSelecta;}else{kk1 = objNewPA.Objetivos.length;}


                                            var nObj1 = kk1;//CodePai-1;





                                           var kk = kk1-1;
                                            //var kk = kk1;
                                            var Cood = kk+1;
                                            var nSobj1; //var nns = nSobj-1;
                                            color = '#5c5c5c';
                                            console.log(kk,objNewPA.Objetivos)

                                            var ju = objNewPA.Objetivos[kk].SubObjetivos.length;//SubObjetivos
                                            nSobj1 = ju+1;
                                            objNewPA.Objetivos[kk].SubObjetivos[ju] = new SubObjetivo();//this.Objetivo_Name;/
                                            objNewPA.Objetivos[kk].SubObjetivos[ju].SubObjetivo_Name = $('#txt_obj_subobj').val();
                                            objNewPA.Objetivos[kk].SubObjetivos[ju].Id = 0;
                                           // objNewPA.Objetivos[kk].SubObjetivos[ju].Id = ju;

                                           //var idu = objNewPA.Objetivos[kk].SubObjetivos[ju].Id;
                                           var idu = nSobj1;
                                           iddd = 'subobj_'+nObj1+"_"+nSobj1;
                                            CodePadre = Cood;


                                            objjt = "&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; SubObjetivo "+CodePadre+"."+nSobj1+" : "+objjt;
                                            //iddd = 'item'+Code+"_"+CodePadre;
                                            color = '#5c5c5c';
                                            racimoAbre =  ` `;
                                            racimoCierra =  ` `;
                                            CodePai = nObj;
                                            Id2 = ju+'_'+kk;

                                        }
                                    }



                        var html1 = '     ';
                            html1 += `
                                    ${racimoAbre}
                                    <div id = '${iddd}'  class="item-tabla p-2" style="z-index: 1;display:relative;  padding: 0px !important; margin: 10px 8px 0px !important; width: 1223px !important;">
                                    <div class="row m-0 justify-content-between align-items-center tbody_trainning">
                                        <div class="col-12 text-center" style="font-size: 15px; padding: 4px !important; ">
                                            <div class="row">
                                                <table width = "100%" border="0">
                                                <tr >
                                                    <td width = "55%" align="center"><div id="c1TabGeny" onclick='fnSp3SeleccionaFilaObjSub("${iddd}",${nObj1},${nSobj1})' class="text-left lbCabezaTabla1" style='margin: 0px 0px 0px 13px !important; font-size:15px !important; color:${color};'  >
                                                    <div id="name_tag_obj_${Id2}">${objjt}</div>
                                                    <div id="capa_name_obj_${Id2}"  style="display:none; ">
                                                    <input type="text"  id="hdd_name_obj_${Id2}" class="text-justify textarea-fecha2 autocompletecollaborator" style="width: 70% !important;" value="${nameobj}">
                                                    <div style="width: 10%; text-align: center;"><button type='button' title='Editar del Plan Anual' onclick="fnSp3EditarObj(${idu},${kk})"   class='btn-circle btn_read border-0 btn-footer-active' style='background-color:#58c25d !important;' id='btn_verPlanAnual${Id}'>
                                                    <img src='./images/iconos/img-check-mark-1.svg' class='ojo-1'  >
                                                    </button></div>
                                                    <div style="width: 10%; text-align: center;"><button type='button' title='Editar del Plan Anual' onclick="fnSp3NoEditarObj(${idu},${kk})"   class='btn-circle btn_read border-0' style='background-color:#58c25d !important;' id='btn_verPlanAnual${Id}'>
                                                    <img src='./images/iconos/delete.svg' class='ojo-1'  >
                                                    </button></div>                                            </div></div></td>
                                                    <td width = "14%" align="center"><div id="nAct_${iddd}" class="text-left lbCabezaTabla1" style='margin-left:50px;'  >${nAct}</div></td>


                                                    <td width = "10%" align="center"><div id="c12TabGeny" class="text-center lbCabezaTabla1"  >
                                                        <button type='button' title='Actividades del Objetivo' onclick="fnSp3NuevasActividadesObjetivoPlan(${idu},${kk},${objetivo})"   class='btn-circle btn_read border-0' style='background-color:#ffb72b !important;' id='btn_ActividadPlans${idu}'>
                                                            <img src='./images/iconos/folder1.svg' class='ojo-1'  >
                                                        </button>

                                                    </td>

                                                    <td width = "10%" align="center"><div id="c12TabGeny" class="text-center lbCabezaTabla1"  >
                                                            <button type='button' title='Editar del Plan Anual' onclick="fnSp3EditarPlanAnual(${idu},${kk})"   class='btn-circle btn_read border-0' style='background-color:#58c25d !important;' id='btn_verPlanAnuals${Id}'>
                                                            <img src='./images/iconos/edit_1.svg' class='ojo-1'  >
                                                            </button>

                                                    </td>

                                                    <td width = "9%" align="center"><div id="c12TabGeny" class="text-center lbCabezaTabla1"  >
                                                        <button type='button' title='Editar del Hallazgo' onmouseup="fnSp3eliminarObjetivoSubojetivo('${iddd}')"   class='btn-circle btn_read border-0' style='background-color:#ff6767 !important;' id='btn_verEliminarPlans${idu}'>
                                                            <img src='./images/iconos/delete.svg' class='ojo-1'  >
                                                        </button>
                                                </td>

                                                <td width = "2%" align="center"><div id="c12TabGeny" class="text-center lbCabezaTabla1"  >
                                                <img src='./images/marca_fila.png' style='margin-left:-8px;' class='ojo-1' onclick='fnSp3SeleccionaFilaObjSub("${iddd}",${nObj1},${nSobj1})'  >
                                                </td>


                                                </tr>



                                                </table>


                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                           ${racimoCierra}
                                    `;

                                   // alert(objetivo);
                                    if(objetivo == 0)//subobjetivos
                                    {



                                        if(idfilaSelecta != -1)
                                                {

                                              //      alert('MI PADRExxx ES = #obj_'+idfilaSelecta )
                                                    var k = idfilaSelecta;
                                                    $('#racimo_'+k).append(html1);
                                                }
                                        else{
                                              //  alert('MI PADRE ES = #obj_'+nObj )
                                                var k = objNewPA.Objetivos.length;
                                                $('#racimo_'+k).append(html1);
                                            }

                                    }
                                    else{
                                        if(objetivo == 1) //objetivos
                                        {
                                            $('#body-tabla-list-EvalAud1').append(html1);
                                        }
                                    }

                                    //$('#body-tabla-list-EvalAud1').append(html1);
                                    $('#txt_obj_subobj').val("");




                         $('#c1TabGenyCol1').html("Objetivos ( "+objNewPA.Objetivos.length+" )/ Subobjetivos ( "+nSobj+" ) ");


                         //console.log('OBJETIVOS**',kk,'-----------', objNewPA.Objetivos);
                         console.log('COMO VA EL PLAN**-----------', objNewPA);


                    }//*************************************************************************************************** */

            }//###############################################################################################################################################################################

        }
        else
        {
            verModalError("Por favor Revise","Debe seleccionar el año del Plan Anual");
            //$('#divf1_frecuencia').css('border-color', '#ff6767');
            document.getElementById('divfanioeNew').style.setProperty('border-color', '#ff6767', 'important');
            $('#sel_anioeNew').focus();
        }





}//------------------------------------- fini   fnSp3agregaObjetivoSubojetivo() -------------------------------------


var filaSelecta = '';
var idfilaSelecta = -1;
function fnSp3SeleccionaFilaObjSub(idd, no, nso)
{
    if( filaSelecta === '')
    {
        $('#'+idd).css('border-color','#34559C');
        filaSelecta = idd;
    }
    else
    {
        $('#'+filaSelecta).css('border-color','#c3c3c3');
        $('#'+idd).css('border-color','#34559C');
        filaSelecta = idd;
    }
    //console.clear();
    console.log('DATOS SELECCIONADOS='+idd+'  ,'+no+',   '+nso);
    idfilaSelecta= no;

}

 function fnSp3eliminarObjetivoSubojetivo(idhh)
{//------------------------------------- ini   fnSp3eliminarObjetivoSubojetivo() -------------------------------------
    swal({
        title: "Eliminar",
        text: "¿Desea eliminar el objetivo?",
        type: "info",
        showCancelButton: true,
        confirmButtonClass: "btn-danger btn-sm btn-rounded rounded",
        cancelButtonClass: "btn-success btn-sm btn-rounded rounded",
        confirmButtonText: "Si",
        cancelButtonText: "No",
        closeOnConfirm: true,
        showLoaderOnConfirm: false
      },function(){

        $('#body-tabla-list-EvalAud1').html('');
        nSobj=0;
    //console.table(objNewPA.Objetivos)
     var check_type = idhh.split("_");
     if(check_type[0]==="obj"){
         var pos = (check_type[1]-1)
         if(objNewPA.Objetivos[pos].Id != 0)
         {
            var checkDel =  fnSP3EliminarItemsPlanAnual(1,objNewPA.Objetivos[pos].Id)
            console.log(checkDel)
            objNewPA.Objetivos.splice(pos,1)
            $('#racimo_'+check_type[1]).remove();

         }else{
         objNewPA.Objetivos.splice(pos,1)
        $('#racimo_'+check_type[1]).remove();
         }


     }else{
        var posObj = (check_type[1]-1)
        var posSubObj = (check_type[2]-1)
        if(objNewPA.Objetivos[posObj].SubObjetivos[posSubObj].Id != 0)
        {
            var checkDel =  fnSP3EliminarItemsPlanAnual(1,objNewPA.Objetivos[posObj].SubObjetivos[posSubObj].Id)
            console.log(checkDel)
            objNewPA.Objetivos[posObj].SubObjetivos.splice(posSubObj,1)
            $('#'+idhh).remove();

        }else{
            objNewPA.Objetivos[posObj].SubObjetivos.splice(posSubObj,1)
            $('#'+idhh).remove();

        }


       // nSobj--;
     }


    console.log(objNewPA.Objetivos)

     //if(check_type[0]==="obj"){
                    var pos = (check_type[1]-1)
                        if(objNewPA.Objetivos.length>0){
                            for (let i = 0; i < objNewPA.Objetivos.length; i++) {
                               // if(i>=pos ){
                              //  objNewPA.Objetivos[i].Id = i ;
                                objNewPA.Objetivos[i].Id = 0 ;
                                //   }
                                console.log("ID OBJETIVO:   "+objNewPA.Objetivos[i].Id)
                                var id = i+1;

                                console.log("111 mando a fnSP3ReordenarObjetivoSubojetivo","ID:"+id)
                                fnSP3ReordenarObjetivoSubojetivo(1,objNewPA.Objetivos[i].Objetivo_Name,objNewPA.Objetivos[i].Code, undefined, objNewPA.Objetivos[i].Actividades.length, id )
                                if(objNewPA.Objetivos[i].SubObjetivos.length>0){
                                    console.log(objNewPA.Objetivos[i].SubObjetivos.length)
                                    for (let j = 0; j < objNewPA.Objetivos[i].SubObjetivos.length; j++) {
                                        if(objNewPA.Objetivos[i].SubObjetivos[j].SubObjetivo_Name != ""){
                                     //   if(j>=posSObj){
                                       // objNewPA.Objetivos[i].SubObjetivos[j].Id = j ;
                                        objNewPA.Objetivos[i].SubObjetivos[j].Id = 0 ;
                                       //  }
                                            var id_=0;
                                         id_ = (j + 1);
                                        console.log("222 mando a fnSP3ReordenarObjetivoSubojetivo","ID:"+id,"SUBID:"+id_)
                                        fnSP3ReordenarObjetivoSubojetivo(1,objNewPA.Objetivos[i].SubObjetivos[j].SubObjetivo_Name,0, id, objNewPA.Objetivos[i].SubObjetivos[j].Actividades.length, id_ )
                                    }
                                }
                            }
                            }
                        }
        // }else{
        //     var posObj = (check_type[1]-1)
        //     var posSObj = (check_type[2]-1)
        //     console.log(objNewPA.Objetivos[posObj].SubObjetivos.length,objNewPA.Objetivos[posObj].SubObjetivos)
        //     if(objNewPA.Objetivos[posObj].SubObjetivos.length>0){
        //         for (let i = 0; i < objNewPA.Objetivos[posObj].SubObjetivos.length; i++) {
        //             if(i>=posSObj){
        //                 objNewPA.Objetivos[posObj].SubObjetivos[i].Id = (objNewPA.Objetivos[posObj].SubObjetivos[i].Id-1) ;
        //             }
        //             var id = (objNewPA.Objetivos[posObj].SubObjetivos[i].Id + 1);
        //             console.log("333 mando a fnSP3ReordenarObjetivoSubojetivo")
        //             fnSP3ReordenarObjetivoSubojetivo(1,objNewPA.Objetivos[posObj].SubObjetivos[i].SubObjetivo_Name,0, check_type[1], objNewPA.Objetivos[posObj].SubObjetivos[i].Actividades.length, id )
        //         }
        //     }
        // }

     $('#c1TabGenyCol1').html("Objetivos ( "+objNewPA.Objetivos.length+" )/ Subobjetivos ( "+nSobj+" ) ");
              });




}//------------------------------------- fini   fnSp3eliminarObjetivoSubojetivo() -------------------------------------


 function fnSP3EliminarItemsPlanAnual(tipo, id) {
    var response = 0;
    $("#preloader").show()

         var created_by = getCookie("vtas_id_hash"+sessionStorage.tabVisitasa);


        url = apiUrlssoma+"/api/Post-Plan-Anual?code=ZnQh7E2Noeiv1emsJPTvXE5l/qClcMIjv3FNePN8XTRfTY5aOqmSAQ==&httpmethod=deleteItem&tipoItem="+tipo+"&idItem="+id+"&created_by="+created_by;

    let headers ={
        "apikey":constantes.apiKey
    }

    $.ajax({
        method: "POST",
        url:  url,
        headers:headers,
        crossDomain: true,
        dataType: "json",
    })
    .done(function(data)
    {
        console.info("data",data)
        // resultado Exitoso
        if(data.resul>0)
        {
            response =1;
           switch (tipo) {
            case 1:
                $('#text_msj_confirm_exito').html('Se Elimin&oacute; el Objetivo con &Eacute;xito')
                   break;
            case 2:
               $('#text_msj_confirm_exito').html('Se Elimin&oacute; la Actividad con &Eacute;xito')
            break;
            case 3:
                $('#text_msj_confirm_exito').html('Se Elimin&oacute; la Tarea con &Eacute;xito')
            break;
           }

            $('#modalExitoCorreccionPlanAnualSp3').modal('show').addClass('fade')
        }else
        {
        verModalError("Lo Sentimos","No Se Pudo Realizar La Operacion.")

        }
    })
    .fail(function( jqXHR, textStatus, errorThrown )
    {
        console.error("fail",textStatus)
        verModalError("Lo Sentimos","No Se Pudo Realizar La Operacion.")
        return 0;

       })
    .always(function( jqXHR, textStatus, errorThrown )
    {
        console.info("always",textStatus)
        $("#preloader").hide()

    });//*/
    return response;
}

function fnSP3ReordenarObjetivoSubojetivo(tipo, objjt,Code, CodePadre, nAct, Id){
//------------------------------------- init   fnSP3ReordenarObjetivoSubojetivo() -------------------------------------

        console.log("fnSP3ReordenarObjetivoSubojetivo", tipo, objjt,Code, CodePadre, nAct, Id)
          var padrex;
        if(objjt != "")
        {
            var nameobj = objjt;

            var pos_act=(Id-1);
            if(CodePadre === 0 )
            {console.log('cargar objetivos');}else{if(CodePadre > 0)console.log('cargar subbjetivos');}

            var btNew = '';
            var Id2 = '';
            var color = '#000000';
            if( CodePadre === undefined)
            {
                objjt = "Objetivo "+Id+" : "+objjt;
                // Objetivos[Objetivos.length] = $('#txt_obj_subobj').val();
                // var objjt = "Objetivo "+Objetivos.length+" : "+$('#txt_obj_subobj').val();
                // if ( document.getElementById( 'obj_'+Id )) {
                //     iddd = 'obj_'+(Id+1);//+"_"+nSobj;
                //     }else{
                //     iddd = 'obj_'+Id;//+"_"+nSobj;
                //     }
                    iddd = 'obj_'+Id;//+"_"+nSobj;
                    Id2 = Id;
                color = '#000000';
                //nObj++;
                racimoAbre =  ` <div id='racimo_${Id}'>`;
                racimoCierra =  ` </div>`;
                padrex = undefined;
            }
            else{
                if(CodePadre => 0) //subobjetivos
                {
                    // SubObjetivos[SubObjetivos.length] = $('#txt_obj_subobj').val();
                    // var objjt = "&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  Subobjetivo "+Objetivos.length+"."+SubObjetivos.length+" : "+$('#txt_obj_subobj').val();
                    // iddd = 'item'+Objetivos.length+"_"+SubObjetivos.length;
                    padrex = (CodePadre-1);
                    objjt = "&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; SubObjetivo "+CodePadre+"."+Id+" : "+objjt;
                    //iddd = 'subobj_'+Id+"_"+nSobj;
                    iddd = 'subobj_'+CodePadre+"_"+Id;
                    color = '#5c5c5c';
                    nSobj++;
                    racimoAbre =  ` `;
                    racimoCierra =  ` `;
                   // padrex = Id;
                   Id2 = Id+'_'+padrex;

                }
            }

         $('#c1TabGenyCol1').html("Objetivos ( "+Id+" )/ Subobjetivos ( "+nSobj+" ) ");

            var html1 = '     ';

            // if(nObjSub == 0)
            // {
            //     $('#body-tabla-list-EvalAud1').html("     "); nObjSub = 1;
            // }



                html1 += `
                ${racimoAbre}
                <div id = '${iddd}'  class="item-tabla p-2" style="z-index: 1;display:relative;  padding: 0px !important; margin: 10px 8px 0px !important; width: 1223px !important;">
                <div class="row m-0 justify-content-between align-items-center tbody_trainning">
                    <div class="col-12 text-center" style="font-size: 15px; padding: 4px !important; ">
                        <div class="row">
                            <table width = "100%" border="0">
                            <tr >
                                <td width = "55%" align="center"><div id="c1TabGeny" onclick='fnSp3SeleccionaFilaObjSub("${iddd}",${Id},${nSobj})' class="text-left lbCabezaTabla1" style='margin: 0px 0px 0px 13px !important; font-size:15px !important; color:${color}'  >
                                <div id="name_tag_obj_${Id2}">${objjt}</div>
                                <div id="capa_name_obj_${Id2}"  style="display:none; ">
                                <input type="text"  id="hdd_name_obj_${Id2}" class="text-justify textarea-fecha2 autocompletecollaborator" style="width: 70% !important;" value="${nameobj}">
                                <div style="width: 10%; text-align: center;"><button type='button' title='Editar del Plan Anual' onclick="fnSp3EditarObj(${Id},${padrex})"   class='btn-circle btn_read border-0 btn-footer-active' style='background-color:#58c25d !important;' id='btn_verPlanAnual${Id}'>
                                <img src='./images/iconos/img-check-mark-1.svg' class='ojo-1'  >
                                </button></div>
                                <div style="width: 10%; text-align: center;"><button type='button' title='Editar del Plan Anual' onclick="fnSp3NoEditarObj(${Id},${padrex})"  class='btn-circle btn_read border-0' style='background-color:#58c25d !important;' id='btn_verPlanAnual${Id}'>
                                <img src='./images/iconos/delete.svg' class='ojo-1'  >
                                </button></div>                                            </div></div></td>
                                <td width = "14%" align="center"><div id="nAct_${iddd}" class="text-left lbCabezaTabla1" style='margin-left:50px;'  >${nAct}</div></td>


                                <td width = "10%" align="center"><div id="c12TabGeny" class="text-center lbCabezaTabla1"  >
                                    <button type='button' title='Actividades del Objetivo' onclick="fnSp3NuevasActividadesObjetivoPlan(${pos_act},${padrex},${tipo})"   class='btn-circle btn_read border-0' style='background-color:#ffb72b !important;' id='btn_ActividadPlan${Id}'>
                                        <img src='./images/iconos/folder1.svg' class='ojo-1'  >
                                    </button>

                                </td>

                                <td width = "10%" align="center"><div id="c12TabGeny" class="text-center lbCabezaTabla1"  >
                                        <button type='button' title='Editar del Plan Anual' onclick="fnSp3EditarPlanAnual(${Id},${padrex})"   class='btn-circle btn_read border-0' style='background-color:#58c25d !important;' id='btn_verPlanAnual${Id}'>
                                        <img src='./images/iconos/edit_1.svg' class='ojo-1'  >
                                        </button>

                                </td>

                                <td width = "9%" align="center"><div id="c12TabGeny" class="text-center lbCabezaTabla1"  >
                                    <button type='button' title='Editar del Hallazgo' onmouseup="fnSp3eliminarObjetivoSubojetivo('${iddd}')"   class='btn-circle btn_read border-0' style='background-color:#ff6767 !important;' id='btn_verEliminarPlan${Id}'>
                                        <img src='./images/iconos/delete.svg' class='ojo-1'  >
                                    </button>
                            </td>

                            <td width = "2%" align="center"><div id="c12TabGeny" class="text-center lbCabezaTabla1"  >
                                    <img src='./images/marca_fila.png' class='ojo-1' style='margin-left:-8px;'   onclick='fnSp3SeleccionaFilaObjSub("${iddd}",${Id},${nSobj})'>
                            </td>


                            </tr>



                            </table>


                            </div>
                        </div>
                    </div>
                </div>
            ${racimoCierra}

                `;

                if(CodePadre === undefined)
                {
                    console.log("soy huerfano")
                    $('#body-tabla-list-EvalAud1').append(html1);

                    //alert('MI PADRE ES = #obj_'+nObj )
                }
                else{
                    if(CodePadre >= 0) //subobjetivos
                    {
                        $('#racimo_'+CodePadre).append(html1);
                    }
                }


          //$('#body-tabla-list-EvalAud1').append(html1);
         $('#txt_obj_subobj').val("");



        }

}
//------------------------------------- finit   fnSP3ReordenarObjetivoSubojetivo() -------------------------------------


function fnSp3NoEditarObj (pos,padre)
{
    if(padre === undefined){
         $("#hdd_name_obj_"+pos).val(objNewPA.Objetivos[pos].Objetivo_Name);
        }else{
        $("#hdd_name_obj_"+pos).val(objNewPA.Objetivos[padre].SubObjetivos[pos].SubObjetivo_Name);
        }
        $('#capa_name_obj_'+pos).removeClass("d-flex justify-content-between align-items-center")
        $('#name_tag_obj_'+pos).show()
        $('#capa_name_obj_'+pos).hide()
}


function fnSp3EditarObj (pos,padre)
{
    if(padre === undefined){
        console.log($("#hdd_name_obj_"+pos).val())
    objNewPA.Objetivos[pos].Objetivo_Name = $("#hdd_name_obj_"+pos).val();
    }else{
    objNewPA.Objetivos[padre].SubObjetivos[pos].SubObjetivo_Name = $("#hdd_name_obj_"+pos+"_"+padre).val();
    }
    $('#capa_name_obj_'+pos+"_"+padre).removeClass("d-flex justify-content-between align-items-center")
    $('#name_tag_obj_'+pos+"_"+padre).show()
    $('#capa_name_obj_'+pos+"_"+padre).hide()

    if(objNewPA.Objetivos.length>0){
        $("#body-tabla-list-EvalAud1").html("");

        for (let i = 0; i < objNewPA.Objetivos.length; i++) {
            console.log("ID OBJETIVO:   "+objNewPA.Objetivos[i].Id)


            fnSP3ReordenarObjetivoSubojetivoEditar(1,objNewPA.Objetivos[i].Objetivo_Name,objNewPA.Objetivos[i].Code, undefined, objNewPA.Objetivos[i].Actividades.length, i,i,undefined,pos )
            if(objNewPA.Objetivos[i].SubObjetivos.length>0){
               // numSobj = numSobj + objNewPA.Objetivos[i].SubObjetivos.length;
               CodePai++;
                console.log(objNewPA.Objetivos[i].SubObjetivos.length)
                for (let j = 0; j < objNewPA.Objetivos[i].SubObjetivos.length; j++) {
                    if(objNewPA.Objetivos[i].SubObjetivos[j].SubObjetivo_Name != ""){

                        var id_=0;
                    console.log("222 mando a fnSP3ReordenarObjetivoSubojetivo","ID:"+i,"SUBID:"+j)
                    fnSP3ReordenarObjetivoSubojetivoEditar(1,objNewPA.Objetivos[i].SubObjetivos[j].SubObjetivo_Name,0, i, objNewPA.Objetivos[i].SubObjetivos[j].Actividades.length, j, i, j,pos)
                }
            }
        }
        }
    }

    $('#c1TabGenyCol1').html("Objetivos ( "+objNewPA.Objetivos.length+" )/ Subobjetivos ( "+numSobj+" ) ");

}

function fnSP3ReordenarObjetivoSubojetivoEditar(tipo, objjt,Code, CodePadre, nAct, Id,posobj,possobj,posobject){
    //------------------------------------- init   fnSP3ReordenarObjetivoSubojetivo() -------------------------------------

            console.log("fnSP3ReordenarObjetivoSubojetivo", tipo, objjt,Code, CodePadre, nAct, Id,posobj,possobj)
              var padrex;

            if(objjt != "")
            {
                var nameobj = objjt;

                var pos_act=posobj;
                if(CodePadre === 0 )
                {console.log('cargar objetivos');}else{if(CodePadre > 0)console.log('cargar subbjetivos');}

                var btNew = '';
                var Id2 = '';
                var color = '#000000';
                if( CodePadre === undefined)
                {
                    objjt = "Objetivo "+(posobj+1)+" : "+objjt;
                    // Objetivos[Objetivos.length] = $('#txt_obj_subobj').val();
                    // var objjt = "Objetivo "+Objetivos.length+" : "+$('#txt_obj_subobj').val();
                    // if ( document.getElementById( 'obj_'+Id )) {
                    //     iddd = 'obj_'+(Id+1);//+"_"+nSobj;
                    //     }else{
                    //     iddd = 'obj_'+Id;//+"_"+nSobj;
                    //     }
                        iddd = 'obj_'+Id;//+"_"+nSobj;
                        Id2 = pos_act;
                    color = '#000000';
                    //nObj++;
                    racimoAbre =  ` <div id='racimo_${Id}'>`;
                    racimoCierra =  ` </div>`;
                    padrex = undefined;
                }
                else{
                    if(CodePadre => 0) //subobjetivos
                    {
                        console.log(CodePadre)
                        var pos_act=possobj;
                        // SubObjetivos[SubObjetivos.length] = $('#txt_obj_subobj').val();
                        // var objjt = "&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  Subobjetivo "+Objetivos.length+"."+SubObjetivos.length+" : "+$('#txt_obj_subobj').val();
                        // iddd = 'item'+Objetivos.length+"_"+SubObjetivos.length;
                        padrex = posobj;
                        objjt = "&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; SubObjetivo "+(posobj+1)+"."+(possobj+1)+" : "+objjt;
                        //iddd = 'subobj_'+Id+"_"+nSobj;
                        iddd = 'subobj_'+CodePadre+"_"+Id;
                        color = '#5c5c5c';
                        nSobj++;
                        racimoAbre =  ` `;
                        racimoCierra =  ` `;
                       // padrex = Id;
                       Id2 = pos_act+'_'+padrex;

                    }
                }

            // $('#c1TabGenyCol1').html("Objetivos ( "+Id+" )/ Subobjetivos ( "+nSobj+" ) ");

                var html1 = '     ';

                // if(nObjSub == 0)
                // {
                //     $('#body-tabla-list-EvalAud1').html("     "); nObjSub = 1;
                // }


                    html1 += `
                    ${racimoAbre}
                    <div id = '${iddd}'  class="item-tabla p-2" style="z-index: 1;display:relative;  padding: 0px !important; margin: 10px 8px 0px !important; width: 1223px !important;">
                    <div class="row m-0 justify-content-between align-items-center tbody_trainning">
                        <div class="col-12 text-center" style="font-size: 15px; padding: 4px !important; ">
                            <div class="row">
                                <table width = "100%" border="0">
                                <tr >
                                    <td width = "55%" align="center"><div id="c1TabGeny" onclick='fnSp3SeleccionaFilaObjSub("${iddd}",${pos_act+1},${Id})' class="text-left lbCabezaTabla1" style='margin: 0px 0px 0px 13px !important; font-size:15px !important; color:${color}'  >
                                    <div id="name_tag_obj_${Id2}">${objjt}</div>
                                   <div id="capa_name_obj_${Id2}"  style="display:none; ">
                                   <input type="text"  id="hdd_name_obj_${Id2}" class="text-justify textarea-fecha2 autocompletecollaborator" style="width: 70% !important;" value="${nameobj}">
                                   <div style="width: 10%; text-align: center;"><button type='button' title='Editar del Plan Anual' onclick="fnSp3EditarObj(${pos_act},${padrex})"   class='btn-circle btn_read border-0 btn-footer-active' style='background-color:#58c25d !important;' id='btn_verPlanAnual${Id}'>
                                   <img src='./images/iconos/img-check-mark-1.svg' class='ojo-1'  >
                                   </button></div>
                                   <div style="width: 10%; text-align: center;"><button type='button' title='Editar del Plan Anual' onclick="fnSp3NoEditarObj(${pos_act},${padrex})"   class='btn-circle btn_read border-0' style='background-color:#58c25d !important;' id='btn_verPlanAnual${Id}'>
                                   <img src='./images/iconos/delete.svg' class='ojo-1'  >
                                   </button></div>
                                            </div></div></td>
                                    <td width = "14%" align="center"><div id="nAct_${iddd}" class="text-left lbCabezaTabla1" style='margin-left:50px;'  >${nAct}</div></td>


                                    <td width = "10%" align="center"><div id="c12TabGeny" class="text-center lbCabezaTabla1"  >
                                        <button type='button' title='Actividades del Objetivo' onclick="fnSp3NuevasActividadesObjetivoPlanEditar(${pos_act},${padrex},${tipo},${posobject},${Id})"   class='btn-circle btn_read border-0' style='background-color:#ffb72b !important;' id='btn_ActividadPlan${Id}'>
                                            <img src='./images/iconos/folder1.svg' class='ojo-1'  >
                                        </button>

                                    </td>

                                    <td width = "10%" align="center"><div id="c12TabGeny" class="text-center lbCabezaTabla1"  >
                                            <button type='button' title='Editar del Plan Anual' onclick="fnSp3EditarPlanAnual(${pos_act},${padrex})"   class='btn-circle btn_read border-0 btn_hab_sta' style='background-color:#58c25d !important;' id='btn_verPlanAnual${Id}'>
                                            <img src='./images/iconos/edit_1.svg' class='ojo-1'  >
                                            </button>

                                    </td>

                                    <td width = "9%" align="center"><div id="c12TabGeny" class="text-center lbCabezaTabla1"  >
                                        <button type='button' title='Editar del Hallazgo' onmouseup="fnSp3eliminarObjetivoSubojetivo('${iddd}')"   class='btn-circle btn_read border-0 btn_hab_sta' style='background-color:#ff6767 !important;' id='btn_verEliminarPlan${Id}'>
                                            <img src='./images/iconos/delete.svg' class='ojo-1'  >
                                        </button>
                                </td>

                                <td width = "2%" align="center"><div id="c12TabGeny" class="text-center lbCabezaTabla1"  >
                                        <img src='./images/marca_fila.png' class='ojo-1' style='margin-left:-8px;'   onclick='fnSp3SeleccionaFilaObjSub("${iddd}",${pos_act+1},${Id})'>
                                </td>


                                </tr>



                                </table>


                                </div>
                            </div>
                        </div>
                    </div>
                ${racimoCierra}

                    `;

                    if(CodePadre === undefined)
                    {
                        console.log("soy huerfano")
                        $('#body-tabla-list-EvalAud1').append(html1);

                        //alert('MI PADRE ES = #obj_'+nObj )
                    }
                    else{
                        if(CodePadre >= 0) //subobjetivos
                        {
                            console.log("soy hijo de "+CodePadre)

                            $('#racimo_'+CodePadre).append(html1);
                        }
                    }


              //$('#body-tabla-list-EvalAud1').append(html1);
             $('#txt_obj_subobj').val("");



            }

    }
    //------------------------------------- finit   fnSP3ReordenarObjetivoSubojetivo() -------------------------------------



function fnSp3ModalVerPlanAnual(idPlanx)
{//------------------------------------- ini   fnSp3ModalVerPlanAnual() -------------------------------------

//alert('vamos a agregar al Plan');

    istAud = idPlanx;
    $("#Sp3VentanaPlanAnualEditView").modal("show").addClass("fade");

    //document.getElementByIdetElementById('Sp3VentanaPlanAnualEditView')




    $("#lbTitleVerPlanAnual").html("Datos del Plan Anual "+paObj[idPlanx].a.Code);

    //cargamos la data del plan anual
    $('#sel_programaNew').val(paObj[idPlanx].a.ProgramaId);
    $('#sel_gerenciaNew').val(paObj[idPlanx].a.GerenciaId); //SedeId    EquipoId
    $('#sel_sedeNew').val(paObj[idPlanx].a.SedeId);
    $('#sel_equipoNew').val(paObj[idPlanx].a.EquipoId);

    //$('#txt_obj_subobj').val('  ');
    fnSp3onchangeObjetivoSubojetitivo('si')

    //vamos a agregar los objetivos y subobjetivos
    if(paObj[idPlanx].a.Objetivos.length > 0)
     {

        var i = 0;
        paObj[idPlanx].a.Objetivos.map(function(item)
        {
            $('#txt_obj_subobj').val(item.Objetivo_Name);
            $('#idNumAct').val(item.Nun_Actividades);
            fnSp3onchangeObjetivoSubojetitivo('si')
            //$('#btAgrObjetivo').trigger('click');
            fnSp3agregaObjetivoSubojetivo(1,item.Objetivo_Name,item.Code, 0, item.Nun_Actividades, item.Id );//fnSp3agregaObjetivoSubojetivo(tipo, obj, nAct, Id)

            i++;
                if(item.Actividades.length > 0)
                    {
                        var j = 0;
                        $('#body-tabla-list-EvalAud2').html(" ");
                        item.Actividades.map(function(item1_1)
                            {
                                //fnSp3agregaObjetivoSubojetivo(0, item1.SubObjetivo_Name, item1.Code, item.Code, item1.Nun_Actividades, item1.Id )
                                //console.log('Actividad_'+item1_1.Id)
                                fnSp3agregaActividadObjetivoPlan(j, item.Code, item1_1);
                                j++;

                                    var k = 0;
                                    //
                                    if(item1_1.Tareas.length > 0)
                                    {//-------------------------------------------------------------------
                                            item1_1.Tareas.map(function(item1_2)
                                            {

                                                   fnSp3agregaTareaActividadObjetivoPlan(k, item1_2);
                                                   k++;

                                            }
                                            );
                                    }//-------------------------------------------------------------------


                                    var u = 0;
                                    //
                                    if(item1_1.Cronogramas.length > 0)
                                    {//-------------------------------------------------------------------
                                            item1_1.Cronogramas.map(function(item1_2)
                                            {

                                                   fnSp3verCronogramaPlan(u, item1_2);
                                                   u++;

                                            }
                                            );
                                    }//-------------------------------------------------------------------

                            });
                    }

                if(item.SubObjetivos.length > 0)
                    {
                           //console.log('Objetivo_'+item.Id) //

                        item.SubObjetivos.map(function(item2)
                        {
                            fnSp3agregaObjetivoSubojetivo(0, item2.SubObjetivo_Name, item2.Code, item.Code, item2.Nun_Actividades, item2.Id )
                        });
                    }
         });

     }



}//------------------------------------- ini   fnSp3ModalVerPlanAnual() -------------------------------------





function fnSp3EditarPlanAnual(ided,CodePadre)
{//------------------------------------- ini   fnSp3EditarPlanAnual() -------------------------------------

   //alert('vamos a editar el plan = '+ided);

   if(CodePadre === undefined){
    $('#name_tag_obj_'+ided).hide()
    $('#capa_name_obj_'+ided).show()
    $('#capa_name_obj_'+ided).addClass("d-flex justify-content-between align-items-center")
   }else{
    $('#name_tag_obj_'+ided+'_'+CodePadre).hide()
    $('#capa_name_obj_'+ided+'_'+CodePadre).show()
    $('#capa_name_obj_'+ided+'_'+CodePadre).addClass("d-flex justify-content-between align-items-center")
   }




}//------------------------------------- ini   fnSp3EditarPlanAnual() -------------------------------------



function fnSp3VerPlanesGerenciaYear()
{
  //voy a crear un plan nuevo para este programa+gerencia+año
   //voy a crear un plan nuevo para este programa+gerencia+año

   var programk = $('#sel_programaNew').val();
   var gerenciak = $('#sel_gerenciaNew').val();
   var sedek = $('#sel_sedeNew').val();
   var anioA = $('#sel_anioeNew').val();
   var anioS = anioA+1;
   console.log(anioA)
   if(anioA == 0){
    var fecha =  new Date();
     anioA = fecha.getFullYear();
     anioS = anioA+1;
   }


  console.log("***********",programk,gerenciak,anioA,anioS);


   validaPlan(programk, gerenciak, sedek, anioA)
}


function validaPlan(co_p, co_ger, co_sede, year)
{   var salida = 0;//respuesta de la busqueda
    var nn = objNewPA2.length;
    $('#msg_sel_gerencia').css('visibility','hidden');
    $('#msg_sel_sede').css('visibility','hidden');

    $("#btGuardarPlan").attr("disabled", false)
    $("#btAgrObjetivo").attr("disabled", false)

    //alert(nn);
    //alert(co_ger);
console.log(objNewPA2)
   if(co_ger >0)//vamos a validar gerencia
   {
        objNewPA2.map(function(item)
        {

            //console.log("PLAN = "+item.Code)

            console.log("if(",item.GerenciaId ,"==", co_ger, "&&", item.Year_Plan, "==", year)
            if(item.GerenciaId == co_ger && item.Year_Plan == year)
            {
                $("#btGuardarPlan").attr("disabled", true)
                $("#btAgrObjetivo").attr("disabled", true)
                $('#msg_sel_gerencia').css('visibility','visible');
                $('#msg_sel_gerencia').html("Esta gerencia ya cuenta con plan anual, Cód:"+item.Code);
                salida = 1;
            }
            // else
            // {    if(salida == 0)
            //      $('#msg_sel_gerencia').css('visibility','hidden');
            // }


        });
        fnSp3BloqueaSede(1)
   }
   else
   {   if(co_ger == 0){ fnSp3BloqueaSede(0);}
       if(co_sede >0)//vamos a validar la sede
       {//--------------------------------------
                objNewPA2.map(function(item)
                {
                    console.log("if(",item.SedeId ,"==", co_sede, "&&", item.Year_Plan, "==", year)

                    if(item.SedeId == co_sede && item.Year_Plan == year)
                    {
                        $("#btGuardarPlan").attr("disabled", true)
                        $("#btAgrObjetivo").attr("disabled", true)

                        $('#msg_sel_sede').css('visibility','visible');
                        $('#msg_sel_sede').html("Esta sede ya cuenta con plan anual, Cód:"+item.Code);
                        salida = 1;
                    }
                    // else
                    // {   if(salida == 0)
                    //     $('#msg_sel_gerencia').css('visibility','hidden');
                    // }
                });
           fnSp3BloqueaGerencia(1);

       }else{if(co_sede == 0){fnSp3BloqueaGerencia(0);}}
   }

  return salida;

}



function fnSp3BloqueaSede(q)
{//------------------------------------- ini   fnSp3BloqueaSede() -------------------------------------
    if(q ==1)    //inactivar
    {
        $('#divfSedeNew').css('background-color','#efefef');
        $('#sel_sedeNew').css('background-color','#efefef');
        $('#sel_sedeNew').prop('disabled', true);

    }
    else //activar
    {
        if(q ==0)
           {
            $('#divfSedeNew').css('background-color','#ffffff');
            $('#sel_sedeNew').css('background-color','#ffffff');
            $('#sel_sedeNew').prop('disabled', false);
           }
    }

}//------------------------------------- ini   fnSp3BloqueaSede() -------------------------------------

function fnSp3BloqueaGerencia(q)
{//------------------------------------- ini   fnSp3BloqueaSede() -------------------------------------
    if(q ==1)    //inactivar
    {
        $('#divfGerenciaNew').css('background-color','#efefef');
        $('#sel_gerenciaNew').css('background-color','#efefef');
        $('#sel_gerenciaNew').prop('disabled', true);

        $('#divfEquipoNew').css('background-color','#efefef');
        $('#sel_equipoNew').css('background-color','#efefef');
        $('#sel_equipoNew').prop('disabled', true);

    }
    else //activar
    {
        if(q ==0)
           {
            $('#divfGerenciaNew').css('background-color','#ffffff');
            $('#sel_gerenciaNew').css('background-color','#ffffff');
            $('#sel_gerenciaNew').prop('disabled', false);

            $('#divfEquipoNew').css('background-color','#ffffff');
            $('#sel_equipoNew').css('background-color','#ffffff');
            $('#sel_equipoNew').prop('disabled', false);
           }

    }

}//------------------------------------- ini   fnSp3BloqueaSede() -------------------------------------



function fnSp3ajustaFechaPlan(param)
{
    if(param == 'sel_year_frecuencia')
    {
        var c = $('#sel_year_frecuencia').val();
        $('#sel_anioeNew').val(c);
        document.getElementById('divf1_frecuencia').style.setProperty('border-color', '#DEE2E6', 'important');
    }
    else
    {
        if(param == 'sel_anioeNew')
            {
                var c = $('#sel_anioeNew').val();
                $('#sel_year_frecuencia').val(c);
                document.getElementById('divf1_frecuencia').style.setProperty('border-color', '#DEE2E6', 'important');
            }
    }
}




function verModalAdvertencia(subTitulo, msg)
{

  //alert("error");
  $('#subTituloAdv').html(" ")//subTituloAdv
  $('#subTituloAdv').html('<b>'+subTitulo+'</b>'); //cerrarModal

  $('#mensajeAdv').html(" ")//mensajeAdv
  $('#mensajeAdv').html('<p>'+msg+'</p>'); //cerrarModal


  cerrarModal('modal-save');
  $('#modalMsgAdv').css('z-index','9999999');
  $('#modalMsgAdv').modal('show').addClass('fade');



}





function fnSp3GuardarPlan()
{//------------------------------------- ini   fnSp3GuardarPlan() -------------------------------------

   //antes que nada vamos a ver y validar los datos minimos para guardar el plan hermano

   var a = $('#sel_programaNew').val();
   var d = $('#sel_gerenciaNew').val();
   var b = $('#sel_sedeNew').val();
   var c = $('#sel_equipoNew').val();
   var d = $('#sel_anioeNew').val();
   var marca = 0;



    if(a == 0){  document.getElementById('divfPlan1').style.setProperty('border-color', '#ff6767', 'important'); marca = 1;}
    if(b == 0){if(d == 0){ document.getElementById('divfGerenciaNew').style.setProperty('border-color', '#ff6767', 'important'); marca = 1;}}
    if(d == 0){if(b == 0){ document.getElementById('divfSedeNew').style.setProperty('border-color', '#ff6767', 'important'); marca = 1;}}
    if(b == 0){if(d == 0){ document.getElementById('divfEquipoNew').style.setProperty('border-color', '#ff6767', 'important'); marca = 1;}}
    if(a == 0){  document.getElementById('divfanioeNew').style.setProperty('border-color', '#ff6767', 'important');marca = 1; }

    if(marca == 1)
    {
        verModalError('Por favor Revise','Existen Campos Vacios o Incompletos');
    }
    else
    {
        if(marca == 0)
          {
                 $('#Sp3VentanaPlanAnualEditView').modal('hide').removeClass('fade');
                 $('#modalConfirmPlan').modal('show').addClass('fade');
          }
    }


    //$('#Sp3VentanaPlanAnualEditView').modal('hide').removeClass('fade');
    //$('#modalConfirmPlan').modal('show').addClass('fade');






}//------------------------------------- ini   fnSp3GuardarPlan() -------------------------------------

function  fnSp3onchangeColorPlanAnual(id,id2,tipo)
{

    if(tipo == 'select')
    {
        //alert($('#'+id).val())
        if($('#'+id2).val() != 0)
        {
            if(id == 'divfGerenciaNew')
            {
                document.getElementById('divfSedeNew').style.setProperty('border-color', '#DEE2E6', 'important');
            }

            if(id == 'divfSedeNew')
            {
                document.getElementById('divfGerenciaNew').style.setProperty('border-color', '#DEE2E6', 'important');
                document.getElementById('divfEquipoNew').style.setProperty('border-color', '#DEE2E6', 'important');
            }


            document.getElementById(id).style.setProperty('border-color', '#DEE2E6', 'important');
        }
    }

}


function fnSP3LimpiarmodalRegistro(){
    $('#divfSedeNew').css('background-color','#ffffff');
    $('#sel_sedeNew').css('background-color','#ffffff');
    $('#sel_sedeNew').prop('disabled', false);

    $('#divfGerenciaNew').css('background-color','#ffffff');
    $('#sel_gerenciaNew').css('background-color','#ffffff');
    $('#sel_gerenciaNew').prop('disabled', false);

    $('#divfEquipoNew').css('background-color','#ffffff');
    $('#sel_equipoNew').css('background-color','#ffffff');
    $('#sel_equipoNew').prop('disabled', false);
    objNewPA =  [];
    console.log(objNewPA)
    $("#body-tabla-list-EvalAud1").html("");
    $("#body-tabla-list-EvalAud2").html("");
    $("#body-tabla-list-EvalAud3").html("");

    $("#msg_sel_sede").html("");
    $("#c1TabGenyCol1").html("Objetivos ( 0 )/ Subobjetivos ( 0 ) ");
    numSobj=0;
    nSobj=0;
    nObj=0;



}




function fnSp3GuardarPlanAnualInsertUpdate()
{
   //btGuardarModPlan  //<b>Confirmar</b>
   $('#btGuardarModPlan').html("<b>Guardando...</b>")




   //--------------------------fecha actual ---------------------------------
  var f = new Date(); var d;
  d = f.getFullYear();
  d = d+'-'+(f.getMonth()+1);
  d = d+'-'+f.getDate();
  d = d +' '+ f.getHours()+":"+f.getMinutes()+":"+f.getSeconds()+":"+f.getMilliseconds();
  //--------------------------fecha actual ---------------------------------



  //preparamos la data para el servicio
  objNewPA.Create_By = getCookie("vtas_id_hash"+sessionStorage.tabVisitasa);
  objNewPA.Create_Date =  moment().format('YYYY-MM-DD HH:mm:ss');    //d;//2021-01-01 15:34:05.000
  objNewPA.Last_Update_By =  getCookie("vtas_id_hash"+sessionStorage.tabVisitasa);
  objNewPA.Last_Update_Date = moment().format('YYYY-MM-DD HH:mm:ss');  //d;
  objNewPA.ProgramaId     = $("#sel_programaNew").val();
  objNewPA.GerenciaId     = $("#sel_gerenciaNew").val();
  objNewPA.SedeId     = $("#sel_sedeNew").val();
  objNewPA.EquipoId     = $("#sel_equipoNew").val();
  objNewPA.Year_Plan     = $("#sel_anioeNew").val();
  objNewPA.Estado_PlanId     = 1;

  var msj_confirm ="<b> Se Guard&oacute; el Plan Anual con el C&oacute;digo:</b>"
  console.log('VAMOS AGUARDAR ESTE PLAN ################################################')
  console.log(objNewPA);
  console.log('VAMOS AGUARDAR ESTE PLAN ################################################')
  var httpmethod = "post";
  if(objNewPA.Id > 0 ){
    httpmethod = "put";
     msj_confirm ="<b> Se Modific&oacute; el Plan Anual con el C&oacute;digo:</b>"

  }
  var url = apiUrlssoma+"/api/Post-Plan-Anual?code=ZnQh7E2Noeiv1emsJPTvXE5l/qClcMIjv3FNePN8XTRfTY5aOqmSAQ==&httpmethod="+httpmethod;
 // var url ="http://localhost:7071/api/Post-PlanAnual?httpmethod="+httpmethod
  var headers ={
    "apikey":constantes.apiKey
    }
    $.ajax({
    method: "POST",
    url:  url,
    data: JSON.stringify(objNewPA),
    headers:headers,
    crossDomain: true,
    dataType: "json",
    })
    .done(function(data)
    {
    console.log(data)
    if(data.Id>0){

        setTimeout(function(){
            $('#modalConfirmPlan').modal('hide').removeClass('fade');//cerramos el mensaje de quieres guardar
            $('#Sp3VentanaPlanAnualEditView').modal('hide').removeClass('fade');
            $("#cod_halla_gen").html("<b>"+data.Code+"</b>")
            $("#msg_part1_verde").html(msj_confirm)
            $('#modalConfirModalConfirmPlanOk').modal('show').addClass('fade')
            fnSP3LimpiarmodalRegistro();

          }, 3000)
    }
    })
    .fail(function( jqXHR, textStatus, errorThrown ) {
        $("#preloader").fadeOut();

    })
    .always(function( jqXHR, textStatus, errorThrown ) {
        fnCargarReportantes();
        fnCargarGrid();
    });














  //llammamos al servicio

  //recibimos la respuesta
      //si todo esta bien MANDAS EL MENSAJE CON EL CODIGO DEL PLA Y RECARGAS LA VARIABLES Y EL LISTADO
      //$('#modalConfirmPlan').modal('hide').removeClass('fade');//cerramos el mensaje de quieres guardar
      //$('#Sp3VentanaPlanAnualEditView').modal('hide').removeClass('fade');




      //$('#btGuardarModPlan').html("<b>Confirmar</b>")




    //var gh = yuo;

      //si no indicas el mensaje de error






}




// function fnSp3agregaTareasActividadObjetivoPlan(idActividad)
// {//------------------------------------- ini   fnSp3agregaTareasActividadObjetivoPlan() -------------------------------------
//
//   alert('Agragando las tareas de la Actividad ('+ idActividad +') plan');
// }//------------------------------------- ini   fnSp3agregaTareasActividadObjetivoPlan() -------------------------------------
//
// function fnSp3agregaCronogramaActividadObjetivoPlan(idActividad)
// {//------------------------------------- ini   fnSp3agregaCronogramaActividadObjetivoPlan() -------------------------------------
//   //alert('Agragando el Cronograma de la Actividad ('+ idActividad +') plan');
//   $("#Sp3VentanCronogramaActividadPlan").modal("show").addClass("fade");
// }//------------------------------------- ini   fnSp3agregaCronogramaActividadObjetivoPlan() -------------------------------------
//
//
// function fnSp3EditarActividadPlanAnual(idActividad)
// {//------------------------------------- ini   fnSp3agregaCronogramaActividadObjetivoPlan() -------------------------------------
//   alert('Editando la Actividad ('+ idActividad +') plan');
// }//------------------------------------- ini   fnSp3agregaCronogramaActividadObjetivoPlan() -------------------------------------
//
//
// function fnSp3EliminarActividadPlanAnual(idTarea)
// {//------------------------------------- ini   fnSp3agregaCronogramaActividadObjetivoPlan() -------------------------------------
//     $('#'+idTarea).remove();
// }//------------------------------------- ini   fnSp3agregaCronogramaActividadObjetivoPlan() -------------------------------------
//





/**
 * Funciones relacionadas con ver plan anual
 * [fnSp3MostrarModalVerPlanAnual Levantar Modal Para ver Plan Anual]
 * @param  {[type]} planAnualId [Id del Plan Anual]
 * @return {[type]}             [description]
 * @autor Jesus Millan [06/02/2021]
 */
// agregar linea vacia
var tr = 0;

var vacio = `
    <tr>
        <td colspan="23">
            <div class="body-tabla-list-EvalAud" id="body-tabla-list-EvalAud1">
                <div id = 'iddd'  class="item-tabla p-2" style="z-index: 1; padding: 0px !important; margin: 10px 0px 0px !important;">
                    <div class="row m-0 justify-content-between align-items-center tbody_trainning">
                        <div class="col-12 text-center altoListado listadoVacio">
                            <div class="row">
                                <table width = "100%" border="0" style="border-color: red">
                                    <tr >
                                        <td width="100%" colspan="23"> </td>
                                    </tr>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </td>
    </tr>
`

// contenido de la etiqueta meses
var contenidoEtiquetaMeses = `

    <td width="7%">
        <table width="100%" border="0" style="border-color: green">
            <tbody>
                <tr>
                    <td width="24%" class="text-white bgBlue">---</td>
                    <td width="1%" style="background-color: #fff !important;">&nbsp;</td>
                    <td width="24%" class="text-white bgBlue">---</td>
                    <td width="1%" style="background-color: #fff !important;">&nbsp;</td>
                    <td width="24%" class="text-white bgBlue">---</td>
                    <td width="1%" style="background-color: #fff !important;">&nbsp;</td>
                    <td width="24%" class="text-white bgBlue">---</td>
                </tr>
                <tr>
                    <td width="20%" class="text-white bgWhite">sad</td>
                    <td width="1%" style="background-color: #fff !important;">&nbsp;</td>
                    <td width="20%" class="text-white bgGreen">asd</td>
                    <td width="1%" style="background-color: #fff !important;">&nbsp;</td>
                    <td width="20%" class="text-white bgYellow">asd</td>
                    <td width="1%" style="background-color: #fff !important;">&nbsp;</td>
                    <td width="20%" class="text-white bgRed">dsa</td>
                </tr>
            </tbody>
        </table>
    </td>
`

var vacioComplemento = `
    <tr>
        <td colspan="11">
            <div class="body-tabla-list-EvalAud" id="body-tabla-list-EvalAud1">
                <div id = 'iddd'  class="item-tabla p-2" style="z-index: 1; padding: 0px !important; margin: 10px 0px 0px !important;">
                    <div class="row m-0 justify-content-between align-items-center tbody_trainning">
                        <div class="col-12 text-center altoListado listadoVacio">
                            <div class="row">
                                <table width = "100%" border="0" style="border-color: red">
                                    <tr >
                                        <td width="100%" colspan="11"></td>
                                    </tr>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </td>
    </tr>
`






/**
 * [fnSp3MostrarModalVerPlanAnual Mostrar Modal Ver Plan Anual]
 * @param  {[int]} planAnualId [Indice del plan anual en el objeto paObj]
 * @return {[type]}             [description]
 */
var fnSp3MostrarModalVerPlanAnual = function(planAnualId)
{
    // PLAN ANUAL ACTUAL

    
    // PARA EL INDICADOR DE LAS FILAS
    /*tr     = 0
    //console.warn(planAnualId)
    //console.table(paObj[planAnualId])
    // array meses del año
    let meses = new Array ("Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre")
    // saber fecha actual
    let fechaActual = new Date()
    // saber mes actual
    let mes         = fechaActual.getMonth()

    // limpiar select
    $("#selectMesPlanAnual").html('')

    // todos azules
    for (var i = 0; i < 12; i++) {
        $(`#mes_${i}`).css("background-color", '#34559c');
    }

    // llenar select hasta el mes actual
    for (var i = 0; i <= 11; i++) {
        //console.log("i",i,"meses[i]",meses[i])
        $("#selectMesPlanAnual").append(`
            <option value="${i}">${meses[i]}</option>
        `)
    }
    // seleccionar mes actual
    $("#selectMesPlanAnual").val(mes)
    $(`#mes_${mes}`).css("background-color", '#ffb525');


    fnPintarDatosPorMesSp3(planAnualId, mes)*/


    sp4EstadoInicialVentanaVerIncidente();// reicimos la vista
    // MOSTAR MODAL PLAN ANUAL
    $('#modalVerPlanAnualSP3').modal('show').addClass('fade')
     $('#modalVerPlanAnualSP3').modal('show').addClass('fade')
      $('#modalVerPlanAnualSP3').modal('show').addClass('fade')


    //fnSp3onchangeObjetivoSubojetitivo('si');
    //fnSp3onchangeObjetivoSubojetitivo('si');

    istAud = planAnualId;
    console.log('LOS DATOS DEL EVENTO SON ***********************************',paObj[planAnualId]);

    // COLOCAMOS TITULO A LA MODAL
    $("#titleModalVerPlanAnualSP3").html("<h5 class='m-0'>"+"Ver Accidente/ Incidente -"+paObj[planAnualId].a.Code+"</h5>");

    $('#sel_tipo_evento2').val(paObj[istAud].a.IdTipoEvento);
    var ff = date_AAAA_MM_DD_T_HH_MM_S_to_DD_MM_AAAA(paObj[istAud].a.Fecha)
    $('#sp3_txt_fecha_desde_p1').val(ff);
    $('#sp3_txt_fecha_desde_p2').val(ff);

    //alert('sp3_txt_fecha_desde_p2')//
     $('#sp3_txt_tiempo').val(paObj[istAud].a.Hora);
     $('#sp3_txt_tiempo2').val(paObj[istAud].a.Hora);
    



    if(paObj[istAud].a.HayPersonalAfectado == 0) // es personal de tasa
    {
        fnSp3onchangeObjetivoSubojetitivo('si');
        //alert('tasa'+paObj[istAud].a.HayPersonalAfectado);
    }
     else
      {

          if(paObj[istAud].a.HayPersonalAfectado == 1) // es algun contratista
          {
              //alert('tercero');
              fnSp3onchangeObjetivoSubojetitivo('no');
          }

      }
      $('#sel_filter_sede_p2').val(paObj[istAud].a.IdSede);//sel_filter_embarcacion_p
      $('#sel_filter_embarcacion_p').val(paObj[istAud].a.IdEmbarcacion);//sel_fuente_area2
      $('#sel_fuente_area2').val(paObj[istAud].a.IdArea);
      $('#sel_fuente_zona2').val(paObj[istAud].a.IdZona);
//alert('aaaaaaaaaaaaaaaaaaaaaaaaaaaaaa = '+paObj[istAud].a.NombreEmpresa);
      //$('#sel_fuente_empresa').val(paObj[istAud].a.IdEmpresa);//si lo llegan a crear con la base de datos
      $('#sel_fuente_empresa').val(paObj[istAud].a.NombreEmpresa); 


      $('#txt_describe_incidente').val(paObj[istAud].a.DescripcionEvento);
       var ct = paObj[istAud].a.DescripcionEvento.length;
       if(ct <= 500){$('#lb_cant_desc').html(ct+'/500');}
      
      
      //------------------------------------nueva forma de adjuntos ---------------------------------
          
       if(paObj[istAud].a.AdjuntoIncidente == 1)
       {
        if((paObj[istAud].a.Adjunto1)&&(paObj[istAud].a.Adjunto1 != null )&&(paObj[istAud].a.Adjunto1 != " " ))
        {$('#imgEvidencia1').prop('src', paObj[istAud].a.Adjunto1);}

        if((paObj[istAud].a.Adjunto2)&&(paObj[istAud].a.Adjunto2 != null )&&(paObj[istAud].a.Adjunto2 != " " ))
        {$('#imgEvidencia2').prop('src', paObj[istAud].a.Adjunto2);}

         if((paObj[istAud].a.Adjunto3)&&(paObj[istAud].a.Adjunto3 != null )&&(paObj[istAud].a.Adjunto3 != " " ))
        {$('#imgEvidencia3').prop('src', paObj[istAud].a.Adjunto3);}

         if((paObj[istAud].a.Adjunto4)&&(paObj[istAud].a.Adjunto4 != null )&&(paObj[istAud].a.Adjunto4 != " " ))
        {$('#imgEvidencia4').prop('src', paObj[istAud].a.Adjunto4);}

         if((paObj[istAud].a.Adjunto5)&&(paObj[istAud].a.Adjunto5 != null )&&(paObj[istAud].a.Adjunto5 != " " ))
        {$('#imgEvidencia5').prop('src', paObj[istAud].a.Adjunto5);}
       }
       else
       {
         Sp4BuscarAdjuntosIncidente_y_Alerta(istAud,1);
       }
       
        //------------------------------------nueva forma de adjuntos ---------------------------------



       // var n = paObj[istAud].a.Evidencias.length;
       // var n = 5
       // for(var i = 0; i<n; i++)
       // {
       //  var ii = i+1;
       //  if((paObj[istAud].a.Evidencias[i].EvidenciaFile)&&(paObj[istAud].a.Evidencias[i].Id != 0 ))
       //      {$('#imgEvidencia'+ii).prop('src', paObj[istAud].a.Evidencias[i].EvidenciaFile);}
       // }

     

      //ahora dependiendo del tipo de accidente u incidente va a mostrar los datos

      // Tipos de Incidentes del Grupo 1 (Accidentes Personal-1, Incidente Sin Lesión-6, Enfermedad Comun-7)
            if(paObj[istAud].a.GrupoEvento == 1)
            {
                //vamos a mostrar el formulario que le corresponde
                
                 $('#formAccidentePersonal').css('visibility','visible');
                 $('#formAccidentePersonal').css('display','block');

                 $('#formAccidenteAmbiental').css('visibility','hidden');//oculto los otros
                 $('#formAccidenteAmbiental').css('display','none');
                 $('#formAccidenteDanioMaterial').css('visibility','hidden');
                 $('#formAccidenteDanioMaterial').css('display','none');

                 //.. cargamos los datos de un accidente amniental

                 //ReportanteName
                 $('#ReportanteName').val(paObj[istAud].a.A_NombrePersonalAccidentado);
                 $('#txt_dni').val(paObj[istAud].a.A_DniPersonalAccidentado);//no lo tiene la BD
                 $('#txtx_caro_tipo').val(paObj[istAud].a.A_PuestoCargoAccidentado);


            }//--------------------------------------------------------------------------


      // Tipos de Incidentes del Grupo 2 (Accidente Ambiente-1, Incidente Ambiental-2)
            if(paObj[istAud].a.GrupoEvento == 2)
            {
                //vamos a mostrar el formulario que le corresponde
                
                 $('#formAccidenteAmbiental').css('visibility','visible');
                 $('#formAccidenteAmbiental').css('display','block');

                 $('#formAccidentePersonal').css('visibility','hidden');//oculto los otros
                 $('#formAccidentePersonal').css('display','none');
                 $('#formAccidenteDanioMaterial').css('visibility','hidden');
                 $('#formAccidenteDanioMaterial').css('display','none');

                 $('#sp3_txt_tipo_producto').val(paObj[istAud].a.B_TipoProducto);
                 $('#sp3_txt_producto').val(paObj[istAud].a.B_ProductoInvolucrado);
                 $('#sp3_txt_producto_volumen').val(paObj[istAud].a.B_Volumen);
                 $('#sp3_txt_producto_area').val(paObj[istAud].a.B_Area);
                 $('#sp3_txt_producto_fuente').val(paObj[istAud].a.B_Fuente);
                   

            }//--------------------------------------------------------------------------

      // Tipos de Incidentes del Grupo 3 (Accidente Con Daños Materiales-3, Accidente de Seg Procesos -4 )
            if(paObj[istAud].a.GrupoEvento == 3)
            {
                //vamos a mostrar el formulario que le corresponde
                
                 $('#formAccidenteDanioMaterial').css('visibility','visible');
                 $('#formAccidenteDanioMaterial').css('display','block');

                 $('#formAccidenteAmbiental').css('visibility','hidden');//oculto los otros
                 $('#formAccidenteAmbiental').css('display','none');
                 $('#formAccidentePersonal').css('visibility','hidden');
                 $('#formAccidentePersonal').css('display','none');

                 var ct = paObj[istAud].a.C_Hurt.length;
                 if(ct <= 150)
                  {$('#lb_cant_hard').html(ct+'/150');}

                 $('#txt_describe_danno').val(paObj[istAud].a.C_Hurt);    
            }//--------------------------------------------------------------------------

      

}



function sp4FnModificarGuardarIncidente()
{

   if( $('#sp4BtModificarGuardar1').html() == 'Modificar')
   {
       $('#sp4BtModificarGuardar1').html('Guardar Cambios');//habilitamos el boton y el único campo
        var id1x = $("#"+'sel_tipo_evento2').val();
            $("#"+'sel_tipo_evento2').html(" "); $("#"+'sel_tipo_evento2').css('font-size','13px');
            $("#"+'sel_tipo_evento2').html("<option selected value='0'>          </option>");
            $("#"+'sel_tipo_evento2').html("<option selected value='0'>          </option>");

        
           
            LTE.map(function(item)//LTS
            {
                if(item.Grupo == paObj[istAud].a.GrupoEvento)
                 {
                    
                    $("#"+'sel_tipo_evento2').append(`<option value='${item.Id}' title='${item.Code} - ${item.Evento}' style='font-weight: bold;'>${item.Evento}</option>`);
                 } 
            });


       $('#divf1').css('background-color','#ffffff');//sel_tipo_evento2
       $('#sel_tipo_evento2').css('background-color','#ffffff');
       $('#sel_tipo_evento2').prop('disabled', false);
       $('#sel_tipo_evento2').val(id1x);
       $('#sel_tipo_evento2').focus();


   }
   else
   {
       if( $('#sp4BtModificarGuardar1').html() == 'Guardar Cambios')
       {//---------------------------------- aqui procedemos a ejecutar el update --------------------
             //alert('Levantamos la alerta de estas completamente seguro');
                 $('#modalVerPlanAnualSP3').modal('hide').removeClass('fade')
                 $('#Sp3VentanaPruebas2').modal('show').addClass('fade')
             //*bloqueamos el boton
 
       }//---------------------------------- aqui procedemos a ejecutar el update --------------------
   }


}





function Sp4BuscarAdjuntosIncidente_y_Alerta(istAudxx, gerencia)
{

//alert(gerencia)
$('#lbLoadRepoA').css('visibility','visible');
$('#loadRepoA').css('visibility','visible');

$('#lbLoadRepoA1').css('visibility','visible');
$('#loadRepoA1').css('visibility','visible');

$('#sp4BtGenerarAlerta').prop('disabled',true);

  //var gerencia = 1;
   //var url = apiUrlssoma+"/api/Get-Incidente-AccidenteWeb?code=GY7/yooa3Zl5sKu7zgakDbaCn4uvOKXjfwe/JkbSuIwDPOs/baiZFQ==&httpmethod=objectlist&IdTipoEvento="+programa+"&IdEmpresa="+gerencia+"&IdSede="+sedepa+"&FechaInicio="+f1+"&FechaFin="+f2+"&IdEmbarcacion="+estadopa
  var url = apiUrlssoma+"/api/Get-AdjuntosIncidenteAndAlertaWeb?code=vVw/MKim9gVf7h12DhIIWIble3NQUTYodW4DmrnUGeIASrmVkJgT7A==&httpmethod=objectlist&IdTipoEvento="+istAudxx+"&IdEmpresa="+gerencia+"&IdSede=0&FechaInicio&FechaFin&IdEmbarcacion=0"

    console.log("URL_ alerta = ",url )
    var headers ={
        "apikey":constantes.apiKey
    }

    var settings = {
        "url": url,
        "method": "GET",
        "timeout": 0,
        "crossDomain": true,
        "dataType": "json",
        "headers": headers,
    };

    $.ajax(settings).done(function (response) 
       {
        console.log("adjuntos === ",response);
        

        if(gerencia == 1)
        {//-------------------------------------------------------------------------------------------------------------
             if(response.PlanAnual[0].Adjunto1 != "")
            {
               paObj[istAudxx].a.AdjuntoIncidente = 1;// 0-- quiere decir que no se ha ido al servidor por su fotos, 1 ya las fotos en el Array paObj[istAud].a
               paObj[istAudxx].a.Adjunto1 = response.PlanAnual[0].Adjunto1;
               if((paObj[istAudxx].a.Adjunto1)&&(paObj[istAudxx].a.Adjunto1 != null )&&(paObj[istAudxx].a.Adjunto1 != " " ))
               {$('#imgEvidencia1').prop('src', paObj[istAudxx].a.Adjunto1);}
            }else{paObj[istAudxx].a.AdjuntoIncidente = 1;}


        if(response.PlanAnual[0].Adjunto2 != "")
            {
               paObj[istAudxx].a.AdjuntoIncidente = 1;// 0-- quiere decir que no se ha ido al servidor por su fotos, 1 ya las fotos en el Array paObj[istAud].a
               paObj[istAudxx].a.Adjunto2 = response.PlanAnual[0].Adjunto2;
               if((paObj[istAudxx].a.Adjunto2)&&(paObj[istAudxx].a.Adjunto2 != null )&&(paObj[istAudxx].a.Adjunto2 != " " ))
               {$('#imgEvidencia2').prop('src', paObj[istAudxx].a.Adjunto2);}
            }else{paObj[istAudxx].a.AdjuntoIncidente = 1;}

        if(response.PlanAnual[0].Adjunto3 != "")//Adjunto3
            {
               paObj[istAudxx].a.AdjuntoIncidente = 1;// 0-- quiere decir que no se ha ido al servidor por su fotos, 1 ya las fotos en el Array paObj[istAud].a
               paObj[istAudxx].a.Adjunto3 = response.PlanAnual[0].Adjunto3;
               if((paObj[istAudxx].a.Adjunto3)&&(paObj[istAudxx].a.Adjunto3 != null )&&(paObj[istAudxx].a.Adjunto3 != " " ))
               {$('#imgEvidencia3').prop('src', paObj[istAudxx].a.Adjunto3);}
            }else{paObj[istAudxx].a.AdjuntoIncidente = 1;}


        if(response.PlanAnual[0].Adjunto4 != "")
            {
               paObj[istAudxx].a.AdjuntoIncidente = 1;// 0-- quiere decir que no se ha ido al servidor por su fotos, 1 ya las fotos en el Array paObj[istAud].a
               paObj[istAudxx].a.Adjunto4 = response.PlanAnual[0].Adjunto4;
               if((paObj[istAudxx].a.Adjunto4)&&(paObj[istAudxx].a.Adjunto4 != null )&&(paObj[istAudxx].a.Adjunto4 != " " ))
               {$('#imgEvidencia4').prop('src', paObj[istAudxx].a.Adjunto4);}
            }else{paObj[istAudxx].a.AdjuntoIncidente = 1;}


        if(response.PlanAnual[0].Adjunto5 != "")
            {
               paObj[istAudxx].a.AdjuntoIncidente = 1;// 0-- quiere decir que no se ha ido al servidor por su fotos, 1 ya las fotos en el Array paObj[istAud].a
               paObj[istAudxx].a.Adjunto5 = response.PlanAnual[0].Adjunto5;
               if((paObj[istAudxx].a.Adjunto5)&&(paObj[istAudxx].a.Adjunto5 != null )&&(paObj[istAudxx].a.Adjunto5 != " " ))
               {$('#imgEvidencia5').prop('src', paObj[istAudxx].a.Adjunto5);}
            }else{paObj[istAudxx].a.AdjuntoIncidente = 1;}


           $('#lbLoadRepoA').css('visibility','hidden');
           $('#loadRepoA').css('visibility','hidden');
        }//-------------------------------------------------------------------------------------------------------------
        else
        {
            if(gerencia == 2)
            {//-------------------------------------------------------------------------------------------------------------
                       console.log('ahora vamos con los incidentes')

                         console.log("CARGANDO LAS IMAGENES EN AJAX ............. ID = ",istAudxx)
                        if(response.PlanAnual[0].Adjunto1 != "")
                            {
                               paObj[istAudxx].a.AdjuntoAlerta = 1;// 0-- quiere decir que no se ha ido al servidor por su fotos, 1 ya las fotos en el Array paObj[istAud].a
                               paObj[istAudxx].a.yAdjunto1 = response.PlanAnual[0].Adjunto1;

                               if((paObj[istAudxx].a.yAdjunto1)&&(paObj[istAudxx].a.yAdjunto1 != null )&&(paObj[istAudxx].a.yAdjunto1 != " " ))
                               {
                                    $('#btn_file_control_cambio').html("&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Ver Foto (1)")
                                    $('#btn_file_control_cambio').attr('title','Ver Foto de la Evidencia');
                                    $('#imgAdjuntoAlerta1').prop('src', paObj[istAudxx].a.yAdjunto1); //attr('src',paObj[istAud].a.yAdjunto1)
                               }
                            }else{paObj[istAudxx].a.AdjuntoAlerta = 1;}

                        if(response.PlanAnual[0].Adjunto2 != "")
                            {
                               paObj[istAudxx].a.AdjuntoAlerta = 1;// 0-- quiere decir que no se ha ido al servidor por su fotos, 1 ya las fotos en el Array paObj[istAud].a
                               paObj[istAudxx].a.yAdjunto2 = response.PlanAnual[0].Adjunto2;

                               if((paObj[istAudxx].a.yAdjunto2)&&(paObj[istAudxx].a.yAdjunto2 != null )&&(paObj[istAudxx].a.yAdjunto2 != " " ))
                               {
                                    $('#btn_file_control_cambio2').html("&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Ver Foto (1)")
                                    $('#btn_file_control_cambio2').attr('title','Ver Foto de la Evidencia');
                                    $('#imgAdjuntoAlerta2').prop('src', paObj[istAudxx].a.yAdjunto2); //attr('src',paObj[istAud].a.yAdjunto1)
                               }
                            }else{paObj[istAudxx].a.AdjuntoAlerta = 1;}

                            $('#sp4BtGenerarAlerta').prop('disabled',false);

                            $('#lbLoadRepoA1').css('visibility','hidden');
                            $('#loadRepoA1').css('visibility','hidden');


            }//-------------------------------------------------------------------------------------------------------------
        }
        
      
             
     
       });




}















function sp4EstadoInicialVentanaVerIncidente()
{

    $('#divf1_frecuencia').css('background-color','#EFEFEF');
    $('#sel_year_frecuencia').css('background-color','#EFEFEF');
    $('#sel_year_frecuencia').prop('disabled', true);


    // ssoma sprint4 campos inahibilitados
    $('#divf1').css('background-color','#EFEFEF');//sel_tipo_evento2
    $('#sel_tipo_evento2').css('background-color','#EFEFEF');
    $('#sel_tipo_evento2').prop('disabled', true);




//----------------------------------------------------------------------
    // $('#divf4').css('background-color','#EFEFEF');//sel_tipo_evento2
    // $('#sp3_txt_fecha_desde_p1').css('background-color','#EFEFEF');
    // $('#sp3_txt_fecha_desde_p1').prop('disabled', true);

    // $('#divf5').css('background-color','#EFEFEF');//sel_tipo_evento2
    // $('#sp3_txt_tiempo').css('background-color','#EFEFEF');
    // $('#sp3_txt_tiempo').prop('disabled', true);





    $('#divfdesde_p2').css('background-color','#EFEFEF');//sel_tipo_evento2
    $('#sp3_txt_fecha_desde_p2').css('background-color','#EFEFEF');
    $('#sp3_txt_fecha_desde_p2').prop('disabled', true);//divf1cont


    $('#divf5tiempo2').css('background-color','#EFEFEF');//sel_tipo_evento2
    $('#sp3_txt_tiempo2').css('background-color','#EFEFEF');
    $('#sp3_txt_tiempo2').prop('disabled', true);//divf1cont
//----------------------------------------------------------------------










    $('#divf1s').css('background-color','#EFEFEF');//sel_tipo_evento2
    $('#sel_filter_sede_p2').css('background-color','#EFEFEF');
    $('#sel_filter_sede_p2').prop('disabled', true);

    $('#divf1ee').css('background-color','#EFEFEF');//sel_tipo_evento2
    $('#sel_filter_embarcacion_p').css('background-color','#EFEFEF');
    $('#sel_filter_embarcacion_p').prop('disabled', true);

    $('#divf1aa').css('background-color','#EFEFEF');//sel_tipo_evento2
    $('#sel_fuente_area2').css('background-color','#EFEFEF');
    $('#sel_fuente_area2').prop('disabled', true);

    $('#divf1zz').css('background-color','#EFEFEF');//sel_tipo_evento2
    $('#sel_fuente_zona2').css('background-color','#EFEFEF');
    $('#sel_fuente_zona2').prop('disabled', true);//divf1cont

    $('#divf1cont').css('background-color','#EFEFEF');//sel_tipo_evento2
    $('#sel_fuente_empresa').css('background-color','#EFEFEF');
    $('#sel_fuente_empresa').prop('disabled', true);//divf1cont

    $('#divf8').css('background-color','#EFEFEF');//sel_tipo_evento2
    $('#txt_describe_incidente').css('background-color','#EFEFEF');
    $('#txt_describe_incidente').prop('disabled', true);//divf1cont



    $('#divftp').css('background-color','#EFEFEF');//sel_tipo_evento2
    $('#sp3_txt_tipo_producto').css('background-color','#EFEFEF');
    $('#sp3_txt_tipo_producto').prop('disabled', true);//divf1cont

    $('#divf1profd').css('background-color','#EFEFEF');//sel_tipo_evento2
    $('#sp3_txt_producto').css('background-color','#EFEFEF');
    $('#sp3_txt_producto').prop('disabled', true);//divf1cont

    $('#divf1vol').css('background-color','#EFEFEF');//sel_tipo_evento2
    $('#sp3_txt_producto_volumen').css('background-color','#EFEFEF');
    $('#sp3_txt_producto_volumen').prop('disabled', true);//divf1cont

    $('#divf1area').css('background-color','#EFEFEF');//sel_tipo_evento2
    $('#sp3_txt_producto_area').css('background-color','#EFEFEF');
    $('#sp3_txt_producto_area').prop('disabled', true);//divf1cont

    $('#divf1uente').css('background-color','#EFEFEF');//sel_tipo_evento2
    $('#sp3_txt_producto_fuente').css('background-color','#EFEFEF');
    $('#sp3_txt_producto_fuente').prop('disabled', true);//divf1cont



    //accidente personal
    $('#divf1resp').css('background-color','#EFEFEF');//sel_tipo_evento2
    $('#ReportanteName').css('background-color','#EFEFEF');
    $('#ReportanteName').prop('disabled', true);//divf1cont


    //accidente personal
    $('#divf1DNI').css('background-color','#EFEFEF');//sel_tipo_evento2
    $('#txt_dni').css('background-color','#EFEFEF');
    $('#txt_dni').prop('disabled', true);//divf1cont

      //accidente personal
      $('#divf1Cargo').css('background-color','#EFEFEF');//sel_tipo_evento2
      $('#txtx_caro_tipo').css('background-color','#EFEFEF');
      $('#txtx_caro_tipo').prop('disabled', true);//divf1cont


    $('#divf1Danio').css('background-color','#EFEFEF');//sel_tipo_evento2
    $('#txt_describe_danno').css('background-color','#EFEFEF');
    $('#txt_describe_danno').prop('disabled', true);//divf1cont

     var n = 5;
     for(var i = 0; i<n; i++)
       {
        var ii = i+1;
       
            $('#imgEvidencia'+ii).prop('src','./images/sinFoto.gif');
       }


}




function date_AAAA_MM_DD_T_HH_MM_S_to_DD_MM_AAAA(fechaBD)
{

    var startDate   = moment(fechaBD).format('DD/MM/YYYY');//dddd
    var year        = moment(fechaBD).format('YYYY');//dddd
    var month       = moment(fechaBD).format('MM');//
    var day         = moment(fechaBD).format('DD');
    //var startDate2   = year +"/"+ month +"/"+ day;
    var startDate2   = day+"/"+month+"/"+year 
    
    return startDate2;
}




function sp4FnModificarIncidenteAccidenteWeb()
{
//alert('estoy entrando aqui');
 $("#btnConfirmarEvidencia").attr("disabled",true);//btnConfirmarEvidencia btnConfirmarEvidencia  
 $("#btnCancelarEvidencia").attr("disabled",true);

 $('#btnConfirmarEvidencia').html('Guardando..');
 btnCancelarEvidencia


//aqui implementar el ajax.....................
    //$('#Sp3VentanaPruebas2').modal('hide').removeClass('fade');
    //$('#modalVerPlanAnualSP3').modal('hide').removeClass('fade');

    
    //$('#Sp3VentanaPruebas3').modal('show').addClass('fade');


             var body = {
                "Id1": istAud,
                "AccionBD":2,//2 PARA MODIFICAR WEB, 3 MODIFICAR APP
                "Tipo": 1,
                "IdTipoEvento":$('#sel_tipo_evento2').val(),
                "Fecha":  "2021-12-12",
                "Hora": "11:25:00",
                "HayPersonalAfectado": 1,
                "NombreEmpresa":  "claroSSSSSSSSSSSSSSSS",
                "IdEmpresa":2,
                "DescripcionEvento":"golpe en la cabeza me duele POSTMAN UPDATE WEB", 
                "A_NombrePersonalAccidentado": "Willian toschiiiiiinnnnggg",
                "A_IdPersonalAccidentado": "333hh", 
                "A_DniPersonalAccidentado": "785225555", 
                "A_PuestoCargoAccidentado": "gerente", 
                "A_NombreJefeAccidentado":"pepe luis",
                "A_IdJefeAccidentado": "444hjj",
                "B_TipoProducto": "no aplica", 
                "B_ProductoInvolucrado": "no aplica",
                "B_Volumen": "no aplica",
                "B_Area": "no aplica", 
                "B_Fuente": "no aplica", 
                "B_NombreJefeInmediato": "no aplica", 
                "B_IdJefeInmediato": "no aplica", 
                "C_NombreContratista": "no aplica vacio", 
                "C_Hurt":  "MUCHOOOOOOOOOOOOOOOOOOOOO DAÑOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOO", 
                "IdSede": 2,
                "IdEmbarcacion": 3,
                "IdArea": 2,
                "IdZona": 2,
                "IdEstadoIncidente": 2,
                "Adjunto1":"GDIFGDFG65DFG65DF6G5D6F5G6F5",
                "Adjunto2":"GDIFGDFG65DFG65DF6G5D6F5G6F5",
                "Adjunto3":"GDIFGDFG65DFG65DF6G5D6F5G6F5",
                "Adjunto4":"GDIFGDFG65DFG65DF6G5D6F5G6F5",
                "Adjunto5":"GDIFGDFG65DFG65DF6G5D6F5G6F5",
                "HallazgoId":paObj[istAud].a.IdHallazgo
            }
                console.log('enviando........r:', body)

                var url = apiUrlssoma+ "/api/Post-IncidenteAccidenteApp?code=wpICjvRa4aO5J0vYX/ccMZm3yZJlHZeh4z5tSm1bXSAKOxyqlykRzQ==&httpmethod=put";

                        var headers ={
                        "apikey":constantes.apiKey,
                        "Content-Type": "application/json",
                        }

                        $.ajax({
                            method: 'POST',
                            url:  url,
                            headers:headers,
                            data: JSON.stringify(body),
                            crossDomain: true,
                            dataType: "json",
                        }).done(function (data) {

                            console.log('despues modificar',data);
                            if(data.Id > 0)
                            {
                                
                                hideLoading();
                                //$("#btnConfirmarEvidencia").attr("disabled",true);
                                


                               $('#Sp3VentanaPruebas2').modal('hide').removeClass('fade')
                               $('#Sp3VentanaPruebas3').modal('show').addClass('fade')

                                 $("#btnConfirmarEvidencia").attr("disabled",false);//btnConfirmarEvidencia btnConfirmarEvidencia  
                                 $("#btnCancelarEvidencia").attr("disabled",false);
                                 $('#btnConfirmarEvidencia').html('Confirmar');

                               $("#sp4BtModificarGuardar1").attr("disabled",false);
                               $('#sp4BtModificarGuardar1').html('Modificar');
                               //$('#Sp3VentanaPruebas3').modal('hide').removeClass('fade');

                                

                            }

                            //fnEnviarInformeAuditoriaOk()

                        })
                        .fail(function( jqXHR, textStatus, errorThrown ) {

                            verModalError('Al Modificar el Incidente', 'Intente Nuevamente');
                            // $("#btGuardarModificar2").html("<b>Guardar</b>")
                            // $("#btGuardarModificar2").attr("disabled",false);

                               $("#sp4BtModificarGuardar1").attr("disabled",true);
                               $('#sp4BtModificarGuardar1').html('Modificar');
                        })
                        .always(function( jqXHR, textStatus, errorThrown ) {

                        });

             

}




//------------------------------------------------------------------------   ALERTA  -------------------------------------------------------------
function fnSp4MostrarModalGenAlerta(planAnualId)
{
    //alert('entrando an = ');
    //sp4EstadoInicialVentanaVerIncidente(planAnualId);// reicimos la vista
    // MOSTAR MODAL PLAN ANUAL
    $('#modalAlertaIncidente').css('visibility','visible');
    $('#modalAlertaIncidente').modal('show').addClass('fade')
    $('#sp3BtFiltroPlanAnualBtEnviar').css('visibility','visible');
    $('#closeModalPdfAlerta').css('visibility','hidden');
    //fnSp3onchangeObjetivoSubojetitivo('si');
    //fnSp3onchangeObjetivoSubojetitivo('si');

    $('#lbLoadRepoA1').css('visibility','hidden');
    $('#loadRepoA1').css('visibility','hidden');
    

    istAud = planAnualId;
    console.log('LOS DATOS DEL INCIDENTE SON ***********************************',paObj[planAnualId]);

    // COLOCAMOS TITULO A LA MODAL
    $("#titleModalAlertaIncidente").html("<h5 class='m-0'>"+"Alerta - "+paObj[planAnualId].a.Code+"</h5>");

    //----------------------------- Alerta --------------------------------------------

    $('#divf1DescribeAlerta').css('background-color','#FFFFFF');//sel_tipo_evento2
    $('#txt_describe_incidenteAlerta').css('background-color','#FFFFFF');
    $('#txt_describe_incidenteAlerta').prop('disabled', false);
    


    $('#divf8teAlertaX').css('background-color','#FFFFFF');//sel_tipo_evento2
    $('#txt_describe_incidenteAlertaX').css('background-color','#FFFFFF');
    $('#txt_describe_incidenteAlertaX').prop('disabled', false);
    


    $('#divf8teAlertaX').css('background-color','#FFFFFF');//sel_tipo_evento2
    $('#txt_describe_compromisoAlerta').css('background-color','#FFFFFF');
    $('#txt_describe_compromisoAlerta').prop('disabled', false);
   


    $('#divfsede_p2AL').css('background-color','#EFEFEF');//sel_tipo_evento2
    $('#sel_filter_sede_p2AL').css('background-color','#EFEFEF');
    $('#sel_filter_sede_p2AL').prop('disabled', true);
    $('#sel_filter_sede_p2AL').val(paObj[istAud].a.IdSede);




    $('#divfzona2AL').css('background-color','#EFEFEF');//sel_tipo_evento2
    $('#sel_fuente_zona2AL').css('background-color','#EFEFEF');
    $('#sel_fuente_zona2AL').val(paObj[istAud].a.IdZona);
    $('#sel_fuente_zona2AL').prop('disabled', true);




    $('#div_diagnostco').css('background-color','#EFEFEF');//sel_tipo_evento2
    $('#txt_diagnostco').css('background-color','#EFEFEF');

   
//=============================================== DATOS PERSONAL =============================================
if(paObj[istAud].a.GrupoEvento == 1)//GrupoEvento
{
    //alert('Accidente Personal');   
    paObj[istAud].a.Dannio != null ? paObj[istAud].a.Dannio : paObj[istAud].a.Dannio = '';
    paObj[istAud].a.Lesion != null ? paObj[istAud].a.Lesion : paObj[istAud].a.Lesion = '';

    var  diagnostico = paObj[istAud].a.Dannio+'  '+paObj[istAud].a.Lesion;

    paObj[istAud].a.yDiagnostico = diagnostico;
                var aa = $("#sel_f_dg_gv_1").html();

                $("#sel_fuente_tipo_incidente").html(" ");
                $("#sel_fuente_tipo_incidente").html(aa);

                $('#divftipo_inci').css('background-color','#EFEFEF');//sel_tipo_evento2
                $('#sel_fuente_tipo_incidente').css('background-color','#EFEFEF');
                $('#sel_fuente_tipo_incidente').val(paObj[istAud].a.xIdTipoEventoLesion);
                $('#sel_fuente_tipo_incidente').prop('disabled', true);
}
//=============================================== DATOS PERSONAL =============================================
else
{
    //=============================================== DATOS PERSONAL =============================================
        if(paObj[istAud].a.GrupoEvento == 2)//GrupoEvento
        {
           
             var aa = $("#dat_x_clasificacion").html();

              //alert(paObj[istAud].a.xIdTipoEventoLesion2);
                $("#sel_fuente_tipo_incidente").html(" ");
                $("#sel_fuente_tipo_incidente").html(aa);

                $('#divftipo_inci').css('background-color','#EFEFEF');//sel_tipo_evento2
                $('#sel_fuente_tipo_incidente').css('background-color','#EFEFEF');
                $('#sel_fuente_tipo_incidente').val(paObj[istAud].a.xIdTipoEventoLesion2);
                $('#sel_fuente_tipo_incidente').prop('disabled', true);


            //alert('Accidente Ambiental');   
            paObj[istAud].a.Contaminantes != null ? paObj[istAud].a.Contaminantes : paObj[istAud].a.Contaminantes = '';
            paObj[istAud].a.Volumen != null ? paObj[istAud].a.Volumen : paObj[istAud].a.Volumen = '';
            paObj[istAud].a.Unidad != null ? paObj[istAud].a.Unidad : paObj[istAud].a.Unidad = '';
            paObj[istAud].a.AreaImpactada != null ? paObj[istAud].a.AreaImpactada : paObj[istAud].a.AreaImpactada = '';
            paObj[istAud].a.ImpactoAmbiental != null ? paObj[istAud].a.ImpactoAmbiental : paObj[istAud].a.ImpactoAmbiental = '';

            //alert("aaaaaa = "+paObj[istAud].a.Unidad);

            if(paObj[istAud].a.Unidad == 1){paObj[istAud].a.Unidad = 'm3';}  
            if(paObj[istAud].a.Unidad == 2){paObj[istAud].a.Unidad = 'Gal';}  
            if(paObj[istAud].a.Unidad == 3){paObj[istAud].a.Unidad = 'TM';} 
           

            var  diagnostico = "El Contaminante ("+paObj[istAud].a.Contaminantes+') se derramó en un Volumen de '+ paObj[istAud].a.Volumen+' ('+paObj[istAud].a.Unidad+') impactando un área de ('+ paObj[istAud].a.AreaImpactada+' m2) causando ambientalmente un daño a ('+paObj[istAud].a.ImpactoAmbiental+')';

            paObj[istAud].a.yDiagnostico = diagnostico;
        }
        //=============================================== DATOS PERSONAL =============================================

          if(paObj[istAud].a.GrupoEvento == 3)//GrupoEvento
        {
           
             var aa = $("#sel_f_dg_gv_1k").html();

              //alert(paObj[istAud].a.xIdTipoEventoLesion2);
                $("#sel_fuente_tipo_incidente").html(" ");
                $("#sel_fuente_tipo_incidente").html(aa);

                $('#divftipo_inci').css('background-color','#EFEFEF');//sel_tipo_evento2
                $('#sel_fuente_tipo_incidente').css('background-color','#EFEFEF');
                $('#sel_fuente_tipo_incidente').val(paObj[istAud].a.xIdTipoEventoLesion3);
                $('#sel_fuente_tipo_incidente').prop('disabled', true);


            // //alert('Accidente Ambiental');   
            // paObj[istAud].a.Contaminantes != null ? paObj[istAud].a.Contaminantes : paObj[istAud].a.Contaminantes = '';
            // paObj[istAud].a.Volumen != null ? paObj[istAud].a.Volumen : paObj[istAud].a.Volumen = '';
            // paObj[istAud].a.Unidad != null ? paObj[istAud].a.Unidad : paObj[istAud].a.Unidad = '';
            // paObj[istAud].a.AreaImpactada != null ? paObj[istAud].a.AreaImpactada : paObj[istAud].a.AreaImpactada = '';
            // paObj[istAud].a.ImpactoAmbiental != null ? paObj[istAud].a.ImpactoAmbiental : paObj[istAud].a.ImpactoAmbiental = '';

            // //alert("aaaaaa = "+paObj[istAud].a.Unidad);

            // if(paObj[istAud].a.Unidad == 1){paObj[istAud].a.Unidad = 'm3';}  
            // if(paObj[istAud].a.Unidad == 2){paObj[istAud].a.Unidad = 'Gal';}  
            // if(paObj[istAud].a.Unidad == 3){paObj[istAud].a.Unidad = 'TM';} 
           

            // var  diagnostico = "El Contaminante ("+paObj[istAud].a.Contaminantes+') se derramó en un Volumen de '+ paObj[istAud].a.Volumen+' ('+paObj[istAud].a.Unidad+') impactando un área de ('+ paObj[istAud].a.AreaImpactada+' m2) causando ambientalmente un daño a ('+paObj[istAud].a.ImpactoAmbiental+')';
            //alert("aaaaaa"+ paObj[istAud].a.DescripcionEvento)
            var  diagnostico = paObj[istAud].a.DescripcionEvento //diagnostico;
        }
        //=============================================== DATOS PERSONAL =============================================
}


   


    $('#txt_diagnostco').html(diagnostico);


    $('#txt_diagnostco').prop('disabled', true);//divf1cont

    //alert('debes cambiar en sql campo yDiagnostico y mostrarlo aqui---linea 4000');


    $('#divfdesde_p1_2').css('background-color','#EFEFEF');//sel_tipo_evento2
    $('#sp3_txt_fecha_desde_p1_2').css('background-color','#EFEFEF');
    var ff = date_AAAA_MM_DD_T_HH_MM_S_to_DD_MM_AAAA(paObj[istAud].a.Fecha)
    $('#sp3_txt_fecha_desde_p1_2').val(ff);
    $('#sp3_txt_fecha_desde_p1_2').prop('disabled', true);//divf1cont


    $('#divf5tiempo1_2').css('background-color','#EFEFEF');//sel_tipo_evento2
    $('#sp3_txt_tiempo1_2').css('background-color','#EFEFEF');
    $('#sp3_txt_tiempo1_2').val(paObj[istAud].a.Hora);
    $('#sp3_txt_tiempo1_2').prop('disabled', true);//divf1cont

        $('#txt_describe_incidenteAlerta').val(" ");
        $('#txt_describe_incidenteAlertaX').val(" ");
        $('#txt_describe_compromisoAlerta').val(" ");

         $('#divmisoAlerta').css('background-color','#FFFFFF');//sel_tipo_evento2
         $('#txt_describe_compromisoAlerta').css('background-color','#FFFFFF');
         //$('#txt_describe_compromisoAlerta').prop('disabled', true);

        
        {$('#btn_file_control_cambio').html("&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Subir Foto")
        $('#btn_file_control_cambio').attr('title','Clic para Adjuntar Evidencia');}
        $('#imgAdjuntoAlerta1').attr('src'," ")
        
        {$('#btn_file_control_cambio2').html("&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Subir Foto")
        $('#btn_file_control_cambio2').attr('title','Clic para Adjuntar Evidencia');}
        $('#imgAdjuntoAlerta2').attr('src'," ")

        
         $('#sp4BtGenerarAlerta').html("Generar Alerta");
         $('#sp4BtGenerarAlerta').prop('disabled',false);
         //$('#btn_file_control_cambio').prop('disabled', false);
         //$('#btn_file_control_cambio2').prop('disabled', false);

                    //aqui vamos a verificar si existe previamente creada una alerta
                   // alert(paObj[istAud].a.yIdAlerta);

                    if(paObj[istAud].a.yIdAlerta> 0)
                    {
                        

                       $('#lbLoadRepoA1').css('visibility','visible');
                      $('#loadRepoA1').css('visibility','visible');

                        $('#divf1DescribeAlerta').css('background-color','#EFEFEF');//sel_tipo_evento2
                        $('#txt_describe_incidenteAlerta').css('background-color','#EFEFEF');
                        $('#txt_describe_incidenteAlerta').prop('disabled', true);
                        $('#txt_describe_incidenteAlerta').val(paObj[istAud].a.yDetalle);


                        $('#divf8teAlertaX').css('background-color','#EFEFEF');//sel_tipo_evento2
                        $('#txt_describe_incidenteAlertaX').css('background-color','#EFEFEF');
                        $('#txt_describe_incidenteAlertaX').prop('disabled', true);
                        $('#txt_describe_incidenteAlertaX').val(paObj[istAud].a.yDescripcion);


                        $('#divmisoAlerta').css('background-color','#EFEFEF');//sel_tipo_evento2
                        $('#txt_describe_compromisoAlerta').css('background-color','#EFEFEF');
                        $('#txt_describe_compromisoAlerta').prop('disabled', true);
                        $('#txt_describe_compromisoAlerta').val(paObj[istAud].a.yCompromiso);



                       console.log("**paObj[istAud].a.AdjuntoAlerta == ",paObj[istAud].a.AdjuntoAlerta)
                        if(paObj[istAud].a.AdjuntoAlerta == 1)
                           {
                               console.log("CARGANDO LAS IMAGENES SIN AJAX ID = ",istAud)
                                 if(paObj[istAud].a.yAdjunto1 != "" && paObj[istAud].a.yAdjunto1 != null)
                                    {
                                        $('#btn_file_control_cambio').html("&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Ver Foto (1)")
                                        $('#btn_file_control_cambio').attr('title','Ver Foto de la Evidencia');
                                        $('#imgAdjuntoAlerta1').prop('src', paObj[istAud].a.yAdjunto1); //attr('src',paObj[istAud].a.yAdjunto1)a.yAdjunto1
                                    }

                                    if(paObj[istAud].a.yAdjunto2 != "" && paObj[istAud].a.yAdjunto2 != null)
                                        {
                                            $('#btn_file_control_cambio2').html("&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Ver Foto (1)")
                                            $('#btn_file_control_cambio2').attr('title','Ver Foto de la Evidencia');
                                            $('#imgAdjuntoAlerta2').prop('src', paObj[istAud].a.yAdjunto2);
                                        }
                                 $('#lbLoadRepoA1').css('visibility','hidden');
                                 $('#loadRepoA1').css('visibility','hidden');
                           }
                           else
                           {
                            console.log("elseeeeeeeeeeeeeeeeeeeeeeeeee")
                             Sp4BuscarAdjuntosIncidente_y_Alerta(istAud,2);
                           }

                       

        






                            $('#sp4BtGenerarAlerta').html("Ver la Alerta Generada");
                    }




}


function fnSp4Mouseseguir()
{
  visorAdjj1.top = parseInt(window.event.pageY + 5) + "px";
  visorAdjj1.left = parseInt(window.event.pageX + 5) + "px";
}



var nComp = 0; //variable global que indica la cantidad de Compromisos en la Alerta
function sp4FrnAgregaAlListadoCompromisosAlerta() 
{

/*
    var p = $('#txt_describe_compromisoAlerta').val();
    if(p.length >0 && p.length<= 1)
    {
            $('#txt_describe_compromisoAlerta').val("1. ");nComp++;
    }
*/
    if(event.which == 13)
    {//--------------------------------------------------enter
           //  var esurl = /^(ht|f)tps?:\/\/\w+([\.\-\w]+)?\.([a-z])(:\d)?(\/.*)?$/i;
           //  var nlinea = 0;
           //  var nvalor="";
           //  var contenido = document.getElementById('txt_describe_compromisoAlerta').value;
           //  var lineas = contenido.split('\n');

             
           //  for(var i = 0; i < lineas.length; i++){
           //   if(esurl.test(lineas[i])) {
           //   nlinea++
           //   nvalor += "\t"+ lineas[i] +"\n"+'-I-';
           //   }
           //   else nvalor += nComp+" ."+lineas[i] +"\n";
           //  }

           //  document.getElementById('txt_describe_compromisoAlerta').value = nvalor;
           // nComp++;

    }//--------------------------------------------------enter


//despues vemos esto...
 
 //----------------------------------------------------------------------------------



 //------------------------------------------------------------------------------


}

function Sp4ChangeFile(idInputFile, idBton)//btn_file_control_cambio
{
      var file_control_cambio = document.getElementById(idInputFile).files[0];
      if(file_control_cambio)
                        {

                                adj1x = toBase64CC(file_control_cambio?file_control_cambio:'').then(
                                data => 
                                {//
                                    var fileInput = document.getElementById(idInputFile);
                                    var filePath = fileInput.value;
                                    var extAdj = sp3FnvalidaExtensionAdjunto(filePath);
                                    extAdj = extAdj.toUpperCase()

                                    var esc= escape(filePath)
                                    var name = esc.split(","); var ffile = name[0].split("C%3A%5Cfakepath%5C")

                                    console.log("ARCHIVO************** = ",ffile[1]);
                                    //$('#btn_file_control_cambio').html("&nbsp;&nbsp;&nbsp;"+ffile[1]+"")
                                     $('#'+idBton).html("&nbsp;&nbsp; Cambiar Foto (1)")
                                     $('#'+idBton).attr('title',ffile[1]);
                                }
                                                                                                    );

                        }

}


function Sp4ChangeFileLA1(idInputFile, idBton)//btn_file_control_cambio
{
    //alert('aaaaaaaaa hereeeeeeeeeee 6177 = '+ istLA);
      var file_control_cambio = document.getElementById(idInputFile).files[0];
      if(file_control_cambio)
                        {
                          showLoading();  $('#lbLoadRepoA_la').css('visibility','visible');  $('#loadRepoA_la').css('visibility','visible');
                                adj1x = toBase64CC(file_control_cambio?file_control_cambio:'').then(
                                data => 
                                {//
                                    
                                    var fileInput = document.getElementById(idInputFile);
                                    var filePath = fileInput.value;
                                    var extAdj = sp3FnvalidaExtensionAdjunto(filePath);
                                    extAdj = extAdj.toUpperCase()

                                    var esc= escape(filePath)
                                    var name = esc.split(","); var ffile = name[0].split("C%3A%5Cfakepath%5C")
                                    var NombreEvidencia = ffile[1];
                                    var EvidenciaFile = data;
                                    var Leccion_AprendidaId = istLA;
                                    var Idd =  dImgLA[0];
                                    //console.log("ARCHIVO************** = ",NombreEvidencia);
                                    //console.log("ARCHIVO BASE6444 ************** = ",EvidenciaFile);
                                    //$('#btn_file_control_cambio').html("&nbsp;&nbsp;&nbsp;"+ffile[1]+"")
                                     
                                            var body = {
                                                    "Id1": Idd,
                                                    "AccionBD":2,
                                                    "Leccion_AprendidaId": Leccion_AprendidaId,
                                                    "NombreEvidencia": NombreEvidencia,
                                                    "EvidenciaFile": EvidenciaFile,
                                                    "CreateDate": "2021-10-12",
                                                    "CreateBy": "andy postma GGGGGGGGGGGGGGn"
                                                     }
                                            var url = apiUrlssoma+"/api/Post-EvidenciaLeccionAprendida?code=VPsJsul2gUK0zLh7IlTW7dDd3R7Y2zBzS3nayX5a17dG6XNzPdjPWQ==&httpmethod=post";
                                    //LO GUARDAMOS EN LA BASE DE DATOS

                                          var headers ={
                                                    "apikey":constantes.apiKey,
                                                    "Content-Type": "application/json",
                                                    }
                                                    console.log("bodyxx:",body);
                                                    $.ajax({
                                                        method: 'POST',
                                                        url:  url,
                                                        headers:headers,
                                                        data: JSON.stringify(body),
                                                        crossDomain: true,
                                                        dataType: "json",
                                                    }).done(function (data) {

                                                        console.log('despues insertar',data);
                                                        if(data.Id > 0)
                                                        {
                                                            
                                                             hideLoading(); $('#lbLoadRepoA_la').css('visibility','hidden');  $('#loadRepoA_la').css('visibility','hidden');
                                                            
                                                           $('#'+idBton).html("&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Ver Foto (1)")
                                                           $('#'+idBton).attr('title','Ver Foto de la Evidencia ('+NombreEvidencia+') - Clic para Cambiar Imagen');



                                                           // if(EvidenciaFile== './images/alertaImg1.gif')
                                                           // {
                                                           // // alert('es el primer registro');
                                                           // }

                                                           $('#imgAdjuntoAlerta1_1').prop('src', EvidenciaFile); 

                                                           //alert('si se guardo y se cargo');


                                                        }else{verModalError('Al Adjuntar Evidencia', 'Intente Nuevamente');}

                                                        //fnEnviarInformeAuditoriaOk()

                                                    })
                                                    .fail(function( jqXHR, textStatus, errorThrown ) {

                                                        hideLoading(); $('#lbLoadRepoA_la').css('visibility','hidden');  $('#loadRepoA_la').css('visibility','hidden');
                                                    })
                                                    .always(function( jqXHR, textStatus, errorThrown ) {

                                                    });





                                }
                                                                                                    );

                        }

}














function Sp4ChangeFileLA2(idInputFile, idBton)//btn_file_control_cambio
{
    //alert('aaaaaaaaa hereeeeeeeeeee 6177 = '+ istLA);
      var file_control_cambio = document.getElementById(idInputFile).files[0];
      if(file_control_cambio)
                        {
                           showLoading();  $('#lbLoadRepoA_la').css('visibility','visible');  $('#loadRepoA_la').css('visibility','visible');
                                adj1x = toBase64CC(file_control_cambio?file_control_cambio:'').then(
                                data => 
                                {//
                                    
                                    var fileInput = document.getElementById(idInputFile);
                                    var filePath = fileInput.value;
                                    var extAdj = sp3FnvalidaExtensionAdjunto(filePath);
                                    extAdj = extAdj.toUpperCase()

                                    var esc= escape(filePath)
                                    var name = esc.split(","); var ffile = name[0].split("C%3A%5Cfakepath%5C")
                                    var NombreEvidencia = ffile[1];
                                    var EvidenciaFile = data;
                                    var Leccion_AprendidaId = istLA;
                                    var Idd =  dImgLA[1];
                                    //console.log("ARCHIVO************** = ",NombreEvidencia);
                                    //console.log("ARCHIVO BASE6444 ************** = ",EvidenciaFile);
                                    //$('#btn_file_control_cambio').html("&nbsp;&nbsp;&nbsp;"+ffile[1]+"")
                                     
                                            var body = {
                                                    "Id1": Idd,
                                                    "AccionBD":2,
                                                    "Leccion_AprendidaId": Leccion_AprendidaId,
                                                    "NombreEvidencia": NombreEvidencia,
                                                    "EvidenciaFile": EvidenciaFile,
                                                    "CreateDate": "2021-10-12",
                                                    "CreateBy": "andy postma GGGGGGGGGGGGGGn"
                                                     }
                                            var url = apiUrlssoma+"/api/Post-EvidenciaLeccionAprendida?code=VPsJsul2gUK0zLh7IlTW7dDd3R7Y2zBzS3nayX5a17dG6XNzPdjPWQ==&httpmethod=post";
                                    //LO GUARDAMOS EN LA BASE DE DATOS

                                          var headers ={
                                                    "apikey":constantes.apiKey,
                                                    "Content-Type": "application/json",
                                                    }
                                                    console.log("bodyxx:",body);
                                                    $.ajax({
                                                        method: 'POST',
                                                        url:  url,
                                                        headers:headers,
                                                        data: JSON.stringify(body),
                                                        crossDomain: true,
                                                        dataType: "json",
                                                    }).done(function (data) {

                                                        console.log('despues insertar',data);
                                                        if(data.Id > 0)
                                                        {
                                                            
                                                             hideLoading(); $('#lbLoadRepoA_la').css('visibility','hidden');  $('#loadRepoA_la').css('visibility','hidden');
                                                            
                                                           $('#'+idBton).html("&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Ver Foto (1)")
                                                           $('#'+idBton).attr('title','Ver Foto de la Evidencia ('+NombreEvidencia+') - Clic para Cambiar Imagen');

                                                           $('#imgAdjuntoAlerta1_2').prop('src', EvidenciaFile); 

                                                           //alert('si se guardo y se cargo');


                                                        }else{verModalError('Al Adjuntar Evidencia', 'Intente Nuevamente');}

                                                        //fnEnviarInformeAuditoriaOk()

                                                    })
                                                    .fail(function( jqXHR, textStatus, errorThrown ) {

                                                         hideLoading(); $('#lbLoadRepoA_la').css('visibility','hidden');  $('#loadRepoA_la').css('visibility','hidden');
                                                    })
                                                    .always(function( jqXHR, textStatus, errorThrown ) {

                                                    });





                                }
                                                                                                    );

                        }

}























function Sp4ChangeFileLA3(idInputFile, idBton)//btn_file_control_cambio
{
    //alert('aaaaaaaaa hereeeeeeeeeee 6177 = '+ istLA);
      var file_control_cambio = document.getElementById(idInputFile).files[0];
      if(file_control_cambio)
                        {
                          showLoading();  $('#lbLoadRepoA_la').css('visibility','visible');  $('#loadRepoA_la').css('visibility','visible');
                                adj1x = toBase64CC(file_control_cambio?file_control_cambio:'').then(
                                data => 
                                {//
                                    
                                    var fileInput = document.getElementById(idInputFile);
                                    var filePath = fileInput.value;
                                    var extAdj = sp3FnvalidaExtensionAdjunto(filePath);
                                    extAdj = extAdj.toUpperCase()

                                    var esc= escape(filePath)
                                    var name = esc.split(","); var ffile = name[0].split("C%3A%5Cfakepath%5C")
                                    var NombreEvidencia = ffile[1];
                                    var EvidenciaFile = data;
                                    var Leccion_AprendidaId = istLA;
                                    var Idd =  dImgLA[2];
                                    //console.log("ARCHIVO************** = ",NombreEvidencia);
                                    //console.log("ARCHIVO BASE6444 ************** = ",EvidenciaFile);
                                    //$('#btn_file_control_cambio').html("&nbsp;&nbsp;&nbsp;"+ffile[1]+"")
                                     
                                            var body = {
                                                    "Id1": Idd,
                                                    "AccionBD":2,
                                                    "Leccion_AprendidaId": Leccion_AprendidaId,
                                                    "NombreEvidencia": NombreEvidencia,
                                                    "EvidenciaFile": EvidenciaFile,
                                                    "CreateDate": "2021-10-12",
                                                    "CreateBy": "andy postma GGGGGGGGGGGGGGn"
                                                     }
                                            var url = apiUrlssoma+"/api/Post-EvidenciaLeccionAprendida?code=VPsJsul2gUK0zLh7IlTW7dDd3R7Y2zBzS3nayX5a17dG6XNzPdjPWQ==&httpmethod=post";
                                    //LO GUARDAMOS EN LA BASE DE DATOS

                                          var headers ={
                                                    "apikey":constantes.apiKey,
                                                    "Content-Type": "application/json",
                                                    }
                                                    console.log("bodyxx:",body);
                                                    $.ajax({
                                                        method: 'POST',
                                                        url:  url,
                                                        headers:headers,
                                                        data: JSON.stringify(body),
                                                        crossDomain: true,
                                                        dataType: "json",
                                                    }).done(function (data) {

                                                        console.log('despues insertar',data);
                                                        if(data.Id > 0)
                                                        {
                                                            
                                                             hideLoading(); $('#lbLoadRepoA_la').css('visibility','hidden');  $('#loadRepoA_la').css('visibility','hidden');
                                                            
                                                           $('#'+idBton).html("&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Ver Foto (1)")
                                                           $('#'+idBton).attr('title','Ver Foto de la Evidencia ('+NombreEvidencia+') - Clic para Cambiar Imagen');

                                                           $('#imgAdjuntoAlerta1_3').prop('src', EvidenciaFile); 

                                                           //alert('si se guardo y se cargo');


                                                        }else{verModalError('Al Adjuntar Evidencia', 'Intente Nuevamente');}

                                                        //fnEnviarInformeAuditoriaOk()

                                                    })
                                                    .fail(function( jqXHR, textStatus, errorThrown ) {

                                                        hideLoading(); $('#lbLoadRepoA_la').css('visibility','hidden');  $('#loadRepoA_la').css('visibility','hidden');
                                                    })
                                                    .always(function( jqXHR, textStatus, errorThrown ) {

                                                    });





                                }
                                                                                                    );

                        }

}



























    
var pdf_file = new Blob();



function sp4GenerarAlertaIncidente()
{//----------------------------------------------------------------------------------------------------------------------------------------
  $('#sp3BtFiltroPlanAnualBtEnviar').attr("disabled", true);
    //vamos a pasar a recolectar los datos de la alerta

//console.clear
console.log('yPDF = '+paObj[istAud].a.yPdf);

if(paObj[istAud].a.yIdAlerta > 0)
    {
         //$('#modalAlertaIncidente').modal('hide').removeClass('fade');

         sp4MostrarPreviewAlertaPDF2();
         

        
         $('#sp3BtFiltroPlanAnualBtEnviar').css('visibility','hidden');
        
          $('#closeModalPdfAlerta').css('visibility','visible');


         //$('#miIframeMuestraPdf1').attr("src", paObj[istAud].a.yPdf); 
        
         /*$('#modalAlertaIncidentePDF').modal('show').addClass('fade');


          var iframe = document.getElementById('miIframeMuestraPdf1');
          iframe.src = URL.createObjectURL(blob);*/
    
    }
    else
    {//----------------------- Esto va a pasar siempre y cuando sea un nuevoo registro de alerta -----------------------------------------
       
      
        //$('#lbLoadRepoA1').html("Cargando las fotos, por favor  espere ..");
        $('#lbLoadRepoA1').html("Generando el (PDF), y creando la alerta, por favor  espere ..");
        $('#lbLoadRepoA1').css('visibility','visible');
        $('#loadRepoA1').css('visibility','visible');

     var adj1x = '';
     var adj2x = '';
     var faltaGuardar = '';
     var marcaGuardar = 0;

     console.log("gggggggg = ", $('#txt_describe_incidenteAlerta').val());
     if($('#txt_describe_incidenteAlerta').val() == " "){faltaGuardar = faltaGuardar+' *Detalle '; marcaGuardar = 1;}
     if(($('#txt_diagnostco').val() == " ")||($('#txt_diagnostco').val() == "0")){faltaGuardar = faltaGuardar+'<br/> *Diagnostico '; marcaGuardar = 1;}
     if($('#txt_describe_incidenteAlertaX').val() == " "){faltaGuardar = faltaGuardar+'<br/> *Descripción '; marcaGuardar = 1;}
     if($('#txt_describe_compromisoAlerta').val() == " "){faltaGuardar = faltaGuardar+'<br/> *Compromisos '; marcaGuardar = 1;}



     //var pdf_file = 'uuuuuuuuuuuuuuuuuuuuuuuu'; 

               //--------------------------------------------------------------------------------------------
                        var file_control_cambio = document.getElementById("file_control_cambio").files[0];
                        
                        if((file_control_cambio)&&(marcaGuardar == 0))
                        {  
                            adj1x = toBase64CC(file_control_cambio?file_control_cambio:'').then(
                                data => 
                                {//-----------------------------------******----------------------------------------------------------
                                    adj1x =   data;  
                                    $('#file_control_cambio_64').val(adj1x);
                                    //console.log("Primer Adjunto"+adj1x)
                                    var file_control_cambio2 = document.getElementById("file_control_cambio2").files[0];


                                                var fileInput = document.getElementById('file_control_cambio');
                                                var filePath = fileInput.value;
                                                var extAdj = sp3FnvalidaExtensionAdjunto(filePath);
                                                extAdj = extAdj.toUpperCase()

                                                 var esc= escape(filePath)
                                                 var name = esc.split("%5C");
                                                            //let extAdj = sp3FnvalidaExtensionAdjunto(filePath);
                                                //alert('es un archivos '+extAdj);

                                    if(file_control_cambio2)
                                    {
                                        adj2x = toBase64CC(file_control_cambio2?file_control_cambio2:'').then(
                                            data => 
                                            {//***************************************************************************************************
                                             

                                              //alert('que hacemos guardamos solo con la imagen 222 ='+file_control_cambio);

                                             if((!$('#sel_fuente_tipo_incidente').val())||($('#sel_fuente_tipo_incidente').val()== null)||($('#sel_fuente_tipo_incidente').val()== 0))
                                                {
                                                    
                                                        verModalError('Al Crear la Alerta', 'Debe registrar el tipo de Incidente, en Datos Generales');
                                                        $('#lbLoadRepoA1').css('visibility','hidden');
                                                        $('#loadRepoA1').css('visibility','hidden');
                                                     
                                                }
                                                else
                                                {

                                                adj2x =   data;  
                                                $('#file_control_cambio2_64').val(adj2x);
                                                var fileInput2 = document.getElementById('file_control_cambio2');
                                                var filePath2 = fileInput2.value;
                                                var extAdj2 = sp3FnvalidaExtensionAdjunto(filePath2);
                                                extAdj2 = extAdj2.toUpperCase()

                                                //alert('es un archivos '+extAdj2);
                                                //console.log("Segundo Adjunto"+adj2x)
                                                 

                                                 var ffg = $('#sp3_txt_fecha_desde_p1_2').val().split('/');
                                                 var nff = ffg[2]+'-'+ffg[1]+'-'+ffg[0];
                                          
                                                //----------------*******----------------------------*****------------------------*****---------------------sel_fuente_tipo_incidente--------------------
                                                var body = {
                                                    "Id1": 0,
                                                    "AccionBD":0,
                                                    "IdIncidenteAccidente": istAud,
                                                    "Detalle":$('#txt_describe_incidenteAlerta').val(),
                                                    "IdSede": $('#sel_filter_sede_p2AL').val(),
                                                    "IdZona": $('#sel_fuente_zona2AL').val(),
                                                    "IdTipoEvento": $('#sel_fuente_tipo_incidente').val(),//tipo de incidente
                                                    "Fecha": nff,//datos en tabla incidente pregunar si es la data de hoy
                                                    "Hora": $('#sp3_txt_tiempo1_2').val(),//datos en tabla incidente
                                                    "Diagnostico": $('#txt_diagnostco').val(),
                                                    "Descripcion": $('#txt_describe_incidenteAlertaX').val(),
                                                    "Compromiso": $('#txt_describe_compromisoAlerta').val(),
                                                    "Adjunto1": adj1x,
                                                    "Adjunto2": adj2x,
                                                    "Pdf":       " se genera automaticamente.........."
                                                }
                                                 //var url = apiUrlssoma+ "/api/Post-IncidenteAccidenteApp?code=wpICjvRa4aO5J0vYX/ccMZm3yZJlHZeh4z5tSm1bXSAKOxyqlykRzQ==&httpmethod=put";
                                                 var url = apiUrlssoma+"/api/Post-Alerta-IncidenteAccidenteWeb?code=aWwcwuIdveNpO4vo3UtZtkbATnLp8DpmPYRWuTircB4wn9Du3Rfdcg==&httpmethod=post";


                                                    var headers ={
                                                    "apikey":constantes.apiKey,
                                                    "Content-Type": "application/json",
                                                    }
                                                    console.log("bodyxx:",body);
                                                    $.ajax({
                                                        method: 'POST',
                                                        url:  url,
                                                        headers:headers,
                                                        data: JSON.stringify(body),
                                                        crossDomain: true,
                                                        dataType: "json",
                                                    }).done(function (data) {

                                                        console.log('despues insertar',data);
                                                        if(data.Id > 0)
                                                        {
                                                            
                                                            hideLoading();
                                                            
                                                            sp4MostrarPreviewAlertaPDF(adj1x,extAdj,adj2x,extAdj2, data.Id);//esto despues de guardar los datos, si es ok el guardado, muestras los datos que tienes en cache en el pdf
                                                             
                                                              //$('#lbLoadRepoA1').html("Cargando las fotos, por favor  espere ..");
                                                                $('#lbLoadRepoA1').html("Cargando las fotos, por favor  espere ..");
                                                                $('#lbLoadRepoA1').css('visibility','hidden');
                                                                $('#loadRepoA1').css('visibility','hidden');

                                                                // istAud_DG = idDatosGeneral; paObjDG[istAud_DG]



                                                      //====================================================== ANDY 04-07-2021 REGISTRO DE LECCION APRENDIDA ===================================
                                                       var Dannio = "";if((paObj[istAud].a.Dannio == null)||(paObj[istAud].a.Dannio == 'null')){Dannio = "no Aplica"}else{Dannio = paObj[istAud].a.Dannio;}
                                                                        let body2 = {
                                                                            //*****************************DATOS GENERALES******************
                                                                                "Id1": 0,
                                                                                "AccionBD":0,
                                                                                "IdIncidente1":istAud,
                                                                                "IdTipoEvento_": parseInt( $('#sel_fuente_tipo_incidente').val()),
                                                                                "IdSede": $('#sel_filter_sede_p2AL').val(),
                                                                                "Fecha":  nff,
                                                                                "FraseCorta":$('#txt_describe_incidenteAlerta').val(), 
                                                                                "Descripcion":$('#txt_describe_incidenteAlertaX').val(),
                                                                                "Codigo":paObj[istAud].a.Code,
                                                                                "TipoDatoGeneral":0,
                                                                                "Potencial":paObj[istAud].a.Potencial,   
                                                                                "TipoLesionDanio":Dannio,
                                                                                "Mortal":0,     
                                                                                "Create_By":getCookie("vtas_id_hash"+sessionStorage.tabVisitasa),
                                                                                "Create_Date":"", 
                                                                                "B_Contaminante":paObj[istAud].a.ContaminanteId,
                                                                                "B_Impacto_Ambiental":paObj[istAud].a.ImpactoAmbientalId
                                                                            }    
                                                        
                                                                            var urlyu = apiUrlssoma+"/api/Post-LeccionAprendida?code=3SZLZvJm1g4qEdObbrPAWiDaiGa6EFKE9RFyIN1Q5osMz6ozxWX/xQ==&httpmethod=post";
                                                                            

                                                                            console.info("Que mando data1 = ",body2); console.info("Que mando url= ",urlyu)
                                                                            var headers ={
                                                                                "apikey":constantes.apiKey
                                                                              }
                                                     
                                                     
                                                     
                                                                            $.ajax({
                                                                                method: "POST",
                                                                                url:  urlyu,
                                                                                data: JSON.stringify(body2),
                                                                                headers:headers,
                                                                                crossDomain: true,
                                                                                dataType: "json",
                                                                            })
                                                     
                                                                            .done(function(data1)
                                                                            {
                                                                                console.info("data1 Leccion Aprendida",data1)
                                                                                 // resultado Exitoso
                                                                                if(data1.Id>0)
                                                                                {
                                                                                   console.log('se creo la leccion Aprendida')
                                                                                }
                                                                            });
                                                                                     

                                                       

                                                   //====================================================== ANDY 04-07-2021 REGISTRO DE LECCION APRENDIDA ===================================
























                                                            fnSp3CargaFiltroEstadoInicialPlanAnual();

                                                        }else{verModalError('Al Crear la Alerta', 'Intente Nuevamente');}

                                                        //fnEnviarInformeAuditoriaOk()

                                                    })
                                                    .fail(function( jqXHR, textStatus, errorThrown ) {

                                                        verModalError('Al Crear la Alerta', 'Intente Nuevamente');
                                                        // $("#btGuardarModificar2").html("<b>Guardar</b>")
                                                        // $("#btGuardarModificar2").attr("disabled",false);

                                                           $("#sp4BtModificarGuardar1").attr("disabled",true);
                                                           $('#sp4BtModificarGuardar1').html('Modificar');
                                                    })
                                                    .always(function( jqXHR, textStatus, errorThrown ) {

                                                    });
                                                //----------------******-----------------------------******-----------------------******---------------------------------------------



                                                }
                                                   
                                            }//***************************************************************************************************
                                                                                                    );
                                    }
                                    else
                                    {
                                        adj2x = ' ';  
                                       //alert('que hacemos guardamos solo con la imagen 1 ='+file_control_cambio);
                                           
                                        if((!$('#sel_fuente_tipo_incidente').val())||($('#sel_fuente_tipo_incidente').val()== null)||($('#sel_fuente_tipo_incidente').val()== 0))
                                        {
                                            
                                                verModalError('Al Crear la Alerta', 'Debe registrar el tipo de Incidente, en Datos Generales');
                                                $('#lbLoadRepoA1').css('visibility','hidden');
                                                $('#loadRepoA1').css('visibility','hidden');
                                             
                                        }
                                        else
                                        {
                                              //=========================================================================================================================================================================
                                                         
                                                // adj2x =   data;  
                                                // $('#file_control_cambio2_64').val(adj2x);
                                                // var fileInput2 = document.getElementById('file_control_cambio2');
                                                // var filePath2 = fileInput2.value;
                                                // var extAdj2 = sp3FnvalidaExtensionAdjunto(filePath2);
                                                // extAdj2 = extAdj2.toUpperCase()

                                                 adj2x =   '';  
                                                 $('#file_control_cambio2_64').val(adj2x);
                                                var fileInput2 = document.getElementById('file_control_cambio2');
                                                var filePath2 = fileInput2.value;
                                                var extAdj2 = ''


                                                //alert('es un archivos '+extAdj2);
                                                //console.log("Segundo Adjunto"+adj2x)
                                                 

                                                 var ffg = $('#sp3_txt_fecha_desde_p1_2').val().split('/');
                                                 var nff = ffg[2]+'-'+ffg[1]+'-'+ffg[0];

                                                //----------------*******----------------------------*****------------------------*****-----------------------------------------
                                                var body = {
                                                    "Id1": 0,
                                                    "AccionBD":0,
                                                    "IdIncidenteAccidente": istAud,
                                                    "Detalle":$('#txt_describe_incidenteAlerta').val(),
                                                    "IdSede": $('#sel_filter_sede_p2AL').val(),
                                                    "IdZona": $('#sel_fuente_zona2AL').val(),
                                                    "IdTipoEvento": $('#sel_fuente_tipo_incidente').val(),//tipo de incidente
                                                    "Fecha": nff,//datos en tabla incidente pregunar si es la data de hoy
                                                    "Hora": $('#sp3_txt_tiempo1_2').val(),//datos en tabla incidente
                                                    "Diagnostico": $('#txt_diagnostco').val(),
                                                    "Descripcion": $('#txt_describe_incidenteAlertaX').val(),
                                                    "Compromiso": $('#txt_describe_compromisoAlerta').val(),
                                                    "Adjunto1": adj1x,
                                                    "Adjunto2": '',
                                                    "Pdf":       " se genera automaticamente.........."
                                                }
                                                 //var url = apiUrlssoma+ "/api/Post-IncidenteAccidenteApp?code=wpICjvRa4aO5J0vYX/ccMZm3yZJlHZeh4z5tSm1bXSAKOxyqlykRzQ==&httpmethod=put";
                                                 var url = apiUrlssoma+"/api/Post-Alerta-IncidenteAccidenteWeb?code=aWwcwuIdveNpO4vo3UtZtkbATnLp8DpmPYRWuTircB4wn9Du3Rfdcg==&httpmethod=post";


                                                    var headers ={
                                                    "apikey":constantes.apiKey,
                                                    "Content-Type": "application/json",
                                                    }
                                                    console.log("bodyxx:",body);
                                                    $.ajax({
                                                        method: 'POST',
                                                        url:  url,
                                                        headers:headers,
                                                        data: JSON.stringify(body),
                                                        crossDomain: true,
                                                        dataType: "json",
                                                    }).done(function (data) {

                                                        console.log('despues insertar',data);
                                                        if(data.Id > 0)
                                                        {
                                                            
                                                            hideLoading();
                                                            
                                                            sp4MostrarPreviewAlertaPDF(adj1x,extAdj,adj2x,extAdj2, data.Id);//esto despues de guardar los datos, si es ok el guardado, muestras los datos que tienes en cache en el pdf
                                                             
                                                              //$('#lbLoadRepoA1').html("Cargando las fotos, por favor  espere ..");
                                                                $('#lbLoadRepoA1').html("Cargando las fotos, por favor  espere ..");
                                                                $('#lbLoadRepoA1').css('visibility','hidden');
                                                                $('#loadRepoA1').css('visibility','hidden');


                                                      //====================================================== ANDY 04-07-2021 REGISTRO DE LECCION APRENDIDA ===================================
                                                      var Dannio = "";if((paObj[istAud].a.Dannio == null)||(paObj[istAud].a.Dannio == 'null')){Dannio = "no Aplica"}else{Dannio = paObj[istAud].a.Dannio;}
                                                                        let body2 = {
                                                                            //*****************************DATOS GENERALES******************
                                                                                "Id1": 0,
                                                                                "AccionBD":0,
                                                                                "IdIncidente1":istAud,
                                                                                "IdTipoEvento_": parseInt( $('#sel_fuente_tipo_incidente').val()),
                                                                                "IdSede": $('#sel_filter_sede_p2AL').val(),
                                                                                "Fecha":  nff,
                                                                                "FraseCorta":$('#txt_describe_compromisoAlerta').val(), 
                                                                                "Descripcion":$('#txt_describe_incidenteAlertaX').val(),
                                                                                "Codigo":paObj[istAud].a.Code,
                                                                                "TipoDatoGeneral":0,
                                                                                "Potencial":paObj[istAud].a.Potencial,   
                                                                                "TipoLesionDanio":Dannio,
                                                                                "Mortal":0,     
                                                                                "Create_By":getCookie("vtas_id_hash"+sessionStorage.tabVisitasa),
                                                                                "Create_Date":"", 
                                                                                "B_Contaminante":paObj[istAud].a.ContaminanteId,
                                                                                "B_Impacto_Ambiental":paObj[istAud].a.ImpactoAmbientalId
                                                                            }    
                                                        
                                                                            var urlyu = apiUrlssoma+"/api/Post-LeccionAprendida?code=3SZLZvJm1g4qEdObbrPAWiDaiGa6EFKE9RFyIN1Q5osMz6ozxWX/xQ==&httpmethod=post";
                                                                            

                                                                            console.info("Que mando data1 = ",body2); console.info("Que mando url= ",urlyu)
                                                                            var headers ={
                                                                                "apikey":constantes.apiKey
                                                                              }
                                                     
                                                     
                                                     
                                                                            $.ajax({
                                                                                method: "POST",
                                                                                url:  urlyu,
                                                                                data: JSON.stringify(body2),
                                                                                headers:headers,
                                                                                crossDomain: true,
                                                                                dataType: "json",
                                                                            })
                                                     
                                                                            .done(function(data1)
                                                                            {
                                                                                console.info("data1 Leccion Aprendida2",data1)
                                                                                 // resultado Exitoso
                                                                                if(data1.Id>0)
                                                                                {
                                                                                   console.log('se creo la leccion Aprendida2')
                                                                                }
                                                                            });
                                                                                     

                                                       

                                                   //====================================================== ANDY 04-07-2021 REGISTRO DE LECCION APRENDIDA ===================================







                                                            fnSp3CargaFiltroEstadoInicialPlanAnual();

                                                        }else{verModalError('Al Crear la Alerta', 'Intente Nuevamente');}

                                                        //fnEnviarInformeAuditoriaOk()

                                                    })
                                                    .fail(function( jqXHR, textStatus, errorThrown ) {

                                                        verModalError('Al Crear la Alerta', 'Intente Nuevamente');
                                                        // $("#btGuardarModificar2").html("<b>Guardar</b>")
                                                        // $("#btGuardarModificar2").attr("disabled",false);

                                                           $("#sp4BtModificarGuardar1").attr("disabled",true);
                                                           $('#sp4BtModificarGuardar1').html('Modificar');
                                                    })
                                                    .always(function( jqXHR, textStatus, errorThrown ) {

                                                    });

                                        //=========================================================================================================================================================================
                                        }

                                      
                                    }
                                    




                                }//-----------------------------------*******----------------------------------------------------------
                                                                                        );
                        }
                        else
                         {
                            faltaGuardar = faltaGuardar+'<br/> *Evidencia 1 ';
                            verModalError('Al Crear la Alerta. <br/>Ingrese los Datos:', ''+faltaGuardar);
                             //$('#lbLoadRepoA1').html("Generando el (PDF), y creando la alerta, por favor  espere ..");
                             $('#lbLoadRepoA1').css('visibility','hidden');
                             $('#loadRepoA1').css('visibility','hidden');
                            adj1x = ' ';
                         }

                        
                        

    //----------------------- Esto va a pasar siempre y cuando sea un nuevoo registro de alerta -----------------------------------------           
    }

    
}//-----------------------------------------------------------------------------------------------------------------------------------------





var pdfFileAlerta; // variable global que almacena el archivo

var pdfFileAlerta_LA; // variable global que almacena el archivo


function sp4MostrarPreviewAlertaPDF(adjunto1_64, extAdj1, adjunto2_64, extAdj2, idBD)
{
    
     //ocultamos el formulario de alerta
     $('#modalAlertaIncidente').css('visibility','hidden');
     //$('#modalAlertaIncidente').modal('show').addClass('fade')

    //$('#modalAlertaIncidente').modal('hide').removeClass('fade');

    var dataPDF= "";


   


    var doc = new jsPDF();
    var img_fondo = new Image();
    img_fondo.src = './images/Background_PDF_Alerta.png';

    var img_sup = new Image();
    img_sup.src = './images/img_superior_pdf.png';

    var img_log = new Image();
    img_log.src = './images/Logo_tasa_pdf.png';

    var img_inf = new Image();
    img_inf.src = './images/img_inferior_pdf.png';

    var img_header = new Image();
    img_header.src = './images/img_header.png';

    var img_logo_header = new Image();
    img_logo_header.src = './images/logopdf.png';

    var img_letras = new Image();
    img_letras.src = './images/img_letras.png';


    // doc.addImage(img_sup, 'PNG', 0, 0, 210, 128)
    // doc.addImage(img_inf, 'PNG', 0, 186, 210, 110)
    // doc.addImage(img_log, 'PNG', 49, 115, 110, 37)
    // doc.setFontType('bold')
    // doc.setTextColor(52,85,156); 
    // doc.text(85, 160, 'Plan de Auditorías');
    // doc.setTextColor(178,178,178); 
    // doc.text(96, 162, '________');
    // doc.text(105, 172, '2200');



    //doc.addPage();
    doc.addImage(img_fondo, 'PNG', 0, 0, 595, 842)
    
    
    //doc.ellipse(0, 0, 40, 40);
    

    //doc.setLineWidth(1);
    doc.setDrawColor(0);
    doc.setFillColor(255,255,255);
    doc.circle(0, 0, 40, 'F');
    doc.addImage(img_logo_header, 'PNG', 2, 8, 24,14)

    doc.setFontSize(26);
    doc.setFontType('bold');
    //doc.setTextColor(255,0,0); 
    doc.setTextColor(0,0,128);
    doc.text(70, 14, '!Alerta de Seguridad¡');

    doc.setFontSize(22);
    doc.setFontType('bold');
    doc.setTextColor(255,0,0); 
    //var dat = 'Contusión en dedo de Mano Izquierda al manipular herramienta';
    var dat1 = $('#txt_describe_incidenteAlerta').val();//alert(dat1);
    dataPDF= dataPDF+ "1#"+dat1;

    doc.text(117, 28, dat1 ,{maxWidth:160, align:'center'});//aqui va el detalle de la ---------- alerta

    doc.setFontSize(18);
    doc.setFontType('bold'); 
    doc.setTextColor(0,0,128);
    doc.text(20, 50, 'PLANTA:');//---------------------------------------------------------------planta

    doc.setFontSize(18);
    doc.setFontType('normal'); 
    doc.setTextColor(0,0,128);
    //var dat = 'Callao';//------------------------------------------------------------------------planta ----pendiente traer desde datos generales

    var dat = $('#sel_filter_sede_p2AL option:selected').text();
     dataPDF= dataPDF+ "2#"+dat;
    doc.text(50, 50, dat);//aqui va el detalle de la alerta


    doc.setFontSize(18);
    doc.setFontType('bold'); 
    doc.setTextColor(0,0,128);
    doc.text(133, 50, 'FECHA:');//----------------------------------------------------------------fecha

    doc.setFontSize(18);
    doc.setFontType('normal'); 
    doc.setTextColor(0,0,128);
    //var dat = '19/01/2021';
    var dat = $('#sp3_txt_fecha_desde_p1_2').val();
    dataPDF= dataPDF+ "3#"+dat;
    doc.text(160, 50, dat);//---------------------------------------------------------------------fecha




    doc.setFontSize(18);
    doc.setFontType('bold'); 
    doc.setTextColor(0,0,128);
    doc.text(20, 60, 'ZONA:');//---------------------------------------------------------------zona

    // doc.setFontSize(18);
    // doc.setFontType('normal'); 
    // doc.setTextColor(0,0,128);
    // //var dat = 'Callao';//------------------------------------------------------------------------zona
    // var dat = $('#sel_fuente_zona2AL option:selected').text();
    // doc.text(50, 60, dat,{maxWidth:50, align:'left'});//aqui va el detalle de la alerta

    doc.setFontSize(17);
    doc.setFontType('normal'); 
    doc.setTextColor(0,0,128);
    //var dat = 'Callao';//------------------------------------------------------------------------zona
    var dat = $('#sel_fuente_zona2AL option:selected').text();
     dataPDF= dataPDF+ "4#"+dat;
    doc.text(41, 60, dat,{maxWidth:85, align:'left'});//aqui va el detalle de la alerta



    doc.setFontSize(18);
    doc.setFontType('bold'); 
    doc.setTextColor(0,0,128);
    doc.text(133, 60, 'HORA:');//----------------------------------------------------------------hora

    doc.setFontSize(18);
    doc.setFontType('normal'); 
    doc.setTextColor(0,0,128);
    //var dat = '11:25:00';
    var dat = $('#sp3_txt_tiempo1_2').val();
    dataPDF= dataPDF+ "5#"+dat;
    doc.text(160, 60, dat);//---------------------------------------------------------------------hora

    doc.setTextColor(135,206,250); 
    doc.text(5, 64, '________________________________________________________');

    doc.setFontSize(16);
    doc.setFontType('normal'); 
    doc.setTextColor(0,0,128);
    //var dat = 'El próximo domingo, los ciudadanos tendrán ocasión de hacer política, de participar en la toma de decisiones públicas, cuando depositen su voto para elegir a 194 diputados de mayoría y tal vez cincuenta de partido. La democracia electoral les permite, de ese modo ejercer  funciones de gobierno. Fuente: https://www.ejemplode.com/12-clases_de_espanol/362-ejemplo_de_parrafo.html#ixzz6q6EAdYst';
    var dat = $('#txt_describe_incidenteAlertaX ').val(); 
     dataPDF= dataPDF+ "6#"+dat;

    //-------------------------------------------------------------------descripcion
    doc.text(5, 75, dat,{maxWidth:197, align:'justify'});//aqui va el detalle de la alerta


    doc.setTextColor(135,206,250); 
    doc.text(5, 113, '_______________________________________________________________');

    doc.setFontSize(18);
    doc.setFontType('bold'); 
    doc.setTextColor(0,0,128);
    doc.text(5, 126, 'COMPROMISOS:');

    //---------------------------------
    doc.setFontSize(16);
    doc.setFontType('normal'); 
    doc.setTextColor(0,0,128);
    //var dat = '1 - te: https://www.ejemplode.com/12-clases_de_espanol/362-ejemplo_de_parrafo.html#ixzz6q6EAdYstDFSDFS    2 - te: https://www.ejemplode.com/12-clases_de_espanol/362-ejemplo_de_parrafo.html#ixzz6q6EAdYstDFSDFS. 3 - te: https://www.ejemplode.com/12-clases_de_espanol/362-ejemplo_de_parrafo.html#ixzz6q6EAdYstDFSDFS. 4 - te: https://www.ejemplode.com/12-clases_de_espanol/362-ejemplo_de_parrafo.html#ixzz6q6EAdYstDFSDFS.';
    var dat = $('#txt_describe_compromisoAlerta').val(); 
     dataPDF= dataPDF+ "7#"+dat;

   
    doc.text(5, 137, dat,{maxWidth:197, align:'justify'});//aqui va el detalle de la alerta----------------------COMPROMISOS
    doc.setTextColor(135,206,250); 
    doc.text(5, 176, '_______________________________________________________________');

    doc.setFontSize(18);
    doc.setFontType('bold'); 
    doc.setTextColor(0,0,128);
    doc.text(5, 190, 'TIPO:');
    doc.setTextColor(0,0,128); 
    doc.text(5, 191, '_____');

    //---------------------------------
    doc.setFontSize(15);
    doc.setFontType('normal'); 
    doc.setTextColor(0,0,128);
    //var dat = 'ACCIDENTE  INCAPACITANTE';
    var dat = $('#sel_fuente_tipo_incidente option:selected').text();
     dataPDF= dataPDF+ "8#"+dat;
   
    doc.text(5, 205, dat,{maxWidth:50, align:'left'});//aqui va el detalle de la alerta----------------------TIPO DE INCIDENTE
    doc.setTextColor(135,206,250); 



    doc.setFontSize(18);
    doc.setFontType('bold'); 
    doc.setTextColor(0,0,128);
    doc.text(5, 230, 'DIAGNÓSTICO:');
    doc.setTextColor(0,0,128); 
    doc.text(5, 231, '_____________');

    //---------------------------------
    doc.setFontSize(14);
    doc.setFontType('normal'); 
    doc.setTextColor(0,0,128);
    //var dat = 'CONTUSIÓN DE DEDO PULGAR DE MANO IZQUIERDA';
    var dat = $('#txt_diagnostco').val(); 
     dataPDF= dataPDF+ "9#"+dat;
   
    doc.text(5, 239, dat,{maxWidth:55, align:'justify'});//aqui va el detalle de la alerta----------------------TIPO DE INCIDENTE
    doc.setTextColor(135,198,250); 
   

    


    var imd_adjunto1 = new Image();
    //imd_adjunto1.src = './images/alertaImg1.gif';
    doc.addImage(adjunto1_64, extAdj1, 64, 181, 65, 96)
     dataPDF= dataPDF+ "10#"+adjunto1_64+'#extAdj1 = '+extAdj1;



    if(adjunto2_64 != '')
    {
         var imd_adjunto2 = new Image();
    //imd_adjunto2.src = './images/alertaImg2.gif';
    doc.addImage(adjunto2_64, extAdj2, 134, 181, 65, 96)

     dataPDF= dataPDF+ "11#"+adjunto2_64+'#extAdj2 = '+extAdj2;
    }
   








    doc.setFontSize(18);
    doc.setFontType('bolditalic');
    doc.setTextColor(107,142,35); 
    var dat = '!Juntos podemos prevenir los accidentes¡'
    doc.text(92, 292, dat ,{maxWidth:130, align:'center'});//aqui va el detalle de la ---------- alerta

    doc.setTextColor(135,206,250); 
    doc.text(5, 280, '__________________________________________________________________');
//alertaImg1.gif






    // doc.setFontSize(10)
    // doc.setFontType('bold')
    // doc.setTextColor(0,0,0); 
    // doc.text(9, 34, 'Datos Principales');
    // doc.setTextColor(200,200,200); 
    // doc.text(44, 32, '___________________________________________________________________________');




    base64SP3 = doc.output('datauristring');
    //$('#pdfHideAlerta').html(base64SP3);
    rawdata = doc.output();

    var len = rawdata.length,
        ab = new ArrayBuffer(len),
        u8 = new Uint8Array(ab);

        while(len--) u8[len] = rawdata.charCodeAt(len);

    var blob = new Blob([ab], { type : "application/pdf" });

    var iframe = document.getElementById('miIframeMuestraPdf1');
    iframe.src = URL.createObjectURL(blob);
    

    //console.log("ER PDFx = ", base64SP3);
    // $('#txt_describe_compromisoAlerta2').val(base64SP3);
    //console.log("ER PDF = ", pdfFileAlerta); // no funciona

   

     //mostramos el visor de pdf
     $('#modalAlertaIncidentePDF').modal('show').addClass('fade');
       //$('#titleModalAlertaIncidentePdf').html('.  .                                 Alerta PDF - '+paObj[istAud].a.Code);
      $('#titleModalAlertaIncidentePdf').html('&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp  Alerta PDF - '+paObj[istAud].a.Code);
     //$('#miIframeMuestraPdf1').prop('src','./view/ssoma/incidente-accidente/reportes/Reporte1.pdf')
     
   pdfFileAlerta = blob;

    //alert('idBD'+idBD);

    var body = {
                "Id1": idBD,
                "AccionBD":4,
                "IdIncidenteAccidente": 0,
                "Detalle":"",
                "IdSede":0,
                "IdZona": 0,
                "IdTipoEvento": 0,//tipo de incidente
                "Fecha":'2021-01-01',//datos en tabla incidente pregunar si es la data de hoy
                "Hora":'12:00:00',//datos en tabla incidente
                "Diagnostico": " ",
                "Descripcion": " ",
                "Compromiso": " ",
                "Adjunto1": "  ",
                "Adjunto2": "  ",
                "Pdf": dataPDF
            }
             var url = apiUrlssoma+"/api/Post-Alerta-IncidenteAccidenteWeb?code=aWwcwuIdveNpO4vo3UtZtkbATnLp8DpmPYRWuTircB4wn9Du3Rfdcg==&httpmethod=post";


            var headers ={
            "apikey":constantes.apiKey,
            "Content-Type": "application/json",
            }
            console.log("bodyxxIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIII:",body);
            $.ajax({
                method: 'POST',
                url:  url,
                headers:headers,
                data: JSON.stringify(body),
                crossDomain: true,
                dataType: "json",
            }).done(function (data) 
              {

                console.log('despues insertar ************',data);
                if(data.Id > 0)
                {
                    //alert('IdAlerta ='+data.Id)
                    paObj[istAud].a.IdAlerta = idBD;
                    console.log('SE SUBIO CORRECTAMENTE EL PDF');

                    $('#sp3BtFiltroPlanAnualBtEnviar').attr("disabled", false);
                     $('#sp3BtFiltroPlanAnualBtEnviar').css("backgroud", 'red');

                }else{verModalError('Al Subir el PDF', 'Intente Nuevamente');}

                //fnEnviarInformeAuditoriaOk()

            })
            .fail(function( jqXHR, textStatus, errorThrown ) {

                verModalError('Al Subir el PDF', 'Intente Nuevamente');
                
            })
            .always(function( jqXHR, textStatus, errorThrown ) {

            });


}


















function sp4MostrarPreviewAlertaPDF2()
{
    
     //ocultamos el formulario de alerta
     //$('#modalAlertaIncidente').modal('hide').removeClass('fade');

     $('#modalAlertaIncidente').css('visibility','hidden');//------------------------PENDIENTE CON ESTO AL REINICIAR EL FORMULARIO




    var doc = new jsPDF();
    var img_fondo = new Image();
    img_fondo.src = './images/Background_PDF_Alerta.png';

    var img_sup = new Image();
    img_sup.src = './images/img_superior_pdf.png';

    var img_log = new Image();
    img_log.src = './images/Logo_tasa_pdf.png';

    var img_inf = new Image();
    img_inf.src = './images/img_inferior_pdf.png';

    var img_header = new Image();
    img_header.src = './images/img_header.png';

    var img_logo_header = new Image();
    img_logo_header.src = './images/logopdf.png';

    var img_letras = new Image();
    img_letras.src = './images/img_letras.png';


    // doc.addImage(img_sup, 'PNG', 0, 0, 210, 128)
    // doc.addImage(img_inf, 'PNG', 0, 186, 210, 110)
    // doc.addImage(img_log, 'PNG', 49, 115, 110, 37)
    // doc.setFontType('bold')
    // doc.setTextColor(52,85,156); 
    // doc.text(85, 160, 'Plan de Auditorías');
    // doc.setTextColor(178,178,178); 
    // doc.text(96, 162, '________');
    // doc.text(105, 172, '2200');



    //doc.addPage();
    doc.addImage(img_fondo, 'PNG', 0, 0, 595, 842)
    
    
    //doc.ellipse(0, 0, 40, 40);
    

    //doc.setLineWidth(1);
    doc.setDrawColor(0);
    doc.setFillColor(255,255,255);
    doc.circle(0, 0, 40, 'F');
    doc.addImage(img_logo_header, 'PNG', 2, 8, 24,14)

    doc.setFontSize(26);
    doc.setFontType('bold');
    //doc.setTextColor(255,0,0); 
    doc.setTextColor(0,0,128);
    doc.text(70, 14, '!Alerta de Seguridad¡');

    doc.setFontSize(22);
    doc.setFontType('bold');
    doc.setTextColor(255,0,0); 
    //var dat = 'Contusión en dedo de Mano Izquierda al manipular herramienta';
    var dat1 = $('#txt_describe_incidenteAlerta').val();//alert(dat1);
    doc.text(117, 28, dat1 ,{maxWidth:160, align:'center'});//aqui va el detalle de la ---------- alerta

    doc.setFontSize(18);
    doc.setFontType('bold'); 
    doc.setTextColor(0,0,128);
    doc.text(20, 50, 'PLANTA:');//---------------------------------------------------------------planta

    doc.setFontSize(18);
    doc.setFontType('normal'); 
    doc.setTextColor(0,0,128);
    //var dat = 'Callao';//------------------------------------------------------------------------planta ----pendiente traer desde datos generales

    var dat = $('#sel_filter_sede_p2AL option:selected').text();

    doc.text(50, 50, dat);//aqui va el detalle de la alerta


    doc.setFontSize(18);
    doc.setFontType('bold'); 
    doc.setTextColor(0,0,128);
    doc.text(133, 50, 'FECHA:');//----------------------------------------------------------------fecha

    doc.setFontSize(18);
    doc.setFontType('normal'); 
    doc.setTextColor(0,0,128);
    //var dat = '19/01/2021';
    var dat = $('#sp3_txt_fecha_desde_p1_2').val();
    doc.text(160, 50, dat);//---------------------------------------------------------------------fecha




    doc.setFontSize(18);
    doc.setFontType('bold'); 
    doc.setTextColor(0,0,128);
    doc.text(20, 60, 'ZONA:');//---------------------------------------------------------------zona

    doc.setFontSize(17);
    doc.setFontType('normal'); 
    doc.setTextColor(0,0,128);
    //var dat = 'Callao';//------------------------------------------------------------------------zona
    var dat = $('#sel_fuente_zona2AL option:selected').text();
    doc.text(41, 60, dat,{maxWidth:85, align:'left'});//aqui va el detalle de la alerta



    doc.setFontSize(18);
    doc.setFontType('bold'); 
    doc.setTextColor(0,0,128);
    doc.text(133, 60, 'HORA:');//----------------------------------------------------------------hora

    doc.setFontSize(18);
    doc.setFontType('normal'); 
    doc.setTextColor(0,0,128);
    //var dat = '11:25:00';
    var dat = $('#sp3_txt_tiempo1_2').val();
    doc.text(160, 60, dat);//---------------------------------------------------------------------hora

    doc.setTextColor(135,206,250); 
    doc.text(5, 64, '________________________________________________________');

    doc.setFontSize(16);
    doc.setFontType('normal'); 
    doc.setTextColor(0,0,128);
    //var dat = 'El próximo domingo, los ciudadanos tendrán ocasión de hacer política, de participar en la toma de decisiones públicas, cuando depositen su voto para elegir a 194 diputados de mayoría y tal vez cincuenta de partido. La democracia electoral les permite, de ese modo ejercer  funciones de gobierno. Fuente: https://www.ejemplode.com/12-clases_de_espanol/362-ejemplo_de_parrafo.html#ixzz6q6EAdYst';
    var dat = $('#txt_describe_incidenteAlertaX ').val(); 

    //-------------------------------------------------------------------descripcion
    doc.text(5, 75, dat,{maxWidth:197, align:'justify'});//aqui va el detalle de la alerta


    doc.setTextColor(135,206,250); 
    doc.text(5, 113, '_______________________________________________________________');

    doc.setFontSize(18);
    doc.setFontType('bold'); 
    doc.setTextColor(0,0,128);
    doc.text(5, 126, 'COMPROMISOS:');

    //---------------------------------
    doc.setFontSize(16);
    doc.setFontType('normal'); 
    doc.setTextColor(0,0,128);
    //var dat = '1 - te: https://www.ejemplode.com/12-clases_de_espanol/362-ejemplo_de_parrafo.html#ixzz6q6EAdYstDFSDFS    2 - te: https://www.ejemplode.com/12-clases_de_espanol/362-ejemplo_de_parrafo.html#ixzz6q6EAdYstDFSDFS. 3 - te: https://www.ejemplode.com/12-clases_de_espanol/362-ejemplo_de_parrafo.html#ixzz6q6EAdYstDFSDFS. 4 - te: https://www.ejemplode.com/12-clases_de_espanol/362-ejemplo_de_parrafo.html#ixzz6q6EAdYstDFSDFS.';
    var dat = $('#txt_describe_compromisoAlerta').val(); 

   
    doc.text(5, 137, dat,{maxWidth:197, align:'justify'});//aqui va el detalle de la alerta----------------------COMPROMISOS
    doc.setTextColor(135,206,250); 
    doc.text(5, 176, '_______________________________________________________________');

    doc.setFontSize(18);
    doc.setFontType('bold'); 
    doc.setTextColor(0,0,128);
    doc.text(5, 190, 'TIPO:');
    doc.setTextColor(0,0,128); 
    doc.text(5, 191, '_____');

    //---------------------------------
    doc.setFontSize(15);
    doc.setFontType('normal'); 
    doc.setTextColor(0,0,128);
    //var dat = 'ACCIDENTE  INCAPACITANTE';
    var dat = $('#sel_fuente_tipo_incidente option:selected').text();

   
    doc.text(5, 205, dat,{maxWidth:50, align:'left'});//aqui va el detalle de la alerta----------------------TIPO DE INCIDENTE
    doc.setTextColor(135,206,250); 



    doc.setFontSize(18);
    doc.setFontType('bold'); 
    doc.setTextColor(0,0,128);
    doc.text(5, 230, 'DIAGNÓSTICO:');
    doc.setTextColor(0,0,128); 
    doc.text(5, 231, '_____________');

    //---------------------------------
    doc.setFontSize(14);
    doc.setFontType('normal'); 
    doc.setTextColor(0,0,128);
    //var dat = 'CONTUSIÓN DE DEDO PULGAR DE MANO IZQUIERDA';
    var dat = $('#txt_diagnostco').val(); 

   
    doc.text(5, 239, dat,{maxWidth:55, align:'justify'});//aqui va el detalle de la alerta----------------------TIPO DE INCIDENTE
    doc.setTextColor(135,198,250); 
   

    var ext = paObj[istAud].a.yAdjunto1.split(';base64,');
    ext = ext[0].split('data:image/');
    var xtend = ext[1].toUpperCase();
    console.log("EXTENSION = ",xtend);



    var imd_adjunto1 = new Image();
    //imd_adjunto1.src = './images/alertaImg1.gif';
    doc.addImage(paObj[istAud].a.yAdjunto1 , xtend, 64, 181, 65, 96)




    //  var ext = paObj[istAud].a.yAdjunto2.split(';base64,');
    // ext = ext[0].split('data:image/');
    // var xtend = ext[1].toUpperCase();
    // console.log("EXTENSION2 = ",xtend);

  // alert(paObj[istAud].a.yAdjunto2);
     if(paObj[istAud].a.yAdjunto2)
    {

          if(paObj[istAud].a.yAdjunto2 != '')
          {
            var ext = paObj[istAud].a.yAdjunto2.split(';base64,');
            ext = ext[0].split('data:image/');
            var xtend = ext[1].toUpperCase();
            console.log("EXTENSION2 = ",xtend);
               
            var imd_adjunto2 = new Image();
            //imd_adjunto2.src = './images/alertaImg2.gif';
            doc.addImage(paObj[istAud].a.yAdjunto2,xtend, 134, 181, 65, 96)
          }

     
    }


    // var imd_adjunto2 = new Image();
    // //imd_adjunto2.src = './images/alertaImg2.gif';
    // doc.addImage(paObj[istAud].a.yAdjunto2,xtend, 134, 181, 65, 96)








    doc.setFontSize(18);
    doc.setFontType('bolditalic');
    doc.setTextColor(107,142,35); 
    var dat = '!Juntos podemos prevenir los accidentes¡'
    doc.text(92, 292, dat ,{maxWidth:130, align:'center'});//aqui va el detalle de la ---------- alerta

    doc.setTextColor(135,206,250); 
    doc.text(5, 280, '__________________________________________________________________');
//alertaImg1.gif






    // doc.setFontSize(10)
    // doc.setFontType('bold')
    // doc.setTextColor(0,0,0); 
    // doc.text(9, 34, 'Datos Principales');
    // doc.setTextColor(200,200,200); 
    // doc.text(44, 32, '___________________________________________________________________________');




    base64SP3 = doc.output('datauristring');
    rawdata = doc.output();

    var len = rawdata.length,
        ab = new ArrayBuffer(len),
        u8 = new Uint8Array(ab);

        while(len--) u8[len] = rawdata.charCodeAt(len);

    var blob = new Blob([ab], { type : "application/pdf" });

    var iframe = document.getElementById('miIframeMuestraPdf1');
    iframe.src = URL.createObjectURL(blob);
    

    //console.log("ER PDF = ", base64SP3);

   

     //mostramos el visor de pdf
     $('#modalAlertaIncidentePDF').modal('show').addClass('fade');
      $('#titleModalAlertaIncidentePdf').html('&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp  Alerta PDF - '+paObj[istAud].a.Code);
     
   pdfFileAlerta = blob;


}

function fnSp4DescargaIncidentePDF()
{
 //alert('descargar pdf');

  // var blob = new Blob([ab], { type : "application/pdf" });
//saveAs(blob, 'InformeAuditoria.pdf');
saveAs(pdfFileAlerta, 'AlertaIncidenteAI3210056.pdf');


}

function fnSp4DescargaEntrevistaEvidenciaPDF()
{
 //alert('descarga entrevista evidencia');
//entrevistaFile

//----------------------SOLUCION OPIMA PARA DESCARGAR -----------------------------//
                                                    let url = entrevistaFile;
                                                    var documento = null;
                                                    fetch(url)
                                                    .then(res => res.blob())
                                                    .then(function(blob) {
                                                      downloadBlob(blob, 'EntrevistaIncidente'+paObj[istAud].a.Code+'.pdf');
                                                    });
 //----------------------SOLUCION OPIMA PARA DESCARGAR -----------------------------//
}


function fnSp4ModalEnviaCorreoAlertaPDF()
{
    //$('#modalAlertaIncidentePDF').modal('hide').removeClass('fade');
    $('#modalAlertaIncidentePDF').modal('hide').removeClass('fade'); 
    $('#modalAlertaIncidente').modal('hide').removeClass('fade');


     $('#modalEnviarCorrecionPlanAnualSp3').modal('show').addClass('fade');
     
     
     $('#divTituloHistorialAuditoria').html("Enviar Alerta - "+paObj[istAud].a.Code);


}

function sp3FnvalidaExtensionAdjunto(filePath)
{//--------------------------ini--     sp3FnvalidaExtensionAdjunto    ------------------------
  
           //........pdf
           var allowedExtensions = /(.pdf)$/i;
            if(allowedExtensions.exec(filePath)){
                return '.pdf';
            }//........pdf
            
            //........word-doc
            var allowedExtensions = /(.doc)$/i;
            if(allowedExtensions.exec(filePath)){
                return '.doc';
            } //........word-doc

            //........word-docx
            var allowedExtensions = /(.docx)$/i;
            if(allowedExtensions.exec(filePath)){
                return '.docx';
            } //........word-doc

            //........word-xls
            var allowedExtensions = /(.xls)$/i;
            if(allowedExtensions.exec(filePath)){
                return '.xls';
            } //........word-doc

             //........word-ods
             var allowedExtensions = /(.ods)$/i;
             if(allowedExtensions.exec(filePath)){
                 return '.ods';
             } //........word-ods

            //........word-xlsx
            var allowedExtensions = /(.xlsx)$/i;
            if(allowedExtensions.exec(filePath)){
                return '.xlsx';
            } //........word-doc

             //........ppt
             var allowedExtensions = /(.ppt)$/i;
             if(allowedExtensions.exec(filePath)){
                 return '.ppt';
             } //........ppt

             //........word-ppt
             var allowedExtensions = /(.pptx)$/i;
             if(allowedExtensions.exec(filePath)){
                 return '.pptx';
             } //........word-pptx

             //........word-pps
             var allowedExtensions = /(.pps)$/i;
             if(allowedExtensions.exec(filePath)){
                 return '.pps';
             } //........word-pps

              //........word-ppsx
              var allowedExtensions = /(.ppsx)$/i;
              if(allowedExtensions.exec(filePath)){
                  return '.ppsx';
              } //........word-ppsx
           


            //........word-odp
            var allowedExtensions = /(.odp)$/i;
            if(allowedExtensions.exec(filePath)){
                return '.odp';
            } //........word-odp

            //........word-odt
            var allowedExtensions = /(.odt)$/i;
            if(allowedExtensions.exec(filePath)){
                return '.odt';
            } //........word-odt

            //........word-jpg
            var allowedExtensions = /(.jpg)$/i;
            if(allowedExtensions.exec(filePath)){
                return '.jpg';
            } //........word-jpg

            //........word-jpeg
            var allowedExtensions = /(.jpeg)$/i;
            if(allowedExtensions.exec(filePath)){
                return '.jpeg';
            } //........word-jpg

            //........word-png
            var allowedExtensions = /(.png)$/i;
            if(allowedExtensions.exec(filePath)){
                return '.png';
            } //........word-png

            //........word-gif
            var allowedExtensions = /(.gif)$/i;
            if(allowedExtensions.exec(filePath)){
                return '.gif';
            } //........word-gif

            //........word-tiff
            var allowedExtensions = /(.tiff)$/i;
            if(allowedExtensions.exec(filePath)){
                return '.tiff';
            } //........word-tiff

            //........word-svg
            var allowedExtensions = /(.svg)$/i;
            if(allowedExtensions.exec(filePath)){
                return '.svg';
            } //........word-svg

            //........word-rtf
            var allowedExtensions = /(.rtf)$/i;
            if(allowedExtensions.exec(filePath)){
                return '.rtf';
            } //........word-svg

            //........word-html
            var allowedExtensions = /(.html)$/i;
            if(allowedExtensions.exec(filePath)){
                return '.html';
            } //........word-html

            //........word-xml
            var allowedExtensions = /(.xml)$/i;
            if(allowedExtensions.exec(filePath)){
                return '.xml';
            } //........word-xml

            //........base datos-odb
            var allowedExtensions = /(.odb)$/i;
            if(allowedExtensions.exec(filePath)){
                return '.odb';
            } //........word-html

            //........base datos-zip
            var allowedExtensions = /(.zip)$/i;
            if(allowedExtensions.exec(filePath)){
                return '.zip';
            } //........word-zip

             //........base datos-rar
             var allowedExtensions = /(.rar)$/i;
             if(allowedExtensions.exec(filePath)){
                 return '.rar';
             } //........word-rar

              //........base datos-mp3
              var allowedExtensions = /(.mp3)$/i;
              if(allowedExtensions.exec(filePath)){
                  return '.mp3';
              } //........word-mp3

              //........base datos-ogg
              var allowedExtensions = /(.ogg)$/i;
              if(allowedExtensions.exec(filePath)){
                  return '.ogg';
              } //........word-mp3


              //........base datos-mp4
              var allowedExtensions = /(.mp4)$/i;
              if(allowedExtensions.exec(filePath)){
                  return '.mp4';
              } //........word-mp3

              //........base datos-mpeg
              var allowedExtensions = /(.mpeg)$/i;
              if(allowedExtensions.exec(filePath)){
                  return '.mpeg';
              } //........word-mpeg

              //........base datos-mkv
              var allowedExtensions = /(.mkv)$/i;
              if(allowedExtensions.exec(filePath)){
                  return '.mkv';
              } //........word-mkv



             return '.desconocido';
        
 

            



           
           
           


}//--------------------------ini--     sp3FnvalidaExtensionAdjunto    ------------------------



function sp4FnSobre(id)
{

    

    $('#imgAdjuntoAlerta1').css('display','block');
    
}

function sp4FnDeja()
{
    $('#imgAdjuntoAlerta1').css('display','none');

}



function sp4FnCierraModalEnviaAlerta()
{
    $('#modalEnviarCorrecionPlanAnualSp3').modal('hide').removeClass('fade');
}









function sp4FnConfirmaSiEnviasAlerta()
{//fnConfirmarEnviarCorrecionPlanAnualSp3()
  //

    
    let resultado = false
    resultado = fnRecorrerListadoEnviarCorreccionPlanAnualSp3()

    if(resultado)
    {
             $('#modalEnviarCorrecionPlanAnualSp3').modal('hide').removeClass('fade');
            $('#Sp3VentanaPruebas2Alerta').modal('show').addClass('fade');

             var coode = paObj[istAud].a.Code;

            $('#confirmEvidenciaAzulAlerta').html("<b> Se enviará la alerta "+coode+"</b>");
    }
    else
    {

        
            verModalError("Faltan Datos","No se puede enviar la Alerta "+paObj[istAud].a.Code)

    }
    console.warn("resultado ",resultado, )


}



function sp4FnCancelaEnviasAlerta()
{//fnConfirmarEnviarCorrecionPlanAnualSp3()
  //
  $('#modalEnviarCorrecionPlanAnualSp3').modal('show').addClass('fade');
  $('#Sp3VentanaPruebas2Alerta').modal('hide').removeClass('fade');

}



function sp4FnEnviarCorreosConAlerta()
{
      
 


  $('#btnConfirmarEvidenciaAA').html('Guardando..');
  $('#btnConfirmarEvidenciaAA').attr('disabled', true);


     //------------------------------------- uuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuu ----------------------------------------------------

                $('#modalConfirmarCorrecionPlanAnualSp3').modal('hide').removeClass('fade')

                    $("#preloader").show()

                    let count                 = $('#listadoPersonasEnviarCorrecionPlanAnualSp3 .item-tabla').length
                    let listadoDestinatarios  = []
                    console.log($('#listadoPersonasEnviarCorrecionPlanAnualSp3 .item-tabla').length)

                    for (var i = 0; i <= count ; i++)
                    {
                        // si el campo existe, es decir no fue eliminado
                        let obj = []
                        if($(`#UserHash_${i}`).val()!=undefined)
                        {
                            listadoDestinatarios.push({
                                "Name"     : $(`#Name_${i}`).val(),//Persona_Name BD
                                "UserHash" : $(`#UserHash_${i}`).val(),//UserIdHash BD
                                "Cargo"    : $(`#Cargo_${i}`).val(), //Persona_Cargo BD
                                "Correo"   : $(`#Correos_${i}`).val() //Persona_Correo
                            })
                        }
                    }


                    // var ubicacion = "";
                    // if(paObj[istAud].a.Sede != null)
                    // {
                    //     ubicacion =  paObj[istAud].a.Sede;
                    // }else{
                    //     if(paObj[istAud].a.Gerencia != null)
                    //     {
                    //         ubicacion =  paObj[istAud].a.Gerencia;
                    //     }
                    // }

                    let body = {
                        
                        "IdAccidenteIncidente":  paObj[istAud].a.Id,//idIncidenteBD
                        "IdAlerta":              paObj[istAud].a.IdAlerta,//idIncidenteBD
                        "Code":                  paObj[istAud].a.Code,//NO ES NECESARIO
                        "listadoDestinatarios": listadoDestinatarios,//
                        //"ubicacion":            ubicacion,
                        "Created_By":           getCookie("vtas_id_hash"+sessionStorage.tabVisitasa),//Send_by BD
                        "emailResponsable":      getCookie("vtas_internal_useruser"+sessionStorage.tabVisitasa),// NO EN BD
                        "nameResponsable":      getCookie("vtas_fullname"+sessionStorage.tabVisitasa),// NO EN BD
                        "jobResponsable":        getCookie("vtas_job"+sessionStorage.tabVisitasa)// NO EN BD



                        //AQUI TENGO QUE PASAR EL ID DE LA ALERTA GENERADA

                    }

                    //var CheckProveniente = $('#CheckProveniente').val();
                    // let url = '';
                    // if(CheckProveniente == 1){
                    //     url = apiUrlssoma+"/api/Post-Plan-Anual?code=ZnQh7E2Noeiv1emsJPTvXE5l/qClcMIjv3FNePN8XTRfTY5aOqmSAQ==&httpmethod=FinalizarPlanAnual";
                    // }else{
                    //     url = apiUrlssoma+"/api/Post-Plan-Anual?code=ZnQh7E2Noeiv1emsJPTvXE5l/qClcMIjv3FNePN8XTRfTY5aOqmSAQ==&httpmethod=CorreccionPlanAnual";
                    // }


                    let url = apiUrlssoma+"/api/Post-Lista-Envio-Alerta-IncidenteAccidenteWeb?code=YW4JmEJmqXHfR6MrauTaeg8kh0VbzIJH7C5y/tpHWHHHCnPwYsf6hg==&httpmethod=post";

                    let headers ={
                        "apikey":constantes.apiKey
                    }
                console.log(body)
                
                    $.ajax({
                        method: "POST",
                        url:  url,
                        data: JSON.stringify(body),
                        headers:headers,
                        crossDomain: true,
                        dataType: "json",
                    })
                    .done(function(data)
                    {
                        console.info("data",data)
                        // resultado Exitoso
                        if(data.Id>0)
                        {
                             //sP4FnAgregaNumeroHallazgoIncidente(data.Id);
                             $('#Sp3VentanaPruebas2Alerta').modal('hide').removeClass('fade');
                             $('#Sp3VentanaPruebas3Alerta').modal('show').addClass('fade');

                             $('#btnConfirmarEvidenciaAA').html('Confirmar');
                             $('#btnConfirmarEvidenciaAA').attr('disabled', false);
                        }
                        else
                        {
                            verModalError("Se produjo un fallo","No Se Pudo Enviar la Alerta")
                        }
                    })
                    .fail(function( jqXHR, textStatus, errorThrown )
                    {
                        console.error("fail",textStatus)
                        verModalError("Se produjo un fallo","No Se Pudo Enviar la Alerta")
                          })
                    .always(function( jqXHR, textStatus, errorThrown )
                    {
                        console.info("always",textStatus)
                        $("#preloader").hide()

                    });
     //------------------------------------- uuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuu ----------------------------------------------------


}







function sP4FnAgregaNumeroHallazgoIncidente(idHallazgoss)
{//-------------------------------#########################################################----------------------------------------------

var body = {
                "Id1": istAud,
                "AccionBD":2,//2 PARA MODIFICAR WEB, 3 MODIFICAR APP
                "Tipo": 1,
                "IdTipoEvento":paObj[istAud].a.IdTipoEvento,
                "Fecha":  "2021-12-12",
                "Hora": "11:25:00",
                "HayPersonalAfectado": 1,
                "NombreEmpresa":  "claroSSSSSSSSSSSSSSSS",
                "IdEmpresa":2,
                "DescripcionEvento":"golpe en la cabeza me duele POSTMAN UPDATE WEB", 
                "A_NombrePersonalAccidentado": "Willian toschiiiiiinnnnggg",
                "A_IdPersonalAccidentado": "333hh", 
                "A_DniPersonalAccidentado": "785225555", 
                "A_PuestoCargoAccidentado": "gerente", 
                "A_NombreJefeAccidentado":"pepe luis",
                "A_IdJefeAccidentado": "444hjj",
                "B_TipoProducto": "no aplica", 
                "B_ProductoInvolucrado": "no aplica",
                "B_Volumen": "no aplica",
                "B_Area": "no aplica", 
                "B_Fuente": "no aplica", 
                "B_NombreJefeInmediato": "no aplica", 
                "B_IdJefeInmediato": "no aplica", 
                "C_NombreContratista": "no aplica vacio", 
                "C_Hurt":  "MUCHOOOOOOOOOOOOOOOOOOOOO DAÑOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOO", 
                "IdSede": 2,
                "IdEmbarcacion": 3,
                "IdArea": 2,
                "IdZona": 2,
                "IdEstadoIncidente": 2,
                "Adjunto1":"GDIFGDFG65DFG65DF6G5D6F5G6F5",
                "Adjunto2":"GDIFGDFG65DFG65DF6G5D6F5G6F5",
                "Adjunto3":"GDIFGDFG65DFG65DF6G5D6F5G6F5",
                "Adjunto4":"GDIFGDFG65DFG65DF6G5D6F5G6F5",
                "Adjunto5":"GDIFGDFG65DFG65DF6G5D6F5G6F5",
                "HallazgoId": idHallazgoss,
            }
                console.log('enviando:', body)

                var url = apiUrlssoma+ "/api/Post-IncidenteAccidenteApp?code=wpICjvRa4aO5J0vYX/ccMZm3yZJlHZeh4z5tSm1bXSAKOxyqlykRzQ==&httpmethod=put";

                        var headers ={
                        "apikey":constantes.apiKey,
                        "Content-Type": "application/json",
                        }

                        $.ajax({
                            method: 'POST',
                            url:  url,
                            headers:headers,
                            data: JSON.stringify(body),
                            crossDomain: true,
                            dataType: "json",
                        }).done(function (data) {

                            console.log('despues modificar',data);
                            if(data.Id > 0)
                            { return 1; }
                            else{ return 0;}

                            //fnEnviarInformeAuditoriaOk()

                        })
                        .fail(function( jqXHR, textStatus, errorThrown ) {

                             return 0;
                        })
                        .always(function( jqXHR, textStatus, errorThrown ) {

                        });




}//------------------------------##########################################################-----------------------------------





function sp4FnTrasformaIncidenteEnHallazgo(idIncidentex)
{
           
           istAud = idIncidentex;
           $('#Sp3VentanaPruebasIncidenteHallazgo').modal('show').addClass('fade')
}

function sp4FnbuscaUnidadNegocio(idSedex)
{
   var idUnidadNeg = 0;
  //alert(paObj[istAud].a.Sedes.length());

 LTS.map(function(item)//
    {
          if(idSedex == item.Id)
          {idUnidadNeg = item.UnidadNegocioId;}
    });

   return idUnidadNeg;
}


function sp4FnGuardarIncidenteHallazgoWeb()
{




   $("#btnConfirmarEvidenciaIncidenteHallazgoWeb").html("<b>Guardando..</b>")
   $("#btnConfirmarEvidenciaIncidenteHallazgoWeb").attr("disabled",true);

    //------------------------------------------------    ahora vamos al servidor    ----------------------------------------------------

         var IdSedeEmbarcacion=0;

         if(paObj[istAud].a.IdSede > 0){IdSedeEmbarcacion = paObj[istAud].a.IdSede}
         else{
                  if(paObj[istAud].a.IdEmbarcacion > 0)
                  {
                    IdSedeEmbarcacion = paObj[istAud].a.IdEmbarcacion;
                  }
             }


                    guardarEnviar = 0;
                    var body = {
                                "FuenteId":             4,//Accidente Incidente
                                "TipoHallazgoId":       3,//supuestamente se registra si tipo de hallazgo, pero da error lo coloque como observacion por defecto
                                "NormaId":              0,//supuestamente se registra si tipo de hallazgo
                                "UnidadNegocioId":      sp4FnbuscaUnidadNegocio(paObj[istAud].a.IdSede),
                                "SedeId":               IdSedeEmbarcacion,

                                "AnalisisCausa":        1,//por defecto si necesita analisis causa
                                "ResponsableName":      "",
                                "ResponsableCorreo":    "",
                                "ResponsableCargo":     "",
                                "ResponsableUserHash":  "",

                                "ReportanteName":       getCookie("vtas_fullname"+sessionStorage.tabVisitasa),//logeado
                                "ReportanteCorreo":     getCookie("vtas_internal_useruser"+sessionStorage.tabVisitasa),
                                "ReportanteCargo":      getCookie("vtas_job"+sessionStorage.tabVisitasa),
                                "ReportanteUserHash":   getCookie("vtas_id_hash"+sessionStorage.tabVisitasa),
                                "Hallazgo":             "aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa",//paObj[istAud].a.DescripcionEvento,

                                "Created_By":           getCookie("vtas_id_hash"+sessionStorage.tabVisitasa),
                                "Cargo":                getCookie("vtas_fullname"+sessionStorage.tabVisitasa),
                                "Correo":               "caracas1348@gmail.com", //getCookie("vtas_internal_useruser"+sessionStorage.tabVisitasa),
                                "EnviarCorreo":         guardarEnviar
                                }




            console.log('sp4FnGuardarIncidenteHallazgoWeb enviando:', body)

            var url = apiurlAuditoria+"/api/Post-Hallazgos-All?code=CVNpmUeJgbarMkxynabne1CGLBm0gXH9mrEV6a2vuc2BvQgc4hDvbg==&httpmethod=post";
            var headers ={
               "apikey":constantes.apiKey,
               "Content-Type": "application/json",
            }

            $.ajax({
                method: 'POST',
                url:  url,
                headers:headers,
                data: JSON.stringify(body),
                crossDomain: true,
                dataType: "json",
            }).done(function (data) {

                console.log("ssssssssssssssssssssssssssssss::: ", data);
                if(data.Id > 0)
                {
                         sP4FnAgregaNumeroHallazgoIncidente(data.Id)
                         
                         hideLoading();
                          $("#btnConfirmarEvidenciaIncidenteHallazgoWeb").html("<b>Confirmar</b>")
                          $("#btnConfirmarEvidenciaIncidenteHallazgoWeb").attr("disabled",false);

                         $('#lbBDIncidenteHallazgo2').html(' <b> '+ data.Code_Hallazgo+' </b>')
                         $('#Sp3VentanaPruebasIncidenteHallazgo').modal('hide').removeClass('fade');
                         $('#Sp3VentanaBDIncidenteHallazgo').modal('show').addClass('fade')
                     
                                     

                }
                else
                { 
                    //('#Sp3VentanaPruebasIncidenteHallazgo').modal('hide').removeClass('fade');
                    $('#Sp3VentanaPruebasIncidenteHallazgo').modal('hide').removeClass('fade')
                   verModalError('Al Registrar el Incidente como Hallazgo', 'Intente Nuevamente');
                }

                //fnEnviarInformeAuditoriaOk()

            })
            .fail(function( jqXHR, textStatus, errorThrown ) {

                verModalError('Al Registrar el Incidente como Hallazgo', 'Intente Nuevamente');
                // $("#btGuardarModificar2").html("<b>Guardar</b>")
                // $("#btGuardarModificar2").attr("disabled",false);
            })
            .always(function( jqXHR, textStatus, errorThrown ) {

            });

    //-----------------------------------------------------------------------------------------------------------------------------------



     
      
    //alert("Guardando aqui va el servicio....................?"+istAud);
}




function fnSp4MostrarModalEvidenciasIncidente(idIncidentex)
{


bloqueaBtns('no')

   istAud = idIncidentex;

   //alert('aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa = '+paObj[istAud].a.hayEvidenciaBD);

  //$('#Sp3VentanaPruebas4').modal('show').addClass('fade');//modalAdjuntarDocumentosTareasSp3

 

   // -------------------------------------------------------------- alert('aqui debo cargar el listado de adjuntos');  ------------------------------------------------------------
            //alert();
if (paObj[istAud].a.hayEvidenciaBD == 0)
{

    $('#lbLoadRepoA5').html("Cargando Adjuntos, por favor  espere ..");   //$('#lbLoadRepoA5').html("Adjuntando, por favor  espere ..");
    $('#lbLoadRepoA5').css('visibility','visible');
    $('#loadRepoA5').css('visibility','visible');

    //vamos a bloquear el boton

    $('#btSubirFormato').attr("disabled",true);


                 var url = apiUrlssoma+"/api/Get-AdjuntosEvidenciaIncidenteWeb?code=Wot4BIWAxN4a4Xcp6OWM2oItqcd4HX0m4jBMKG4Tg2dJ/4lZQnbKiw==&httpmethod=objectlist&IdTipoEvento="+idIncidentex+"&IdEmpresa=1"+"&IdSede=0&FechaInicio&FechaFin&IdEmbarcacion=0"

                console.log("URL_ alerta = ",url )
                var headers ={
                    "apikey":constantes.apiKey
                }

                var settings = {
                    "url": url,
                    "method": "GET",
                    "timeout": 0,
                    "crossDomain": true,
                    "dataType": "json",
                    "headers": headers,
                };
                 
                 var data;
                $.ajax(settings).done(function (response) 
                   {
                    //console.log("adjuntos === ",response);
                    data = response;
                    var hn = 0;
                    if(response.PlanAnual.length > 0)
                    {//----------------------------------------------------------------------------------------------------------------------

                            $("#filasAdjuntarDocumentosTareas").html(' ');
                            $('#lbEvalAud_02EvidenciaIncidente').html("<b style='text-align: left !important;' >Documentos </b>");
                            countAdjuntos = 0;

                        console.log(' ----------------------------------***------------  '+response.PlanAnual.length+'---------------**---------------------');
                        response.PlanAnual.forEach((Item)=>{
                                
                                if(Item.Id >0)
                                {
                                    var ffx = date_AAAA_MM_DD_T_HH_MM_S_to_DD_MM_AAAA(Item.Adjunto3);
                                    fnAgregarAdjuntarDocumento2(Item.Id, Item.Adjunto2, ffx, 0, 0, 0);
                                    $('#btSubirFormato').attr("disabled",false);
                                    hn++;
                                }
                                else
                                {
                                    $('#btSubirFormato').attr("disabled",false);
                                }
                                   console.log('......... archivo :'+Item.Id);
                                  
                                  


                                    $('#lbLoadRepoA5').css('visibility','hidden');
                                    $('#loadRepoA5').css('visibility','hidden');
                                    $('#lbLoadRepoA5').html("Adjuntando, por favor  espere ..");




                        });

                         // if(hn > 0) //quiere decir que xisten ya adjuntos en base de datos
                         //            {
                         //                paObj[istAud].a.Evidencias = data;
                         //                paObj[istAud].a.hayEvidenciaBD = 1;

                                       
                         //            }
                          
                      }
                    else
                    {
                            $("#filasAdjuntarDocumentosTareas").html(' ');
                            $('#lbEvalAud_02EvidenciaIncidente').html("<b style='text-align: left !important;' >Documentos </b>");
                            countAdjuntos = 0;
                            $('#lbLoadRepoA5').css('visibility','hidden');
                            $('#loadRepoA5').css('visibility','hidden');
                            $('#lbLoadRepoA5').html("Adjuntando, por favor  espere ..");
                            $('#btSubirFormato').attr("disabled",false);
                    }//----------------------------------------------------------------------------------------------------------------------
                   
                    });




}else
{
   
      //--------------------------------------- cargar el listado desdde el array ------------------------------------
          //var n = paObj[istAud].a.Evidencias.PlanAnual.length;

           console.log('Ya esta Cargadoooooooooooooooo. = ',n); //paObj[istAud].a.Evidencias.PlanAnual[0].Adjunto2)
           //  $("#filasAdjuntarDocumentosTareas").html(' ');
           //  $('#lbEvalAud_02EvidenciaIncidente').html("<b style='text-align: left !important;' >Documentos </b>");
           //  countAdjuntos = 0;
           // for(var i = 0; i<n; i++)
           // {
           //     var ffx = date_AAAA_MM_DD_T_HH_MM_S_to_DD_MM_AAAA(paObj[istAud].a.Evidencias.PlanAnual[i].Adjunto3);
           //     fnAgregarAdjuntarDocumento2(paObj[istAud].a.Evidencias.PlanAnual[i].Id, paObj[istAud].a.Evidencias.PlanAnual[i].Adjunto2, ffx, 0, 0, 0);
           // }
                                 

      //--------------------------------------------------------------------------------------------------------------


}

  $('#modalAdjuntarDocumentosTareasSp3').modal('show').addClass('fade');//
  $('#lbTitleEvidenciaInvestigacion').html("Evidencia de Investigación - "+paObj[idIncidentex].a.Code);
            
   // -------------------------------------------------------------- alert('aqui debo cargar el listado de adjuntos');  ------------------------------------------------------------
    
}

var entrevistaFile;
entrevistaFile = "data:application/pdf;base64,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ODk3NjM3Nzk1MjhdL0dyb3VwPDwvUy9UcmFuc3BhcmVuY3kvQ1MvRGV2aWNlUkdCL0kgdHJ1ZT4+L0NvbnRlbnRzIDIgMCBSPj4KZW5kb2JqCgo4IDAgb2JqCjw8L1R5cGUvUGFnZXMKL1Jlc291cmNlcyAyNSAwIFIKL01lZGlhQm94WyAwIDAgNTk1IDg0MSBdCi9LaWRzWyAxIDAgUiBdCi9Db3VudCAxPj4KZW5kb2JqCgoyNiAwIG9iago8PC9UeXBlL0NhdGFsb2cvUGFnZXMgOCAwIFIKL09wZW5BY3Rpb25bMSAwIFIgL1hZWiBudWxsIG51bGwgMF0KL0xhbmcoZXMtRVMpCj4+CmVuZG9iagoKMjcgMCBvYmoKPDwvQ3JlYXRvcjxGRUZGMDA1NzAwNzIwMDY5MDA3NDAwNjUwMDcyPgovUHJvZHVjZXI8RkVGRjAwNEMwMDY5MDA2MjAwNzIwMDY1MDA0RjAwNjYwMDY2MDA2OTAwNjMwMDY1MDAyMDAwMzcwMDJFMDAzMD4KL0NyZWF0aW9uRGF0ZShEOjIwMjEwNDA0MTEyODIxLTA0JzAwJyk+PgplbmRvYmoKCnhyZWYKMCAyOAowMDAwMDAwMDAwIDY1NTM1IGYgCjAwMDAwNjExMTQgMDAwMDAgbiAKMDAwMDAwMDAxOSAwMDAwMCBuIAowMDAwMDAxODMwIDAwMDAwIG4gCjAwMDAwMDE4NTEgMDAwMDAgbiAKMDAwMDAwNjQxNyAwMDAwMCBuIAowMDAwMDA2NDM4IDAwMDAwIG4gCjAwMDAwMDkxNzAgMDAwMDAgbiAKMDAwMDA2MTI4MyAwMDAwMCBuIAowMDAwMDA5MTkxIDAwMDAwIG4gCjAwMDAwMjE3NjQgMDAwMDAgbiAKMDAwMDAyMTc4NyAwMDAwMCBuIAowMDAwMDIxOTgyIDAwMDAwIG4gCjAwMDAwMjIzMzggMDAwMDAgbiAKMDAwMDAyMjU1NCAwMDAwMCBuIAowMDAwMDQzOTg0IDAwMDAwIG4gCjAwMDAwNDQwMDcgMDAwMDAgbiAKMDAwMDA0NDE5OCAwMDAwMCBuIAowMDAwMDQ0NzQxIDAwMDAwIG4gCjAwMDAwNDUxMjQgMDAwMDAgbiAKMDAwMDA1OTk3NSAwMDAwMCBuIAowMDAwMDU5OTk4IDAwMDAwIG4gCjAwMDAwNjAxOTQgMDAwMDAgbiAKMDAwMDA2MDY1NCAwMDAwMCBuIAowMDAwMDYwOTYyIDAwMDAwIG4gCjAwMDAwNjEwMTUgMDAwMDAgbiAKMDAwMDA2MTM4MiAwMDAwMCBuIAowMDAwMDYxNDc5IDAwMDAwIG4gCnRyYWlsZXIKPDwvU2l6ZSAyOC9Sb290IDI2IDAgUgovSW5mbyAyNyAwIFIKL0lEIFsgPEVGODc5MEZGODE2Q0E2MjMwQzc5QjNGNDFGQjc3RDE1Pgo8RUY4NzkwRkY4MTZDQTYyMzBDNzlCM0Y0MUZCNzdEMTU+IF0KL0RvY0NoZWNrc3VtIC9FRjQwRUFEM0QzQUQ4Q0JGNzQyQUNGNDUxRjU2OTc3MQo+PgpzdGFydHhyZWYKNjE2NTQKJSVFT0YK";
function fnSp4DescargarEntrevistaPDF()
{
    bloqueaBtns('si');
    //alert('aaaaaaaaaaaaaaaaaaaaa');//modalAdjuntarDocumentosTareasSp3
    //$('#modalAdjuntarDocumentosTareasSp3').modal('hide').removeClass('fade');
    //$('#modalAdjuntarDocumentosTareasSp3').css('visibility','hidden')

     $('#modalAdjuntarDocumentosTareasSp3').modal('hide').removeClass('fade');
     $('#modalEntrevistaIncidentePDF').modal('hide').removeClass('fade');
     $('#modalEntrevistaIncidentePDF').modal('show');//.addClass('fade');

     //----------------------SOLUCION PARA VISUALIZAR EN OTRA VENTANA-------------------//
            $('#divPreviewPdf2').html('  ');
            var obj = document.createElement('object'); 
            obj.style.width = '100%';
            obj.style.height = '542pt';
            obj.type = 'application/pdf';
            obj.data = entrevistaFile;
            document.body.appendChild(obj);
            let pdfWindow = document.getElementById('divPreviewPdf2');
            //pdfWindow.document.write('<body><h5> Entrevista</h5></body>'); 
            pdfWindow.appendChild(obj);
    //----------------------SOLUCION PARA VISUALIZAR EN OTRA VENTANA-------------------//

bloqueaBtns('no')

}





function fnSp4DescargaEvidencia(adjuntoId)
{
     bloqueaBtns('si')
    $('#lbLoadRepoA5').html("Descargando el  Adjunto, por favor  espere ..");   //$('#lbLoadRepoA5').html("Adjuntando, por favor  espere ..");
    $('#lbLoadRepoA5').css('visibility','visible');
    $('#loadRepoA5').css('visibility','visible');
                //alert('ve al servidor y trae a = '+adjuntoId);

                var url = apiUrlssoma+"/api/Get-AdjuntosEvidenciaIncidenteWeb?code=Wot4BIWAxN4a4Xcp6OWM2oItqcd4HX0m4jBMKG4Tg2dJ/4lZQnbKiw==&httpmethod=objectlist&IdTipoEvento="+adjuntoId+"&IdEmpresa=2"+"&IdSede=0&FechaInicio&FechaFin&IdEmbarcacion=0"

                console.log("URL_ alerta = ",url )
                var headers ={
                    "apikey":constantes.apiKey
                }

                var settings = {
                    "url": url,
                    "method": "GET",
                    "timeout": 0,
                    "crossDomain": true,
                    "dataType": "json",
                    "headers": headers,
                };
                 
                 var data;
                $.ajax(settings).done(function (response) 
                   {
                            //console.log("adjuntos === ",response);
                            data = response;
                            var hn = 0;
                            if(response.PlanAnual.length > 0)
                            {//----------------------------------------------------------------------------------------------------------------------

                                                                  
                                response.PlanAnual.forEach((Item)=>
                                {
                                        
                                        if(Item.Id >0)
                                        {
                                             //console.log(' ----------------------------------***------------  '+ Item.Adjunto1 +'---------------**---------------------'); 
                                       //fnSacaExtensionBase64(Item.Adjunto1)
                                        console.log("mostrar pdf") 
                                           var x = Item.Adjunto1.split(',');
                                           //var x = code.split(',');
                                           var y = x[0].split(';');
                                           var z = y[0].split(':');
                                  console.log('================'+x[0]+"========================");
                                  console.log('================'+z[1]+"========================");
                                  console.log('================'+y[0]+"========================");

                                        //----------------------SOLUCION PARA VISUALIZAR EN OTRA VENTANA-------------------//
                                        /*var obj = document.createElement('object'); 
                                        obj.style.width = '100%';
                                        obj.style.height = '842pt';
                                        obj.type = z[1]; //'application/pdf';
                                        obj.data = Item.Adjunto1;//'data:application/pdf;base64,' + x[1];
                                        document.body.appendChild(obj);
                                        let pdfWindow = window.open("")
                                        pdfWindow.document.write('<body><h5>'+ Item.Adjunto4 +'</h5></body>'); 
                                        pdfWindow.document.body.appendChild(obj);*/
                                        //----------------------SOLUCION PARA VISUALIZAR EN OTRA VENTANA-------------------//



                                         $('#lbLoadRepoA5').html("Adjuntando, por favor  espere ..");
                                         $('#lbLoadRepoA5').css('visibility','hidden');
                                         $('#loadRepoA5').css('visibility','hidden');


                                         //----------------------SOLUCION OPIMA PARA DESCARGAR -----------------------------//
                                                    let url = Item.Adjunto1;//"data:application/msword;base64," + x[1];  
                                                    var documento = null;
                                                    fetch(url)
                                                    .then(res => res.blob())
                                                    .then(function(blob) {
                                                      downloadBlob(blob, Item.Adjunto4);
                                                    });
                                        //----------------------SOLUCION OPIMA PARA DESCARGAR -----------------------------//
                                          bloqueaBtns('no');
                                        }
                                })
                           }
                    });


}



/*
function sp4FnModalDatosGnerales(idIncidentex)
{//------------------------------------------------------------------------------------------------------ Dastos Generales -------------------------------------------

      //alert(idIncidentex);


                             $('#sel_f_dg_gv_1').val(0);   //IdTipoEvento
                             var bal1 = $('#sel_f_dg_gv_1 option:selected').text();

                             $('#sel_f_dg_gv_12').val(0);   //IdTipoEvento
                         
                             $('#sel_f_dg_gv_13').val(0);   //IdTipoEvento
                           

                             $('#sel_f_dg_gv_14').val(0);

                             $('#sel_f_dg_gv_15').val(0);   //IdTipoEvento
                           

                             $('#sel_f_dg_gv_16').val(0);   //IdTipoEvento
                          


                            $('#sel_f_dg_gv_17').val(0);  

                            $('#sel_f_dg_gv_18').val(0);   //IdTipoEvento
                          
                            $('#ReportanteNameDG_119').val('');// alert(bal18);

                            $('#ReportanteUserHashDG_119').val('');//IdHash



                            $('#txta_f_dg_gv_20').val('');

                            $('#txta_f_dg_gv_21').val('');


                            $('#txta_f_dg_gv_22').val('');

                            //var bal22 =  Itemx.PuestoCargoAccidentado;
                            $('#txta_f_dg_gv_23').val('');



                            //var bal23 =  Itemx.PuestoCargoAccidentado2;
                            $('#txta_f_dg_gv_24').val('');



                            //var bal24 =  Itemx.Expiencia_Yaer;
                            $('#txta_f_dg_gv_25').val('');


                            //var bal25 =  Itemx.Expiencia_Month;
                            $('#txta_f_dg_gv_26').val('');




                            $('#sel_f_dg_gv_27').val(0);   //IdTipoEvento
                           


                            $('#sel_f_dg_gv_28').val(0);   //IdTipoEvento
                           

                            //var bal28 =  Itemx.Dias_Descanza;
                            $('#txt_f_dg_gv_29').val(''); //alert(bal28);




                           $('#sel_f_dg_gv_30').val('');   //IdTipoEvento
                           // var bal29 = $('#sel_f_dg_gv_30 option:selected').text();
             
                              //aqui


                          //--------------------------------------------------------------
                          

                          $('#date_range').daterangepicker({
                            "locale": {
                                "format": "YYYY-MM-DD",
                                "separator": " - ",
                                "applyLabel": "Aceptar",
                                "cancelLabel": "Cancelar",
                                "fromLabel": "Desde",
                                "toLabel": "Hasta",
                                "customRangeLabel": "Personalizar",
                                "daysOfWeek": [
                                    "Do",
                                    "Lu",
                                    "Ma",
                                    "Mi",
                                    "Ju",
                                    "Vi",
                                    "Sa"
                                ],
                                "monthNames": [
                                    "Enero",
                                    "Febrero",
                                    "Marzo",
                                    "Abril",
                                    "Mayo",
                                    "Junio",
                                    "Julio",
                                    "Agosto",
                                    "Setiembre",
                                    "Octubre",
                                    "Noviembre",
                                    "Diciembre"
                                ],
                                "firstDay": 1
                            },
                            "startDate": "2021-01-01",
                            "endDate": "2021-01-05",
                            "minDate": "2020-12-20",
                            "alwaysShowCalendars": true,
                            "opens": "center"
                           });


                          //----------------------fecha_Descanso_Fin----------------------------------------fecha_Descanso_Ini   







                           //var bal30 =  Itemx.NombreRespInvestigar;
                           $('#ReportanteNameDG_311').val('');

                           //var bal30_1 =  Itemx.IdRespInvestigar;
                           $('#ReportanteUserHashDG_311').val('');


                           $('#sel_f_dg_gv_32').val(0);   //IdTipoEvento
                          

                          $('#sel_f_dg_gv_33').val(0);   //IdTipoEvento
                          // var bal32 = $('#sel_f_dg_gv_33 option:selected').text();

                          //var bal33 =  Itemx.Puerto_Arrivo;
                          $('#txt_f_dg_gv_34').val('');  
                          
                           fnSp3onchangeObjetivoSubojetitiv2('si', 'rbtn_si_35', 'rbtn_no_36');

                           //var bal35 =  date_AAAA_MM_DD_T_HH_MM_S_to_DD_MM_AAAA(Itemx.FechaInvestigacionIni); 
                            $('#txtd_f_dg_gv_37').val(''); //ojo agregar fecha de hoy

                           //var bal36 =  date_AAAA_MM_DD_T_HH_MM_S_to_DD_MM_AAAA(Itemx.FechaInvestigacionFin);
                            $('#txtd_f_dg_gv_38').val('  '); 
                            //alert();

                           //var bal37 =  Itemx.TiempoTranscurrido;
                              $('#txt_f_dg_gv_39').val('');
                           


                           fnSp3onchangeObjetivoSubojetitiv2('si', 'rbtn_si_40', 'rbtn_no_41');

                            $('#sel_f_dg_gv_42').val(0);   //IdTipoEvento
                           // var bal39 = $('#sel_f_dg_gv_42 option:selected').text();

                           $('#sel_f_dg_gv_44').val(0);   //IdTipoEvento
                            var bal40 = $('#sel_f_dg_gv_44 option:selected').text();

                           //$('#sel_f_dg_gv_45').val(0);   //IdTipoEvento
                        


                           
                           $("#"+'sel_f_dg_gv_45').html(" "); $("#"+'sel_f_dg_gv_45').css('font-size','13px');









      fnSp3VentanaMostrarPlanAnual(idIncidentex);

}//------------------------------------------------------------------------------------------------------ Dastos Generales -------------------------------------------

*/


function sp4FnModalDatosGnerales(idIncidentex)
{//------------------------------------------------------------------------------------------------------ Dastos Generales -------------------------------------------
 $('#sp3BtFiltroPlanAnualDG').css('visibility', 'visible');
 $('#sp3BtFiltroPlanAnualBtEnviarDG').css('visibility', 'visible');



    // alert("primero vamos a mostrar "+idIncidentex);
    if(paObj[idIncidentex].a.GrupoEvento == 1)
    {//----------------------------- de datos personales ------------------------
        sp4fnpestanaAccidentePersonal(idIncidentex);
    }//--------------------------------------------------------------------------
    else
    {
        // Tipos de Incidentes del Grupo 2 (Accidente Ambiente-1, Incidente Ambiental-2)
        if(paObj[idIncidentex].a.GrupoEvento == 2)
        {


            sp4fnpestanaAccidenteAmbiental(idIncidentex);

        }//--------------------------------------------------------------------------
        else
        {
            // Tipos de Incidentes del Grupo 3 (Accidente Con Daños Materiales-3, Accidente de Seg Procesos -4 )
            if(paObj[idIncidentex].a.GrupoEvento == 3)
            {

                sp4fnpestanaAccidenteDannnioMaterial(idIncidentex);
            }//--------------------------------------------------------------------------

        }

    }








}//------------------------------------------------------------------------------------------------------ Dastos Generales -------------------------------------------

//$('#bodymodalShowAuditor').html(' ');

function sp4fnpestanaAccidentePersonal(idIncidentex)
{
    $('#sel_f_dg_gv_1').val(0);   //IdTipoEvento
    var bal1 = $('#sel_f_dg_gv_1 option:selected').text();

    $('#sel_f_dg_gv_12').val(0);   //IdTipoEvento
    $('#sel_f_dg_gv_13').val(0);   //IdTipoEvento
    $('#sel_f_dg_gv_14').val(0);
    $('#sel_f_dg_gv_15').val(0);   //IdTipoEvento
    $('#sel_f_dg_gv_16').val(0);   //IdTipoEvento
    $('#sel_f_dg_gv_17').val(0);
    $('#sel_f_dg_gv_18').val(0);   //IdTipoEvento
    $('#ReportanteNameDG_119').val('');// alert(bal18);
    $('#ReportanteUserHashDG_119').val('');//IdHash
    $('#txta_f_dg_gv_20').val('');
    $('#txta_f_dg_gv_21').val('');
    $('#txta_f_dg_gv_22').val('');
    //var bal22 =  Itemx.PuestoCargoAccidentado;
    $('#txta_f_dg_gv_23').val('');
    //var bal23 =  Itemx.PuestoCargoAccidentado2;
    $('#txta_f_dg_gv_24').val(0);

    //var bal24 =  Itemx.Expiencia_Yaer;
    $('#txta_f_dg_gv_25').val('');
    //var bal25 =  Itemx.Expiencia_Month;
    $('#txta_f_dg_gv_26').val('');
    $('#sel_f_dg_gv_27').val(0);   //IdTipoEvento
    $('#sel_f_dg_gv_28').val(0);   //IdTipoEvento
    //var bal28 =  Itemx.Dias_Descanza;
    $('#txt_f_dg_gv_29').val(''); //alert(bal28);
    $('#sel_f_dg_gv_30').val('');   //IdTipoEvento
    // var bal29 = $('#sel_f_dg_gv_30 option:selected').text();
    //aqui
    //--------------------------------------------------------------
var f = new Date();

var diax = f.getDate();           if(diax < 10){diax = '0'+diax;}
var measx = f.getMonth() +1; if(measx < 10){measx = '0'+measx;}

var hoyy = f.getFullYear() + "-" + measx+ "-" +diax;

    $('#date_range').daterangepicker({
        "locale": {
            "timePicker": true,
            "format": "YYYY-MM-DD",
            "separator": " - ",
            "applyLabel": "Aceptar",
            "cancelLabel": "Cancelar",
            "fromLabel": "Desde",
            "toLabel": "Hasta",
            "customRangeLabel": "Personalizar",
            "daysOfWeek": [
                "Do",
                "Lu",
                "Ma",
                "Mi",
                "Ju",
                "Vi",
                "Sa"
            ],
            "monthNames": [
                "Enero",
                "Febrero",
                "Marzo",
                "Abril",
                "Mayo",
                "Junio",
                "Julio",
                "Agosto",
                "Setiembre",
                "Octubre",
                "Noviembre",
                "Diciembre"
            ],
            "firstDay": 1
        },
        "startDate": hoyy,
        "endDate": hoyy,
        "minDate": "2020-12-20",
        "alwaysShowCalendars": true,
        "opens": "center"
    });


    //----------------------fecha_Descanso_Fin----------------------------------------fecha_Descanso_Ini

    //var bal30 =  Itemx.NombreRespInvestigar;
    $('#ReportanteNameDG_311').val('');
    //var bal30_1 =  Itemx.IdRespInvestigar;
    $('#ReportanteUserHashDG_311').val('');
    $('#sel_f_dg_gv_32').val(0);   //IdTipoEvento
    $('#sel_f_dg_gv_33').val(0);   //IdTipoEvento
    // var bal32 = $('#sel_f_dg_gv_33 option:selected').text();
    //var bal33 =  Itemx.Puerto_Arrivo;
    $('#txt_f_dg_gv_34').val('');
    fnSp3onchangeObjetivoSubojetitiv2('si', 'rbtn_si_35', 'rbtn_no_36');
    //var bal35 =  date_AAAA_MM_DD_T_HH_MM_S_to_DD_MM_AAAA(Itemx.FechaInvestigacionIni);
    $('#txtd_f_dg_gv_37').val(''); //ojo agregar fecha de hoy
    //var bal36 =  date_AAAA_MM_DD_T_HH_MM_S_to_DD_MM_AAAA(Itemx.FechaInvestigacionFin);
    $('#txtd_f_dg_gv_38').val('  ');
    //alert();
    //var bal37 =  Itemx.TiempoTranscurrido;
    $('#txt_f_dg_gv_39').val('');
    fnSp3onchangeObjetivoSubojetitiv2('si', 'rbtn_si_40', 'rbtn_no_41');
    $('#sel_f_dg_gv_42').val(0);   //IdTipoEvento
    // var bal39 = $('#sel_f_dg_gv_42 option:selected').text();
    $('#sel_f_dg_gv_44').val(0);   //IdTipoEvento
    var bal40 = $('#sel_f_dg_gv_44 option:selected').text();
    //$('#sel_f_dg_gv_45').val(0);   //IdTipoEvento
   // $("#"+'sel_f_dg_gv_45').html(" "); $("#"+'sel_f_dg_gv_45').css('font-size','13px');
      //$('#Fila-0').css('display','none');
      $('#Fila-1').css('display','block');
      $('#Fila-2').css('display','block');
      $('#Fila-3').css('display','block');
     $('#tablaStep-0').css('display','none');
    $('#tablaStep-1').css('display','block');
    $('#tablaStep-2').css('display','none');
    $('#btn_step1').html("<b> Datos del Evento SSO </b>")
    $('#sel_f_dg_gv_30').val(0);

    $('#txt_f_dg_gv_29').val(0);
    $('#txta_f_dg_gv_22').val(0);
    $('#txta_f_dg_gv_26').val(0);
    $('#txta_f_dg_gv_25').val(0);
    fnSp3VentanaMostrarPlanAnual(idIncidentex);
}

function sp4fnpestanaAccidenteAmbiental(idIncidentex)
{


    console.log('accidente Ambiental YYYYYYYY');
    $('#tablaStep-2').css('display','block');
    $('#tablaStep-1').css('display','none');
    $('#tablaStep-0').css('display','none');
    $('#btn_step1').html("<b> Datos del Evento MA </b>")

     $('#dat_x_clasificacion').val(0);   
     $('#dat_x_potencia').val(0);  
     $('#dat_x_accidente_proceso').val(0);  

     $('#dat_x_sede').val(0);  
     $('#dat_x_ubicacion').val(0);   
     $('#dat_x_empresa').val(0);  

     $('#dat_x_descripcion').val('');
     $('#dat_x_accion_inmediata').val('');
     $('#dat_x_contaminante').val(0);

     $('#dat_x_valumen').val("");
     $('#dat_x_unidad').val(0);
     $('#dat_x_area_inpactada').val("");
     $('#dat_x_impacto_ambiental').val(0);
     

     $('#dat_x_descripcion_evento').val(0);  
     $('#dat_x_impacto_ambiental').val(0);  
     $('#dat_x_reaccion_publica').val(0);  
     $('#dat_x_relacion_comunidad').val(0);  //dat_x_legal
     $('#dat_x_legal').val(0); 
     $('#dat_x_calificacion').val('');
     $('#dat_x_nivel_severidad').val('');

     $('#dat_x_iia_unidad').val('');
     $('#dat_x_iia_corporativo').val('');
     $('#dat_x_meta_corporativa').val('');
     $('#dat_x_iia_unidad_pesca').val('');
     $('#dat_x_iia_corporativo_pesca').val('');
     $('#dat_x_meta_pesac').val('');
     $('#dat_x_ii_operaciones').val('');
     $('#dat_x_iia_corp_operaciones').val('');

     $('#dat_x_iia_meta_operaciones').val('');
     $('#dat_x_iia_adm_finanza').val('');
     $('#dat_x_iia_corp_adm_finanza').val('');
     $('#dat_x_meta_adm_finanza').val('');


     $('#dat_x_num_colaboradores').val("");
     $('#dat_x_num_horas').val("");
     $('#dat_x_costo_mo').val("");
     $('#dat_x_num_colaborador_2').val("");
     $('#dat_x_num_hora_2').val("");
     $('#dat_x_costo_mo_s').val("");

     $('#dat_x_cant_producto').val("");
     $('#dat_x_costo_producto').val("");
     $('#dat_x_costo_producto_s').val("");
     $('#dat_x_costo_materiales_s').val("");
     $('#dat_x_costo_servicio_s').val("");
     $('#dat_x_costo_multas_s').val("");

     $('#dat_x_costo_total_s').val("");
     $('#dat_x_costo_total_dolar').val("");
     $('#dat_x_otros').val("");

     $('#dat_x_oefa_uit').val("");
     $('#dat_x_oefa_s').val("");
     $('#dat_x_oefa_usd').val("");
     $('#dat_x_dicapi_uit').val("");
     $('#dat_x_dicapi_s').val("");
     $('#dat_x_dicapi_usd').val("");
    
    fnSp3onchangeObjetivoSubojetitiv2('si', 'rbtn_si_8y', 'rbtn_no_9y');

    fnSp3VentanaMostrarPlanAnual(idIncidentex);

}

function sp4fnpestanaAccidenteDannnioMaterial(idIncidentex)
{
    console.log('Daños Materiales XXXXXXxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx que hago');

    console.log('accidente Ambiental YYYYYYYY');
    
    $('#tablaStep-0').css('display','block');
    $('#tablaStep-2').css('display','none');
    $('#tablaStep-1').css('display','none');//solo vamos a agregar un campo y ya todo lo demas es igual
      

      // $('#Fila-0').css('display','block');
      // $('#Fila-1').css('display','none');
      // $('#Fila-2').css('display','none');
      // $('#Fila-3').css('display','none');
    






    $('#btn_step1').html("<b> Datos del Evento DM </b>")
    fnSp3VentanaMostrarPlanAnual(idIncidentex);
}









function sp4FnGuardarGenerales()
{//------------------------------------------------------------------------------------------------------ Dastos Generales -------------------------------------------

      //alert("Guardar = "+istAud);
    
   $('#Sp3VentanaPlanAnualEditView').modal('hide').removeClass('fade');
   $('#Sp3VentanaPruebasDatosGenerales').modal('show').addClass('fade');
     

}//------------------------------------------------------------------------------------------------------ Dastos Generales -------------------------------------------







function sp4FnConfirmarGuardarGenerales()
{//------------------------------------------------------------------------------------------------------ Dastos Generales -------------------------------------------


        //vamos a validar aqui si es Ambiental o Personal 
//alert('7769 ='+paObj[istAud].a.GrupoEvento );
        if(paObj[istAud].a.GrupoEvento == 1)
            {//----------------------------- de datos personales ------------------------
                  
                            if(AccionBD_DG == 1)
                                {//========================================================================================================================== UPDATE DB =============================

                                    // $('#btnConfirmarEvidenciaIncidenteHallazgoWebDG').html('Guardando..');
                                    // $('#btnConfirmarEvidenciaIncidenteHallazgoWebDG').prop('disabled',true);

                                    $("#btnConfirmarEvidenciaIncidenteHallazgoWebDG").html("<b>Guardando..</b>")
                                    $("#btnConfirmarEvidenciaIncidenteHallazgoWebDG").attr("disabled",true);

                                    $('#btnCancelarGuardarDatosGenerales').attr("disabled",true);

                                     //alert('que hacessssssssssss');
                                     var HayPersonalAfectado;
                                    var InformeInvestigacion;
                                    var HechoAtiempo;

                                    // $('#btAgregarListadoDG').html('Agregando ..............');//
                                    // $('#btAgregarListadoDG').prop('disabled',true);
                                     
                                //alert($('#rbtn_si_8').attr('src'));

                                     if($('#rbtn_no_9').attr('src') == './images/iconos/aprobarbien.svg'){HayPersonalAfectado = 1}else{HayPersonalAfectado = 0}//1   otra empresa
                                     if($('#rbtn_si_8').attr('src') == './images/iconos/aprobarbien.svg'){HayPersonalAfectado = 0}else{HayPersonalAfectado = 1} // 0 tasa



                                    if($('#rbtn_si_35').attr('src') == './images/iconos/aprobarbien.svg'){InformeInvestigacion = 0}else{InformeInvestigacion = 1}//0 no hay informe
                                    if($('#rbtn_no_36').attr('src') == './images/iconos/aprobarbien.svg'){InformeInvestigacion = 1}else{InformeInvestigacion = 0} //1  si hay informe


                                     if($('#rbtn_si_40').attr('src') == './images/iconos/aprobarbien.svg'){HechoAtiempo = 1}else{HechoAtiempo = 0}//1   hecho a tiempo
                                     if($('#rbtn_no_41').attr('src') == './images/iconos/aprobarbien.svg'){HechoAtiempo = 0}else{HechoAtiempo = 1} // 0 hecho a destiempo
                                       



                                      //1 //------------------------------validamos los campos vacios ------------
                                      //2 // recolectamos todos los datos para registrar en la lista
                                            var fx = $('#txtd_f_dg_gv_4').val(); fx = fx.toString();
                                            var f1  =  fx.split('/'); f1 = f1[2]+'-'+f1[1]+'-'+f1[0];  f1 = f1.toString(); //alert("fecha = "+f1);

                                            var fx1 = $('#txtd_f_dg_gv_037').val(); fx1 = fx1.toString();
                                            var f2  =  fx1.split('/'); f2 = f2[2]+'-'+f2[1]+'-'+f2[0];  f2 = f2.toString(); //alert("fecha = "+f2);

                                            var fx3 = $('#txtd_f_dg_gv_038').val(); fx3 = fx3.toString();
                                            var f3  =  fx3.split('/'); f3 = f3[2]+'-'+f3[1]+'-'+f3[0];  f3 = f3.toString(); //alert("fecha = "+f3);


                                            var fx4 = $('#txtd_f_dg_gv_37').val(); fx4 = fx4.toString();
                                            var f4  =  fx4.split('/'); f4 = f4[2]+'-'+f4[1]+'-'+f4[0];  f4 = f4.toString(); //alert("fecha = "+f4);

                                            var fx5 = $('#txtd_f_dg_gv_38').val(); fx5 = fx5.toString();
                                            //var f5  =  fx5.split('/'); f5 = f5[2]+'-'+f5[1]+'-'+f5[0];  f5 = f5.toString();// alert("fecha = "+f5);

                                            
                                              
                                                fx5.split(" ").join("");
                                                var ll = fx5.length;
                                                
                                                console.log("-",fx5,"-");
                                                var ttrsnc = 0;
                                                var f5;
                         if((fx5)&&(ll > 7)){f5  =  fx5.split('/'); f5 = f5[2]+'-'+f5[1]+'-'+f5[0];  f5 = f5.toString();  ttrsnc = parseInt($('#txt_f_dg_gv_39').val());   }else{f5=f4; ttrsnc = 0;}// alert("fecha = "+f5);
                                                 


                                            //alert("BARCO"+$('#sel_f_dg_gv_7').val());

                                             var idBarco = parseInt($('#sel_f_dg_gv_7').val());

                                             ///alert("HORA"+$('#txtt_f_dg_gv_5').val());

                                            let body = {
                                                    //*****************************DATOS GENERALES******************txta_f_dg_gv_21
                                                  "Id1": istAud_DG,
                                                  "AccionBD":2,
                                                  "IdTipoEvento":               parseInt($('#sel_f_dg_gv_1').val()),
                                                  "Potencial":                  parseInt($('#sel_f_dg_gv_2').val()),
                                                  "AccidenteProceso":           parseInt($('#sel_f_dg_gv_3').val()),
                                                  "Fecha":                      f1, //$('#txtd_f_dg_gv_4').val(), //voltear fecha             
                                                  "Hora":                       $('#txtt_f_dg_gv_5').val(),//evento
                                                  "IdSede":                     parseInt($('#sel_f_dg_gv_6').val()),//es sede
                                                  "IdEmbarcacion":              idBarco,
                                                  "HayPersonalAfectado":        HayPersonalAfectado,  //esperar esto debe ser una variable int 
                                                  "IdEmpresaCompany":           $('#sel_f_dg_gv_10').val(),
                                                  "Descripcion":                $('#txta_f_dg_gv_11').val(),
                                                  "IdCondicionEP":               parseInt($('#sel_f_dg_gv_12').val()),
                                                  "IdProcesoOperacion":          parseInt($('#sel_f_dg_gv_13').val()),
                                                  "IdSubProceso":                parseInt($('#sel_f_dg_gv_14').val()),
                                                  "IdProbRecurrencia":           parseInt($('#sel_f_dg_gv_15').val()),
                                                  "IdAreaAccidente":             parseInt($('#sel_f_dg_gv_16').val()),
                                                  "IdZonaAccidente":             parseInt($('#sel_f_dg_gv_17').val()),
                                                  "LugarEspTarea":               parseInt($('#sel_f_dg_gv_18').val()), //ojo cambiar el tipo de dato en base de datos, debe ser un Id
                                                  "TemporadaVeda":               parseInt($('#sel_f_dg_gv_18_0').val()), //campo nuevo temporadVeda


                                                //*****************************DATOS DEL AFECTADO ******************
                                                  "NombrePersonalAccidentado":  $('#ReportanteNameDG_119').val(),
                                                  "CodTrabjador":               $('#txta_f_dg_gv_20').val(),
                                                  "IdPersonalAccidentado":      $('#ReportanteUserHashDG_119').val(),
                                                  "DNIAccidentado":             $('#txta_f_dg_gv_21').val(),
                                                  "EdadAccidentado":            parseInt($('#txta_f_dg_gv_22').val()),
                                                  "PuestoCargoAccidentado":     $('#txta_f_dg_gv_23').val(),
                                                  "PuestoCargoAccidentado2":    $('#txta_f_dg_gv_24').val(),
                                                  "Expiencia_Yaer":              parseInt($('#txta_f_dg_gv_25').val()),
                                                  "Expiencia_Month":             parseInt($('#txta_f_dg_gv_26').val()),
                                                  "LesionDannio":               $('#sel_f_dg_gv_27').val(), //ojo cambiar el tipo de dato en base de datos, debe ser un Id
                                                  "ParteCuerpoLesionada":        parseInt($('#sel_f_dg_gv_28').val()), //ojo cambiar el tipo de dato en base de datos, debe ser un Id
                                                  "fecha_Descanso_Ini":         f2, //$('#txtd_f_dg_gv_037').val(),//definir campos ocultos
                                                  "fecha_Descanso_Fin":         f3, //$('#txtd_f_dg_gv_038').val(),//definir campos ocultos
                                                  "Dias_Descanza":               parseInt($('#txt_f_dg_gv_29').val()),
                                                  "Descanso_estado":             parseInt($('#sel_f_dg_gv_30').val()),


                                                //*****************************DATOS DE LA INVESTIGACIÓN ******************

                                                  "IdRespInvestigar":           $('#ReportanteUserHashDG_311').val(),
                                                  "NombreRespInvestigar":       $('#ReportanteNameDG_311').val(),
                                                  "IdAreaRespInvestigar":        parseInt($('#sel_f_dg_gv_32').val()),
                                                  "IdAsesorInvestigacion":       parseInt($('#sel_f_dg_gv_33').val()),
                                                  "Puerto_Arrivo":              $('#txt_f_dg_gv_34').val(),
                                                  "InformeInvestigacion":       InformeInvestigacion, //leyendo los valores del si y del no
                                                  "FechaInvestigacionIni":      f4,//$('#txtd_f_dg_gv_37').val(), 
                                                  "FechaInvestigacionFin":      f5,//$('#txtd_f_dg_gv_38').val(), 
                                                  "TiempoTranscurrido":         ttrsnc, 
                                                  "HechoAtiempo":               HechoAtiempo,
                                                  "IdGerencia":                  parseInt($('#sel_f_dg_gv_42').val()), 
                                                  "IdRegion":                    parseInt($('#sel_f_dg_gv_44').val()), 
                                                  "IdSeCargaAccidente":          parseInt($('#sel_f_dg_gv_45').val()), 
                                                  "IdAccidenteIncidente":       istAud,
                                                  "Finalizado":                 FinalizadoSSO

                                                      }    


                                             console.log('datos generales entyes de ajax update:',body);

                                            //var url = apiUrlssoma+"/api/Post-Evidencia-PdfWeb?code=rhwqmG2R7uXHmi1uhAxtAAoJ5U2RGKn8OOgVBis0ToH8UCSnbZgAsA==&httpmethod=post";
                                            var url = apiUrlssoma+"/api/Post-DatosGeneralesIncidenteWeb?code=reQdAhVl9k1IQ0BcN4fOjHiwoMxeanCYIk8xl0xSvvsq/RDDI8Yw4A==&httpmethod=put";

                                            var headers ={
                                                           "apikey":constantes.apiKey
                                                         }


                                              console.log("===============================================================================================================");
                                                     console.log("DATA INSERT=");
                                              console.log("===============================================================================================================");
                                            $.ajax({
                                                method: "POST",
                                                url:  url,
                                                data: JSON.stringify(body),
                                                headers:headers,
                                                crossDomain: true,
                                                dataType: "json",
                                            })


                                            .done(function(data)
                                            {
                                                console.info("dataUpdate*****______________________________________________******* = ",data)
                                                 // resultado Exitoso

                                                 //alert(data.Id)
                                                if(data.Id>0)
                                                {
                                                       $('#Sp3VentanaFinalizarDatosGenerales').modal('hide').removeClass('fade');
                                                       $('#btnCancelarGuardarDatosGenerales').prop('disabled',false);


                                                         

                                                     
                                                         $('#Sp3VentanaPruebasDatosGenerales').modal('hide').removeClass('fade');
                                                         $('#Sp3VentanaBDDatosGenerales').modal('show').addClass('fade');

                                                         $("#btnConfirmarEvidenciaIncidenteHallazgoWebDG").html("<b>Confirmar</b>")
                                                         $("#btnConfirmarEvidenciaIncidenteHallazgoWebDG").attr("disabled",false);
                                                         $('#btnCancelarGuardarDatosGenerales').attr("disabled",false);

                                                     
                                                        $('#btnConfirmarEvidenciaIncidenteHallazgoWebEnd').html('<b>Confirmar</b>')
                                                        $('#btnConfirmarEvidenciaIncidenteHallazgoWebEnd').attr('disabled', false);
                                                        $('#btnCancelarGuardarDatosGeneralesEnd').attr('disabled', false);





                                                      //ojo hay que recargar la data del dato general desde el servidor, sera no c analizar
                                     
                                                    
                                                }else
                                                {
                                                    verModalError("Datos Generales","No se pudieron guardar los Datos")//+data.Descripcion)
                                                }
                                            })
                                    
                                 }//========================================================================================================================== UPDATE DB =============================
                                 else
                                 {

                                     
                                     fnSp4AgregarListadoDatosGenerales();
                                 }




            }//--------------------------------------------------------------------------
            else
            {
                // Tipos de Incidentes del Grupo 2 (Accidente Ambiente-1, Incidente Ambiental-2)
                if(paObj[istAud].a.GrupoEvento == 2)
                {//========================================================================================================================================================================

                     $('#btnConfirmarEvidenciaIncidenteHallazgoWebDG').html('Guardando...');
                     $('#btnConfirmarEvidenciaIncidenteHallazgoWebDG').prop('disabled',true);

                    //alert('vamos a insertar y modificar los datos generales de ambiente, BANDERA = '+AccionBD_DG);
                    var Iddx = 0;
                    var Idd1x= 0;
                    var AccionBDx = 0;
                    var url = '';

                    if(AccionBD_DG == 0)//========================================== VAMOS AL INSERT ===========================================
                    {
                               
                                
                                Idd1x= 0;
                                AccionBDx = 0;
                                url = apiUrlssoma+ "/api/Post-DatosGeneralesIncidenteAmbientalWeb?code=V4KffF5Oc/XTOttcI5oUrWWYRqHzbiAmeNmZ3XmtkX4wrXaUWu3/kA==&httpmethod=post";

                          //alert(url)
                                           
                                   
                    }                   //========================================== VAMOS AL INSERT ===========================================
                    else
                    {
                          if(AccionBD_DG == 1)//========================================== VAMOS AL UPDATE ===========================================
                                    {

                                                Idd1x= istAud_DG;
                                                AccionBDx = 2;
                                                url = apiUrlssoma+ "/api/Post-DatosGeneralesIncidenteAmbientalWeb?code=V4KffF5Oc/XTOttcI5oUrWWYRqHzbiAmeNmZ3XmtkX4wrXaUWu3/kA==&httpmethod=put";
                                        //alert(url)

                                    }         //========================================== VAMOS AL UPDATE ===========================================
                    }



                                var HayPersonalAfectado;
                                var InformeInvestigacion;

                                 var fx = $('#txtd_f_dg_gv_4y').val(); fx = fx.toString();
                                 var f1  =  fx.split('/'); f1 = f1[2]+'-'+f1[1]+'-'+f1[0];  f1 = f1.toString(); //alert("fecha = "+f1);

                                if($('#rbtn_no_9x').attr('src') == './images/iconos/aprobarbien.svg'){HayPersonalAfectado = 1}else{HayPersonalAfectado = 0}//1   otra empresa
                                if($('#rbtn_si_8x').attr('src') == './images/iconos/aprobarbien.svg'){HayPersonalAfectado = 0}else{HayPersonalAfectado = 1} // 0 tasa


                                 if($('#rbtn_si_8y').attr('src') == './images/iconos/aprobarbien.svg'){InformeInvestigacion = 0}else{InformeInvestigacion = 1}//0 no hay informe
                                 if($('#rbtn_no_9y').attr('src') == './images/iconos/aprobarbien.svg'){InformeInvestigacion = 1}else{InformeInvestigacion = 0} //1  si hay informe



                                //$('#dat_x').val()ccccZZ

                                //Idd1x > 0 ? Idd1x : 0; AccionBDx > 0 ? AccionBDx : 0,
                              

                              //alert("Empresa = "+$('#sel_f_dg_gv_10y').val());
                                let body = 
                                {
                                "Id1": Idd1x > 0 ? Idd1x : 0,
                                "AccionBD":AccionBDx > 0 ? AccionBDx : 0,
                                "IdTipoEvento": $('#dat_x_clasificacion').val() > 0 ? $('#dat_x_clasificacion').val() : 0,
                                "Fecha": f1,
                                "Hora": $('#txtt_f_dg_gv_5y').val(),
                                "ReporteExterno": InformeInvestigacion > 0 ? InformeInvestigacion : 0,
                                "IdGerencia": $('#sel_f_dg_gv_3y').val() > 0 ? $('#sel_f_dg_gv_3y').val() : 0,
                                "IdSede":  $('#sel_f_dg_gv_6y').val() > 0 ? $('#sel_f_dg_gv_6y').val() : 0,
                                "IdZonaUbicacion": $('#sel_f_dg_gv_7y').val() > 0 ? $('#sel_f_dg_gv_7y').val() : 0,
                                "HayPersonalAfectado": HayPersonalAfectado > 0 ? HayPersonalAfectado : 0,
                                "IdEmpresa": $('#sel_f_dg_gv_10y').val(),
                                "Descripcion": $('#txta_f_dg_gv_11y').val(),
                                "AcccionesInmediatas": $('#dat_x_accion_inmediata').val(),
                                "IdContaminante":$('#dat_x_contaminante').val() > 0 ? $('#dat_x_contaminante').val() : 0,
                                "Volumen": $('#dat_x_valumen').val() > 0 ? $('#dat_x_valumen').val() : 0,
                                "UnidadVolumen": $('#dat_x_unidad').val() > 0 ? $('#dat_x_unidad').val() : 0,
                                "AreaImpactada": $('#dat_x_area_inpactada').val() > 0 ? $('#dat_x_area_inpactada').val() : 0,
                                "IdImpactoAmbiental": $('#dat_x_impacto_ambiental').val() > 0 ? $('#dat_x_impacto_ambiental').val() : 0,
                                "TemporadaVeda": $('#sel_f_dg_gv_18_3').val() > 0 ? $('#sel_f_dg_gv_18_3').val() : 0,             


                                "xIdDescripcionEvento": $('#dat_x_descripcion_evento').val() > 0 ? $('#dat_x_descripcion_evento').val() : 0,
                                "xImpactoAmbiental": $('#dat_x_impacto_ambiental2').val() > 0 ? $('#dat_x_impacto_ambiental2').val() : 0,
                                "xReaccionPublica": $('#dat_x_reaccion_publica').val() > 0 ? $('#dat_x_reaccion_publica').val() : 0,
                                "xRelacionComunidad": $('#dat_x_relacion_comunidad').val() > 0 ? $('#dat_x_relacion_comunidad').val() : 0,
                                "xLegal": $('#dat_x_legal').val() > 0 ? $('#dat_x_legal').val() : 0,
                                "xCalificacion": $('#dat_x_calificacion').val() > 0 ? $('#dat_x_calificacion').val() : 0,
                                "xNivelSeveridad": $('#dat_x_nivel_severidad').val(),

                                "xIIAUnidad": $('#dat_x_iia_unidad').val() > 0 ? $('#dat_x_iia_unidad').val() : 0,
                                "xIIACorporativo": $('#dat_x_iia_corporativo').val() > 0 ? $('#dat_x_iia_corporativo').val() : 0, 
                                "xMetaCorporativa": $('#dat_x_meta_corporativa').val() > 0 ? $('#dat_x_meta_corporativa').val() : 0, 
                                "xIIAUnidadPesca": $('#dat_x_iia_unidad_pesca').val() > 0 ? $('#dat_x_iia_unidad_pesca').val() : 0, 
                                "xIIACoporativoPesca": $('#dat_x_iia_corporativo_pesca').val() > 0 ? $('#dat_x_iia_corporativo_pesca').val() : 0,
                                "xMetaPesac":  $('#dat_x_meta_pesac').val() > 0 ?  $('#dat_x_meta_pesac').val() : 0,
                                "xIIAOperaciones": $('#dat_x_ii_operaciones').val() > 0 ? $('#dat_x_ii_operaciones').val() : 0,
                                "xIIACoporativoOperaciones": $('#dat_x_iia_corp_operaciones').val() > 0 ? $('#dat_x_iia_corp_operaciones').val() : 0,

                                "xMetaOperaciones": $('#dat_x_iia_meta_operaciones').val() > 0 ? $('#dat_x_iia_meta_operaciones').val() : 0,
                                "xIIAdminFinanzas": $('#dat_x_iia_adm_finanza').val() > 0 ? $('#dat_x_iia_adm_finanza').val() : 0,
                                "xIIACoporAdmiFinanzas": $('#dat_x_iia_corp_adm_finanza').val() > 0 ? $('#dat_x_iia_corp_adm_finanza').val() : 0,
                                "xMetaAdminFinanazas": $('#dat_x_meta_adm_finanza').val() > 0 ? $('#dat_x_meta_adm_finanza').val() : 0,

                                "yNumColaboradores": $('#dat_x_num_colaboradores').val() > 0 ? $('#dat_x_num_colaboradores').val() : 0,
                                "yNumHora": $('#dat_x_num_horas').val() > 0 ? $('#dat_x_num_horas').val() : 0,
                                "yCostoMOS": $('#dat_x_costo_mo').val() > 0 ? $('#dat_x_costo_mo').val() : 0, 
                                "yNumColaboradores2": $('#dat_x_num_colaborador_2').val() > 0 ? $('#dat_x_num_colaborador_2').val() : 0,
                                "yNumHora2": $('#dat_x_num_hora_2').val() > 0 ? $('#dat_x_num_hora_2').val() : 0,
                                "yCostoMOS2": $('#dat_x_costo_mo_s').val() > 0 ? $('#dat_x_costo_mo_s').val() : 0,

                                "yCantProducto": $('#dat_x_cant_producto').val() > 0 ? $('#dat_x_cant_producto').val() : 0,
                                "yCostoProductoS": $('#dat_x_costo_producto').val() > 0 ? $('#dat_x_costo_producto').val() : 0,
                                "yCostoProductoS2": $('#dat_x_costo_producto_s').val() > 0 ? $('#dat_x_costo_producto_s').val() : 0,

                                "ycostoMateriales": $('#dat_x_costo_materiales_s').val() > 0 ? $('#dat_x_costo_materiales_s').val() : 0, // ESTE DATO AL PARECER NO ESTA EN EL BACK NI EN BD

                                "yCostoServicioS": $('#dat_x_costo_servicio_s2').val() > 0 ? $('#dat_x_costo_servicio_s2').val() : 0,
                                "yCostoMultaS": $('#dat_x_costo_multas_s').val() > 0 ? $('#dat_x_costo_multas_s').val() : 0,
                                "yOtroS": $('#dat_x_otros').val() > 0 ? $('#dat_x_otros').val() : 0,

                                "yCostoTotalS": $('#dat_x_costo_total_s').val() > 0 ? $('#dat_x_costo_total_s').val() : 0,
                                "yCostoTotalUSD": $('#dat_x_costo_total_dolar').val() > 0 ? $('#dat_x_costo_total_dolar').val() : 0,

                                "yOefaUit": $('#dat_x_oefa_uit').val() > 0 ? $('#dat_x_oefa_uit').val() : 0,
                                "yOefaS": $('#dat_x_oefa_s').val() > 0 ? $('#dat_x_oefa_s').val() : 0, 
                                "yOefaUSD": $('#dat_x_oefa_usd').val() > 0 ? $('#dat_x_oefa_usd').val() : 0,

                                "yDicapiUit": $('#dat_x_dicapi_uit').val() > 0 ? $('#dat_x_dicapi_uit').val() : 0,
                                "yDicapiS": $('#dat_x_dicapi_s').val() > 0 ? $('#dat_x_dicapi_s').val() : 0,
                                "yDicapiUSD": $('#dat_x_dicapi_usd').val() > 0 ? $('#dat_x_dicapi_usd').val() : 0,

                                "IdAccidenteIncidente": istAud,
                                "Finalizado": FinalizadoA

                                }


                                console.log('DATOS AMBIENTALES INSERTAR O MODIFICAR:',body);
                                console.log('url:',url);


                                var headers ={
                                                           "apikey":constantes.apiKey
                                                         }



                                            $.ajax({
                                                method: "POST",
                                                url:  url,
                                                data: JSON.stringify(body),
                                                headers:headers,
                                                crossDomain: true,
                                                dataType: "json",
                                            })


                                            .done(function(data)
                                            {
                                                console.info("dataUpdate*****______________________________________________******* = ",data)
                                                 // resultado Exitoso

                                                 //alert(data.Id)
                                                if(data.Id>0)
                                                {
                                                    
                                                       
                                                       $('#Sp3VentanaFinalizarDatosGenerales').modal('hide').removeClass('fade');
                                                       $('#Sp3VentanaPruebasDatosGenerales').modal('hide').removeClass('fade');

                                                       $('#btnConfirmarEvidenciaIncidenteHallazgoWebDG').html('Confirmar');
                                                       $('#btnConfirmarEvidenciaIncidenteHallazgoWebDG').prop('disabled',false);
                                                     


                                                    
                                                          $('#Sp3VentanaBDDatosGenerales').modal('show').addClass('fade');

                                                        $('#btnConfirmarEvidenciaIncidenteHallazgoWebEnd').html('<b>Confirmar</b>')
                                                        $('#btnConfirmarEvidenciaIncidenteHallazgoWebEnd').attr('disabled', false);
                                                        $('#btnCancelarGuardarDatosGeneralesEnd').attr('disabled', false);


                                        

                                                      

                                                      //ojo hay que recargar la data del dato general desde el servidor, sera no c analizar
                                     
                                                    
                                                }else
                                                {
                                                    verModalError("Datos Generales","No se pudieron guardar los Datos")//+data.Descripcion)
                                                }
                                            })

                }//========================================================================================================================================================================
                else
                {
                    // Tipos de Incidentes del Grupo 3 (Accidente Con Daños Materiales-3, Accidente de Seg Procesos -4 )
                    if(paObj[istAud].a.GrupoEvento == 3)
                    {//####################################################################### MATERIAL ##################################################################################
                              if(AccionBD_DG == 1)
                                {//========================================================================================================================== UPDATE DB =============================

                                   

                                    $("#btnConfirmarEvidenciaIncidenteHallazgoWebDG").html("<b>Guardando..</b>")
                                    $("#btnConfirmarEvidenciaIncidenteHallazgoWebDG").attr("disabled",true);

                                    $('#btnCancelarGuardarDatosGenerales').attr("disabled",true);

                                    
                                    var HayPersonalAfectado;
                                    var InformeInvestigacion;
                                    var HechoAtiempo;

                                  

                                     if($('#rbtn_no_9k').attr('src') == './images/iconos/aprobarbien.svg'){HayPersonalAfectado = 1; }else{HayPersonalAfectado = 0; }//1   otra empresa
                                     if($('#rbtn_si_8k').attr('src') == './images/iconos/aprobarbien.svg'){HayPersonalAfectado = 0; }else{HayPersonalAfectado = 1; } // 0 tasa

                                     //alert(HayPersonalAfectado);
                                     
                                    if($('#rbtn_si_35k').attr('src') == './images/iconos/aprobarbien.svg'){InformeInvestigacion = 0}else{InformeInvestigacion = 1}//0 no hay informe
                                    if($('#rbtn_no_36k').attr('src') == './images/iconos/aprobarbien.svg'){InformeInvestigacion = 1}else{InformeInvestigacion = 0} //1  si hay informe


                                     if($('#rbtn_si_40k').attr('src') == './images/iconos/aprobarbien.svg'){HechoAtiempo = 1}else{HechoAtiempo = 0}//1   hecho a tiempo
                                     if($('#rbtn_no_41k').attr('src') == './images/iconos/aprobarbien.svg'){HechoAtiempo = 0}else{HechoAtiempo = 1} // 0 hecho a destiempo
                                       



                                    


                                      //1 //------------------------------validamos los campos vacios ------------
                                      //2 // recolectamos todos los datos para registrar en la lista
                                            var fx = $('#txtd_f_dg_gv_4k').val(); fx = fx.toString();
                                            var f1  =  fx.split('/'); f1 = f1[2]+'-'+f1[1]+'-'+f1[0];  f1 = f1.toString(); //alert("fecha = "+f1);

                                            // var fx1 = $('#txtd_f_dg_gv_037').val(); fx1 = fx1.toString();
                                            // var f2  =  fx1.split('/'); f2 = f2[2]+'-'+f2[1]+'-'+f2[0];  f2 = f2.toString(); //alert("fecha = "+f2);

                                            // var fx3 = $('#txtd_f_dg_gv_038').val(); fx3 = fx3.toString();
                                            // var f3  =  fx3.split('/'); f3 = f3[2]+'-'+f3[1]+'-'+f3[0];  f3 = f3.toString(); //alert("fecha = "+f3);

 //alert("8588");
                                            var fx4 = $('#txtd_f_dg_gv_37k').val(); fx4 = fx4.toString();
                                            var f4  =  fx4.split('/'); f4 = f4[2]+'-'+f4[1]+'-'+f4[0];  f4 = f4.toString(); //alert("fecha = "+f4);

                                            var fx5 = $('#txtd_f_dg_gv_38k').val(); fx5 = fx5.toString();
                                            //var f5  =  fx5.split('/'); f5 = f5[2]+'-'+f5[1]+'-'+f5[0];  f5 = f5.toString();// alert("fecha = "+f5);

                                            
                                              
                                                fx5.split(" ").join("");
                                                var ll = fx5.length;
                                                
                                                console.log("-",fx5,"-");
                                                var ttrsnc = 0;
                                                var f5;
                         if((fx5)&&(ll > 7)){f5  =  fx5.split('/'); f5 = f5[2]+'-'+f5[1]+'-'+f5[0];  f5 = f5.toString();  ttrsnc = parseInt($('#txt_f_dg_gv_39k').val());   }else{f5=f4; ttrsnc = 0;}// alert("fecha = "+f5);
                                                 



//console.log("material", f1, f4, f5);


                             
                                            //alert("BARCO"+$('#sel_f_dg_gv_7').val());

                                             var idBarco = parseInt($('#sel_f_dg_gv_7k').val());

                                             ///alert("HORA"+$('#txtt_f_dg_gv_5').val());

                                            let body = {
                                                    //*****************************DATOS GENERALES******************txta_f_dg_gv_21
                                                  "Id1": istAud_DG,
                                                  "AccionBD":2,
                                                  "IdTipoEvento":               parseInt($('#sel_f_dg_gv_1k').val()),
                                                  "Potencial":                  0,
                                                  "AccidenteProceso":           parseInt($('#sel_f_dg_gv_3').val()),
                                                  "Fecha":                      f1, //$('#txtd_f_dg_gv_4').val(), //voltear fecha             
                                                  "Hora":                       $('#txtt_f_dg_gv_5k').val(),//evento
                                                  "IdSede":                     parseInt($('#sel_f_dg_gv_6k').val()),//es sede
                                                  "IdEmbarcacion":              idBarco,
                                                  "HayPersonalAfectado":        HayPersonalAfectado,  //esperar esto debe ser una variable int 
                                                  "IdEmpresaCompany":           $('#sel_f_dg_gv_10k').val(),
                                                  "Descripcion":                $('#txta_f_dg_gv_11k').val(),
                                                  "IdCondicionEP":              0,// parseInt($('#sel_f_dg_gv_12k').val())
                                                  "IdProcesoOperacion":          parseInt($('#sel_f_dg_gv_13k').val()),
                                                  "IdSubProceso":                parseInt($('#sel_f_dg_gv_14k').val()),
                                                  "IdProbRecurrencia":           parseInt($('#sel_f_dg_gv_15k').val()),
                                                  "IdAreaAccidente":             parseInt($('#sel_f_dg_gv_16k').val()),
                                                  "IdZonaAccidente":             parseInt($('#sel_f_dg_gv_17k').val()),
                                                  "LugarEspTarea":               parseInt($('#sel_f_dg_gv_18k').val()), //ojo cambiar el tipo de dato en base de datos, debe ser un Id
                                                  "TemporadaVeda":               parseInt($('#sel_f_dg_gv_18_1k').val()), //campo nuevo temporadVeda


                                                //*****************************DATOS DEL AFECTADO ******************
                                                  "NombreEquipo":               $('#sel_f_dg_gv_17_1k').val(),//unico campo valido lo demas es piache no va

                                                  "NombrePersonalAccidentado":  $('#ReportanteNameDG_119').val(),//............NO
                                                  "CodTrabjador":               $('#txta_f_dg_gv_20').val(),//............NO
                                                  "IdPersonalAccidentado":      $('#ReportanteUserHashDG_119').val(),//............NO
                                                  "DNIAccidentado":             $('#txta_f_dg_gv_21').val(),//............NO
                                                  "EdadAccidentado":            0,//............NO
                                                  "PuestoCargoAccidentado":     $('#txta_f_dg_gv_23').val(),//............NO
                                                  "PuestoCargoAccidentado2":    $('#txta_f_dg_gv_24').val(),//............NO
                                                  "Expiencia_Yaer":             0,//............NO
                                                  "Expiencia_Month":            0,//............NO
                                                  "LesionDannio":               $('#sel_f_dg_gv_27').val(), //ojo cambiar el tipo de dato en base de datos, debe ser un Id//............NO
                                                  "ParteCuerpoLesionada":        parseInt($('#sel_f_dg_gv_28').val()), //ojo cambiar el tipo de dato en base de datos, debe ser un Id//............NO
                                                  "fecha_Descanso_Ini":         f1, //$('#txtd_f_dg_gv_037').val(),//definir campos ocultos//............NO
                                                  "fecha_Descanso_Fin":         f1, //$('#txtd_f_dg_gv_038').val(),//definir campos ocultos//............NO
                                                  "Dias_Descanza":               0,//............NO
                                                  "Descanso_estado":             parseInt($('#sel_f_dg_gv_30').val()),//............NO


                                                //*****************************DATOS DE LA INVESTIGACIÓN ******************

                                                  "IdRespInvestigar":           $('#ReportanteUserHashDG_311k').val(),
                                                  "NombreRespInvestigar":       $('#ReportanteNameDG_311k').val(),
                                                  "IdAreaRespInvestigar":        parseInt($('#sel_f_dg_gv_32k').val()),
                                                  "IdAsesorInvestigacion":       parseInt($('#sel_f_dg_gv_33k').val()),
                                                  "Puerto_Arrivo":              $('#txt_f_dg_gv_34k').val(),
                                                  "InformeInvestigacion":       InformeInvestigacion, //leyendo los valores del si y del no
                                                  "FechaInvestigacionIni":      f4,//$('#txtd_f_dg_gv_37').val(), 
                                                  "FechaInvestigacionFin":      f5,//$('#txtd_f_dg_gv_38').val(), 
                                                  "TiempoTranscurrido":         ttrsnc, 
                                                  "HechoAtiempo":               HechoAtiempo,
                                                  "IdGerencia":                  parseInt($('#sel_f_dg_gv_42k').val()), 
                                                  "IdRegion":                    parseInt($('#sel_f_dg_gv_44k').val()), 
                                                  "IdSeCargaAccidente":          parseInt($('#sel_f_dg_gv_45k').val()), 
                                                  "IdAccidenteIncidente":       istAud,
                                                  "Finalizado":                 FinalizadoMat

                                                      }    


                                             console.log('datos generales entyes de ajax update:',body);

                                           

                                            //var url = apiUrlssoma+"/api/Post-Evidencia-PdfWeb?code=rhwqmG2R7uXHmi1uhAxtAAoJ5U2RGKn8OOgVBis0ToH8UCSnbZgAsA==&httpmethod=post";
                                            //var url = apiUrlssoma+"/api/Post-DatosGeneralesIncidenteWeb?code=reQdAhVl9k1IQ0BcN4fOjHiwoMxeanCYIk8xl0xSvvsq/RDDI8Yw4A==&httpmethod=put";

                                             var url = apiUrlssoma+"/api/Post-DatosGeneralesIncidenteMaterialWeb?code=JaY6C9qOCRs6bPK9kXRWDeF7abVP3M7ylhvBwrEprGSTdnCuHU0WCQ==&httpmethod=put";
                                            //Post-DatosGeneralesIncidenteMaterialWeb
                                            var headers ={
                                                           "apikey":constantes.apiKey
                                                         }


                                              console.log("===============================================================================================================");
                                                     console.log("DATA UPDATE=");
                                              console.log("===============================================================================================================");
                                            $.ajax({
                                                method: "POST",
                                                url:  url,
                                                data: JSON.stringify(body),
                                                headers:headers,
                                                crossDomain: true,
                                                dataType: "json",
                                            })


                                            .done(function(data)
                                            {
                                                console.info("dataUpdate*****______________________________________________******* = ",data)
                                                 // resultado Exitoso

                                                 //alert(data.Id)
                                                if(data.Id>0)
                                                {
                                                       $('#Sp3VentanaFinalizarDatosGenerales').modal('hide').removeClass('fade');
                                                       $('#btnCancelarGuardarDatosGenerales').prop('disabled',false);


                                                         

                                                     
                                                         $('#Sp3VentanaPruebasDatosGenerales').modal('hide').removeClass('fade');
                                                         $('#Sp3VentanaBDDatosGenerales').modal('show').addClass('fade');

                                                         $("#btnConfirmarEvidenciaIncidenteHallazgoWebDG").html("<b>Confirmar</b>")
                                                         $("#btnConfirmarEvidenciaIncidenteHallazgoWebDG").attr("disabled",false);
                                                         $('#btnCancelarGuardarDatosGenerales').attr("disabled",false);

                                                     
                                                        $('#btnConfirmarEvidenciaIncidenteHallazgoWebEnd').html('<b>Confirmar</b>')
                                                        $('#btnConfirmarEvidenciaIncidenteHallazgoWebEnd').attr('disabled', false);
                                                        $('#btnCancelarGuardarDatosGeneralesEnd').attr('disabled', false);




 
                                                         

                           

                      //====================================================== ANDY 04-07-2021 REGISTRO DE LECCION APRENDIDA ===================================






                                                      //ojo hay que recargar la data del dato general desde el servidor, sera no c analizar
                                     
                                                    
                                                }else
                                                {
                                                    verModalError("Datos Generales","No se pudieron guardar los Datos")//+data.Descripcion)
                                                }
                                            })

                                             /* */
                                    
                                 }//========================================================================================================================== UPDATE DB =============================
                                 else
                                 {

                                     
                                     fnSp4AgregarListadoDatosGeneralesk();
                                 }

                    }//####################################################################### MATERIAL ##################################################################################

                }

            }




















     

}//------------------------------------------------------------------------------------------------------ Dastos Generales -------------------------------------------







































function sp4FnFinalizarDatosGenerales()
{//------------------------------------------------------------------------------------------------------ Dastos Generales -------------------------------------------
   

   if(AccionBD_DG == 1)//solo si esta guardado se envia a finalizar
   {
     $('#Sp3VentanaPlanAnualEditView').modal('hide').removeClass('fade');
     $('#Sp3VentanaFinalizarDatosGenerales').modal('show').addClass('fade');
   }
   else
  {
     verModalError("Atención","Debe guardar primero los datos del Evento y luego mande a Finalizar");
  }
   
     

}//------------------------------------------------------------------------------------------------------ Dastos Generales -------------------------------------------
function sp4FnConfirmarFinalizarGenerales()
{//------------------------------------------------------------------------------------------------------ Dastos Generales -------------------------------------------

      
     if( paObj[istAud].a.GrupoEvento == 1)
    {
               //alert("Guardar SSO = "+istAud);
               FinalizadoSSO = 1;
               sp4FnConfirmarGuardarGenerales();
    }
    else
    {
         if( paObj[istAud].a.GrupoEvento == 2)
            {
                //alert("Guardar aMBIENTAL = "+istAud);
                FinalizadoA = 1;

                $('#btnConfirmarEvidenciaIncidenteHallazgoWebEnd').html('<b> Finalizando ..</b>')
                $('#btnConfirmarEvidenciaIncidenteHallazgoWebEnd').attr('disabled', true);
                $('#btnCancelarGuardarDatosGeneralesEnd').attr('disabled', true);



                sp4FnConfirmarGuardarGenerales();
            }
            else
            {
                 if( paObj[istAud].a.GrupoEvento == 3)
                    {
                        //alert("Guardar aMBIENTAL = "+istAud);
                        FinalizadoMat = 1;

                        $('#btnConfirmarEvidenciaIncidenteHallazgoWebEnd').html('<b> Finalizando ..</b>')
                        $('#btnConfirmarEvidenciaIncidenteHallazgoWebEnd').attr('disabled', true);
                        $('#btnCancelarGuardarDatosGeneralesEnd').attr('disabled', true);



                        sp4FnConfirmarGuardarGenerales();
                    }
            }

    }
    
   //
   //$('#Sp3VentanaFinalizarBDDatosGenerales').modal('show').addClass('fade');//Sp3VentanaBDDatosGenerales
     

}//------------------------------------------------------------------------------------------------------ Dastos Generales -------------------------------------------




function fnSp4AgregarListadoDatosGenerales()
{//------------------------------------------------------------------------------------------------------ Dastos Generales -------------------------------------------

      //alert("Agregar al Listado = "+istAud);

    var HayPersonalAfectado;
    var InformeInvestigacion;
    var HechoAtiempo;

    $('#btAgregarListadoDG').html('Agregando ..............');//
    $('#btAgregarListadoDG').prop('disabled',true);

     $('#btnConfirmarEvidenciaIncidenteHallazgoWebDG').html('Guardando..');
     $('#btnConfirmarEvidenciaIncidenteHallazgoWebDG').prop('disabled',true);
     
//alert($('#rbtn_si_8').attr('src'));

     if($('#rbtn_no_9').attr('src') == './images/iconos/aprobarbien.svg'){HayPersonalAfectado = 1}else{HayPersonalAfectado = 0}//1   otra empresa
     if($('#rbtn_si_8').attr('src') == './images/iconos/aprobarbien.svg'){HayPersonalAfectado = 0}else{HayPersonalAfectado = 1} // 0 tasa



    if($('#rbtn_si_35').attr('src') == './images/iconos/aprobarbien.svg'){InformeInvestigacion = 0}else{InformeInvestigacion = 1}//0 no hay informe
    if($('#rbtn_no_36').attr('src') == './images/iconos/aprobarbien.svg'){InformeInvestigacion = 1}else{InformeInvestigacion = 0} //1  si hay informe


     if($('#rbtn_si_40').attr('src') == './images/iconos/aprobarbien.svg'){HechoAtiempo = 1}else{HechoAtiempo = 0}//1   hecho a tiempo
     if($('#rbtn_no_41').attr('src') == './images/iconos/aprobarbien.svg'){HechoAtiempo = 0}else{HechoAtiempo = 1} // 0 hecho a destiempo



      //1 //------------------------------validamos los campos vacios ------------


           
      //2 // recolectamos todos los datos para registrar en la lista
            var fx = $('#txtd_f_dg_gv_4').val(); fx = fx.toString();
            var f1  =  fx.split('/'); f1 = f1[2]+'-'+f1[1]+'-'+f1[0];  f1 = f1.toString(); //alert("fecha = "+f1);

            var fx1 = $('#txtd_f_dg_gv_037').val(); fx1 = fx1.toString();
            var f2  =  fx1.split('/'); f2 = f2[2]+'-'+f2[1]+'-'+f2[0];  f2 = f2.toString(); //alert("fecha = "+f2);

            var fx3 = $('#txtd_f_dg_gv_038').val(); fx3 = fx3.toString();
            var f3  =  fx3.split('/'); f3 = f3[2]+'-'+f3[1]+'-'+f3[0];  f3 = f3.toString(); //alert("fecha = "+f3);


            var fx4 = $('#txtd_f_dg_gv_37').val(); fx4 = fx4.toString();
            var f4  =  fx4.split('/'); f4 = f4[2]+'-'+f4[1]+'-'+f4[0];  f4 = f4.toString(); //alert("fecha = "+f4);

            var fx5 = $('#txtd_f_dg_gv_38').val(); fx5 = fx5.toString();

            fx5.split(" ").join("");
            var ll = fx5.length;
            //alert("8345:-"+ll+"-");

            console.log("-",fx5,"-");
            var ttrsnc = 0;
             var f5;
             if((fx5)&&(ll > 7)){f5  =  fx5.split('/'); f5 = f5[2]+'-'+f5[1]+'-'+f5[0];  f5 = f5.toString();  ttrsnc = parseInt($('#txt_f_dg_gv_39').val());   }else{f5=f4; ttrsnc = 0;}// alert("fecha = "+f5);
             

             //alert('BARCO INSERT = '+$('#sel_f_dg_gv_7').val());
             var Barq =  parseInt($('#sel_f_dg_gv_7').val());
             //alert('BARCO INSERT2 = '+Barq);

            let body = {
                    //*****************************DATOS GENERALES******************
                  "Id1": 0,
                  "AccionBD":0,
                  "IdTipoEvento":               parseInt($('#sel_f_dg_gv_1').val()),
                  "Potencial":                  parseInt($('#sel_f_dg_gv_2').val()),
                  "AccidenteProceso":           parseInt($('#sel_f_dg_gv_3').val()),
                  "Fecha":                      f1, //$('#txtd_f_dg_gv_4').val(), //voltear fecha             
                  "Hora":                       $('#txtt_f_dg_gv_5').val(),//evento
                  "IdSede":                     parseInt($('#sel_f_dg_gv_6').val()),//es sede
                  "IdEmbarcacion":               parseInt($('#sel_f_dg_gv_7').val()),
                  "HayPersonalAfectado":        HayPersonalAfectado,  //esperar esto debe ser una variable int 
                  "IdEmpresaCompany":           $('#sel_f_dg_gv_10').val(),
                  "Descripcion":                $('#txta_f_dg_gv_11').val(),
                  "IdCondicionEP":               parseInt($('#sel_f_dg_gv_12').val()),
                  "IdProcesoOperacion":          parseInt($('#sel_f_dg_gv_13').val()),
                  "IdSubProceso":                parseInt($('#sel_f_dg_gv_14').val()),
                  "IdProbRecurrencia":           parseInt($('#sel_f_dg_gv_15').val()),
                  "IdAreaAccidente":             parseInt($('#sel_f_dg_gv_16').val()),
                  "IdZonaAccidente":             parseInt($('#sel_f_dg_gv_17').val()),
                  "LugarEspTarea":               parseInt($('#sel_f_dg_gv_18').val()), //ojo cambiar el tipo de dato en base de datos, debe ser un Id
                  "TemporadaVeda":               parseInt($('#sel_f_dg_gv_18_0').val()), //campo nuevo temporadVeda



                //*****************************DATOS DEL AFECTADO ******************
                  "NombrePersonalAccidentado":  $('#ReportanteNameDG_119').val(),
                  "CodTrabjador":               $('#txta_f_dg_gv_20').val(),
                  "IdPersonalAccidentado":      $('#ReportanteUserHashDG_119').val(),
                  "DNIAccidentado":             $('#txta_f_dg_gv_21').val(),
                  "EdadAccidentado":            parseInt($('#txta_f_dg_gv_22').val()),
                  "PuestoCargoAccidentado":     $('#txta_f_dg_gv_23').val(),
                  "PuestoCargoAccidentado2":    $('#txta_f_dg_gv_24').val(),
                  "Expiencia_Yaer":              parseInt($('#txta_f_dg_gv_25').val()),
                  "Expiencia_Month":             parseInt($('#txta_f_dg_gv_26').val()),
                  "LesionDannio":                $('#sel_f_dg_gv_27').val(), //ojo cambiar el tipo de dato en base de datos, debe ser un Id
                  "ParteCuerpoLesionada":        parseInt($('#sel_f_dg_gv_28').val()), //ojo cambiar el tipo de dato en base de datos, debe ser un Id
                  "fecha_Descanso_Ini":         f2, //$('#txtd_f_dg_gv_037').val(),//definir campos ocultos
                  "fecha_Descanso_Fin":         f3, //$('#txtd_f_dg_gv_038').val(),//definir campos ocultos
                  "Dias_Descanza":               parseInt($('#txt_f_dg_gv_29').val()),
                  "Descanso_estado":             parseInt($('#sel_f_dg_gv_30').val()),


                //*****************************DATOS DE LA INVESTIGACIÓN ******************

                  "IdRespInvestigar":           $('#ReportanteUserHashDG_311').val(),
                  "NombreRespInvestigar":       $('#ReportanteNameDG_311').val(),
                  "IdAreaRespInvestigar":        parseInt($('#sel_f_dg_gv_32').val()),
                  "IdAsesorInvestigacion":       parseInt($('#sel_f_dg_gv_33').val()),
                  "Puerto_Arrivo":              $('#txt_f_dg_gv_34').val(),
                  "InformeInvestigacion":       InformeInvestigacion, //leyendo los valores del si y del no
                  "FechaInvestigacionIni":      f4,//$('#txtd_f_dg_gv_37').val(), 
                  "FechaInvestigacionFin":      f5,//$('#txtd_f_dg_gv_38').val(), 
                  "TiempoTranscurrido":         ttrsnc, 
                  "HechoAtiempo":               HechoAtiempo,
                  "IdGerencia":                  parseInt($('#sel_f_dg_gv_42').val()), 
                  "IdRegion":                    parseInt($('#sel_f_dg_gv_44').val()), 
                  "IdSeCargaAccidente":          parseInt($('#sel_f_dg_gv_45').val()), 
                  "IdAccidenteIncidente":       istAud,
                  "Finalizado":                 FinalizadoSSO

                      }    


             console.log('datos generales:',body);

            //var url = apiUrlssoma+"/api/Post-Evidencia-PdfWeb?code=rhwqmG2R7uXHmi1uhAxtAAoJ5U2RGKn8OOgVBis0ToH8UCSnbZgAsA==&httpmethod=post";
            var url = apiUrlssoma+"/api/Post-DatosGeneralesIncidenteWeb?code=reQdAhVl9k1IQ0BcN4fOjHiwoMxeanCYIk8xl0xSvvsq/RDDI8Yw4A==&httpmethod=post";

            var headers ={
                           "apikey":constantes.apiKey
                         }



            $.ajax({
                method: "POST",
                url:  url,
                data: JSON.stringify(body),
                headers:headers,
                crossDomain: true,
                dataType: "json",
            })


            .done(function(data)
            {
                console.info("data",data)
                 // resultado Exitoso
                if(data.Id>0)
                {
                      $('#btAgregarListadoDG').html('Agregar a la Lista');//
                      $('#btAgregarListadoDG').prop('disabled',false);

                       $('#btnConfirmarEvidenciaIncidenteHallazgoWebDG').html('Confirmar');
                       $('#btnConfirmarEvidenciaIncidenteHallazgoWebDG').prop('disabled',false);

                      $('#Sp3VentanaPlanAnualEditView').modal('hide').removeClass('fade');
                      $('#Sp3VentanaPruebasDatosGenerales').modal('hide').removeClass('fade');
                      $('#Sp3VentanaBDDatosGenerales').modal('show').addClass('fade');

                      //edsde aqui vamos a crear la leccion aprendida



                      // //====================================================== ANDY 04-07-2021 REGISTRO DE LECCION APRENDIDA ===================================
                      //                       let body2 = {
                      //                           //*****************************DATOS GENERALES******************
                      //                               "Id1": 0,
                      //                               "AccionBD":0,
                      //                               "IdIncidente1":istAud,
                      //                               "IdTipoEvento_": parseInt($('#sel_f_dg_gv_1').val()),
                      //                               "IdSede":parseInt($('#sel_f_dg_gv_6').val()),
                      //                               "Fecha":  f1,
                      //                               "FraseCorta":paObj[istAud].a.yDetalle, 
                      //                               "Descripcion":paObj[istAud].a.yDescripcion,
                      //                               "Codigo":paObj[istAud].a.Code,
                      //                               "TipoDatoGeneral":0,
                      //                               "Potencial":0,   
                      //                               "TipoLesionDanio":"",
                      //                               "Mortal":0,     
                      //                               "Create_By":getCookie("vtas_id_hash"+sessionStorage.tabVisitasa),
                      //                               "Create_Date":"", 
                      //                               "B_Contaminante":0,
                      //                               "B_Impacto_Ambiental":0
                      //                           }    
                            
                      //                           var urlyu = apiUrlssoma+"/api/Post-LeccionAprendida?code=3SZLZvJm1g4qEdObbrPAWiDaiGa6EFKE9RFyIN1Q5osMz6ozxWX/xQ==&httpmethod=post";
                                                

                      //                           console.info("Que mando data1 = ",body2); console.info("Que mando url= ",urlyu)
                      //                           var headers ={
                      //                               "apikey":constantes.apiKey
                      //                             }
                         
                         
                         
                      //                           $.ajax({
                      //                               method: "POST",
                      //                               url:  urlyu,
                      //                               data: JSON.stringify(body2),
                      //                               headers:headers,
                      //                               crossDomain: true,
                      //                               dataType: "json",
                      //                           })
                         
                      //                           .done(function(data1)
                      //                           {
                      //                               console.info("data1 Leccion Aprendida",data1)
                      //                                // resultado Exitoso
                      //                               if(data1.Id>0)
                      //                               {
                      //                                  console.log('se creo la leccion Aprendida')
                      //                               }
                      //                           });
                                                         

                           

                      // //====================================================== ANDY 04-07-2021 REGISTRO DE LECCION APRENDIDA ===================================





     
                     
                }else
                {
                    verModalError("Lo Sentimos","No se Pudo Agregar al listado."+data.Descripcion)
                }
            })

            // .fail(function( jqXHR, textStatus, errorThrown ) {
            //     console.error("fail ",textStatus,errorThrown)
            // })
            // .always(function( jqXHR, textStatus, errorThrown ) {
            //     // // DESBLOQUEMAOS EL BOTON ENVIAR
            //     // $("#btnGuardarDocs").attr("disabled",false)
            //     // $("#btnCancelarDoc").attr("disabled",false)
            //     // $("#agregarEvidencia").attr("disabled",false)
            //     // $("#preloader").hide()
            //     // console.info("alwaisxxxxxxxxxxxx ",textStatus)
               
            // });
        




}//------------------------------------------------------------------------------------------------------ Dastos Generales -------------------------------------------




function fnSp4AgregarListadoDatosGeneralesk()
{//------------------------------------------------------------------------------------------------------ Dastos Generales -------------------------------------------

      //alert("Agregar al Listado = "+istAud);

    var HayPersonalAfectado;
    var InformeInvestigacion;
    var HechoAtiempo;

    $('#btAgregarListadoDG').html('Agregando ..............');//
    $('#btAgregarListadoDG').prop('disabled',true);

     $('#btnConfirmarEvidenciaIncidenteHallazgoWebDG').html('Guardando..');
     $('#btnConfirmarEvidenciaIncidenteHallazgoWebDG').prop('disabled',true);
     
//alert($('#rbtn_si_8').attr('src'));

     if($('#rbtn_no_9k').attr('src') == './images/iconos/aprobarbien.svg'){HayPersonalAfectado = 1}else{HayPersonalAfectado = 0}//1   otra empresa
     if($('#rbtn_si_8k').attr('src') == './images/iconos/aprobarbien.svg'){HayPersonalAfectado = 0}else{HayPersonalAfectado = 1} // 0 tasa



    if($('#rbtn_si_35k').attr('src') == './images/iconos/aprobarbien.svg'){InformeInvestigacion = 0}else{InformeInvestigacion = 1}//0 no hay informe
    if($('#rbtn_no_36k').attr('src') == './images/iconos/aprobarbien.svg'){InformeInvestigacion = 1}else{InformeInvestigacion = 0} //1  si hay informe


     if($('#rbtn_si_40k').attr('src') == './images/iconos/aprobarbien.svg'){HechoAtiempo = 1}else{HechoAtiempo = 0}//1   hecho a tiempo
     if($('#rbtn_no_41k').attr('src') == './images/iconos/aprobarbien.svg'){HechoAtiempo = 0}else{HechoAtiempo = 1} // 0 hecho a destiempo



      //1 //------------------------------validamos los campos vacios ------------


           
      //2 // recolectamos todos los datos para registrar en la lista
            var fx = $('#txtd_f_dg_gv_4k').val(); fx = fx.toString();
            var f1  =  fx.split('/'); f1 = f1[2]+'-'+f1[1]+'-'+f1[0];  f1 = f1.toString(); //alert("fecha = "+f1);

            // var fx1 = $('#txtd_f_dg_gv_037k').val(); fx1 = fx1.toString();
            // var f2  =  fx1.split('/'); f2 = f2[2]+'-'+f2[1]+'-'+f2[0];  f2 = f2.toString(); //alert("fecha = "+f2);

            // var fx3 = $('#txtd_f_dg_gv_038k').val(); fx3 = fx3.toString();
            // var f3  =  fx3.split('/'); f3 = f3[2]+'-'+f3[1]+'-'+f3[0];  f3 = f3.toString(); //alert("fecha = "+f3);


            var fx4 = $('#txtd_f_dg_gv_37k').val(); fx4 = fx4.toString();
            var f4  =  fx4.split('/'); f4 = f4[2]+'-'+f4[1]+'-'+f4[0];  f4 = f4.toString(); //alert("fecha = "+f4);

            var fx5 = $('#txtd_f_dg_gv_38k').val(); fx5 = fx5.toString();

            fx5.split(" ").join("");
            var ll = fx5.length;
            //alert("8345:-"+ll+"-");

            console.log("-",fx5,"-");
            var ttrsnc = 0;
             var f5;

            sp4FbTiempoTrascurridoInvk();

             if((fx5)&&(ll > 7)){f5  =  fx5.split('/'); f5 = f5[2]+'-'+f5[1]+'-'+f5[0];  f5 = f5.toString();  ttrsnc = parseInt($('#txt_f_dg_gv_39k').val());   }else{f5=f4; ttrsnc = 0;}// alert("fecha = "+f5);
             

             //alert('BARCO INSERT = '+$('#sel_f_dg_gv_7').val());
             var Barq =  parseInt($('#sel_f_dg_gv_7k').val());
             //alert('BARCO INSERT2 = '+Barq);

            let body = {
                    //*****************************DATOS GENERALES******************
                  "Id1": 0,
                  "AccionBD":0,
                  "IdTipoEvento":               parseInt($('#sel_f_dg_gv_1k').val()),
                  "Potencial":                  0,
                  "AccidenteProceso":           parseInt($('#sel_f_dg_gv_3').val()),
                  "Fecha":                      f1, //$('#txtd_f_dg_gv_4').val(), //voltear fecha             
                  "Hora":                       $('#txtt_f_dg_gv_5k').val(),//evento
                  "IdSede":                     parseInt($('#sel_f_dg_gv_6k').val()),//es sede
                  "IdEmbarcacion":               parseInt($('#sel_f_dg_gv_7k').val()),
                  "HayPersonalAfectado":        HayPersonalAfectado,  //esperar esto debe ser una variable int 
                  "IdEmpresaCompany":           $('#sel_f_dg_gv_10k').val(),
                  "Descripcion":                $('#txta_f_dg_gv_11k').val(),
                  "IdCondicionEP":              0,
                  "IdProcesoOperacion":          parseInt($('#sel_f_dg_gv_13k').val()),
                  "IdSubProceso":                parseInt($('#sel_f_dg_gv_14k').val()),
                  "IdProbRecurrencia":           parseInt($('#sel_f_dg_gv_15k').val()),
                  "IdAreaAccidente":             parseInt($('#sel_f_dg_gv_16k').val()),
                  "IdZonaAccidente":             parseInt($('#sel_f_dg_gv_17k').val()),
                  "LugarEspTarea":               parseInt($('#sel_f_dg_gv_18k').val()), //ojo cambiar el tipo de dato en base de datos, debe ser un Id
                  "TemporadaVeda":               parseInt($('#sel_f_dg_gv_18_1k').val()), //campo nuevo temporadVeda


                //*****************************DATOS DEL AFECTADO ******************
                  "NombreEquipo":               $('#sel_f_dg_gv_17_1k').val(),
                  "NombrePersonalAccidentado":  $('#ReportanteNameDG_119').val(),
                  "CodTrabjador":               $('#txta_f_dg_gv_20').val(),
                  "IdPersonalAccidentado":      $('#ReportanteUserHashDG_119').val(),
                  "DNIAccidentado":             $('#txta_f_dg_gv_21').val(),
                  "EdadAccidentado":            0,
                  "PuestoCargoAccidentado":     $('#txta_f_dg_gv_23').val(),
                  "PuestoCargoAccidentado2":    $('#txta_f_dg_gv_24').val(),
                  "Expiencia_Yaer":             0,
                  "Expiencia_Month":            0,
                  "LesionDannio":                $('#sel_f_dg_gv_27').val(), //ojo cambiar el tipo de dato en base de datos, debe ser un Id
                  "ParteCuerpoLesionada":        parseInt($('#sel_f_dg_gv_28').val()), //ojo cambiar el tipo de dato en base de datos, debe ser un Id
                  "fecha_Descanso_Ini":         f1, //$('#txtd_f_dg_gv_037').val(),//definir campos ocultos
                  "fecha_Descanso_Fin":         f1, //$('#txtd_f_dg_gv_038').val(),//definir campos ocultos
                  "Dias_Descanza":              0,
                  "Descanso_estado":             parseInt($('#sel_f_dg_gv_30').val()),


                //*****************************DATOS DE LA INVESTIGACIÓN ******************

                  "IdRespInvestigar":           $('#ReportanteUserHashDG_311k').val(),
                  "NombreRespInvestigar":       $('#ReportanteNameDG_311k').val(),
                  "IdAreaRespInvestigar":        parseInt($('#sel_f_dg_gv_32k').val()),
                  "IdAsesorInvestigacion":       parseInt($('#sel_f_dg_gv_33k').val()),
                  "Puerto_Arrivo":              $('#txt_f_dg_gv_34k').val(),
                  "InformeInvestigacion":       InformeInvestigacion, //leyendo los valores del si y del no
                  "FechaInvestigacionIni":      f4,//$('#txtd_f_dg_gv_37').val(), 
                  "FechaInvestigacionFin":      f5,//$('#txtd_f_dg_gv_38').val(), 
                  "TiempoTranscurrido":         ttrsnc, 
                  "HechoAtiempo":               HechoAtiempo,
                  "IdGerencia":                  parseInt($('#sel_f_dg_gv_42k').val()), 
                  "IdRegion":                    parseInt($('#sel_f_dg_gv_44k').val()), 
                  "IdSeCargaAccidente":          parseInt($('#sel_f_dg_gv_45k').val()), 
                  "IdAccidenteIncidente":       istAud,
                  "Finalizado":                 FinalizadoMat

                      }    


             console.log('datos generales:',body);

            //var url = apiUrlssoma+"/api/Post-Evidencia-PdfWeb?code=rhwqmG2R7uXHmi1uhAxtAAoJ5U2RGKn8OOgVBis0ToH8UCSnbZgAsA==&httpmethod=post";
            //var url = apiUrlssoma+"/api/Post-DatosGeneralesIncidenteWeb?code=reQdAhVl9k1IQ0BcN4fOjHiwoMxeanCYIk8xl0xSvvsq/RDDI8Yw4A==&httpmethod=post";
             var url = apiUrlssoma+"/api/Post-DatosGeneralesIncidenteMaterialWeb?code=JaY6C9qOCRs6bPK9kXRWDeF7abVP3M7ylhvBwrEprGSTdnCuHU0WCQ==&httpmethod=post";

            var headers ={
                           "apikey":constantes.apiKey
                         }



            $.ajax({
                method: "POST",
                url:  url,
                data: JSON.stringify(body),
                headers:headers,
                crossDomain: true,
                dataType: "json",
            })


            .done(function(data)
            {
                console.info("data",data)
                 // resultado Exitoso
                if(data.Id>0)
                {
                      $('#btAgregarListadoDG').html('Agregar a la Lista');//
                      $('#btAgregarListadoDG').prop('disabled',false);

                       $('#btnConfirmarEvidenciaIncidenteHallazgoWebDG').html('Confirmar');
                       $('#btnConfirmarEvidenciaIncidenteHallazgoWebDG').prop('disabled',false);

                      $('#Sp3VentanaPlanAnualEditView').modal('hide').removeClass('fade');
                      $('#Sp3VentanaPruebasDatosGenerales').modal('hide').removeClass('fade');
                      $('#Sp3VentanaBDDatosGenerales').modal('show').addClass('fade');






                      //====================================================== ANDY 04-07-2021 REGISTRO DE LECCION APRENDIDA ===================================
                      let body2 = {
                        //*****************************DATOS GENERALES******************
                            "Id1": 0,
                            "AccionBD":0,
                            "IdIncidente1":istAud,
                            "IdTipoEvento_":parseInt($('#sel_f_dg_gv_1k').val()),
                            "IdSede": parseInt($('#sel_f_dg_gv_6k').val()),
                            "Fecha":  f1,
                            "FraseCorta":paObj[istAud].a.yDetalle, 
                            "Descripcion":paObj[istAud].a.yDescripcion,
                            "Codigo":paObj[istAud].a.Code,
                            "TipoDatoGeneral":0,
                            "Potencial":0,   
                            "TipoLesionDanio":"",
                            "Mortal":0,     
                            "Create_By":getCookie("vtas_id_hash"+sessionStorage.tabVisitasa),
                            "Create_Date":"", 
                            "B_Contaminante":0,
                            "B_Impacto_Ambiental":0
                        }    
    
                        var urlyu = apiUrlssoma+"/api/Post-LeccionAprendida?code=3SZLZvJm1g4qEdObbrPAWiDaiGa6EFKE9RFyIN1Q5osMz6ozxWX/xQ==&httpmethod=post";
                        

                        console.info("Que mando data1 = ",body2); console.info("Que mando url= ",urlyu)
                        var headers ={
                            "apikey":constantes.apiKey
                          }
 
 
 
                        $.ajax({
                            method: "POST",
                            url:  urlyu,
                            data: JSON.stringify(body2),
                            headers:headers,
                            crossDomain: true,
                            dataType: "json",
                        })
 
                        .done(function(data1)
                        {
                            console.info("data1 Leccion Aprendida",data1)
                             // resultado Exitoso
                            if(data1.Id>0)
                            {
                               console.log('se creo la leccion Aprendida')
                            }
                        });






     
                     
                }else
                {
                    verModalError("Lo Sentimos","No se Pudo Agregar al listado."+data.Descripcion)
                }
            })

            // .fail(function( jqXHR, textStatus, errorThrown ) {
            //     console.error("fail ",textStatus,errorThrown)
            // })
            // .always(function( jqXHR, textStatus, errorThrown ) {
            //     // // DESBLOQUEMAOS EL BOTON ENVIAR
            //     // $("#btnGuardarDocs").attr("disabled",false)
            //     // $("#btnCancelarDoc").attr("disabled",false)
            //     // $("#agregarEvidencia").attr("disabled",false)
            //     // $("#preloader").hide()
            //     // console.info("alwaisxxxxxxxxxxxx ",textStatus)
               
            // });
        




}//------------------------------------------------------------------------------------------------------ Dastos Generales -------------------------------------------





































//------------------------------------------------------------------------   ALERTA-MODULO -------------------------------------------------------------

function downloadBlob(blob, filename){
    if(window.navigator.msSaveOrOpenBlob) {
        window.navigator.msSaveBlob(blob, filename);
    } else {
        var elem = window.document.createElement('a');
        elem.href = window.URL.createObjectURL(blob);
        elem.download = filename;
        document.body.appendChild(elem);
        elem.click();
        document.body.removeChild(elem);
    }
}


//patro[0] = app
function fnSacaExtensionBase64(code)
{

     // console.log("mostrar pdf") 
       var x = code.split(',');
       var y = x[0].split(';');
       var z = y[0].split(':');

       console.log('================'+x[0]+"========================"); //="

        patro[0] ="application/x-executable";
        patro[0] ="application/graphql";
        patro[0] ="application/javascript";
        patro[0] ="application/json";
        patro[0] ="application/ld+json";
        patro[0] ="application/msword (.doc)";
        patro[0] ="application/pdf";
        patro[0] ="application/sql";
        patro[0] ="application/vnd.api+json";
        patro[0] ="application/vnd.ms-excel (.xls)";
        patro[0] ="application/vnd.ms-powerpoint (.ppt)";
        patro[0] ="application/vnd.oasis.opendocument.text (.odt)";
        patro[0] ="application/vnd.openxmlformats-officedocument.presentationml.presentation (.pptx)";
        patro[0] ="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet (.xlsx)";
        patro[0] ="application/vnd.openxmlformats-officedocument.wordprocessingml.document (.docx)";
        patro[0] ="application/x-www-form-urlencoded";
        patro[0] ="application/xml";
        patro[0] ="application/zip";
        patro[0] ="application/zstd (.zst)";
        patro[0] ="audio/mpeg";
        patro[0] ="audio/ogg";
        patro[0] ="image/gif";
        patro[0] ="image/apng";
        patro[0] ="image/flif";
        patro[0] ="image/webp";
        patro[0] ="image/x-mng";
        patro[0] ="image/jpeg";
        patro[0] ="image/png";
        patro[0] ="multipart/form-data";
        patro[0] ="text/css";
        patro[0] ="text/csv";
        patro[0] ="text/html";
        patro[0] ="text/php";
        patro[0] ="text/plain";
        patro[0] ="text/xml";
        patro[0] ="text/samir";



}





var fnCalcularProcentajesSp3 = function()
{
    //totalAvancePoryecto2
    //totalCumplimiento1
    let total                       = 0
    let avanceProyecto              = 0
    let avanceProyectoXMes          = 0
    let totalProcentajeProyecto     = 0
    let totalProcentajeProyectoXMes = 0
    for (var i = 0; i < 100; i++)
    {
        if($(`#avanceProyecto_${i}`).val()>=0)
        {
            avanceProyecto              += parseInt($(`#avanceProyecto_${i}`).val())
            avanceProyectoXMes          += parseInt($(`#avanceProyectoXMes_${i}`).val())
            totalProcentajeProyecto     += parseInt($(`#totalProcentajeProyecto_${i}`).val())
            totalProcentajeProyectoXMes += parseInt($(`#totalProcentajeProyectoXMes_${i}`).val())
            total++
        }
    }
    //console.warn(total, avanceProyecto, avanceProyectoXMes, totalProcentajeProyecto, totalProcentajeProyectoXMes)

    // calcular porcentaje total avance del proyecto
    avanceProyecto = Math.round( (avanceProyecto) / total )
    if(avanceProyecto < 0 || isNaN(avanceProyecto) )
        avanceProyecto = 0

    // calcular porcentaje total avance del proyecto
    avanceProyectoXMes = Math.round( (avanceProyectoXMes) / total )
    if(avanceProyectoXMes < 0 || isNaN(avanceProyectoXMes) )
        avanceProyectoXMes = 0

    // calcular totalProcentajeProyecto
    totalProcentajeProyecto = Math.round( (totalProcentajeProyecto) / total )
    if(totalProcentajeProyecto < 0 || isNaN(totalProcentajeProyecto) )
        totalProcentajeProyecto = 0

    // calcular totalProcentajeProyectoXMes
    totalProcentajeProyectoXMes = Math.round( (totalProcentajeProyectoXMes) / total )
    if(totalProcentajeProyectoXMes < 0 || isNaN(totalProcentajeProyectoXMes) )
        totalProcentajeProyectoXMes = 0

    //console.warn(total, avanceProyecto, avanceProyectoXMes, totalProcentajeProyecto, totalProcentajeProyectoXMes)


    // avanceProyecto
    $(`#avanceProyecto`).html(`${avanceProyecto} %`)
    // avanceProyectoXMes
    $(`#avanceProyectoXMes`).html(`${avanceProyectoXMes} %`)

    // totalProcentajeProyecto
    $(`#totalProcentajeProyecto`).html(`${totalProcentajeProyecto} %`)

    // totalProcentajeProyectoXMes
    $(`#totalProcentajeProyectoXMes`).html(`${totalProcentajeProyectoXMes} %`)

}

var fnPintarDatosPorMesSp3 = function(planAnualId, mes)
{
    //////////////////////////////////////////////////////////////////////// pasar a funcion
    // contador de semanas con actividades planificadas
    countS = 0
    // LIMPIADOS LOS LISTADOS DE ACTIVIDADES, MESES Y COMPLEMENTOS
    $("#listadoActividades").html('')
    $("#listadoMeses").html('')
    $("#listadoComplemento").html('')

    // indice para las actividades
    let indiceActividades = 0
    // indice para los subOjetivos
    let indiceSubOjetivos = 0
    // indice para los Tareas
    let indiceTareas = 0

    // COLOCAMOS TITULO A LA MODAL
    $("#titleModalVerPlanAnualSP3").html("Ver "+paObj[planAnualId].a.Code);
    // OBTENEMOS LA CANTIDAD DE SUBOBJETIVOS Y ACTIVIDADES
    let numObjetivos    = 0
    let numSubObjetivos = 0
    let numActividades  = 0

    paObj[planAnualId].a.Objetivos.forEach(function(Item)
    {
        //numSubObjetivos += Item.SubObjetivos.length
        numObjetivos++
        //numActividades  += Item.Actividades.length

        // añadimos objetivos a la lista
        $("#listadoActividades").append(`
            <tr>
                <td colspan="2">
                    <div class="body-tabla-list-EvalAud" id="body-tabla-list-EvalAud1">
                        <div id = 'iddd'  class="item-tabla p-2" style="z-index: 1; padding: 0px !important; margin: 10px 0px 0px !important;">
                            <div class="row m-0 justify-content-between align-items-center tbody_trainning">
                                <div class="col-12 text-center altoListado listadoVacio">
                                    <div class="row">

                                        <table width = "100%" border="0" style="border-color: white">
                                            <tr >
                                                <td width = "100%" colspan="3" align="center"><div id="c1TabGeny" class="text-left textoListadosPlanAnual" > Objetivo ${numObjetivos}: ${Item.Objetivo_Name} </div></td>
                                            </tr>
                                        </table>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </td>
            </tr>
        `)

        // anadimos al listo de meses la linea vacia
        $("#listadoMeses").append(`${vacio}`)
        // anadimos al listodo de complementos
        $("#listadoComplemento").append(`${vacioComplemento}`)


        // contador del indicie de la actividad
        indiceActividades = 0
        Item.Actividades.forEach(function(Item2){
            numActividades ++

            // agregamos una actividad
            $("#listadoActividades").append(`
                <tr>
                    <td colspan="2">
                        <div class="body-tabla-list-EvalAud" id="body-tabla-list-EvalAud1">
                            <div id = 'iddd'  class="item-tabla p-2" style="z-index: 1; padding: 0px !important; margin: 10px 0px 0px !important;">
                                <div class="row m-0 justify-content-between align-items-center tbody_trainning">
                                    <div class="col-12 text-center altoListado">
                                        <div class="row">
                                            <table width = "100%" border="0" style="border-color: red">
                                                <tr >
                                                    <td width = "10%" align="center"><div id="c1TabGeny" class="text-left textoListadosPlanAnual" > ${Item2.Peso}% </div></td>
                                                    <td width = "70%" align="center"><div id="c1TabGeny" class="text-left textoListadosPlanAnual" > ${Item2.Actividad_Name}</div></td>
                                                    <td width = "20%" align="center"><div id="c1TabGeny" class="text-left textoListadosPlanAnual textoVerDetalleObjetivos" onmouseup="fnSp3VerDetalleActividad(${(numObjetivos-1)},null,${(indiceActividades++)})"> Ver Detalle</div></td>
                                                </tr>
                                            </table>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </td>
                </tr>
            `)

            // agregamos fila de meses
            fnSp3PintarFrecuencia(Item2, mes)

            // agergamos los complementos
            fnSp3PintarComplementos(
                Item2.ResponsableName
                ,$(`#countTotalTareasProgramadas_${tr}`).val()
                ,$(`#countTotalTareasProgramadasXMes_${tr}`).val()
                ,$(`#countTotalTareasEjecutadas_${tr}`).val()
            )

            tr++
        })

        let countSubObjetivos = 0

        indiceSubObjetivos    = 0

        Item.SubObjetivos.forEach(function(Item2){
            numSubObjetivos++
            countSubObjetivos++
            $("#listadoActividades").append(`
                <tr>
                    <td colspan="2">
                        <div class="body-tabla-list-EvalAud" id="body-tabla-list-EvalAud1">
                            <div id = 'iddd'  class="item-tabla p-2" style="z-index: 1; padding: 0px !important; margin: 10px 0px 0px !important;">
                                <div class="row m-0 justify-content-between align-items-center tbody_trainning">
                                    <div class="col-12 text-center altoListado listadoVacio">
                                        <div class="row">

                                            <table width = "100%" border="0" style="border-color: white">
                                                <tr >
                                                    <td width = "100%" colspan="3" align="center"><div id="c1TabGeny" class="text-left textoListadosPlanAnual" > Sub Objetivo ${numObjetivos}.${countSubObjetivos}: ${Item2.SubObjetivo_Name} </div></td>
                                                </tr>
                                            </table>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </td>
                </tr>
            `)

            // anadimos al listo de meses la linea vacia
            $("#listadoMeses").append(`${vacio}`)
            // anadimos al listodo de complementos
            $("#listadoComplemento").append(`${vacioComplemento}`)

            // contador del indicie de la actividad
            indiceActividades = 0

            Item2.Actividades.forEach(function(Item3)
            {
                numActividades ++
                // agregamos actividades
                $("#listadoActividades").append(`
                    <tr>
                        <td colspan="2">
                            <div class="body-tabla-list-EvalAud" id="body-tabla-list-EvalAud1">
                                <div id = 'iddd'  class="item-tabla p-2" style="z-index: 1; padding: 0px !important; margin: 10px 0px 0px !important;">
                                    <div class="row m-0 justify-content-between align-items-center tbody_trainning">
                                        <div class="col-12 text-center altoListado">
                                            <div class="row">
                                                <table width = "100%" border="0" style="border-color: red">
                                                    <tr >
                                                        <td width = "10%" align="center"><div id="c1TabGeny" class="text-left textoListadosPlanAnual" > ${Item3.Peso}% </div></td>
                                                        <td width = "70%" align="center"><div id="c1TabGeny" class="text-left textoListadosPlanAnual" > ${Item3.Actividad_Name}</div></td>
                                                        <td width = "20%" align="center"><div id="c1TabGeny" class="text-left textoListadosPlanAnual textoVerDetalleObjetivos" onmouseup="fnSp3VerDetalleActividad(${(numObjetivos-1)},${indiceSubObjetivos++},${(indiceActividades++)})"> Ver Detalle</div></td>
                                                    </tr>
                                                </table>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </td>
                    </tr>
                `)

                // agregamos fila de meses
                fnSp3PintarFrecuencia(Item3, mes)

                // agergamos los complementos
                fnSp3PintarComplementos(
                    Item3.ResponsableName
                    ,$(`#countTotalTareasProgramadas_${tr}`).val()
                    ,$(`#countTotalTareasProgramadasXMes_${tr}`).val()
                    ,$(`#countTotalTareasEjecutadas_${tr}`).val()
                )

                tr++

            })


        })
    })

    // COLOCAMOS SUB-TITULO A LA MODAL
    //$("#subTitleModalVerPlanAnualSP3").html(`Objetivos ( ${paObj[planAnualId].a.Num_Objetivos} )/ Subojetivos ( ${numSubObjetivos} )/ Actividades ( ${numActividades} ) `);//*/
    $("#subTitleModalVerPlanAnualSP3").html(`Objetivos ( ${paObj[planAnualId].a.Num_Objetivos} )/ Actividades ( ${numActividades} ) `);//*/

    // colocamos fecha a cumplimentoAlMes
    let year = paObj[planAnualId].a.Year_Plan
    let temp = parseInt(mes)+2
    // si es diciembre aumentamos un año y hacemos el mes enero
    if(temp>12)
    {
        temp = 1
        year += 1
    }
    let m    = (temp<10) ? `0${temp}` : temp

    $("#cumplimentoAlMes").html(`03/${m}/${paObj[planAnualId].a.Year_Plan}`)

    fnCalcularProcentajesSp3()
    //////////////////////////////////////////////////////////////////////// pasar a funcion*/
}


/**
 * [fnSeleccionarMesSp3 pintar de color diferente el header del mes seleccionar]
 * @param  {[type]} mes [description]
 * @return {[type]}     [description]
 */
var fnSeleccionarMesSp3 = function(mes)
{
    //console.warn("mes",mes.value)
    // para el indicador de las filas...
    tr = 0
    // azul 34559c
    // amarillo ffb525
    // oscuro 50390e
    for (var i = 0; i < 12; i++) {
        $(`#mes_${i}`).css("background-color", '#34559c');
    }

    $(`#mes_${mes.value}`).css("background-color", '#ffb525');

    fnPintarDatosPorMesSp3(istAud, mes.value)
}

/**
 * [fnSp3PintarFrecuencia description]
 * @return {[type]} [description]
 */
var countS = 0
var countTotalTareasProgramadas     = 0
var countTotalTareasProgramadasXMes = 0
var countTotalTareasEjecutadas      = 0
var countTotalTareasEjecutadasXMes  = 0
var indiceTareas = 0
var fnSp3PintarFrecuencia = function(Item2, mes)
{
    let bgEvidencia  = []
    indiceTareas     = 0
    // contador para las tareas programadas
    countTotalTareasProgramadas = 0
    // contador para las tareas programadas hasta el mes seleccionado
    countTotalTareasProgramadasXMes = 0
    // contador para las tareas ejecutadas
    countTotalTareasEjecutadas  = 0
    // contador para las tareas ejecutadas hasta el mes seleccionado
    countTotalTareasEjecutadasXMes  = 0
    //console.warn("fnSp3PintarFrecuencia -> ",Item2,mes)
    $("#listadoMeses").append(`
        <tr>
            <td colspan="23">
                <input type="hidden" id="countTotalTareasProgramadas_${tr}" name="countTotalTareasProgramadas_${tr}" value="0">
                <input type="hidden" id="countTotalTareasProgramadasXMes_${tr}" name="countTotalTareasProgramadasXMes_${tr}" value="0">
                <input type="hidden" id="countTotalTareasEjecutadas_${tr}"  name="countTotalTareasEjecutadas_${tr}"  value="0">
                <div class="body-tabla-list-EvalAud" id="body-tabla-list-EvalAud1">
                    <div id = 'iddd'  class="item-tabla p-2" style="z-index: 1; padding: 0px !important; margin: 10px 3px 0px 3px !important; border: 0px !important;">
                        <div class="row m-0 justify-content-between align-items-center tbody_trainning">
                            <div class="col-12 text-center altoListado"  style="background-color: #fff;">
                                <div class="row">
                                    <table width = "100%" border="0" style="border-color: red; margin: 0px 0px 0px 0px !important;">
                                        <tr id="tr2_${tr}">
    `)
    // console.info("Item2",Item2)
    // console.info("Item2.Cronogramas",Item2.Cronogramas)
    // console.info("Item2.Cronogramas[0]",Item2.Cronogramas[0].S1)
    for (var i = 0; i < 12; i++)
    {
        let bg1 = "bgWhite"
        let bg2 = "bgWhite"
        let bg3 = "bgWhite"
        let bg4 = "bgWhite"
        bgEvidencia.S1 = "bgWhite"
        bgEvidencia.S2 = "bgWhite"
        bgEvidencia.S3 = "bgWhite"
        bgEvidencia.S4 = "bgWhite"
        indiceTareas = 0
        // definimos el color a pintar
        if(Item2.Cronogramas[i]!==undefined)
        {
            // color de fondo para las actividades programdas
            bg1 = ( parseInt(Item2.Cronogramas[i].S1) == 1) ? "bgBlue" :  "bgWhite"
            bg2 = ( parseInt(Item2.Cronogramas[i].S2) == 1) ? "bgBlue" :  "bgWhite"
            bg3 = ( parseInt(Item2.Cronogramas[i].S3) == 1) ? "bgBlue" :  "bgWhite"
            bg4 = ( parseInt(Item2.Cronogramas[i].S4) == 1) ? "bgBlue" :  "bgWhite"

            // aumentamos el contador de tareas programadas
            countTotalTareasProgramadas = ( parseInt(Item2.Cronogramas[i].S1) == 1) ? countTotalTareasProgramadas+1 :  countTotalTareasProgramadas
            countTotalTareasProgramadas = ( parseInt(Item2.Cronogramas[i].S2) == 1) ? countTotalTareasProgramadas+1 :  countTotalTareasProgramadas
            countTotalTareasProgramadas = ( parseInt(Item2.Cronogramas[i].S3) == 1) ? countTotalTareasProgramadas+1 :  countTotalTareasProgramadas
            countTotalTareasProgramadas = ( parseInt(Item2.Cronogramas[i].S4) == 1) ? countTotalTareasProgramadas+1 :  countTotalTareasProgramadas

            if(i <= mes )
            {
                //console.warn("i,mes",i,mes)
                // countTotalTareasProgramadasXMes = ( parseInt(Item2.Cronogramas[i].S1) == 1) ? countTotalTareasProgramadasXMes+1 :  countTotalTareasProgramadasXMes
                // countTotalTareasProgramadasXMes = ( parseInt(Item2.Cronogramas[i].S2) == 1) ? countTotalTareasProgramadasXMes+1 :  countTotalTareasProgramadasXMes
                // countTotalTareasProgramadasXMes = ( parseInt(Item2.Cronogramas[i].S3) == 1) ? countTotalTareasProgramadasXMes+1 :  countTotalTareasProgramadasXMes
                // countTotalTareasProgramadasXMes = ( parseInt(Item2.Cronogramas[i].S4) == 1) ? countTotalTareasProgramadasXMes+1 :  countTotalTareasProgramadasXMes
                // bgEvidencia = fnSp3GetColorTarea(Item2, Item2.Cronogramas[i], mes)
                if( parseInt(Item2.Cronogramas[i].S1) == 1)
                {
                    bgEvidencia.S1 = fnGetColorTareaSp3(Item2, Item2.Cronogramas[i].S1, mes, countTotalTareasProgramadasXMes)
                    countTotalTareasProgramadasXMes++
                }
                if( parseInt(Item2.Cronogramas[i].S2) == 1)
                {
                    bgEvidencia.S2 = fnGetColorTareaSp3(Item2, Item2.Cronogramas[i].S2, mes, countTotalTareasProgramadasXMes)
                    countTotalTareasProgramadasXMes++
                }
                if( parseInt(Item2.Cronogramas[i].S3) == 1)
                {
                    bgEvidencia.S3 = fnGetColorTareaSp3(Item2, Item2.Cronogramas[i].S3, mes, countTotalTareasProgramadasXMes)
                    countTotalTareasProgramadasXMes++
                }
                if( parseInt(Item2.Cronogramas[i].S4) == 1)
                {
                    bgEvidencia.S4 = fnGetColorTareaSp3(Item2, Item2.Cronogramas[i].S4, mes, countTotalTareasProgramadasXMes)
                    countTotalTareasProgramadasXMes++
                }
            }
            else
            {
                bgEvidencia.S1 = "bgWhite"
                bgEvidencia.S2 = "bgWhite"
                bgEvidencia.S3 = "bgWhite"
                bgEvidencia.S4 = "bgWhite"
            }
        }//*/


        $(`#tr2_${tr}`).append(`
            <td width="7%">
                <table width="100%" border="0" style="border-color: green">
                    <tbody>
                        <tr>
                            <td width="24%" class="text-white ${bg1}">---</td>
                            <td width="1%" style="background-color: #fff !important;">&nbsp;</td>
                            <td width="24%" class="text-white ${bg2}">---</td>
                            <td width="1%" style="background-color: #fff !important;">&nbsp;</td>
                            <td width="24%" class="text-white ${bg3}">---</td>
                            <td width="1%" style="background-color: #fff !important;">&nbsp;</td>
                            <td width="24%" class="text-white ${bg4}">---</td>
                        </tr>
                        <tr>
                            <td width="20%" class="text-white ${bgEvidencia.S1}">sad</td>
                            <td width="1%" style="background-color: #fff !important;">&nbsp;</td>
                            <td width="20%" class="text-white ${bgEvidencia.S2}">asd</td>
                            <td width="1%" style="background-color: #fff !important;">&nbsp;</td>
                            <td width="20%" class="text-white ${bgEvidencia.S3}">asd</td>
                            <td width="1%" style="background-color: #fff !important;">&nbsp;</td>
                            <td width="20%" class="text-white ${bgEvidencia.S4}">dsa</td>
                        </tr>
                    </tbody>
                </table>
            </td>
        `)
        if(i<11){
            $(`#tr2_${tr}`).append(`<td width="1%"></td>`)
        }
    }
    // cerramos la etiqueta
    $("#listadoMeses").append(`
                                        </tr>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </td>
        </tr>
    `)
    $(`#countTotalTareasProgramadas_${tr}`).val(countTotalTareasProgramadas)
    $(`#countTotalTareasProgramadasXMes_${tr}`).val(countTotalTareasProgramadasXMes)
    $(`#countTotalTareasEjecutadas_${tr}`).val(countTotalTareasEjecutadas)
    //console.warn("countTotalTareasProgramadas -> ",$(`#countTotalTareasProgramadas_${tr}`).val())
}

/**
 * [fnSp3GetColorTarea definir color para el campo de evidencias]
 * @param  {[type]} Item2 [description]
 * @return {[type]}       [description]
 */
//var fnSp3GetColorTarea = function(Item2, Cronograma, Mes)
var fnGetColorTareaSp3 = function(Item2, Cronograma, Mes, IndiceTareas)
{

    let bg2 = "bgWhite"

    return ( parseInt(Cronograma) == 1 ) ? fnGetColorEvidenciaSp3(Item2, IndiceTareas, Mes) : "bgWhite"

    let array = []
    let bg    = []
    //console.info("Cronograma",Cronograma)
    //console.info("Item2.Tareas",Item2.Tareas)
    // contador indice de la tarea.
    //countS = 0

    // array.S1     = (parseInt(Cronograma.S1) == 1 ) ? fnGetColorEvidenciaSp3(Item2,indiceTareas,Mes) :  "bgWhite"
    // indiceTareas = (parseInt(Cronograma.S1) == 1 ) ? indiceTareas+1  :  indiceTareas
    // countS       = (parseInt(Cronograma.S1) == 1 ) ? countS+1  :  countS

    // array.S2     = (parseInt(Cronograma.S2) == 1 ) ? fnGetColorEvidenciaSp3(Item2,indiceTareas,Mes) :  "bgWhite"
    // indiceTareas = (parseInt(Cronograma.S2) == 1 ) ? indiceTareas+1  :  indiceTareas
    // countS       = (parseInt(Cronograma.S2) == 1 ) ? countS+1  :  countS

    // array.S3     = (parseInt(Cronograma.S3) == 1 ) ? fnGetColorEvidenciaSp3(Item2,indiceTareas,Mes) :  "bgWhite"
    // indiceTareas = (parseInt(Cronograma.S3) == 1 ) ? indiceTareas+1  :  indiceTareas
    // countS       = (parseInt(Cronograma.S3) == 1 ) ? countS+1  :  countS

    // array.S4     = (parseInt(Cronograma.S4) == 1 ) ? fnGetColorEvidenciaSp3(Item2,indiceTareas,Mes) :  "bgWhite"
    // indiceTareas = (parseInt(Cronograma.S4) == 1 ) ? indiceTareas+1  :  indiceTareas
    // countS       = (parseInt(Cronograma.S4) == 1 ) ? countS+1  :  countS

    // //bg1 = ( parseInt(Item2.Cronogramas[i].S1) == 1) ? "bgBlue" :  "bgWhite"
    // // bgWhite
    // // bgGreen
    // // bgYellow
    // // bgRed
    // //console.warn("en fnSp3GetColorTarea -> ","array",array,"countS",countS,"bg",bg)

    // return array

}

/**
 * [fnGetColorEvidenciaSp3 validar el color a pintar la evidencia]
 * @param  {[type]} Item  [Actividades]
 * @param  {[type]} count [indice de la tarea]
 * @return {[type]}       [codigo del color a pintar]
 */
var fnGetColorEvidenciaSp3 = function(Item, Count, Mes)
{
    //console.warn("Item",Item,"Count",Count)
    let bg = "bgWhite"

    if(Item.Tareas !== null && Item.Tareas !== undefined && Item.Tareas.length > 0)
    {
        // validamos el IdEstado no se sea null nu undefined
        if(Item.Tareas[Count].IdEstado != undefined)
        {
            if(Item.Tareas[Count].IdEstado==1) // atendido
            {
                //bg = "bgWhite"
                bg = fnVerficarFechaSubidaSp3(Item.Tareas[Count])
            }
            if(Item.Tareas[Count].IdEstado==2 ||Item.Tareas[Count].IdEstado==5) // vencida o rechazada
            {
                bg = "bgRed"
            }
            if(Item.Tareas[Count].IdEstado==4)// aprobada
            {
                bg = "bgGreen"
            }

            // para saber si la tarea ya fue ejecutada (diferente a Pendiente o Vencida)
            console.warn("countTotalTareasEjecutadas",Item.Tareas[Count].IdEstado,countTotalTareasEjecutadas,Item.Tareas[Count])
            if( Item.Tareas[Count].IdEstado != 2)
            {
                countTotalTareasEjecutadas += 1
            }
        }
    }


    return bg
}

/**
 * [fnVerficarFechaSubidaSp3 calcular si fue subida la evidencia fuera de tiempo]
 * @param  {[type]} Tarea [obj de la tarea]
 * @return {[type]}       [color a pintar]
 */
var fnVerficarFechaSubidaSp3 = function(Tarea)
{
    let bg = "bgWhite"

    // validamos que la fecha de ejecucion no sea null vacio o undefined
    if( Tarea.Fecha_Ejecutada_Ini !== null && Tarea.Fecha_Ejecutada_Ini !== "" && Tarea.Fecha_Ejecutada_Ini !== undefined )
    {
        // descomponer la fecha inicio programada
        let temp           = Tarea.Fecha_Programada_Ini.split('/')
        // obtener fecha de inicio
        let fechaInicio    = new Date(temp[2],(temp[1]-1),temp[0])

        // descomponer la fecha final programada
        temp               = Tarea.Fecha_Programada_Fin.split('/')
        // obtener fecha de inicio
        let fechaFinal     = new Date(temp[2],(temp[1]-1),temp[0])

        // descomponer la fecha ejecutada
        temp               = Tarea.Fecha_Ejecutada_Ini.split('/')
        // obtener fecha de ejecucion
        let fechaEjecucion = new Date(temp[2],(temp[1]-1),temp[0])

        // tanto los metodos .getTime() y .valueOf como el operador unitario +
        // devuelven el número de milisegundos desde el 1 de enero de 1970, 00:00 UTC.
        //if(fechaFinal.getTime() >= fechaEjecucion.getTime() )
        //if(fechaFinal.valueOf() <= fechaEjecucion.valueOf() )
        if(+fechaFinal <= +fechaEjecucion )
        {
            bg = "bgWhite"
        }
        else
        {
            bg = "bgYellow"
        }

        // console.warn("..:: fechaInicio              ::.. ",fechaInicio)
        // console.warn("..:: fechaEjecucion           ::.. ",fechaEjecucion)
        // console.warn("..:: fechaFinal               ::.. ",fechaFinal)
        // console.warn("..:: bg                       ::.. ",bg)
        // console.warn("..:: fechaInicio.valueOf()    ::.. ",fechaInicio.valueOf())
        // console.warn("..:: fechaEjecucion.valueOf() ::.. ",fechaEjecucion.valueOf())
        // console.warn("..:: fechaFinal.valueOf()     ::.. ",fechaFinal.valueOf())

    }

    return bg
}


var fnSp3PintarComplementos = function(ResponsableName, TotalTareasProgramadas, TotalTareasProgramadasXMes, TotalTareasEjecutadas)
{
    // calcular porcentaje total del proyecto
    // let totalProcentajeProyecto = Math.round( (TotalTareasEjecutadas*100) / TotalTareasProgramadasXMes)
    // if(totalProcentajeProyecto < 0 || isNaN(totalProcentajeProyecto) )
    //     totalProcentajeProyecto = 0
    let totalProcentajeProyecto = (TotalTareasEjecutadas > 0) ? 100 : 0

    // calcular avances del proyecto estimado
    let avanceProjecto = Math.round( (TotalTareasProgramadasXMes*100) / TotalTareasProgramadas)
    //console.warn("avanceProjecto",avanceProjecto)
    if(avanceProjecto < 0 || isNaN(avanceProjecto) )
        avanceProjecto = 0

    // calcular avances del proyecto real
    let avanceProjectoXMes = Math.round( (TotalTareasEjecutadas*100) / TotalTareasProgramadas)
    //console.warn("avanceProjectoXMes",avanceProjectoXMes)
    if(avanceProjectoXMes < 0 || isNaN(avanceProjectoXMes) )
        avanceProjectoXMes = 0

    // calcular porcentaje total del proyecto
    let totalProcentajeProyectoXMes = Math.round( (avanceProjectoXMes*100) / avanceProjecto )
    if(totalProcentajeProyectoXMes < 0 || isNaN(totalProcentajeProyectoXMes) )
        totalProcentajeProyectoXMes = 0


    var filaComplementos = `
        <tr>
            <td colspan="11">
                <div class="body-tabla-list-EvalAud" id="body-tabla-list-EvalAud1">
                    <div id = 'iddd'  class="p-2" style="z-index: 1; padding: 0px !important; margin: 10px 3px 0px 3px !important;">
                        <div class="row m-0 justify-content-between align-items-center tbody_trainning">
                            <div class="col-12 text-center altoListado">
                                <div class="row">
                                    <table width = "100%" border="0" style="border-color: red">
                                        <tr >
                                            <td width="15%">
                                                <div id="c1TabGeny" class="text-left textoListadosPlanAnual" > ${toCapitalize(ResponsableName)} </div>
                                            </td>
                                            <td width="2%" class="bgWhite"></td>
                                            <td width="15%">
                                                <div id="c1TabGeny" class="text-center textoListadosPlanAnual" > <span class="pr-4">${TotalTareasProgramadasXMes}</span> <span>${TotalTareasProgramadas}</span>
                                                </div>
                                            </td>
                                            <td width="2%" class="bgWhite"></td>
                                            <td width="15%">
                                                <div id="c1TabGeny" class="text-center textoListadosPlanAnual" >
                                                    <span class="pr-2">${avanceProjecto} %</span>
                                                    <span>${avanceProjectoXMes} %</span>
                                                    <input type="hidden" id="avanceProyectoXMes_${tr}" name="avanceProyectoXMes_${tr}" value="${avanceProjectoXMes}">
                                                    <input type="hidden" id="avanceProyecto_${tr}" name="avanceProyecto_${tr}" value="${avanceProjecto}">
                                                </div>
                                            </td>
                                            <td width="2%" class="bgWhite"></td>
                                            <td width="15%">
                                                <div id="c1TabGeny" class="text-center textoListadosPlanAnual" >
                                                    <span>${TotalTareasEjecutadas}</span>
                                                </div>
                                            </td>
                                            <td width="2%" class="bgWhite"></td>
                                            <td width="15%">
                                                <div id="c1TabGeny" class="text-left textoListadosPlanAnual bgYellow" style="margin: 0px 0px 0px 0px !important;">
                                                    <table width="100%" border="0" style="border-color: green">
                                                        <tbody>
                                                            <tr>
                                                                <td rowspan="2" width="24%" class="bgYellow fontGris text-center" style="height: 2rem;">${totalProcentajeProyectoXMes} %</td>
                                                                <input type="hidden" id="totalProcentajeProyectoXMes_${tr}" name="totalProcentajeProyectoXMes_${tr}" value="${totalProcentajeProyectoXMes}">
                                                            </tr>
                                                        </tbody>
                                                    </table>

                                                </div>
                                            </td>
                                            <td width="2%" class="bgWhite"></td>
                                            <td width="15%">
                                                <div id="c1TabGeny" class="text-left textoListadosPlanAnual bgGreen" style="margin: 0px 0px 0px 0px !important;">
                                                    <table width="100%" border="0" style="border-color: green">
                                                        <tbody>
                                                            <tr>
                                                                <td rowspan="2" width="24%" class="bgGreen fontWhite text-center" style="height: 2rem;">${totalProcentajeProyecto} %</td>
                                                                <input type="hidden" id="totalProcentajeProyecto_${tr}" name="totalProcentajeProyecto_${tr}" value="${totalProcentajeProyecto}">
                                                            </tr>
                                                        </tbody>
                                                    </table>
                                                </div>
                                            </td>
                                        </tr>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </td>
        </tr>
    `

    // anadimos al listodo de complementos
    $("#listadoComplemento").append(`${filaComplementos}`)


}

/**
 * [fnSp3VerDetalleActividad levantar modal para ver las evidencias]
 * @return {[type]} [description]
 * @autor Jesus Millan [07/02/2021]
 */
var fnSp3VerDetalleActividad = function(objetivo, subObjetivo, actividad)
{
    console.warn(objetivo, subObjetivo, actividad)
    // OCULTAR MODAL PLAN ANUAL
    $('#modalVerPlanAnualSP3').modal('hide').removeClass('fade')

    // LIMPIAMOS LA CAPA DEL LISTADO DE EVIDENCIAS
    $("#listadoEvidenciasTareas").html("")

    // datos de las activdades
    let actividades = []

    // obtener datos de la actividad
    if(subObjetivo === null){
        console.warn("Es Objetivo",paObj[istAud].a.Objetivos[objetivo])
        actividades = paObj[istAud].a.Objetivos[objetivo].Actividades
    }else{
        console.warn("Es SubObjetivo",paObj[istAud].a.Objetivos[objetivo].SubObjetivos[subObjetivo])
        actividades = paObj[istAud].a.Objetivos[objetivo].SubObjetivos[subObjetivo].Actividades
    }

    console.warn("actividades",actividades[actividad])
    // Pintamos el nombre del Responsable
    $("#nameResponsableTarea").html(actividades[actividad].ResponsableName)
    let countTareas = 0
    actividades[actividad].Tareas.forEach(function(Item){
        console.info("Item",Item)
        $("#listadoEvidenciasTareas").append(`
             <div id="evidencia_${countTareas}" class="item-tabla p-0" style="z-index: 1;display:relative; background-color: white !important;  padding: 0px !important; margin: 10px 0px 0px 0px !important; width: 100% !important;">
                <div class="row m-0 justify-content-between align-items-center tbody_trainning">
                    <div class="col-12 text-center" style="font-size: 15px; padding: 4px !important; ">
                        <div class="row">

                            <table width="100%" border="0" >
                                <tbody>
                                    <tr>

                                        <td width="5%" align="center"><div id="itemTarea_${countTareas}" class="text-left " style="margin: 0px 0px 0px 18px !important; font-size: 14px !important; ">${(countTareas+1)}</div></td>

                                        <td width="35%" align="center" style="border-radius: 4px; border: 1px solid #c8c8c8;"><div id="descriptionTarea_${countTareas}" class="text-left " style="color:#000; margin-left: 10px;">${Item.Evidencia_Name}</div></td>

                                        <td width="18%" align="center"><div id="fechaProg_${countTareas}" class="text-left " style="color:#000; margin-left: 20px !important;">${Item.Fecha_Programada_Ini} - ${Item.Fecha_Programada_Fin}</div></td>

                                        <td width="16%" align="center"><div id="fechaEjec_${countTareas}" class="text-left " style="color:#000; margin-left:5px;">${Item.Fecha_Ejecutada_Ini} - ${Item.Fecha_Ejecutada_Fin}</div></td>

                                        <td width="8%" align="center"><div id="estado1PlanAnual2" class="text-center " style="color:${Item.Color};">${Item.Estado}</div></td>

                                        <td width="8%" align="center"><div id="btnAdjuntar_${countTareas}" class="text-center lbCabezaTabla">
                                            <button type="button" title="Adjuntar Evidencia" onmouseup="fnVerModalAdjuntarDocumentosTareasSp3(${objetivo}, ${subObjetivo}, ${actividad},${countTareas})" class="btn-circle btn_read border-0" style="background-color:#34559c !important;" id="adjuntoTarea_${countTareas}">
                                                <img src="./images/iconos/attach_2.svg" class="">
                                            </button>
                                        </div></td>

                                    </tr>
                                </tbody>
                            </table>

                        </div>
                    </div>
                </div>
             </div>
        `)
        countTareas++

    })

    $("#titleModalIngresarTareasActividadSp3").html(`
        Ingresar Tareas de Actividad - ${actividades[actividad].Actividad_Name}
    `)

    // MOSTAR MODAL INGRESAR TAREAS ACTIDIDAD
    $('#modalIngresarTareasActividadSp3').modal('show').addClass('fade')

}


/**
 * [fnVerModalAdjuntarDocumentosTareasSp3 Ver modal Adjuntar Documentos Tareas de Actividad]
 * @param  {[type]} tareasId [Id de la tabla ]
 * @return {[type]}          [description]
 */
var tareaActiva       = 0
var objetivoActiva    = 0
var subObjetivoActiva = 0
var actividadActiva   = 0
var adjuntoActiva     = 0
var accionActiva      = 0
var countAdjuntos     = 0

var fnVerModalAdjuntarDocumentosTareasSp3 = function(objetivo, subObjetivo, actividad, tarea)
{
    // variables globlales para saber la posicion de cada elemento en el array
    tareaActiva       = tarea
    objetivoActiva    = objetivo
    subObjetivoActiva = subObjetivo
    actividadActiva   = actividad
    countAdjuntos     = 0

    // oculamos el texto ver historial de documentos
    $("#verHistorialDoc").css("display","none")

    // Colocamos Titulo a la Modal
    $("#lbTitleModalAdjuntarDocumentosTareasSp3").html(`Evidencia de: &nbsp; ${paObj[istAud].a.Objetivos[objetivo].Actividades[actividad].Actividad_Name}`)

    //limpiamos la capa de filas de documentos a adjuntar
    $("#filasAdjuntarDocumentosTareas").html('')
     $("#filasAdjuntarDocumentosTareas").append('<div id="DescargarEvidenciasSp3"style=" display: none;">Aqui es para que descarguemos los archivos</div>')

    if(subObjetivo===null)
    {
        paObj[istAud].a.Objetivos[objetivo].Actividades[actividad].Tareas[tarea].Adjuntos.forEach(function(ItemAdjuntos)
        {
            console.info("ItemAdjuntos",ItemAdjuntos)
            fnAgregarAdjuntarDocumento(ItemAdjuntos.Id,ItemAdjuntos.AdjuntoName,ItemAdjuntos.EstadoAdjunto,ItemAdjuntos.AdjuntoCode,2,ItemAdjuntos.EstadoAdjuntoId)
        })
        console.warn(paObj[istAud].a.Objetivos[objetivo].Actividades[actividad].Tareas[tarea].Historial.length)
        if( paObj[istAud].a.Objetivos[objetivo].Actividades[actividad].Tareas[tarea].Historial.length > 0 )
        {
            // mostramos el texto ver historial de documentos
            $("#verHistorialDoc").css("display","block")
        }
    }
    else
    {
        paObj[istAud].a.Objetivos[objetivo].SubObjetivos[subObjetivo].Actividades[actividad].Tareas[tarea].Adjuntos.forEach(function(ItemAdjuntos)
        {
            console.info("ItemAdjuntos",ItemAdjuntos)
            fnAgregarAdjuntarDocumento(ItemAdjuntos.Id,ItemAdjuntos.AdjuntoName,ItemAdjuntos.EstadoAdjunto,ItemAdjuntos.AdjuntoCode,2,ItemAdjuntos.EstadoAdjuntoId)
        })
        if( paObj[istAud].a.Objetivos[objetivo].SubObjetivos[subObjetivo].Actividades[actividad].Tareas[tarea].Historial.length > 0 )
        {
             // mostramos el texto ver historial de documentos
            $("#verHistorialDoc").css("display","block")
        }
    }

  // ocultar modal previa
  $("#modalIngresarTareasActividadSp3").modal('hide').removeClass('fade')

  // levantar modal
  $("#modalAdjuntarDocumentosTareasSp3").modal('show').addClass('fade')

    //alert('aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa');
}








/**
 * [fnAgregarAdjuntarDocumento ]
 * @return {[type]} [description]
 */
var fnAgregarAdjuntarDocumento = function(adjuntoId /*idadjunto*/, adjuntoName /* nombre adjunto*/, estadoAdjunto, adjuntoCode, accionAdjunto, estadoAdjuntoId)
{
    console.info("tareaActiva "+tareaActiva+", istAud "+istAud+", objetivoActiva "+objetivoActiva+", subObjetivoActiva "+subObjetivoActiva+", actividadActiva "+actividadActiva+", Id "+adjuntoId+", estadoAdjuntoId "+estadoAdjuntoId)

    let btnDisabled            = (estadoAdjuntoId==0||estadoAdjuntoId==3) ? "" : "disabled"
    let btnBackground          = (estadoAdjuntoId==0||estadoAdjuntoId==3) ? "#58c25d" : "#b2b2b2"
    let btnDisabledDescargar   = (estadoAdjuntoId==0) ? "disabled" : ""
    let btnBackgroundDescargar = (estadoAdjuntoId==0) ? "#b2b2b2"  : "#373e68"

   
   
   bloqueaBtns('si');
    // mostramos el texto ver historial de documentos
    // if(estadoAdjuntoId==3)
    // {
    //     $("#verHistorialDoc").css("display","block")
    // }

    var f = new Date();
    var m = f.getMonth()+1; if(m < 10){m = '0'+m;}
    var fechaActual = f.getDate() + "/" + m + "/" + f.getFullYear();



    $("#filasAdjuntarDocumentosTareas").append(`
        <div class="body-tabla-list-EvalAud" id="filaAdjuntos_${countAdjuntos}" style="width: 100% !important; visibility:hidden; display:none;" >
            <div id = "docActividads_${countAdjuntos}"  class="item-tabla p-2" style="z-index: 1;display:relative; background-color: white !important;  padding: 0px !important; margin: 10px 0px 0px !important; width: 100% !important;">
                <div class="row m-0 justify-content-between align-items-center tbody_trainning">
                    <div class="col-12 text-center" style="font-size: 15px; padding: 4px !important; ">
                        <div class="row">

                            <table width = "100%" border="0">
                                <tr >
                                    <td width = "40%" align="center"><div id="nombreDocs_${countAdjuntos}" class="text-left "  style='margin: 0px 0px 0px 18px !important; font-size: 14px !important; font-weight: bold !important; '>${adjuntoName}</div></td>

                                    <td width = "30%" align="center"><div id="EstatoAdjunto_${countAdjuntos}" class="text-center "  style='color:${adjuntoCode};'>${fechaActual}</div></td>

                                    <td width = "15%" align="center"><div class="text-center lbCabezaTabla"  >
                                        <input type="file" id="adjuntarFile_${countAdjuntos}" onchange="FnAdjuntarDocumentosTareasSp3(${countAdjuntos})" style="display:none; " accept=".pdf,.xls,.xlsx,.doc,.docx,.xml,application/msword,application/vnd.openxmlformats-officedocument.wordprocessingml.document"/>
                                            <input type="hidden" id="adjuntoId_${countAdjuntos}" value="${adjuntoId}"/>
                                            <input type="hidden" id="accionAdjunto_${countAdjuntos}" value="${accionAdjunto}"/>
                                        <button type='button' ${btnDisabled} onmouseup="/*$('#adjuntarFile_${countAdjuntos}').trigger('click');*/" title='Descargar la Evidencia <Name00>' class='btn-circle btn_read border-0' style='background-color:#2d7099 !important;'  id='adjuntarDocs_${countAdjuntos}'>
                                            <img src='./images/iconos/download.svg' class=''  >
                                        </button>
                                    </td>

                                    <td width = "15%" align="center"><div class="text-center lbCabezaTabla"  >
                                        <button type='button' title='Eliminar Evidencia' onclick="/* fnSp4RemoverEvidencia(${countAdjuntos})*/"   class='btn-circle btn_read border-0' style='background-color:#ff6767 !important; cursor:pointer !important;' onmouseup="/*fnDescargarEvidenciaSp3(${adjuntoId})*/" id='eliminarDoc_${countAdjuntos}'>
                                            <img src='./images/iconos/delete.svg' class='ojo-1'  >
                                        </button>
                                    </td>
                                </tr>
                            </table>

                        </div>
                    </div>
                </div>
            </div>
        <!-- Aqui cierran listados de los item de la tabla Resposable asignado -->
        </div>
    `)

    $('#adjuntarFile_'+countAdjuntos).trigger('click');
    var io = 'adjuntarFile_'+countAdjuntos;
    //document.body.onfocus = function(){roar1(io)}
    countAdjuntos++

    //$('#lbEvalAud_02EvidenciaIncidente').html("<b style='text-align: left !important;''>Documentos ( "+ countAdjuntos +" )</b>");

   
}






var fnAgregarAdjuntarDocumento2 = function(adjuntoId /*idadjunto*/, adjuntoName /* nombre adjunto*/, fechaActual /*fecha del creacion*/, adjuntoCode, accionAdjunto, estadoAdjuntoId)
{
    console.info("tareaActiva "+tareaActiva+", istAud "+istAud+", objetivoActiva "+objetivoActiva+", subObjetivoActiva "+subObjetivoActiva+", actividadActiva "+actividadActiva+", Id "+adjuntoId+", estadoAdjuntoId "+estadoAdjuntoId)

    let btnDisabled            = (estadoAdjuntoId==0||estadoAdjuntoId==3) ? "" : "disabled"
    let btnBackground          = (estadoAdjuntoId==0||estadoAdjuntoId==3) ? "#58c25d" : "#b2b2b2"
    let btnDisabledDescargar   = (estadoAdjuntoId==0) ? "disabled" : ""
    let btnBackgroundDescargar = (estadoAdjuntoId==0) ? "#b2b2b2"  : "#373e68"

    // mostramos el texto ver historial de documentos
    // if(estadoAdjuntoId==3)
    // {
    //     $("#verHistorialDoc").css("display","block")
    // }

    // var f = new Date();
    // var m = f.getMonth()+1; if(m < 10){m = '0'+m;}
    // var fechaActual = f.getDate() + "/" + m + "/" + f.getFullYear();

    $("#filasAdjuntarDocumentosTareas").append(`
        <div class="body-tabla-list-EvalAud" id="filaAdjuntos_${countAdjuntos}" style="width: 100% !important; visibility:visible;" >
            <div id = "docActividads_${countAdjuntos}"  class="item-tabla p-2" style="z-index: 1;display:relative; background-color: white !important;  padding: 0px !important; margin: 10px 0px 0px !important; width: 100% !important;">
                <div class="row m-0 justify-content-between align-items-center tbody_trainning">
                    <div class="col-12 text-center" style="font-size: 15px; padding: 4px !important; ">
                        <div class="row">

                            <table width = "100%" border="0">
                                <tr >
                                    <td width = "40%" align="center"><div id="nombreDocs_${countAdjuntos}" class="text-left "  style='margin: 0px 0px 0px 18px !important; font-size: 14px !important; font-weight: bold !important; '>${adjuntoName}</div></td>

                                    <td width = "30%" align="center"><div id="EstatoAdjunto_${countAdjuntos}" class="text-center "  style='color:${adjuntoCode};'>${fechaActual}</div></td>

                                    <td width = "15%" align="center"><div class="text-center lbCabezaTabla"  >
                                        <input type="file" id="adjuntarFile_${countAdjuntos}" onchange="FnAdjuntarDocumentosTareasSp3(${countAdjuntos})" style="display:none; " accept=".pdf,.xls,.xlsx,.doc,.docx,.xml,application/msword,application/vnd.openxmlformats-officedocument.wordprocessingml.document"/>
                                            <input type="hidden" id="adjuntoId_${countAdjuntos}" value="${adjuntoId}"/>
                                            <input type="hidden" id="accionAdjunto_${countAdjuntos}" value="${accionAdjunto}"/>
                                        <button type='button' ${btnDisabled} onmouseup="fnSp4DescargaEvidencia(${adjuntoId})" title='Descargar la Evidencia <Name00>' class='btn-circle btn_read border-0' style='background-color:#2d7099 !important;'  id='adjuntarDocs_${countAdjuntos}'>
                                            <img src='./images/iconos/download.svg' class=''  >
                                        </button>
                                    </td>

                                    <td width = "15%" align="center"><div class="text-center lbCabezaTabla"  >
                                        <button type='button' title='Eliminar Evidencia' onclick=" fnSp4RemoverEvidencia(${countAdjuntos},${adjuntoId})"   class='btn-circle btn_read border-0' style='background-color:#ff6767 !important; cursor:pointer !important;' onmouseup="/*fnDescargarEvidenciaSp3(${adjuntoId})*/" id='eliminarDoc_${countAdjuntos}'>
                                            <img src='./images/iconos/delete.svg' class='ojo-1'  >
                                        </button>
                                    </td>
                                </tr>
                            </table>

                        </div>
                    </div>
                </div>
            </div>
        <!-- Aqui cierran listados de los item de la tabla Resposable asignado -->
        </div>
    `)

    //$('#adjuntarFile_'+countAdjuntos).trigger('click');
    countAdjuntos++

    $('#lbEvalAud_02EvidenciaIncidente').html("<b style='text-align: left !important;''>Documentos ( "+ countAdjuntos +" )</b>");
}







function fnSp4RemoverEvidencia(cont, idIncidentex)
{

///alert('cont='+cont+'idEvidencia='+idEvidencia);

// $('#filaAdjuntos_'+cont).remove(); countAdjuntos--;
// $('#lbEvalAud_02EvidenciaIncidente').html("<b style='text-align: left !important;''>Documentos ( "+ countAdjuntos +" )</b>");
bloqueaBtns('si')
 $('#lbLoadRepoA5').css('visibility','visible');
 $('#loadRepoA5').css('visibility','visible');
 $('#lbLoadRepoA5').html("Eliminando evidencia, por favor  espere ..");

 var url = apiUrlssoma+"/api/Get-AdjuntosEvidenciaIncidenteWeb?code=Wot4BIWAxN4a4Xcp6OWM2oItqcd4HX0m4jBMKG4Tg2dJ/4lZQnbKiw==&httpmethod=objectlist&IdTipoEvento="+idIncidentex+"&IdEmpresa=3"+"&IdSede=0&FechaInicio&FechaFin&IdEmbarcacion=0"

                console.log("URL_ alerta = ",url )
                var headers ={
                    "apikey":constantes.apiKey
                }

                var settings = {
                    "url": url,
                    "method": "GET",
                    "timeout": 0,
                    "crossDomain": true,
                    "dataType": "json",
                    "headers": headers,
                };
                 
                 var data;
                $.ajax(settings).done(function (response) 
                   {
                    //console.log("adjuntos === ",response);
                    data = response;
                    var hn = 0;
                    if(response.PlanAnual.length > 0)
                    {//----------------------------------------------------------------------------------------------------------------------

                            $('#filaAdjuntos_'+cont).remove(); countAdjuntos--;
                            $('#lbEvalAud_02EvidenciaIncidente').html("<b style='text-align: left !important;''>Documentos ( "+ countAdjuntos +" )</b>");
                            //countAdjuntos = 0;
                            bloqueaBtns('no')
                        console.log(' ----------------------------------***------------  '+response.PlanAnual.length+'---------------**---------------------');
                        response.PlanAnual.forEach((Item)=>{
                                
                                if(Item.Id >0)
                                {
                                   
                                }
                                else
                                {
                                    verModalError("Al eliminar","No se pudo Borrar el Documento.")
                                }
                                   console.log('......... archivo :'+Item.Id);
                                  
                                  


                                    $('#lbLoadRepoA5').css('visibility','hidden');
                                    $('#loadRepoA5').css('visibility','hidden');
                                    $('#lbLoadRepoA5').html("Adjuntando, por favor  espere ..");




                        });

                         // if(hn > 0) //quiere decir que xisten ya adjuntos en base de datos
                         //            {
                         //                paObj[istAud].a.Evidencias = data;
                         //                paObj[istAud].a.hayEvidenciaBD = 1;

                                       
                         //            }
                          
                      }
                    else
                    {
                        bloqueaBtns('no')
                            verModalError("Al eliminar","No se pudo Borrar el Documento.")
                            //$("#filasAdjuntarDocumentosTareas").html(' ');
                            //$('#lbEvalAud_02EvidenciaIncidente').html("<b style='text-align: left !important;' >Documentos </b>");
                            //countAdjuntos = 0;
                            $('#lbLoadRepoA5').css('visibility','hidden');
                            $('#loadRepoA5').css('visibility','hidden');
                            $('#lbLoadRepoA5').html("Adjuntando, por favor  espere ..");
                            //$('#btSubirFormato').attr("disabled",false);
                    }//----------------------------------------------------------------------------------------------------------------------
                   
                    });








//---------------------******--------------------------------------******-------------------------------------------****--------------------
}



/**
 * [fnVerHistorialDocumentosSp3 Ver el historial de documentos rechazados de la tarea]
 * @return {[type]} [description]
 */
var fnVerHistorialDocumentosSp3 = function()
{
    //alert("istAud "+istAud)
    console.warn(tareaActiva, objetivoActiva, subObjetivoActiva, actividadActiva)
    // ocultar modal adjuntar Documentos
    $('#modalAdjuntarDocumentosTareasSp3').modal('hide').removeClass('fade');

    $("#listadoHistorialDocumentosRechadosSp3").html('')

    // buscamos el historial
    if(subObjetivoActiva===null)
    {
        paObj[istAud].a.Objetivos[objetivoActiva].Actividades[actividadActiva].Tareas[tareaActiva].Historial.forEach(function(Item)
        {
            fnPintarListadoHistorialDocumentosSp3(Item)
        })
        // Colocamos Titulo a la Modal
        $("#lbTitlemodalHistorialDocumentosRechazadosSp3").html(`Historial de Evidencia de: &nbsp; ${paObj[istAud].a.Objetivos[objetivoActiva].Actividades[actividadActiva].Actividad_Name}`)
    }
    else
    {
        paObj[istAud].a.Objetivos[objetivoActiva].SubObjetivos[subObjetivoActiva].Actividades[actividadActiva].Tareas[tareaActiva].Historial.forEach(function(Item)
        {
            fnPintarListadoHistorialDocumentosSp3(Item)
        })
        // Colocamos Titulo a la Modal
        $("#lbTitlemodalHistorialDocumentosRechazadosSp3").html(`Historial de Evidencia de: &nbsp; ${paObj[istAud].a.Objetivos[objetivoActiva].SubObjetivos[subObjetivoActiva].Actividades[actividadActiva].Actividad_Name}`)
    }


    // mostrar modal historial de documentos
    $('#modalHistorialDocumentosRechazadosSp3').modal('show').addClass('fade');
}

/**
 * [fnPintarListadoHistorialDocumentosSp3 aqui dibujamos el listado del historial de documentos rechazados]
 * @param  {[type]} Item [description]
 * @return {[type]}      [description]
 */
var fnPintarListadoHistorialDocumentosSp3 = function(Item)
{
    console.log("Historial - Item",Item)

    if(Item.Fecha==null) Item.Fecha = ""
    if(Item.AdjuntoNameFinal==null) Item.AdjuntoNameFinal = ""

    $("#listadoHistorialDocumentosRechadosSp3").append(`
        <div class="row justify-content-around align-items-center text-center" style=" height: 57px !important; margin-top: 8px !important;">
            <div class="header-tabla px-2 py-3" style="width: 910px !important; border-radius: 4px !important; border: solid 1px #cbcbcb !important; background-color: #f2f2f2 !important; margin-top: 1px !important ">
                <table width="100%" border="0">
                    <tbody><tr>
                            <td width="5%">
                                <div>&nbsp;</div>
                            </td>
                        <td width="25%" align="center"><div id="archInicial" class="text-left lbCabezaTabla" style=" font-size: 14px !important ;  color: #000 !important;"> ${Item.AdjuntoNameInicial} </div></td>

                        <td width="25%" align="center"><div id="archFinal" class="text-left lbCabezaTabla" style=" font-size: 14px !important; color: #000 !important;"> ${Item.AdjuntoNameFinal} </div></td>

                        <td width="25%" align="center"><div id="motivoArch" class="text-left lbCabezaTabla" style=" font-size: 14px !important; color: #000 !important;"><a href="#" onmouseup="fnVerMotivoRechazoDocumentoSp3('${Item.AdjuntoNameInicial}','${Item.Motivo}')" style="color: black !important; text-decoration: underline !important;">Ver Motivo</a></div></td>

                        <td width="20%" align="center"><div id="fechaSubArch" class="text-left lbCabezaTabla pl-3" style=" font-size: 14px !important; color: #000 !important;"> ${Item.Fecha} </div></td>
                    </tr>
                </tbody></table>
            </div>
        </div>
    `)
}

/**
 * [fnVerMotivoRechazoDocumentoSp3 Ver motivo del rechazo del documento]
 * @param  {[type]} motivo [motivo porque se rechazo el documento]
 * @return {[type]}        [description]
 */
var fnVerMotivoRechazoDocumentoSp3 = function(titulo, motivo)
{

    // Ocultamos Modal
    $('#modalHistorialDocumentosRechazadosSp3').modal('hide').removeClass('fade');

    // Colocamos titulo a la modal
    $("#lbTitleModalMotivoDocumentosRechazadosSp3").html(`Motivo de Observación - ${titulo}`)

    // Colocamos el motivo de rechazo
    $("#motivoVentanaObservacionSp3").html(`${motivo}`)

    // Mostramos Modal
    $('#modalMotivoDocumentosRechazadosSp3').modal('show').addClass('fade');
}


/**
 * [FnAdjuntarDocumentosTareasSp3 ADJUNTAREMOS LAS EVIDENCIAS DE LA TAREA]
 * @param {[type]} numAdjunto [contador del adjunto]
 */
function FnAdjuntarDocumentosTareasSp3(numAdjunto)
{ //--------------------------ini--     sp3FnAdjuntarDocumentoInformeAuditoria    ------------------------

    // BLOQUEMAOS EL BOTON ENVIAR
    //$("#btnGuardarDocs").attr("disabled",true)
    //$("#btnCancelarDoc").attr("disabled",true)
   // $("#agregarEvidencia").attr("disabled",true)

      $('#lbLoadRepoA5').css('visibility','visible');

       


      

    $("#preloader").show()

    let fileInput     = document.getElementById('adjuntarFile_'+numAdjunto);
    let filePath      = fileInput.value;
    let IdAdjunto     = document.getElementById('adjuntoId_'+numAdjunto).value;
    let AccionAdjunto = document.getElementById('accionAdjunto_'+numAdjunto).value;

    console.warn("fileInput",fileInput.files[0].size)


   var siezekiloByte = parseInt(fileInput.files[0].size / 1024);
   var sizeMegaByte = parseInt(siezekiloByte / 1024);

   if(sizeMegaByte > 0){$('#lbLoadRepoA5').html("Adjuntando ("+sizeMegaByte+" MB), por favor  espere ..");}
   else{ $('#lbLoadRepoA5').html("Adjuntando ("+siezekiloByte+" KB), por favor  espere ..");}

  
   $('#loadRepoA5').css('visibility','visible');

   //alert(siezekiloByte);







    // if (fileInput.files[0].size<=10240000)
    // {

        //let extAdj = sp3FnvalidaExtensionAdjunto(filePath);
        // alert('es un archivos '+extAdj);

        let esc= escape(filePath)
        let name = esc.split("%5C");
        //let filenamme = name[2];
        let filenamme = name[2].replace("%20", "")
        for (let i = 0; i < 15  ;i++) {
            filenamme = filenamme.replace("%20", "")
        }

        // imprimo el nombre
                                                   



        //$(`#EstatoAdjunto_${numAdjunto}`).html("Pendiente")
        // $('#arc_t').html(name[2]);//para colocar el nombre el aboton pero no hace falta
        console.info("###################### ADJUNTAR COSAS #######################");
        console.info("vas adjuntar a :", name);
        console.info("filenamme :", filenamme);
        console.info("###################### ADJUNTAR COSAS #######################");

        //-------------------ajustamos los metodo para el envio del formulario ---------------------------------
        let adjunto = document.getElementById("adjuntarFile_"+numAdjunto).files[0];
        let base64Adjunto="";
        console.log("###################### SU BASE 64 ES #######################"); $("#preloader").hide();
        //console.log("FILEX :",  toBase64SP3(file_trainningSP3));

        toBase64SsomaSp3(adjunto).then(data =>
        {
            base64Adjunto =   getResultSsomaSp3(data);
            //console.log("FILE :", base64Adjunto);
            //sp3FnGuardarAdjunto(ilo-1,filenamme,extAdj,base64Adjunto,data);

            // let body = {
            //     "Id":           parseInt(IdAdjunto),
            //     "TareaId":      1,//paObj[istAud].a.Objetivos[objetivoActiva].Actividades[actividadActiva].Tareas[tareaActiva].Id,
            //     "AdjuntoName":  filenamme,
            //     "Adjunto":      data,
            //     "Accion":       parseInt(AccionAdjunto),
            //     "Created_By":   getCookie("vtas_id_hash"+sessionStorage.tabVisitasa)
            // }
            // console.info("body",body)

            //api/Post-Evidencia-PdfWeb                                     rhwqmG2R7uXHmi1uhAxtAAoJ5U2RGKn8OOgVBis0ToH8UCSnbZgAsA
            //https://550m44ud1tmg7454-inspection-dev.azurewebsites.net/api/Post-Evidencia-FotoApp?code=WqmpWHTBrXiKWmNLxnbvJR0YAtehyG/oasw8DGAyxzJunP0VjYwubw==&httpmethod=post
            // var url = apiUrlssoma+"/api/Post-Plan-Anual?code=ZnQh7E2Noeiv1emsJPTvXE5l/qClcMIjv3FNePN8XTRfTY5aOqmSAQ==&httpmethod=AdjuntarEvidencia";

            var url = apiUrlssoma+"/api/Post-Evidencia-PdfWeb?code=rhwqmG2R7uXHmi1uhAxtAAoJ5U2RGKn8OOgVBis0ToH8UCSnbZgAsA==&httpmethod=post";

            var headers ={
                           "apikey":constantes.apiKey
                         }

            let body = {
                "Id":                        0,
                "IdAccidenteIncidente":      istAud, //paObj[istAud].a.Objetivos[objetivoActiva].Actividades[actividadActiva].Tareas[tareaActiva].Id,
                "NombreEvidencia":           filenamme,
                "EvidenciaFile":             data,
                "CreateBy":                  getCookie("vtas_id_hash"+sessionStorage.tabVisitasa),
                "LastUpdateBy":              getCookie("vtas_id_hash"+sessionStorage.tabVisitasa)
            }


            $.ajax({
                method: "POST",
                url:  url,
                data: JSON.stringify(body),
                headers:headers,
                crossDomain: true,
                dataType: "json",
            })
            .done(function(data)
            {
                console.info("data",data)
                 // resultado Exitoso


                if(data.Id>0)
                {
                    $(`#nombreDocs_${numAdjunto}`).html(filenamme) //ojo esto hay que hacerlo una vez se haya cargado el archivo base64 en la basze de datos **********
                    $(`#filaAdjuntos_${numAdjunto}`).css('visibility','visible'); ////ojo esto hay que hacerlo una vez se haya cargado el archivo base64 en la basze de datos **********
                     $(`#filaAdjuntos_${numAdjunto}`).css('display','block'); 
                    $('#lbLoadRepoA5').css('visibility','hidden');
                    $('#loadRepoA5').css('visibility','hidden');
                    $('#lbEvalAud_02EvidenciaIncidente').html("<b style='text-align: left !important;''>Documentos ( "+ countAdjuntos +" )</b>");

                    //alert('yaaaaaaaaaaaa');
                    
                   
                    var iu = countAdjuntos-1;
                    //var o = "adjuntarDocs_"+iu;
                    $('#'+"adjuntarDocs_"+iu).click(function() {fnSp4DescargaEvidencia(data.Id)});//le agregamos la funcion para cargar desde servidor
                    $('#'+"eliminarDoc_"+iu).click(function() {fnSp4RemoverEvidencia(iu,data.Id)});//le agregamos la funcion para cargar desde servidor

                    fnSp4MostrarModalEvidenciasIncidente(istAud);
                    bloqueaBtns('no')

                     
                }else
                {
                    verModalError("Lo Sentimos","No se Pudo Adjuntar el Documento.")
                }
            })
            .fail(function( jqXHR, textStatus, errorThrown ) {
                console.error("fail ",textStatus,errorThrown)
            })
            .always(function( jqXHR, textStatus, errorThrown ) {
                // DESBLOQUEMAOS EL BOTON ENVIAR
                $("#btnGuardarDocs").attr("disabled",false)
                $("#btnCancelarDoc").attr("disabled",false)
                $("#agregarEvidencia").attr("disabled",false)
                $("#preloader").hide()
                console.info("alwaisxxxxxxxxxxxx ",textStatus)


               
            });
        });

   


}

/**
 * [fnDescargarEvidencia Descargaremos el archivo cargado como evidencia]
 * @return {[type]} [description]
 */
var fnDescargarEvidenciaSp3 = function(adjuntoId)
{
    // bloquear botones
    $("#btnGuardarDocs").attr("disabled",true)
    $("#btnCancelarDoc").attr("disabled",true)
    $("#agregarEvidencia").attr("disabled",true)
    $("#preloader").show()
    //alert("Descargaremos el adjuntoId "+adjuntoId)
    let body = {
        "AdjuntoId": adjuntoId
    }
    //console.info("body",body)
    var url = apiUrlssoma+"/api/Get-Plan-Anual?code=EUBbWsTT1KkzS56X/GBcUAOkoipdX2JpgKRagYT7YDaJ0mLS39daeA==&httpmethod=adjuntoEvidenciaPlan&AdjuntoId="+adjuntoId;

      var headers ={
        "apikey":constantes.apiKey
    }

    $.ajax({
        method: "POST",
        url:  url,
        data: JSON.stringify(body),
        headers:headers,
        crossDomain: true,
        dataType: "json",
    })
    .done(function(data)
    {

        // resultado Exitoso
        if(data.Id>0)
        {
            var x = data.Adjunto.split(',');
            $("#DescargarEvidenciasSp3").html('<a download="'+data.AdjuntoName+'" class="adjunto" href="'+x[0]+','+x[1]+'"><button class="btn btn-success btn-show-alert btn-descargar">Descargar</button></a>')
        }else
        {
            verModalError("Lo Sentimos","No se Pudo Descargar el documento.")
        }
    })
    .fail(function( jqXHR, textStatus, errorThrown )
    {
        console.error("fail",textStatus)
      //  alert("error")
    })
    .always(function( jqXHR, textStatus, errorThrown )
    {
        // Simular click para descargar el archivo
        $('.btn-descargar').trigger('click');
        // activar botones
        $("#btnGuardarDocs").attr("disabled",false)
        $("#btnCancelarDoc").attr("disabled",false)
        $("#agregarEvidencia").attr("disabled",false)
        $("#preloader").hide()

    });
}


var funCerrarModalListaCorreo= function()
{
    var ver = $('#CheckProveniente').val();
    console.log(ver)
    if(ver == 1){
        $('#modalEnviarCorrecionPlanAnualSp3').modal('hide').removeClass('fade');
        $('#Sp3VentanaPlanAnualEditView').modal('show').addClass('fade');
    }else{
        $('#modalEnviarCorrecionPlanAnualSp3').modal('hide').removeClass('fade');
        $('#modalAdjuntarDocumentosTareasSp3').modal('show').addClass('fade');
    }

}



var fnEnviarEvidenciasSp3 = function (tipo)
{
    //console.info(paObj[istAud].a.Objetivos[objetivo].Actividades[actividad].Tareas[tarea])
    //console.info(paObj[istAud].a)
    // actualizamos el token
    vw_principal.init();
    if(tipo == 1 ){
    // ocultamos modal adjuntados
    $('#Sp3VentanaPlanAnualEditView').modal('hide').removeClass('fade');
    // colocamos titulo a la modal
    $('#divTituloHistorialAuditoria').html('Enviar Correos - '+paObj[istAud].a.Code);
    $('#CheckProveniente').val(1)
    }else{
    // ocultamos modal adjuntados
    $('#modalAdjuntarDocumentosTareasSp3').modal('hide').removeClass('fade');

    // colocamos titulo a la modal
    $('#divTituloHistorialAuditoria').html('Enviar Correci&oacute;n - PLAN ANUAL - '+paObj[istAud].a.Code);
    $('#CheckProveniente').val(2)

    }

    // limpiamos listado
    $('#listadoPersonasEnviarCorrecionPlanAnualSp3').html('');
    $('#rowCountPA').html('00');


    // Mostamos modal enviar correccion
    $('#modalEnviarCorrecionPlanAnualSp3').modal('show').addClass('fade')

}

/**
 * [fnAgregarRowListaEnvioCorrecionPlanAnualSp3 Agregar filas al listado de personas a enviar correcion Plan Anual]
 * @return {[type]} [description]
 */

var fnAgregarRowListaEnvioCorrecionPlanAnualSp3 = function()
{
    // incrementar contador principal
    let rowCountPA = $('#CountPA').val()
    rowCountPA++
    $('#CountPA').val(rowCountPA)

    $("#listadoPersonasEnviarCorrecionPlanAnualSp3").append(`
        <div class='item-tabla p-2 px-2' style='font-size: 13px; background-color:white !important;border: solid 1px #cbcbcb !important;'>
            <div class='row m-0 justify-content-between align-items-center tbody_trainning'>

                <div class='col-3 text-left form-group'>
                    <label for="Name_${rowCountPA}">
                        <div class="spinner-border spinner-border-sm" role="status" id="spinnerLoadColaborador_${rowCountPA}" style="display:none;">
                            <span class="sr-only">Loading...</span>
                        </div>
                    </label>
                    <input type='text' value='' id='Name_${rowCountPA}' name='Name_${rowCountPA}' class='form-control form-control2 bg-white fechasA autocompletecollaborator'>
                    <div class='loader' id='spinnerLoadColaborador_${rowCountPA}' style='display:none'></div>
                    <input type='hidden' id='UserHash_${rowCountPA}' name='UserHash_${rowCountPA}'>
                </div>
                <div class='col-3 text-left form-group'>
                    <label for="Cargo_${rowCountPA}">
                        <div class="spinner-border spinner-border-sm" role="status" id="" style="display:none;">
                            <span class="sr-only">Loading...</span>
                        </div>
                    </label>
                    <input type='text' id='Cargo_${rowCountPA}' name='Cargo_${rowCountPA}' aria-describedby='sizing-addon2' class='form-control form-control2 fechasA bg-white' readonly>
                </div>
                <div class='col-4 text-left form-group'>
                    <label for="Correos_${rowCountPA}">
                        <div class="spinner-border spinner-border-sm" role="status" id="" style="display:none;">
                            <span class="sr-only">Loading...</span>
                        </div>
                    </label>
                    <input type='text' id='Correos_${rowCountPA}' name='Correos_${rowCountPA}' aria-describedby='sizing-addon2' class='form-control form-control2 fechasA bg-white'>
                </div>

                <div class='col-2 text-left form-group'>
                    <button type='button' id='Eliminar_${rowCountPA}' class='delete btn-circle btn-register border-0' style='background-color: #ff6767'> <img src='./images/iconos/Pathcan.svg' class='edit-1'></button>
                </div>

            </div>
        </div>
    `);

    // tercer parametro (opc) igual a 2 para indicar que es lista de envio ACR
    fnGetPersonCorrecionSp3($("#Name_"+rowCountPA),rowCountPA);

    // Pintar el total de personas a enviar
    let total = $('#listadoPersonasEnviarCorrecionPlanAnualSp3 .item-tabla').length

    total = ( total < 10 ) ? `0${total}` : total
    $('#rowCountPA').html(total);

    // eliminar row
    $('#listadoPersonasEnviarCorrecionPlanAnualSp3').on('click', '.delete', function()
    {
        $(this).parents('.item-tabla').remove();

        total--
        total = ( total < 10 ) ? "0"+total : total

        $('#rowCountPA').html(total)
    });

    console.warn(rowCountPA,total)
}


/**
 * [fnGetPersonCorrecionSp3 buscar persona a enviar correcciones]
 * @type {[type]}
 */
var fnGetPersonCorrecionSp3 = function(obj,i)
{
    console.log("entro en fnGetPersonCorrecionSp3",obj,i)
    obj.autocomplete({
        change: function (event, ui)
        {
           
            //alert('Hola');
            //console.log( $("#hid_collaborator_id_"+i).val())
            if (ui.item === null &&  $("#hid_Name_id_1"+i).length>20)
            {

                 $("#hid_collaborator_id_"+i).val("");
                 $(this).val("");
                 $("#add_covid_lastname_"+i).val("");
            }
            else if(ui.item)
            {

                $("#Name_"+i).val(ui.item.firstname).trigger("change");
                $("#add_covid_lastname_"+i).val(ui.item.lastname).trigger("change");
                // $("#add_covid_lastname_"+i).focus();
                // document.getElementById("add_covid_lastname_"+i).focus();
                //  document.getElementById("add_covid_lastname_"+i).focus();
            }

        },

        source: function( request, response )
        {
            var urlx = apiurlsecurity+"/api/Get-Collaborator?code="+GetCollaborator+"&httpmethod=objectlist";
            //console.log("tony",urlx);
            var filter = obj.val();
            ///console.log(filter);
            var param= {filter:filter};
            var headers = {"Authorization":TOKEN_CLIENT,"apiKey":"r$3#23516ewew5"}//r$3#23516ewew5
            $("#add_firtnameload_1").show();
            $.ajax({
                url: apiurlsecurity+"/api/Get-Collaborator?code="+GetCollaborator+"&httpmethod=objectlist",
                //dataType: "json",
                method:"post",
                data : JSON.stringify(param),
                processData:false,
                crossDomain: true,
                async: true,
                headers : headers,
                success: function( data )
                {
                    $("#add_firtnameload_1").hide();
                    var array =[];
                    data =  JSON.parse(data);

                    console.log('***************** DENTRO ***********************',data);

                    data.value.forEach(item =>
                    {
                        var json ={}
                        json.label                    = item.displayName;
                        json.value                    = item.givenName;
                        json.id                       = item.objectId;
                        json.cargo                    = item.jobTitle;
                        json.firstname                = item.displayName;//item.givenName+' '+item.surname;
                        json.correo                   = item.userPrincipalName;
                        json.codigo_trabajador        = item.userSAPR3Id;
                        json.dni                      = item.identity_document;
                        json.nombre_completo          = item.givenName+' '+item.surname;
                        array.push(json);
                    });

                    response(array);
                }
            });
        },
        minLength: 3,
        select: function( event, ui )
        {
            //alert(ui.item.id)//userHas

            setTimeout(function(){

                    $(`#Name_${i}`).val(toCapitalize(ui.item.firstname))
                    $(`#UserHash_${i}`).val(ui.item.id)
                    $(`#Correos_${i}`).val(ui.item.correo)
                    $(`#Cargo_${i}`).val(toCapitalize(ui.item.cargo))

                    if(i == 119){//Datos Generales

                                   
                                   $(`#ReportanteNameDG_119`).val(toCapitalize(ui.item.nombre_completo)) 
                                   $(`#txta_f_dg_gv_20`).val(toCapitalize(ui.item.codigo_trabajador)) 
                                   $(`#txta_f_dg_gv_21`).val(toCapitalize(ui.item.dni)) 
                                   $(`#txta_f_dg_gv_23`).val(toCapitalize(ui.item.cargo)) 
                                   $(`#ReportanteCorreoDG_119`).val(toCapitalize(ui.item.correo)) 
                                   $(`#ReportanteUserHashDG_119`).val(toCapitalize(ui.item.id)) 
                                   $(`#ReportanteCargoDG_119`).val(toCapitalize(ui.item.cargo)) 
                               }
                   if(i == 311){//Datos Generales
                                   $(`#ReportanteNameDG_311`).val(toCapitalize(ui.item.nombre_completo))
                                   $(`#ReportanteCorreoDG_311`).val(toCapitalize(ui.item.correo)) 
                                   $(`#ReportanteUserHashDG_311`).val(toCapitalize(ui.item.id)) 
                                   $(`#ReportanteCargoDG_311`).val(toCapitalize(ui.item.cargo)) 
                               }
                    if(i == 312){//Datos Generales
                                   $(`#ReportanteNameDG_311k`).val(toCapitalize(ui.item.nombre_completo))
                                   $(`#ReportanteCorreoDG_311k`).val(toCapitalize(ui.item.correo)) 
                                   $(`#ReportanteUserHashDG_311k`).val(toCapitalize(ui.item.id)) 
                                   $(`#ReportanteCargoDG_311k`).val(toCapitalize(ui.item.cargo)) 
                               }


                console.warn(ui.item)
                //$("#Cargo_"+i).val(ui.item.jobTitle);
                //$("#txt_correo_"+i).val(ui.item.userPrincipalName);
            },300);
        },
        open: function() {
            $( this ).removeClass( "ui-corner-all" ).addClass( "ui-corner-top" );
        },
        close: function() {
            $( this ).removeClass( "ui-corner-top" ).addClass( "ui-corner-all" );

        },
        search: function () {
            $("#spinnerLoadColaborador").show();//showLoading();hideLoading();
            $("#spinnerLoadColaborador_"+i).show(); //para los planes de accion
        },
        response: function () {
            $("#spinnerLoadColaborador").hide();
            $("#spinnerLoadColaborador_"+i).hide(); //para los planes de accion
            // document.getElementById("add_covid_lastname_"+i).focus();
        }
    });
}

/**
 * [fnConfirmarEnviarCorrecionPlanAnualSp3 preguntar si va a enivar la corrección]
 * @return {[type]} [description]
 */
var fnConfirmarEnviarCorrecionPlanAnualSp3 = function()
{
    var CheckProveniente = $('#CheckProveniente').val();
    let resultado = false
    resultado = fnRecorrerListadoEnviarCorreccionPlanAnualSp3()

    if(resultado)
    {
        if(CheckProveniente == 1){
    $('#msj_confirm_fin_corrige_plan').html("Se finalizar&aacute; el Plan Anual y <br>enviar&aacute; correo a las personas <br>seleccionadas")

        }else{
            $('#msj_confirm_fin_corrige_plan').html("Se Guardar&aacute;n los Documentos <br>Cargados a esta Evidencia")
        }
        $('#modalEnviarCorrecionPlanAnualSp3').modal('hide').removeClass('fade')
        $('#modalConfirmarCorrecionPlanAnualSp3').modal('show').addClass('fade')
    }
    else
    {

        if(CheckProveniente == 1){
            verModalError("Faltan Datos","No Puedes Finalizar el Plan Anual "+paObj[istAud].a.Code)

        }else{
            verModalError("Faltan Datos","No Puedes Enviar La Corrección del Plan Anual "+paObj[istAud].a.Code)

        }
    }
    console.warn("resultado ",resultado, )
}

//---------------------------------- start  fnRecorrerListadoEnviarCorreccionPlanAnualSp3() -------------------------------------
var fnRecorrerListadoEnviarCorreccionPlanAnualSp3 = function ()
{
    // check para devolver el resultado
    let result = false
    // cantidad total de filas creadas
    let total = $('#CountPA').val()
    // contador de registros
    let personas = 0
    // contador de registros sin user hash
    let count = 0

    // recorremos el listado de personas
    for (var i = 1; i <= total ; i++)
    {
        // si el campo existe, es decir no fue eliminado
        if($(`#UserHash_${i}`).val()!=undefined)
        {
            personas++
            // si el campo no tiene un UserHash valido
            if($(`#UserHash_${i}`).val()<5 && $(`#Name_${i}`).val()<2) count++
        }
    }

    result = (count==0 && personas > 0) ? true : false

    return result
}
//---------------------------------- end  fnRecorrerListadoEnviarCorreccionPlanAnualSp3() -------------------------------------

var fnNotificarCorrecionPlanAnualSp3 = function()
{
    // OCULTAMOS LA MODAL
    $('#modalConfirmarCorrecionPlanAnualSp3').modal('hide').removeClass('fade')

    $("#preloader").show()

    let count                 = $('#listadoPersonasEnviarCorrecionPlanAnualSp3 .item-tabla').length
    let listadoDestinatarios  = []
    console.log($('#listadoPersonasEnviarCorrecionPlanAnualSp3 .item-tabla').length)

    for (var i = 0; i <= count ; i++)
    {
        // si el campo existe, es decir no fue eliminado
        let obj = []
        if($(`#UserHash_${i}`).val()!=undefined)
        {
            listadoDestinatarios.push({
                "Name"     : $(`#Name_${i}`).val(),
                "UserHash" : $(`#UserHash_${i}`).val(),
                "Cargo"    : $(`#Cargo_${i}`).val(),
                "Correo"   : $(`#Correos_${i}`).val()
            })
        }
    }
    var ubicacion = "";
    if(paObj[istAud].a.Sede != null)
    {
        ubicacion =  paObj[istAud].a.Sede;
    }else{
        if(paObj[istAud].a.Gerencia != null)
        {
            ubicacion =  paObj[istAud].a.Gerencia;
        }
    }

    let body = {
        "listadoDestinatarios": listadoDestinatarios,
        "Id":                   paObj[istAud].a.Id,
        "Code":                 paObj[istAud].a.Code,
        "ubicacion":            ubicacion,
        "Created_By":           getCookie("vtas_id_hash"+sessionStorage.tabVisitasa),
        "emailResponsable":      getCookie("vtas_internal_useruser"+sessionStorage.tabVisitasa),
        "nameResponsable":      getCookie("vtas_fullname"+sessionStorage.tabVisitasa),
        "jobResponsable":        getCookie("vtas_job"+sessionStorage.tabVisitasa)

    }
    var CheckProveniente = $('#CheckProveniente').val();
    let url = '';
    if(CheckProveniente == 1){
        url = apiUrlssoma+"/api/Post-Plan-Anual?code=ZnQh7E2Noeiv1emsJPTvXE5l/qClcMIjv3FNePN8XTRfTY5aOqmSAQ==&httpmethod=FinalizarPlanAnual";
    }else{
        url = apiUrlssoma+"/api/Post-Plan-Anual?code=ZnQh7E2Noeiv1emsJPTvXE5l/qClcMIjv3FNePN8XTRfTY5aOqmSAQ==&httpmethod=CorreccionPlanAnual";
    }

    let headers ={
        "apikey":constantes.apiKey
    }
console.log(body)
    $.ajax({
        method: "POST",
        url:  url,
        data: JSON.stringify(body),
        headers:headers,
        crossDomain: true,
        dataType: "json",
    })
    .done(function(data)
    {
        console.info("data",data)
        // resultado Exitoso
        if(data.Id>0)
        {
            if(CheckProveniente == 1){
                $('#text_msj_confirm_exito').html('Se Finaliz&oacute; el Plan Anual con &Eacute;xito')
            }else{
                $('#text_msj_confirm_exito').html('Se Culmino la Correcci&oacute;n del Plan Anual con &Eacute;xito')
            }
            $('#modalExitoCorreccionPlanAnualSp3').modal('show').addClass('fade')
            fnSp3CargaFiltroEstadoInicialPlanAnual()
        }else
        {

            if(CheckProveniente == 1){
                $("#Sp3VentanaPlanAnualEditView").modal("show").addClass("fade");

                verModalError("Lo Sentimos","No Se Pudo Finalizar el Plan Anual")
            }else{
                verModalError("Lo Sentimos","No Se Pudo Realizar La Correccion.")
             }
        }
    })
    .fail(function( jqXHR, textStatus, errorThrown )
    {
        console.error("fail",textStatus)
        if(CheckProveniente == 1){
            $("#Sp3VentanaPlanAnualEditView").modal("show").addClass("fade");
            verModalError("Lo Sentimos","No Se Pudo Finalizar el Plan Anual")
        }else{
            verModalError("Lo Sentimos","No Se Pudo Realizar La Correccion.")
         }    })
    .always(function( jqXHR, textStatus, errorThrown )
    {
        console.info("always",textStatus)
        $("#preloader").hide()

    });//*/

}




/**
 * [convertir archivo a base64]
 * @param  {[type]} file [description]
 * @return {[type]}      [description]
 */
var getResultSsomaSp3 = function(data) { var result= data.split(','); return result[1]; }
const toBase64SsomaSp3 = file => new Promise((resolve, reject) => {
    const reader = new FileReader();
    reader.readAsDataURL(file);
    reader.onload = () => resolve(reader.result);
    reader.onerror = error => reject(error);
});







//------------------------------------------------  GESION DE ACTIVIDADES -----------------------------------------


/****************************************************************************************
* VISUAL SAT - [2021]
* PROYECTO : SIGTASA
* ESQUEMA : SSOMA
* MODULO : GESTIÓN DE PLAN ANUAL.ACTIVIDADES
* OPERADORES_________________________________________________________________________
* | # | PROGRAMADOR     |  |      FECHA   |  |   HORA   |           CORREO           |
* | 1 | Andy Vásquez    |  |  16/03/2021  |  | 10:26:50 |    caracas1348@gmail.com   |
* |___|_________________|__|______________|__|__________|____________________________|
*
* DESCRIPCION: ARCHIVO FRONT DE FUNCIONALIDAD EN CLIENTE DE LAS OPCIONES INCIDENTES Y 
*              ACCIDENTES- (LISTADO, CREAR, MODIFICAR ELIMINAR, VALIDAR)
*
* ARCHIVOS DE SERVICIOS   ____________________________________
* | # |     MODULO             |  |         NOMBRE            |   
* | 1 |      SSOMA             |  |     Get-Plan-Anual        |**PENDIENTE VA A CAMBIAR
* |___________________________________________________________|
*
* VERSION: 0.1 Beta
*******************************************************************************************/

//alert('Incidentes');




/*------------------------------------------  class PlanAnual ------------------end---------------------------------*/
function Actividad()
 {
   
        this.Id;//: 1
        this.Actividad_Name;
        this.Code;
        this.Cronogramas = [ ]; 
        this.Tareas = [ ]; 
        this.Objetivo_PlanId;
        this.Peso;
        this.ResponsableCargo;
        this.ResponsableCorreo;
        this.ResponsableId;
        this.ResponsableName;
        
}
//.............................................. CLASE classHallazgo ...........................................


 function Tarea()
 {//__________________________________________________  CLASE Tarea  ____________________________________________

    this.ActividadId;
    this.Id;
    this.Color;
    this.Estado;
    this.IdEstado;
    this.Evidencia_Name;
    this.Fecha_Ejecutada_Fin;
    this.Fecha_Ejecutada_Ini;
    this.Fecha_Programada_Fin;
    this.Fecha_Programada_Ini;
    this.ResponsableId;
    this.ResponsableName;


 }//__________________________________________________  CLASE Tarea  ____________________________________________










var nActs = 0;
var iddd2;
var Actividades = [];//manejarlo mejor con una clase
var istObj;//contiene el id del objetivo actual trabajado
var istSobj;//contiene el id del subobjetivo actual trabajado
var istAct;//contiene el id de la Actividad que actualmente se trabaja
var istTar;//contiene el id de la Tarea que actualmente se trabaja
var ObjectUsing;//contiene el Objeto en Edicion
var NumObjectUsing;//contiene el numero del Objeto en Edicion
let CC_Cronograma = false;
let base64_CC="";




function fnSp3agregaActividadObjetivoPlan(ii,idPlan, itemx,posobject )
{//------------------------------------- ini   fnSp3agregaObjetivoSubojetivo() -------------------------------------
    
  if(ii != -1)   
    {//###############################################################################################################################################################################

       //alert("ii = "+ii+ " idPlan = "+idPlan+" itemx = "+itemx)
         //vamos a meter una fila de prueba
        itemx.Actividad_Name;//: "Actividad IMportante aaaa"
        //item.Code: "ACT1"
        //item.Cronogramas: (12) [{…}, {…}, {…}, {…}, {…}, {…}, {…}, {…}, {…}, {…}, {…}, {…}]
        itemx.Id;//: 1
        itemx.Objetivo_PlanId;//: 1
        itemx.Peso;//: 15
        itemx.ResponsableCargo;//: "Almacenist"
        itemx.ResponsableCorreo;//: "caracas1348@gmail.com"
        itemx.ResponsableId;//: "1"
        itemx.ResponsableName;//: "Andy Vasquez"


           // Actividades[Actividades.length] = $('#txt_obj_subobj').val();
             //var objjt = "Objetivo "+Objetivos.length+" : "+$('#txt_obj_subobj').val();
            // iddd2 = 'itemAct_'+ii+"_"+idPlan
             iddd2 = 'itemAct_'+idPlan+"_"+ii

        //var Id = 25;
        //var nAct = 10;
        var html2 = '     ';

        if(nActs == 0)
        {
            $('#body-tabla-list-EvalAud2').html("     "); nObjSub = 1;
        }

      var item = ii+1;
      var tx_act =  `
          <div class="form-group col-12 border text-left" style="  height: auto !important; width: 100% !important; !important; border-color:#DEE2E6 !important;  margin:0px 0px 0px !important; padding: 0px 0px !important;"  id = "divitem">
          <textarea class="text-justify textarea-fecha2 autocompletecollaborator"
          onBlur="AgregarinformacionObjActividad(1,$(this).val(),${istObj},${istSobj},${ii})" style="height: 36px; width:95%; margin: 8px 0px 8px 8px !important; padding: 0px 0px 0px 0px !important; font-size: 13px !important; font-weight: bold; color:#534b4b; background-color:#F2F2F2 !important;"  id="itemAct${ii}"  >${itemx.Actividad_Name}</textarea>
        </div>
          `;

        var tx_porc =  `
            <div class="d-flex justify-content-center align-items-center form-group col-12 border text-center" style="  height: auto !important; width: 92% !important; !important; border-color:#DEE2E6 !important;  margin:0px 0px 0px !important; padding: 0px 0px !important;"  id = "divitem">
            <input onkeyup="registraActividadNueva('itemPeso${ii}','peso',${ii})" onBlur="AgregarinformacionObjActividad(2,$(this).val(),${istObj},${istSobj} ,${ii},'itemPeso${ii}')" class="text-justify textarea-fecha2 autocompletecollaborator" value='${itemx.Peso}'
                style="height: 36px; text-align:center; width:85%; margin: 4px !important; padding: 0px 0px 0px 0px !important; font-size: 13px !important; font-weight: bold; color:#534b4b; background-color:#F2F2F2 !important;"  id="itemPeso${ii}"  name = "itemPeso${ii}"></input>
                <div class="input-group-append">
                <span class="input-group-text"> %</span>
              </div>
              </div>
              
            `;

        var tx_resp =  `
        <div class="form-group col-12 border text-left" style="  height: auto !important; width: 98% !important; !important; border-color:#DEE2E6 !important;  margin:0px 0px 0px !important; padding: 0px 0px 0px 0px !important;"  id = "divTarea">
        <input id = 'PaResponsableName${ii}' class="text-justify textarea-fecha2 autocompletecollaborator" value = '${itemx.ResponsableName}' onchange="fnSp3onchangeColor('divf6')"
            style="height: 36px; width:90%; margin: 8px 0px 8px 8px !important; padding: 0px 0px 0px 0px !important; font-size: 13px !important; font-weight: bold; color: #534b4b; background-color:#F2F2F2 !important;"  "></input>
      </div>
            `;

            var visible = '';
            if(objNewPA.Estado_PlanId == 1){
             visible = `style="display:none;"` ;
            }
    
        //var iddthis = "itemActs_"+nActs;

            html2 += `

            <div id = "${iddd2}"  class="item-tabla p-2" style="z-index: 1;display:relative;  padding: 0px !important; margin: 10px 8px 0px !important; width: 1223px !important;">
            <div class="row m-0 justify-content-between align-items-center tbody_trainning">
                <div class="col-12 text-center" style="font-size: 15px; padding: 4px !important; ">
                    <div class="row">



                    <table width = "100%" border="0">
                        <tr >
                            <td width = "5%" align="center"><div id="c1TabGeny" class="text-left "  style='margin: 0px 0px 0px 18px !important;  font-size: 14px !important; '>${item}</div></td>
                            <td width = "38%" align="center"><div id="c3TabGeny" class="text-left "   style='color:#000;'>${tx_act}</div></td>
                            <td width = "8%" align="center"><div id="c3TabGeny" class="text-left "   style='color:#000;' >${tx_porc}</div></td>
                            <td width = "25%" align="center"><div id="c3TabGeny" class="text-left "  style='color:#000;'>${tx_resp}</div></td>


                            <td width = "6%" align="center"><div id="c4TabGeny" class="text-center lbCabezaTabla"  >
                                <button type='button' title='Crear Tareas de la Actividad' onclick="fnSp3NuevasTareaActividadesPlan(${itemx.Id})"   class='btn-circle btn_read border-0' style='background-color:#ff9f47 !important;' id='btn_ActividadPlan${itemx.Id}'>
                                    <img src='./images/iconos/test6.svg' class='ojo-1'  >
                                </button>
                            </td>

                            <td width = "6%" align="center"><div id="c4TabGeny" class="text-center lbCabezaTabla"  >
                                <button type='button' title='Crear Cronograma de Actividades' onclick="fnSp3agregaCronogramaActividadObjetivoPlan(${itemx.Id})"   class='btn-circle btn_read border-0' style='background-color:#05beee !important;' id='btn_ActividadPlan${itemx.Id}'>
                                    <img src='./images/iconos/calendar2.svg' class='ojo-1'  >
                                </button>
                            </td>

                            <td width = "6%" align="center"><div id="c4TabGeny" class="text-center lbCabezaTabla"  >
                                    <button type='button' title='Editar Responsable' onclick="fnSp3EditarActividadPlanAnual(${itemx.Id})"   class='btn-circle btn_read border-0' style='background-color:#58c25d !important;' id='btn_verPlanAnual${itemx.Id}'>
                                        <img src='./images/iconos/edit_1.svg' class='ojo-1'  >
                                    </button>
                            </td>

                            <td ${visible} width = "6%" align="center"><div id="c4TabGeny" class="text-center lbCabezaTabla"  >
                                    <button type='button' title='Eliminar Actividad${iddd2}' onclick="fnSp3EliminarActividadPlanAnual('${iddd2}')"   class='btn-circle btn_read border-0' style='background-color:#ff6767 !important;' id='btn_verEliminarPlan${itemx.Id}'>
                                        <img src='./images/iconos/delete.svg' class='ojo-1'  >
                                    </button>
                            </td>

                            <td width = "1%" align="center"><div id="c7TabGeny" class="text-center lbCabezaTabla"  >&nbsp</div></td>


                        </tr>
                    </table>





                        </div>
                    </div>
                </div>
            </div>


            `;
            $('#body-tabla-list-EvalAud2').append(html2);
            getPersonResponsablePa($("#PaResponsableName"+ii),ii,1,istObj, istSobj, ii);

    }//###############################################################################################################################################################################
    else
    {//###############################################################################################################################################################################
        var ty;
        var nActsN
        var trama;
         if(istSobj == null)//es un objetivo
         {
             
             ty = 0;
            console.log(istObj,objNewPA.Objetivos)
             nActsN = objNewPA.Objetivos[istObj].Actividades.length; 
             objNewPA.Objetivos[istObj].Actividades[nActsN] = new Actividad();
             objNewPA.Objetivos[istObj].Actividades[nActsN].Id = 0;
            // objNewPA.Objetivos[istObj].Actividades[nActsN].Id = nActsN;
            objNewPA.Objetivos[istObj].Actividades[nActsN].Peso = 0;
            objNewPA.Objetivos[istObj].Actividades[nActsN].Actividad_Name = "";
            objNewPA.Objetivos[istObj].Actividades[nActsN].ResponsableName = "";
            
            // iddd2 = 'itemAct_'+ty+"_"+nActsN;
             iddd2 = 'itemAct_'+istObj+"_"+nActsN;
                      //Actualiza el contador de actividades
                      console.log("#nAct_obj_"+(istObj))
         $("#nAct_obj_"+(istObj+1)).html(nActsN+1)
         }
         else
         {//es un subobjetivo
             nActsN = objNewPA.Objetivos[istObj].SubObjetivos[istSobj].Actividades.length;
             objNewPA.Objetivos[istObj].SubObjetivos[istSobj].Actividades[nActsN] = new Actividad();
          //   objNewPA.Objetivos[istObj].SubObjetivos[istSobj].Actividades[nActsN].Id = nActsN;
             objNewPA.Objetivos[istObj].SubObjetivos[istSobj].Actividades[nActsN].Id = 0;
             objNewPA.Objetivos[istObj].SubObjetivos[istSobj].Actividades[nActsN].Peso = 0;
             objNewPA.Objetivos[istObj].SubObjetivos[istSobj].Actividades[nActsN].Actividad_Name = "0";
             objNewPA.Objetivos[istObj].SubObjetivos[istSobj].Actividades[nActsN].ResponsableName = "0";
             //iddd2 = 'itemAct_'+ty+"_"+nActsN;
             ResponsableName
             iddd2 = 'itemAct_'+istObj+"_"+istSobj+"_"+nActsN;

                      //Actualiza el contador de actividades
         $("#nAct_subobj_"+(istObj)+"_"+(istSobj+1)).html(nActsN+1)
         }

         
         

         

         

        var html2 = '     ';

        
        if(nActsN == 0)
        {
            $('#body-tabla-list-EvalAud2').html("     "); nObjSub = 1;
        }

      var item = nActsN+1;
      //var itemId = 
      var tx_act =  `
          <div class="form-group col-12 border text-left" style="  height: auto !important; width: 100% !important; !important; border-color:#DEE2E6 !important;  margin:0px 0px 0px !important; padding: 0px 0px !important;"  id = "divitem">
          <textarea onkeyup="registraActividadNueva('itemAct${item}','actividad')" class="text-justify textarea-fecha2 autocompletecollaborator" onBlur="AgregarinformacionObjActividad(1,$(this).val(),${istObj},${istSobj} ,${nActsN})"
              style="height: 36px; width:95%; margin: 8px 0px 8px 8px !important; padding: 0px 0px 0px 0px !important; font-size: 13px !important; font-weight: bold; color:#534b4b; background-color:#FFF !important;"  id="itemAct${item}"  ></textarea>
        </div>
          `;//background-color:#F2F2F2

        var tx_porc =  `
            <div class="d-flex justify-content-center align-items-center form-group col-12 border text-center" style="  height: auto !important; width: 92% !important; !import important;  margin:0px 0px 0px !important; padding: 0px 0px !important;"  id = "divitem">
            <input  onkeyup="registraActividadNueva('itemPeso${item}','peso',${nActsN})" onBlur="AgregarinformacionObjActividad(2,$(this).val(),${istObj},${istSobj} ,${nActsN},'itemPeso${item}')" class="text-justify textarea-fecha2 autocompletecollaborator" value=''
                style="height: 36px; text-align:center; width:85%; margin: 4px !important; padding: 0px 0px 0px 0px !important; font-size: 13px !important; font-weight: bold; color:#534b4b; background-color:#FFF !important;"  id="itemPeso${item}" ></input>
                <div class="input-group-append">
                <span class="input-group-text"> %</span>
              </div>
                </div>
            `;

        var tx_resp =  `
        <div class="form-group col-12 border text-left" style="  height: auto !important; width: 98% !important; !important; border-color:#DEE2E6 !important;  margin:0px 0px 0px !important; padding: 0px 0px 0px 0px !important;"  id = "RespAct${item}">
        <input class="text-justify textarea-fecha2 autocompletecollaborator " value = ' '
            style="height: 36px; width:90%; margin: 8px 0px 8px 8px !important; padding: 0px 0px 0px 0px !important; font-size: 13px !important; font-weight: bold; color: #534b4b; background-color:#FFF !important;" 
            title='Teclea 3 letras del nombre y luego seleccione' id="PaResponsableName${item}"  name = "PaResponsableName${item}">
        </input>
            <input type="hidden" value="" id="PaResponsableCargo${item}">
            <input type="hidden" value="" id="PaResponsableCorreo${item}">
            <input type="hidden" value="" id="PaResponsableUserHash${item}">






      </div>
            `;

           
            //getPersonResponsable($("#ResponsableName"),1);
        //var iddthis = "itemActs_"+nActs;
        var visible = '';
        if(objNewPA.Estado_PlanId == 1){
         visible = `style="display:none;"` ;
        }

            html2 += `

            <div id = "${iddd2}"  class="item-tabla p-2" style="z-index: 1;display:relative;  padding: 0px !important; margin: 10px 8px 0px !important; width: 1223px !important;">
            <div class="row m-0 justify-content-between align-items-center tbody_trainning">
                <div class="col-12 text-center" style="font-size: 15px; padding: 4px !important; ">
                    <div class="row">



                    <table width = "100%" border="0">
                        <tr >
                            <td width = "5%" align="center"><div id="c1TabGeny" class="text-left "  style='margin: 0px 0px 0px 18px !important;  font-size: 14px !important; '>${item}</div></td>
                            <td width = "38%" align="center"><div id="c3TabGeny" class="text-left "   style='color:#000;'>${tx_act}</div></td>
                            <td width = "8%" align="center"><div id="c3TabGeny" class="text-left "   style='color:#000;' >${tx_porc}</div></td>
                            <td width = "25%" align="center"><div id="c3TabGeny" class="text-left "  style='color:#000;'>${tx_resp}</div></td>


                            <td width = "6%" align="center"><div id="c4TabGeny" class="text-center lbCabezaTabla"  >
                                <button type='button' title='Crear Tareas de la Actividad' onclick="fnSp3NuevasTareaActividadesPlan(${nActsN})"   class='btn-circle btn_read border-0' style='background-color:#ff9f47 !important;' id='btn_ActividadPlan${itemx.Id}'>
                                    <img src='./images/iconos/test6.svg' class='ojo-1'  >
                                </button>
                            </td>

                            <td width = "6%" align="center"><div id="c4TabGeny" class="text-center lbCabezaTabla"  >
                                <button type='button' title='Crear Cronograma de Actividades' onclick="fnSp3agregaCronogramaActividadObjetivoPlan(${nActsN})"   class='btn-circle btn_read border-0' style='background-color:#05beee !important;' id='btn_ActividadPlan${itemx.Id}'>
                                    <img src='./images/iconos/calendar2.svg' class='ojo-1'  >
                                </button>
                            </td>

                            <td width = "6%" align="center"><div id="c4TabGeny" class="text-center lbCabezaTabla"  >
                                    <button type='button' title='Editar Responsable' onclick="fnSp3EditarActividadPlanAnual(${nActsN})"   class='btn-circle btn_read border-0' style='background-color:#58c25d !important;' id='btn_verPlanAnual${itemx.Id}'>
                                        <img src='./images/iconos/edit_1.svg' class='ojo-1'  >
                                    </button>
                            </td>

                            <td width = "6%" align="center"><div id="c4TabGeny" class="text-center lbCabezaTabla"  >
                                    <button type='button' title='Eliminar Actividad${iddd2}' onclick="fnSp3EliminarActividadPlanAnual('${iddd2}')"   class='btn-circle btn_read border-0' style='background-color:#ff6767 !important;' id='btn_verEliminarPlan${itemx.Id}'>
                                        <img src='./images/iconos/delete.svg' class='ojo-1'  >
                                    </button>
                            </td>

                            <td width = "1%" align="center"><div id="c7TabGeny" class="text-center lbCabezaTabla"  >&nbsp</div></td>


                        </tr>
                    </table>





                        </div>
                    </div>
                </div>
            </div>


            `;

            $('#itemAct'+item).focus();
            $('#itemAct'+item).select();
             
            $('#body-tabla-list-EvalAud2').append(html2);

            getPersonResponsablePa($("#PaResponsableName"+item),item,1,istObj, istSobj, nActsN);
            $("#PaResponsableName"+item).val('');
    }//###############################################################################################################################################################################

    
     

  



    nActs++;

console.log(objNewPA)

if(accPlanAnual == 1)
{
    if(objNewPA.Estado_PlanId === 2){
    $('.showBtnEdit').show();
    $('.noShowBtnEdit').hide();
    $('.disabledBtnEdit').attr('disabled',true);
    $('.disabledBtnEdit').css('background-color','#b2b2b2');
    }else  if(objNewPA.Estado_PlanId === 1){
        $('.showBtnEdit').hide();
        $('.noShowBtnEdit').show();
        }
    
}else{
    $('.showBtnEdit').hide();
    $('.noShowBtnEdit').show();
    

}
}//------------------------------------- fini   fnSp3agregaObjetivoSubojetivo() -------------------------------------


function fnSp3agregaActividadObjetivoPlanEditar(ii,idPlan, itemx,posobject )
{//------------------------------------- ini   fnSp3agregaObjetivoSubojetivo() -------------------------------------
    console.log(ii,idPlan, itemx,posobject )
  if(ii != -1)   
    {//###############################################################################################################################################################################

       //alert("ii = "+ii+ " idPlan = "+idPlan+" itemx = "+itemx)
         //vamos a meter una fila de prueba
        itemx.Actividad_Name;//: "Actividad IMportante aaaa"
        //item.Code: "ACT1"
        //item.Cronogramas: (12) [{…}, {…}, {…}, {…}, {…}, {…}, {…}, {…}, {…}, {…}, {…}, {…}]
        itemx.Id;//: 1
        itemx.Objetivo_PlanId;//: 1
        itemx.Peso;//: 15
        itemx.ResponsableCargo;//: "Almacenist"
        itemx.ResponsableCorreo;//: "caracas1348@gmail.com"
        itemx.ResponsableId;//: "1"
        itemx.ResponsableName;//: "Andy Vasquez"


           // Actividades[Actividades.length] = $('#txt_obj_subobj').val();
             //var objjt = "Objetivo "+Objetivos.length+" : "+$('#txt_obj_subobj').val();
            // iddd2 = 'itemAct_'+ii+"_"+idPlan
             iddd2 = 'itemAct_'+idPlan+"_"+ii

        //var Id = 25;
        //var nAct = 10;
        var html2 = '     ';

        if(nActs == 0)
        {
            $('#body-tabla-list-EvalAud2').html("     "); nObjSub = 1;
        }

      var item = ii+1;
      var tx_act =  `
          <div class="form-group col-12 border text-left" style="  height: auto !important; width: 100% !important; !important; border-color:#DEE2E6 !important;  margin:0px 0px 0px !important; padding: 0px 0px !important;"  id = "divitem">
          <textarea class="text-justify textarea-fecha2 autocompletecollaborator"
          onBlur="AgregarinformacionObjActividad(1,$(this).val(),${istObj},${istSobj},${ii})" style="height: 36px; width:95%; margin: 8px 0px 8px 8px !important; padding: 0px 0px 0px 0px !important; font-size: 13px !important; font-weight: bold; color:#534b4b; background-color:#F2F2F2 !important;"  id="itemAct${ii}"  >${itemx.Actividad_Name}</textarea>
        </div>
          `;

        var tx_porc =  `
            <div class="d-flex justify-content-center align-items-center form-group col-12 border text-center" style="  height: auto !important; width: 92% !important; !important; border-color:#DEE2E6 !important;  margin:0px 0px 0px !important; padding: 0px 0px !important;"  id = "divitem">
            <input onkeyup="registraActividadNueva('itemPeso${ii}','peso',${ii})" onBlur="AgregarinformacionObjActividad(2,$(this).val(),${istObj},${istSobj} ,${ii},'itemPeso${item}')" class="text-justify textarea-fecha2 autocompletecollaborator" value='${itemx.Peso}'
                style="height: 36px; text-align:center; width:85%; margin: 4px !important; padding: 0px 0px 0px 0px !important; font-size: 13px !important; font-weight: bold; color:#534b4b; background-color:#F2F2F2 !important;"  id="itemPeso${ii}"  name = "itemPeso${ii}"></input>
                <div class="input-group-append">
                <span class="input-group-text"> %</span>
              </div>
                </div>
            `;

        var tx_resp =  `
        <div class="form-group col-12 border text-left" style="  height: auto !important; width: 98% !important; !important; border-color:#DEE2E6 !important;  margin:0px 0px 0px !important; padding: 0px 0px 0px 0px !important;"  id = "divTarea">
        <input id = 'PaResponsableName${ii}' class="disabledBtnEditResp text-justify textarea-fecha2 autocompletecollaborator" value = '${itemx.ResponsableName}' onchange="fnSp3onchangeColor('divf6')"
            style="height: 36px; width:90%; margin: 8px 0px 8px 8px !important; padding: 0px 0px 0px 0px !important; font-size: 13px !important; font-weight: bold; color: #534b4b; background-color:#F2F2F2 !important;"  "></input>
      </div>
            `;


        //var iddthis = "itemActs_"+nActs;
        var visible = '';
        if(objNewPA.Estado_PlanId == 1){
         visible = `style="display:none;"` ;
        }

            html2 += `

            <div id = "${iddd2}"  class="item-tabla p-2" style="z-index: 1;display:relative;  padding: 0px !important; margin: 10px 8px 0px !important; width: 1223px !important;">
            <div class="row m-0 justify-content-between align-items-center tbody_trainning">
                <div class="col-12 text-center" style="font-size: 15px; padding: 4px !important; ">
                    <div class="row">



                    <table width = "100%" border="0">
                        <tr >
                            <td width = "5%" align="center"><div id="c1TabGeny" class="text-left "  style='margin: 0px 0px 0px 18px !important;  font-size: 14px !important; '>${item}</div></td>
                            <td width = "38%" align="center"><div id="c3TabGeny" class="text-left "   style='color:#000;'>${tx_act}</div></td>
                            <td width = "8%" align="center"><div id="c3TabGeny" class="text-left "   style='color:#000;' >${tx_porc}</div></td>
                            <td width = "21%" align="center"><div id="c3TabGeny" class="text-left "  style='color:#000;'>${tx_resp}</div></td>


                            <td width = "6%" class="showBtnEdit" style="display: none;" align="center"><div id="c4TabGeny" class="text-center lbCabezaTabla"  >
                                <button type='button' title='Crear Tareas de la Actividad' onclick="mostrarVentanaControlCambios(${ii},${item})"   class='btn-circle btn_read border-0' style='background-color:#05beee !important;' id='btn_ActividadPlan${itemx.Id}'>
                                    <img src='./images/iconos/settings.svg' class='ojo-1'  >
                                </button>
                            </td>

                            <td width = "6%" align="center"><div id="c4TabGeny" class="text-center lbCabezaTabla"  >
                            <button type='button' title='Crear Tareas de la Actividad' onclick="fnSp3NuevasTareaActividadesPlanEditar(${ii})"   class='btn-circle btn_read border-0' style='background-color:#ff9f47 !important;' id='btn_ActividadPlan${itemx.Id}'>
                                <img src='./images/iconos/test6.svg' class='ojo-1'  >
                            </button>
                        </td>

                            <td width = "6%" align="center"><div id="c4TabGeny" class="text-center lbCabezaTabla"  >
                                <button type='button' title='Crear Cronograma de Actividades' onclick="fnSp3agregaCronogramaActividadObjetivoPlanEditar(${ii})"  id="btn_esdirCronograma_${ii}" class='disabledBtnEdit btn-circle btn_read border-0' style='background-color:#05beee !important;' id='btn_ActividadPlan${itemx.Id}'>
                                    <img src='./images/iconos/calendar2.svg' class='ojo-1'  >
                                </button>
                            </td>

                            <td width = "6%" align="center"><div id="c4TabGeny" class="text-center lbCabezaTabla"  >
                                    <button type='button' title='Editar Responsable' onclick="fnSp3EditarActividadPlanAnual(${ii})"   class='btn-circle btn_read border-0' style='background-color:#58c25d !important;' id='btn_verPlanAnual${itemx.Id}'>
                                        <img src='./images/iconos/edit_1.svg' class='ojo-1'  >
                                    </button>
                            </td>

                            <td width = "6%" align="center"><div id="c4TabGeny" class="text-center lbCabezaTabla"  >
                                    <button type='button' title='Eliminar Actividad${iddd2}' onclick="fnSp3EliminarActividadPlanAnualEdit('${iddd2}')"   class='disabledBtnEdit btn-circle btn_read border-0' style='background-color:#ff6767 !important;' id='btn_verEliminarPlan${itemx.Id}'>
                                        <img src='./images/iconos/delete.svg' class='ojo-1'  >
                                    </button>
                            </td>

                            <td width = "1%" align="center"><div id="c7TabGeny" class="text-center lbCabezaTabla"  >&nbsp</div></td>


                        </tr>
                    </table>





                        </div>
                    </div>
                </div>
            </div>


            `;
            $('#body-tabla-list-EvalAud2').append(html2);
            getPersonResponsablePa($("#PaResponsableName"+ii),ii,1,istObj, istSobj, ii);

    }//###############################################################################################################################################################################
    else
    {//###############################################################################################################################################################################
        var ty;
        var nActsN
        var trama;
         if(istSobj == null)//es un objetivo
         {
             
             ty = 0;
            console.log(istObj,objNewPA.Objetivos)
             nActsN = objNewPA.Objetivos[istObj].Actividades.length; 
             objNewPA.Objetivos[istObj].Actividades[nActsN] = new Actividad();
             objNewPA.Objetivos[istObj].Actividades[nActsN].Id = 0;
             //objNewPA.Objetivos[istObj].Actividades[nActsN].Id = nActsN;
             objNewPA.Objetivos[istObj].Actividades[nActsN].Peso = 0;
             objNewPA.Objetivos[istObj].Actividades[nActsN].Actividad_Name = "";
             objNewPA.Objetivos[istObj].Actividades[nActsN].ResponsableName = "";
            // iddd2 = 'itemAct_'+ty+"_"+nActsN;
             iddd2 = 'itemAct_'+istObj+"_"+nActsN;
                      //Actualiza el contador de actividades
                      console.log("#nAct_obj_"+(istObj))

         $("#nAct_obj_"+(istObj+1)).html(nActsN+1)
         }
         else
         {//es un subobjetivo
             nActsN = objNewPA.Objetivos[istObj].SubObjetivos[istSobj].Actividades.length;
             objNewPA.Objetivos[istObj].SubObjetivos[istSobj].Actividades[nActsN] = new Actividad();
             objNewPA.Objetivos[istObj].SubObjetivos[istSobj].Actividades[nActsN].Id = 0;
             //objNewPA.Objetivos[istObj].SubObjetivos[istSobj].Actividades[nActsN].Id = nActsN;
             objNewPA.Objetivos[istObj].SubObjetivos[istSobj].Actividades[nActsN].Peso = 0;
             objNewPA.Objetivos[istObj].SubObjetivos[istSobj].Actividades[nActsN].Actividad_Name = "";
             objNewPA.Objetivos[istObj].SubObjetivos[istSobj].Actividades[nActsN].ResponsableName = "";
             //iddd2 = 'itemAct_'+ty+"_"+nActsN;
             iddd2 = 'itemAct_'+istObj+"_"+istSobj+"_"+nActsN;

                      //Actualiza el contador de actividades
         $("#nAct_subobj_"+(istObj)+"_"+(objNewPA.Objetivos[istObj].SubObjetivos[istSobj].Id+1)).html(nActsN+1)
         }

         
         

         

         

        var html2 = '     ';

        
        if(nActsN == 0)
        {
            $('#body-tabla-list-EvalAud2').html("     "); nObjSub = 1;
        }

      var item = nActsN+1;
      //var itemId = 
      var tx_act =  `
          <div class="form-group col-12 border text-left" style="  height: auto !important; width: 100% !important; !important; border-color:#DEE2E6 !important;  margin:0px 0px 0px !important; padding: 0px 0px !important;"  id = "divitem">
          <textarea onkeyup="registraActividadNuevaEditar('itemAct${item}','actividad')" class="text-justify textarea-fecha2 autocompletecollaborator" onBlur="AgregarinformacionObjActividad(1,$(this).val(),${istObj},${istSobj} ,${nActsN})"
              style="height: 36px; width:95%; margin: 8px 0px 8px 8px !important; padding: 0px 0px 0px 0px !important; font-size: 13px !important; font-weight: bold; color:#534b4b; background-color:#FFF !important;"  id="itemAct${item}"  ></textarea>
        </div>
          `;//background-color:#F2F2F2

        var tx_porc =  `
            <div class="d-flex justify-content-center align-items-center form-group col-12 border text-center" style="  height: auto !important; width: 92% !important; !import important;  margin:0px 0px 0px !important; padding: 0px 0px !important;"  id = "divitem">
            <input  onkeyup="registraActividadNuevaEditar('itemPeso${item}','peso',${nActsN})" onBlur="AgregarinformacionObjActividad(2,$(this).val(),${istObj},${istSobj} ,${nActsN},'itemPeso${item}')" class="text-justify textarea-fecha2 autocompletecollaborator" value=''
                style="height: 36px; text-align:center; width:85%; margin: 4px !important; padding: 0px 0px 0px 0px !important; font-size: 13px !important; font-weight: bold; color:#534b4b; background-color:#FFF !important;"  id="itemPeso${item}" ></input>
          
                <div class="input-group-append">
                <span class="input-group-text"> %</span>
              </div>
                    </div>
            `;

        var tx_resp =  `
        <div class="form-group col-12 border text-left" style="  height: auto !important; width: 98% !important; !important; border-color:#DEE2E6 !important;  margin:0px 0px 0px !important; padding: 0px 0px 0px 0px !important;"  id = "RespAct${item}">
        <input class=" disabledBtnEditResp text-justify textarea-fecha2 autocompletecollaborator " value = ' '
            style="height: 36px; width:90%; margin: 8px 0px 8px 8px !important; padding: 0px 0px 0px 0px !important; font-size: 13px !important; font-weight: bold; color: #534b4b; background-color:#FFF !important;" 
            title='Teclea 3 letras del nombre y luego seleccione' id="PaResponsableName${item}"  name = "PaResponsableName${item}">
        </input>
            <input type="hidden" value="" id="PaResponsableCargo${item}">
            <input type="hidden" value="" id="PaResponsableCorreo${item}">
            <input type="hidden" value="" id="PaResponsableUserHash${item}">






      </div>
            `;

           
            //getPersonResponsable($("#ResponsableName"),1);
        //var iddthis = "itemActs_"+nActs;
        var visible = '';
        if(objNewPA.Estado_PlanId == 1){
         visible = `style="display:none;"` ;
        }

            html2 += `

            <div id = "${iddd2}"  class="item-tabla p-2" style="z-index: 1;display:relative;  padding: 0px !important; margin: 10px 8px 0px !important; width: 1223px !important;">
            <div class="row m-0 justify-content-between align-items-center tbody_trainning">
                <div class="col-12 text-center" style="font-size: 15px; padding: 4px !important; ">
                    <div class="row">



                    <table width = "100%" border="0">
                        <tr >
                            <td width = "5%" align="center"><div id="c1TabGeny" class="text-left "  style='margin: 0px 0px 0px 18px !important;  font-size: 14px !important; '>${item}</div></td>
                            <td width = "38%" align="center"><div id="c3TabGeny" class="text-left "   style='color:#000;'>${tx_act}</div></td>
                            <td width = "8%" align="center"><div id="c3TabGeny" class="text-left "   style='color:#000;' >${tx_porc}</div></td>
                            <td width = "21%" align="center"><div id="c3TabGeny" class="text-left "  style='color:#000;'>${tx_resp}</div></td>

                            <td width = "6%" align="center" class="showBtnEdit" style="display: none;"><div id="c4TabGeny" class="text-center lbCabezaTabla"  >
                            <button type='button' title='Crear Tareas de la Actividad' onclick="mostrarVentanaControlCambios(${ii},${item})"   class='btn-circle btn_read border-0' style='background-color:#05beee !important;' id='btn_ActividadPlan${itemx.Id}'>
                                <img src='./images/iconos/settings.svg' class='ojo-1'  >
                            </button>
                        </td>
                            <td width = "6%" align="center"><div id="c4TabGeny" class="text-center lbCabezaTabla"  >
                                <button type='button' title='Crear Tareas de la Actividad' onclick="fnSp3NuevasTareaActividadesPlanEditar(${nActsN})"   class='btn-circle btn_read border-0' style='background-color:#ff9f47 !important;' id='btn_ActividadPlan${itemx.Id}'>
                                    <img src='./images/iconos/test6.svg' class='ojo-1'  >
                                </button>
                            </td>

                            <td width = "6%" align="center"><div id="c4TabGeny" class="text-center lbCabezaTabla"  >
                                <button type='button'  title='Crear Cronograma de Actividades' onclick="fnSp3agregaCronogramaActividadObjetivoPlanEditar(${nActsN})" id="btn_esdirCronograma_${nActsN}"  class='disabledBtnEdit btn-circle btn_read border-0' style='background-color:#05beee !important;' id='btn_ActividadPlan${itemx.Id}'>
                                    <img src='./images/iconos/calendar2.svg' class='ojo-1'  >
                                </button>
                            </td>

                            <td width = "6%" align="center"><div id="c4TabGeny" class="text-center lbCabezaTabla"  >
                                    <button type='button' title='Editar Responsable' onclick="fnSp3EditarActividadPlanAnual(${nActsN})"   class='btn-circle btn_read border-0' style='background-color:#58c25d !important;' id='btn_verPlanAnual${itemx.Id}'>
                                        <img src='./images/iconos/edit_1.svg' class='ojo-1'  >
                                    </button>
                            </td>

                            <td ${visible} width = "6%" align="center"><div id="c4TabGeny" class="text-center lbCabezaTabla"  >
                                    <button type='button' title='Eliminar Actividad${iddd2}' onclick="fnSp3EliminarActividadPlanAnualEdit('${iddd2}')"   class=' disabledBtnEdit btn-circle btn_read border-0' style='background-color:#ff6767 !important;' id='btn_verEliminarPlan${itemx.Id}'>
                                        <img src='./images/iconos/delete.svg' class='ojo-1'  >
                                    </button>
                            </td>

                            <td width = "1%" align="center"><div id="c7TabGeny" class="text-center lbCabezaTabla"  >&nbsp</div></td>


                        </tr>
                    </table>





                        </div>
                    </div>
                </div>
            </div>


            `;

            $('#itemAct'+item).focus();
            $('#itemAct'+item).select();
             
            $('#body-tabla-list-EvalAud2').append(html2);

            getPersonResponsablePa($("#PaResponsableName"+item),item,1,istObj, istSobj, nActsN);
            $("#PaResponsableName"+item).val('');
    }//###############################################################################################################################################################################

    
     

  



    nActs++;

console.log(objNewPA)
if(accPlanAnual == 1)
{
    if(objNewPA.Estado_PlanId === 2){
    $('.showBtnEdit').show();
    $('.noShowBtnEdit').hide();
    $('.disabledBtnEdit').attr('disabled',true);
    $('.disabledBtnEdit').css('background-color','#b2b2b2');
    $('.disabledBtnEditResp').attr('disabled',true);
    $('.disabledBtnEditResp').css('background-color','#f7f7f7');
    }else  if(objNewPA.Estado_PlanId === 1){
        $('.showBtnEdit').hide();
        $('.noShowBtnEdit').show();
        }
    
}else{
    $('.showBtnEdit').hide();
    $('.noShowBtnEdit').show();
    

}

}//------------------------------------- fini   fnSp3agregaObjetivoSubojetivo() -------------------------------------


function AgregarinformacionObjActividad(tipo,value, nobjj, nsobjj,nactt,idinput)
{
    console.log(tipo,value, nobjj, nsobjj,nactt);
    switch (tipo) {
        case 1:
            if(istSobj == null)//es un objetivo
            {
                objNewPA.Objetivos[nobjj].Actividades[nactt].Actividad_Name = value;
            }
            else
            {//es un subobjetivo
               
                objNewPA.Objetivos[nobjj].SubObjetivos[nsobjj].Actividades[nactt].Actividad_Name = value;
            }
            break;
    
        case 2:
            if(istSobj == null)//es un objetivo
            {
                objNewPA.Objetivos[nobjj].Actividades[nactt].Peso = value;

            }
            else
            {//es un subobjetivo
               
                objNewPA.Objetivos[nobjj].SubObjetivos[nsobjj].Actividades[nactt].Peso = value;

            }
            break;
    }





}


function registraActividadNueva(idele, tipo,pos)
{


    if(istSobj == null)//es un objetivo
         {
             ty = 0;

             var i = objNewPA.Objetivos[istObj].Actividades.length-1;
             if(tipo == 'actividad')
             {
                objNewPA.Objetivos[istObj].Actividades[i].Actividad_Name = $('#'+idele).val();
                console.log('xtx:[', objNewPA.Objetivos[istObj].Actividades[i].Actividad_Name);
             }
             else
             {
                 if(tipo == 'peso')
                    {
                        var PesoTotal =0;
                        objNewPA.Objetivos[istObj].Actividades[pos].Peso = 0;
                        for (let index = 0; index < objNewPA.Objetivos[istObj].Actividades.length; index++) {
                            if( parseInt(objNewPA.Objetivos[istObj].Actividades[index].Peso) > 0){
                                PesoTotal = parseInt(PesoTotal) + parseInt(objNewPA.Objetivos[istObj].Actividades[index].Peso);                    
                            }
                            console.log(PesoTotal)

                        }
                        console.log("total=  "+PesoTotal)

                        var restante = 100-(parseInt(PesoTotal));
                                    var sn = /^[0-9]+$/;
                                    var ppeso = $('#'+idele).val();
                                    ppeso = parseInt(ppeso);

                                    if($('#'+idele).val().match(sn))
                                    {
                                        //if(ppeso > 100){ppeso = 100; $('#'+idele).val('100');}
                                        if(ppeso > restante){ppeso = restante; $('#'+idele).val(restante);}
                                    }
                                    else
                                    {
                                        $('#'+idele).val('');
                                        console.log('HAY LETRAS = '+$('#'+idele).val());
                                    }
                                  //  objNewPA.Objetivos[istObj].Actividades[i].Peso = ppeso
                                    //console.log('UUUUUU:[', objNewPA.Objetivos[istObj].Actividades[i].Peso);
    
                    }
             }
             
         }
         else
         {//es un subobjetivo
             var i = objNewPA.Objetivos[istObj].SubObjetivos[istSobj].Actividades.length-1;

              if(tipo == 'actividad')
                {
                    objNewPA.Objetivos[istObj].SubObjetivos[istSobj].Actividades[i].Actividad_Name = $('#'+idele).val();
                    //console.log('xtx:[',  objNewPA.Objetivos[istObj].SubObjetivos[istSobj].Actividades[i].Actividad_Name);
                }
            else
                {
                    if(tipo == 'peso')
                    {
                        var PesoTotal =0;
                        objNewPA.Objetivos[istObj].SubObjetivos[istSobj].Actividades[pos].Peso = 0
                        for (let index = 0; index < objNewPA.Objetivos[istObj].SubObjetivos[istSobj].Actividades.length; index++) {
                            console.log(PesoTotal)
                            if( parseInt(objNewPA.Objetivos[istObj].SubObjetivos[istSobj].Actividades[index].Peso) > 0){
                                PesoTotal = parseInt(PesoTotal) + parseInt(objNewPA.Objetivos[istObj].SubObjetivos[istSobj].Actividades[index].Peso);                    
                            }
                        }
                        console.log("total  "+PesoTotal)

                        var restante = 100-(parseInt(PesoTotal));
                         //console.log('UUUUUI:[',  objNewPA.Objetivos[istObj].SubObjetivos[istSobj].Actividades[i].Peso);



                                   var sn = /^[0-9]+$/;
                                    var ppeso = $('#'+idele).val();
                                    ppeso = parseInt(ppeso);

                                    if($('#'+idele).val().match(sn))
                                    {
                                        //if(ppeso > restante){ppeso = 100; $('#'+idele).val(restante);}
                                        if(ppeso > restante){ppeso = restante; $('#'+idele).val(restante);}
                                    }
                                    else
                                    {
                                        $('#'+idele).val('');
                                        console.log('HAY LETRAS = '+$('#'+idele).val());
                                    }
                                    //objNewPA.Objetivos[istObj].SubObjetivos[istSobj].Actividades[i].Peso = ppeso


                            


                    }
                }

             
         }

         

}


function registraActividadNuevaEditar(idele, tipo,pos)
{


    if(istSobj == null)//es un objetivo
         {
             ty = 0;

             var i = objNewPA.Objetivos[istObj].Actividades.length-1;
             if(tipo == 'actividad')
             {
                objNewPA.Objetivos[istObj].Actividades[i].Actividad_Name = $('#'+idele).val();
                console.log('xtx:[', objNewPA.Objetivos[istObj].Actividades[i].Actividad_Name);
             }
             else
             {
                 if(tipo == 'peso')
                    {
                        var PesoTotal =0;
                        objNewPA.Objetivos[istObj].Actividades[pos].Peso = 0;
                        for (let index = 0; index < objNewPA.Objetivos[istObj].Actividades.length; index++) {
                            if( parseInt(objNewPA.Objetivos[istObj].Actividades[index].Peso) > 0){
                                PesoTotal = parseInt(PesoTotal) + parseInt(objNewPA.Objetivos[istObj].Actividades[index].Peso);                    
                            }
                            console.log(PesoTotal)

                        }
                        console.log("total=  "+PesoTotal)

                        var restante = 100-(parseInt(PesoTotal));
                                    var sn = /^[0-9]+$/;
                                    var ppeso = $('#'+idele).val();
                                    ppeso = parseInt(ppeso);

                                    if($('#'+idele).val().match(sn))
                                    {
                                        //if(ppeso > 100){ppeso = 100; $('#'+idele).val('100');}
                                        if(ppeso > restante){ppeso = restante; $('#'+idele).val(restante);}
                                    }
                                    else
                                    {
                                        $('#'+idele).val('');
                                        console.log('HAY LETRAS = '+$('#'+idele).val());
                                    }
                                  //  objNewPA.Objetivos[istObj].Actividades[i].Peso = ppeso
                                    //console.log('UUUUUU:[', objNewPA.Objetivos[istObj].Actividades[i].Peso);
                            
                    }
             }
             
         }
         else
         {//es un subobjetivo
             var i = objNewPA.Objetivos[istObj].SubObjetivos[istSobj].Actividades.length-1;

              if(tipo == 'actividad')
                {
                    objNewPA.Objetivos[istObj].SubObjetivos[istSobj].Actividades[i].Actividad_Name = $('#'+idele).val();
                    //console.log('xtx:[',  objNewPA.Objetivos[istObj].SubObjetivos[istSobj].Actividades[i].Actividad_Name);
                }
            else
                {
                    if(tipo == 'peso')
                    {
                        var PesoTotal =0;
                        objNewPA.Objetivos[istObj].SubObjetivos[istSobj].Actividades[pos].Peso = 0
                        for (let index = 0; index < objNewPA.Objetivos[istObj].SubObjetivos[istSobj].Actividades.length; index++) {
                            console.log(PesoTotal)
                            if( parseInt(objNewPA.Objetivos[istObj].SubObjetivos[istSobj].Actividades[index].Peso) > 0){
                                PesoTotal = parseInt(PesoTotal) + parseInt(objNewPA.Objetivos[istObj].SubObjetivos[istSobj].Actividades[index].Peso);                    
                            }
                        }
                        console.log("total  "+PesoTotal)

                        var restante = 100-(parseInt(PesoTotal));
                         //console.log('UUUUUI:[',  objNewPA.Objetivos[istObj].SubObjetivos[istSobj].Actividades[i].Peso);



                                   var sn = /^[0-9]+$/;
                                    var ppeso = $('#'+idele).val();
                                    ppeso = parseInt(ppeso);

                                    if($('#'+idele).val().match(sn))
                                    {
                                        //if(ppeso > restante){ppeso = 100; $('#'+idele).val(restante);}
                                        if(ppeso > restante){ppeso = restante; $('#'+idele).val(restante);}
                                    }
                                    else
                                    {
                                        $('#'+idele).val('');
                                        console.log('HAY LETRAS = '+$('#'+idele).val());
                                    }
                                    //objNewPA.Objetivos[istObj].SubObjetivos[istSobj].Actividades[i].Peso = ppeso



                            

                    }
                }

             
         }

         

}


function fnSp3NuevasActividadesObjetivoPlan(ided,idPadre,tipo,posobject)
{//------------------------------------- ini   fnSp3EditarPlanAnual() -------------------------------------
    vw_principal.init();//para reiniciar tokes del buscador de nombres ************ ResponsableName

//$("#Sp3VentanaPlanAnualEditView").modal("show").addClass("fade");
$('#Sp3VentanaPlanAnualEditView').modal('hide').removeClass('fade');
$("#Sp3VentanActividadPlan").modal("show").addClass("fade");
$("#ResponsableName").val('');
//alert('accPlanAnual = '+ided)
//limpiamos la tabla
       
         if(accPlanAnual == 0)
            {
              //  if(tipo ==1) //objetivo
              if( idPadre === undefined) //objetivo
                {
                        var pos = (ided-1);
                        var nn = ided+1;
                        var title = "Ingresar Actividades - Objetivo "+ nn +": "+ objNewPA.Objetivos[ided].Objetivo_Name+"";
                        //var title = "Ingresar Actividades - Objetivo "+ nn +": "+ objNewPA.Objetivos[pos].Objetivo_Name+"";
                        $("#lbTitleActividadPlanAnual").html(title);
                        $('#body-tabla-list-EvalAud2').html("     "); 
                        istObj = ided;
                        istSobj = null;
                        //alert(istSobj);
                        
                        //vamos a verificar si existen activiaddes para esta Actividad
                        var n = objNewPA.Objetivos[ided].Actividades.length;
                      //  var n = objNewPA.Objetivos[pos].Actividades.length;
                        for (var i = 0; i<n; i++)
                        {
                            
                            fnSp3agregaActividadObjetivoPlan(i, ided, objNewPA.Objetivos[ided].Actividades[i])
                           // fnSp3agregaActividadObjetivoPlan(i, objNewPA.Objetivos[pos].Code, objNewPA.Objetivos[pos].Actividades[i])
                            // $('#'+'itemAct'+i).css('background-color','#f2f2f2');
                            // $('#'+'itemPeso'+i).css('background-color','#f2f2f2');
                            // $('#'+'PaResponsableName'+i).css('background-color','#f2f2f2');

                            $('#'+'itemAct'+i).css('background-color','#fff');
                            $('#'+'itemPeso'+i).css('background-color','#fff');
                            $('#'+'PaResponsableName'+i).css('background-color','#fff');
                            

                        }
                        
                       

                }
                else 
               // if(tipo == 0)//subobjetivo
               if( idPadre >= 0)
                {
                        //alert('aaaaaaaaaaaaaaaaaaaaaaaaaa un subobjetivo');
                        var n1 = idPadre+1;
                        var nn = ided+1; 
                        nn = n1+'.'+nn;
                       // nn = idPadre+':'+nn;
                   //     var pos = (ided-1);
                   var pos_ord = idPadre+"_"+ided

                   console.log(ided, objNewPA.Objetivos[idPadre])


                        var title = "Ingresar Actividades - SubObjetivo "+ nn +":  "+ objNewPA.Objetivos[idPadre].SubObjetivos[ided].SubObjetivo_Name+"";
                     //   var title = "Ingresar Actividades - SubObjetivo "+ nn +"  "+ objNewPA.Objetivos[idPadre].SubObjetivos[pos].SubObjetivo_Name+"";
                        $("#lbTitleActividadPlanAnual").html(title);
                        $('#body-tabla-list-EvalAud2').html("     "); 
                        istObj = idPadre;
                        istSobj = ided;

                     var n = objNewPA.Objetivos[idPadre].SubObjetivos[ided].Actividades.length;
                        //var n = objNewPA.Objetivos[idPadre].SubObjetivos[pos].Actividades.length;
                        for (var i = 0; i<n; i++)
                        {
                            
                            fnSp3agregaActividadObjetivoPlan(i, pos_ord, objNewPA.Objetivos[idPadre].SubObjetivos[ided].Actividades[i])
                           // fnSp3agregaActividadObjetivoPlan(i, objNewPA.Objetivos[idPadre].SubObjetivos[pos].Code, objNewPA.Objetivos[idPadre].SubObjetivos[pos].Actividades[i])
                            // $('#'+'itemAct'+i).css('background-color','#f2f2f2');
                            // $('#'+'itemPeso'+i).css('background-color','#f2f2f2');
                            // $('#'+'PaResponsableName'+i).css('background-color','#f2f2f2');

                            $('#'+'itemAct'+i).css('background-color','#fff');
                            $('#'+'itemPeso'+i).css('background-color','#fff');
                            $('#'+'PaResponsableName'+i).css('background-color','#fff');
                            

                        }
                }
            }
            else
            {
                //console.log(paObj[posobject],ided,idPadre,tipo,posobject)

                              //  if(tipo ==1) //objetivo
              if( idPadre === undefined) //objetivo
              {
                      var pos = (ided-1);
                      var nn = ided+1;
                      var title = "Ingresar Actividades - Objetivo "+ nn +": "+ objNewPA.Objetivos[ided].Objetivo_Name+"";
                      //var title = "Ingresar Actividades - Objetivo "+ nn +": "+ objNewPA.Objetivos[pos].Objetivo_Name+"";
                      $("#lbTitleActividadPlanAnual").html(title);
                      $('#body-tabla-list-EvalAud2').html("     "); 
                      istObj = ided;
                      istSobj = null;
                      //alert(istSobj);
                      
                      //vamos a verificar si existen activiaddes para esta Actividad
                      var n = objNewPA.Objetivos[ided].Actividades.length;
                    //  var n = objNewPA.Objetivos[pos].Actividades.length;
                      for (var i = 0; i<n; i++)
                      {
                          
                          fnSp3agregaActividadObjetivoPlan(i, ided, objNewPA.Objetivos[ided].Actividades[i],posobject)
                         // fnSp3agregaActividadObjetivoPlan(i, objNewPA.Objetivos[pos].Code, objNewPA.Objetivos[pos].Actividades[i])
                          // $('#'+'itemAct'+i).css('background-color','#f2f2f2');
                          // $('#'+'itemPeso'+i).css('background-color','#f2f2f2');
                          // $('#'+'PaResponsableName'+i).css('background-color','#f2f2f2');

                          $('#'+'itemAct'+i).css('background-color','#fff');
                          $('#'+'itemPeso'+i).css('background-color','#fff');
                          $('#'+'PaResponsableName'+i).css('background-color','#fff');
                          

                      }
                      
                     

              }
              else 
             // if(tipo == 0)//subobjetivo
             if( idPadre >= 0)
              {
                      //alert('aaaaaaaaaaaaaaaaaaaaaaaaaa un subobjetivo');
                      var n1 = idPadre+1;
                      var nn = ided+1; 
                      nn = n1+'.'+nn;
                     // nn = idPadre+':'+nn;
                 //     var pos = (ided-1);
                 var pos_ord = idPadre+"_"+ided

                 console.log(ided, objNewPA.Objetivos[idPadre])


                      var title = "Ingresar Actividades - SubObjetivo "+ nn +":  "+ objNewPA.Objetivos[idPadre].SubObjetivos[ided].SubObjetivo_Name+"";
                   //   var title = "Ingresar Actividades - SubObjetivo "+ nn +"  "+ objNewPA.Objetivos[idPadre].SubObjetivos[pos].SubObjetivo_Name+"";
                      $("#lbTitleActividadPlanAnual").html(title);
                      $('#body-tabla-list-EvalAud2').html("     "); 
                      istObj = idPadre;
                      istSobj = ided;

                   var n = objNewPA.Objetivos[idPadre].SubObjetivos[ided].Actividades.length;
                      //var n = objNewPA.Objetivos[idPadre].SubObjetivos[pos].Actividades.length;
                      for (var i = 0; i<n; i++)
                      {
                          
                          fnSp3agregaActividadObjetivoPlan(i, pos_ord, objNewPA.Objetivos[idPadre].SubObjetivos[ided].Actividades[i])
                         // fnSp3agregaActividadObjetivoPlan(i, objNewPA.Objetivos[idPadre].SubObjetivos[pos].Code, objNewPA.Objetivos[idPadre].SubObjetivos[pos].Actividades[i])
                          // $('#'+'itemAct'+i).css('background-color','#f2f2f2');
                          // $('#'+'itemPeso'+i).css('background-color','#f2f2f2');
                          // $('#'+'PaResponsableName'+i).css('background-color','#f2f2f2');

                          $('#'+'itemAct'+i).css('background-color','#fff');
                          $('#'+'itemPeso'+i).css('background-color','#fff');
                          $('#'+'PaResponsableName'+i).css('background-color','#fff');
                          

                      }
              }

                var title = "Ingresar Actividades - SubObjetivo "+ 1 +" aaaaaaaaaaaaa "+ +"";
                $("#lbTitleActividadPlanAnual").html(title);

            }
            




  //$('#body-tabla-list-EvalAud2').html(" ");
  
  $("#ResponsableName").val('');
getPersonResponsable($("#ResponsableName"),1);

if(accPlanAnual == 1)
{
    if(objNewPA.Estado_PlanId === 2){
    $('.showBtnEdit').show();
    $('.noShowBtnEdit').hide();
    $('.disabledBtnEdit').attr('disabled',true);
    $('.disabledBtnEdit').css('background-color','#b2b2b2');
    $('.disabledBtnEditResp').attr('disabled',true);
    $('.disabledBtnEditResp').css('background-color','#f7f7f7');
    }else  if(objNewPA.Estado_PlanId === 1){
        $('.showBtnEdit').hide();
        $('.noShowBtnEdit').show();
        }
    
}else{
    $('.showBtnEdit').hide();
    $('.noShowBtnEdit').show();
    

}
}//------------------------------------- ini   fnSp3EditarPlanAnual() -------------------------------------


function fnSp3NuevasActividadesObjetivoPlanEditar(ided,idPadre,tipo,posobject,Id)
{//------------------------------------- ini   fnSp3EditarPlanAnual() -------------------------------------
    vw_principal.init();//para reiniciar tokes del buscador de nombres ************ ResponsableName

 
//$("#Sp3VentanaPlanAnualEditView").modal("show").addClass("fade");
$('#Sp3VentanaPlanAnualEditView').modal('hide').removeClass('fade');
$("#Sp3VentanActividadPlan").modal("show").addClass("fade");
$("#ResponsableName").val('');
//alert('accPlanAnual = '+ided)
//limpiamos la tabla
       console.log(accPlanAnual)
         if(accPlanAnual == 0)
            {
              //  if(tipo ==1) //objetivo
              if( idPadre === undefined) //objetivo
                {
                        var pos = (ided-1);
                        var nn = ided+1;
                        var title = "Ingresar Actividades - Objetivo "+ nn +": "+ objNewPA.Objetivos[ided].Objetivo_Name+"";
                        //var title = "Ingresar Actividades - Objetivo "+ nn +": "+ objNewPA.Objetivos[pos].Objetivo_Name+"";
                        $("#lbTitleActividadPlanAnual").html(title);
                        $('#body-tabla-list-EvalAud2').html("     "); 
                        istObj = ided;
                        istSobj = null;
                        //alert(istSobj);
                        
                        //vamos a verificar si existen activiaddes para esta Actividad
                        var n = objNewPA.Objetivos[ided].Actividades.length;
                      //  var n = objNewPA.Objetivos[pos].Actividades.length;
                        for (var i = 0; i<n; i++)
                        {
                            console.log(i, ided, objNewPA.Objetivos[ided].Actividades[i])
                            fnSp3agregaActividadObjetivoPlanEditar(i, ided, objNewPA.Objetivos[ided].Actividades[i])
                           // fnSp3agregaActividadObjetivoPlan(i, objNewPA.Objetivos[pos].Code, objNewPA.Objetivos[pos].Actividades[i])
                            // $('#'+'itemAct'+i).css('background-color','#f2f2f2');
                            // $('#'+'itemPeso'+i).css('background-color','#f2f2f2');
                            // $('#'+'PaResponsableName'+i).css('background-color','#f2f2f2');

                            $('#'+'itemAct'+i).css('background-color','#fff');
                            $('#'+'itemPeso'+i).css('background-color','#fff');
                            $('#'+'PaResponsableName'+i).css('background-color','#fff');
                            

                        }
                        
                       

                }
                else 
               // if(tipo == 0)//subobjetivo
               if( idPadre >= 0)
                {
                        //alert('aaaaaaaaaaaaaaaaaaaaaaaaaa un subobjetivo');
                        var n1 = idPadre+1;
                        var nn = ided+1; 
                        nn = n1+'.'+nn;
                       // nn = idPadre+':'+nn;
                   //     var pos = (ided-1);
                   var pos_ord = idPadre+"_"+ided

                   console.log(ided, objNewPA.Objetivos[idPadre])


                        var title = "Ingresar Actividades - SubObjetivo "+ nn +":  "+ objNewPA.Objetivos[idPadre].SubObjetivos[ided].SubObjetivo_Name+"";
                     //   var title = "Ingresar Actividades - SubObjetivo "+ nn +"  "+ objNewPA.Objetivos[idPadre].SubObjetivos[pos].SubObjetivo_Name+"";
                        $("#lbTitleActividadPlanAnual").html(title);
                        $('#body-tabla-list-EvalAud2').html("     "); 
                        istObj = idPadre;
                        istSobj = ided;

                     var n = objNewPA.Objetivos[idPadre].SubObjetivos[ided].Actividades.length;
                        //var n = objNewPA.Objetivos[idPadre].SubObjetivos[pos].Actividades.length;
                        for (var i = 0; i<n; i++)
                        {
                            
                            fnSp3agregaActividadObjetivoPlan(i, pos_ord, objNewPA.Objetivos[idPadre].SubObjetivos[ided].Actividades[i])
                           // fnSp3agregaActividadObjetivoPlan(i, objNewPA.Objetivos[idPadre].SubObjetivos[pos].Code, objNewPA.Objetivos[idPadre].SubObjetivos[pos].Actividades[i])
                            // $('#'+'itemAct'+i).css('background-color','#f2f2f2');
                            // $('#'+'itemPeso'+i).css('background-color','#f2f2f2');
                            // $('#'+'PaResponsableName'+i).css('background-color','#f2f2f2');

                            $('#'+'itemAct'+i).css('background-color','#fff');
                            $('#'+'itemPeso'+i).css('background-color','#fff');
                            $('#'+'PaResponsableName'+i).css('background-color','#fff');
                            

                        }
                }
            }
            else
            {
                //console.log(paObj[posobject],ided,idPadre,tipo,posobject)

                              //  if(tipo ==1) //objetivo
              if( idPadre === undefined) //objetivo
              {
                istObj= ided;//contiene el id del objetivo actual trabajado
                istSobj= undefined;//contiene el id del subobjetivo actual trabajado
              
                      var pos = (ided-1);
                      var nn = ided+1;
                      var title = "Ingresar Actividades - Objetivo "+ nn +": "+ objNewPA.Objetivos[ided].Objetivo_Name+"";
                      //var title = "Ingresar Actividades - Objetivo "+ nn +": "+ objNewPA.Objetivos[pos].Objetivo_Name+"";
                      $("#lbTitleActividadPlanAnual").html(title);
                      $('#body-tabla-list-EvalAud2').html("     "); 
                      istObj = ided;
                      istSobj = null;
                      //alert(istSobj);
                      
                      //vamos a verificar si existen activiaddes para esta Actividad
                      var n = objNewPA.Objetivos[ided].Actividades.length;
                    //  var n = objNewPA.Objetivos[pos].Actividades.length;
                      for (var i = 0; i<n; i++)
                      {
                          
                        fnSp3agregaActividadObjetivoPlanEditar(i, ided, objNewPA.Objetivos[ided].Actividades[i],posobject)
                         // fnSp3agregaActividadObjetivoPlan(i, objNewPA.Objetivos[pos].Code, objNewPA.Objetivos[pos].Actividades[i])
                          // $('#'+'itemAct'+i).css('background-color','#f2f2f2');
                          // $('#'+'itemPeso'+i).css('background-color','#f2f2f2');
                          // $('#'+'PaResponsableName'+i).css('background-color','#f2f2f2');

                          $('#'+'itemAct'+i).css('background-color','#fff');
                          $('#'+'itemPeso'+i).css('background-color','#fff');
                          $('#'+'PaResponsableName'+i).css('background-color','#fff');
                          

                      }
                      
                     

              }
              else 
             // if(tipo == 0)//subobjetivo
             if( idPadre >= 0)
              {
                istObj= idPadre;//contiene el id del objetivo actual trabajado
                istSobj= ided;//contiene el id del subobjetivo actual trabajado
                      //alert('aaaaaaaaaaaaaaaaaaaaaaaaaa un subobjetivo');
                      var n1 = idPadre+1;
                      var nn = ided+1; 
                      nn = n1+'.'+nn;
                     // nn = idPadre+':'+nn;
                 //     var pos = (ided-1);
                 var pos_ord = idPadre+"_"+ided

                 console.log(ided, objNewPA.Objetivos[idPadre])


                      var title = "Ingresar Actividades - SubObjetivo "+ nn +":  "+ objNewPA.Objetivos[idPadre].SubObjetivos[ided].SubObjetivo_Name+"";
                   //   var title = "Ingresar Actividades - SubObjetivo "+ nn +"  "+ objNewPA.Objetivos[idPadre].SubObjetivos[pos].SubObjetivo_Name+"";
                      $("#lbTitleActividadPlanAnual").html(title);
                      $('#body-tabla-list-EvalAud2').html("     "); 
                      istObj = idPadre;
                      istSobj = ided;

                   var n = objNewPA.Objetivos[idPadre].SubObjetivos[ided].Actividades.length;
                      //var n = objNewPA.Objetivos[idPadre].SubObjetivos[pos].Actividades.length;
                      for (var i = 0; i<n; i++)
                      {
                          
                        fnSp3agregaActividadObjetivoPlanEditar(i, pos_ord, objNewPA.Objetivos[idPadre].SubObjetivos[ided].Actividades[i])
                         // fnSp3agregaActividadObjetivoPlan(i, objNewPA.Objetivos[idPadre].SubObjetivos[pos].Code, objNewPA.Objetivos[idPadre].SubObjetivos[pos].Actividades[i])
                          // $('#'+'itemAct'+i).css('background-color','#f2f2f2');
                          // $('#'+'itemPeso'+i).css('background-color','#f2f2f2');
                          // $('#'+'PaResponsableName'+i).css('background-color','#f2f2f2');

                          $('#'+'itemAct'+i).css('background-color','#fff');
                          $('#'+'itemPeso'+i).css('background-color','#fff');
                          $('#'+'PaResponsableName'+i).css('background-color','#fff');
                          

                      }
              }

              //  var title = "Ingresar Actividades - SubObjetivo "+ 1 +" aaaaaaaaaaaaa "+ +"";
                $("#lbTitleActividadPlanAnual").html(title);

            }
            




  //$('#body-tabla-list-EvalAud2').html(" ");
  
  $("#ResponsableName").val('');
getPersonResponsable($("#ResponsableName"),1);
if(accPlanAnual == 1)
{
    if(objNewPA.Estado_PlanId === 2){
    $('.showBtnEdit').show();
    $('.noShowBtnEdit').hide();
    $('.disabledBtnEdit').attr('disabled',true);
    $('.disabledBtnEdit').css('background-color','#b2b2b2');
    $('.disabledBtnEditResp').attr('disabled',true);
    $('.disabledBtnEditResp').css('background-color','#f7f7f7');
    }else  if(objNewPA.Estado_PlanId === 1){
        $('.showBtnEdit').hide();
        $('.noShowBtnEdit').show();
        }
    
}else{
    $('.showBtnEdit').hide();
    $('.noShowBtnEdit').show();
    

}

}//------------------------------------- ini   fnSp3EditarPlanAnual() -------------------------------------



function fnSp3CerrarNuevasActividadesPlan()
{//------------------------------------- ini   fnSp3CerrarNuevasTareasActividadesPlan() -------------------------------------
console.log(objNewPA.Objetivos[istObj].Actividades)
var flag_filaEmpty = 0;
    if(objNewPA.Objetivos[istObj].Actividades.length > 0 )
    {
        for (let r = 0; r < objNewPA.Objetivos[istObj].Actividades.length; r++) {
            var check_Peso = objNewPA.Objetivos[istObj].Actividades[r].Peso;
            var check_ActName = objNewPA.Objetivos[istObj].Actividades[r].Actividad_Name;
            var check_RespName = objNewPA.Objetivos[istObj].Actividades[r].ResponsableName;

            if(check_Peso == 0)
            {
                $("#itemPeso"+r).focus();
                r = objNewPA.Objetivos[istObj].Actividades.length;
                flag_filaEmpty = 1;
            }

            if(check_RespName === undefined)
            {
           $("#PaResponsableName"+r).focus();
                r = objNewPA.Objetivos[istObj].Actividades.length;
                flag_filaEmpty = 1;
        }else{
                
                if(check_RespName === "")
                {
                    $("#PaResponsableName"+r).focus();
                    r = objNewPA.Objetivos[istObj].Actividades.length;
                    flag_filaEmpty = 1;
                }
            }

            if(check_ActName === undefined)
            {
                $("#itemAct"+r).focus();
                r = objNewPA.Objetivos[istObj].Actividades.length;
                flag_filaEmpty = 1;
        }else{
                
                if(check_ActName === "")
                {
                    $("#itemAct"+r).focus();
                    r = objNewPA.Objetivos[istObj].Actividades.length;
                    flag_filaEmpty = 1;
                }
            }

            if(flag_filaEmpty == 0){
                console.log("....")

            if(objNewPA.Objetivos[istObj].Actividades[r].Cronogramas != undefined)
            {
                if(objNewPA.Objetivos[istObj].Actividades[r].Cronogramas.length > 0)
                {
                if(objNewPA.Objetivos[istObj].Actividades[r].Tareas != undefined)
                {
                    console.log("..SI..",objNewPA.Objetivos[istObj].Actividades[r].Tareas.length)

                  if(objNewPA.Objetivos[istObj].Actividades[r].Tareas.length > 0)
                 {
                    console.log("..SI..SI..")

                    for (let d = 0; d < objNewPA.Objetivos[istObj].Actividades[r].Tareas.length; d++) {
                        console.log("..SI..SI..FOR..")

                    //console.log(Object.keys(objNewPA.Objetivos[istObj].Actividades[r].Tareas[d]))
                        var check_inci = objNewPA.Objetivos[istObj].Actividades[r].Tareas[d].Evidencia_Name;
                        console.log(check_inci)

                        if(check_inci === undefined || check_inci === "")
                        {
                            d = objNewPA.Objetivos[istObj].Actividades[r].Tareas.length;
                            fnSp3NuevasTareaActividadesPlanEditar(d)
                            r = objNewPA.Objetivos[istObj].Actividades.length;
                            flag_filaEmpty=2;

                        }
                        
                    }
                }else{
                    fnSp3NuevasTareaActividadesPlanEditar(0)
                    r = objNewPA.Objetivos[istObj].Actividades.length;
                    flag_filaEmpty=2;
                    
                }
            }   
            } 
        }
    }

        }

    }

    if(flag_filaEmpty == 0){
        $("#Sp3VentanActividadPlan").modal("hide").removeClass("fade");
        $("#Sp3VentanaPlanAnualEditView").modal("show").addClass("fade");
    }
    else if(flag_filaEmpty == 1){
        verModalError("","No puede dejar actividades vacias")
    }

}//------------------------------------- fin   fnSp3CerrarNuevasTareasActividadesPlan() -------------------------------------



function fnSp3EditarActividadPlanAnual(idActividad)
{//------------------------------------- ini   fnSp3agregaCronogramaActividadObjetivoPlan() -------------------------------------
    vw_principal.init();
    $("#Sp3VentanActividadPlan").modal("hide").removeClass("fade");
    $("#Sp3VentanaCambiarResponsable").modal("show").addClass("fade");

    if(istSobj == null)
    {
           console.log(objNewPA.Objetivos[istObj].Actividades[idActividad])
           $("#txt_name_Actividad").val(objNewPA.Objetivos[istObj].Actividades[idActividad].Actividad_Name)
           $("#Actividad_PlanId").val(objNewPA.Objetivos[istObj].Actividades[idActividad].Id)

           $("#txt_Old_ResponsableName").val(objNewPA.Objetivos[istObj].Actividades[idActividad].ResponsableName)
           $("#txt_Old_ResponsableId").val(objNewPA.Objetivos[istObj].Actividades[idActividad].ResponsableId)
           $("#txt_Old_ResponsableCorreo").val(objNewPA.Objetivos[istObj].Actividades[idActividad].ResponsableCorreo)
           $("#txt_Old_ResponsableCargo").val(objNewPA.Objetivos[istObj].Actividades[idActividad].ResponsableCargo)

    }else{

        console.log(objNewPA.Objetivos[istObj].SubObjetivos[istSobj].Actividades[idActividad]  )

        $("#txt_name_Actividad").val(objNewPA.Objetivos[istObj].SubObjetivos[istSobj].Actividades[idActividad].Actividad_Name)
        $("#Actividad_PlanId").val(objNewPA.Objetivos[istObj].SubObjetivos[istSobj].Actividades[idActividad].Id)

        $("#txt_Old_ResponsableName").val(objNewPA.Objetivos[istObj].SubObjetivos[istSobj].Actividades[idActividad].ResponsableName)
        $("#txt_Old_ResponsableId").val(objNewPA.Objetivos[istObj].SubObjetivos[istSobj].Actividades[idActividad].ResponsableId)
        $("#txt_Old_ResponsableCorreo").val(objNewPA.Objetivos[istObj].SubObjetivos[istSobj].Actividades[idActividad].ResponsableCorreo)
        $("#txt_Old_ResponsableCargo").val(objNewPA.Objetivos[istObj].SubObjetivos[istSobj].Actividades[idActividad].ResponsableCargo)
    }

    $("#txt_New_ResponsableName").val('')
    istAct = idActividad;
    getNewResponsable($("#txt_New_ResponsableName"),1,1,istObj, istSobj, idActividad);
}//------------------------------------- ini   fnSp3agregaCronogramaActividadObjetivoPlan() -------------------------------------


function fnSp3EliminarActividadPlanAnual(idTarea)
{//------------------------------------- ini   fnSp3agregaCronogramaActividadObjetivoPlan() -------------------------------------
    swal({
        title: "Eliminar",
        text: "¿Desea eliminar la tarea?",
        type: "info",
        showCancelButton: true,
        confirmButtonClass: "btn-danger btn-sm btn-rounded rounded",
        cancelButtonClass: "btn-success btn-sm btn-rounded rounded",
        confirmButtonText: "Si",
        cancelButtonText: "No",
        closeOnConfirm: true,
        showLoaderOnConfirm: false
      },function(){ 
                  
    var check_Act = idTarea.split("_");
    console.log(check_Act)
        if(check_Act.length === 3){
            objNewPA.Objetivos[check_Act[1]].Actividades.splice(check_Act[2],1)
            $('#'+idTarea).remove();
            console.log(objNewPA.Objetivos[check_Act[1]].Actividades)
            if(objNewPA.Objetivos[check_Act[1]].Actividades.length>0){
                // for (let i = 0; i < objNewPA.Objetivos[check_Act[1]].Actividades.length; i++) {
                //     objNewPA.Objetivos[check_Act[1]].Actividades[i].Id=i;                            
                // }
                fnSp3ReordenarActividadesObjetivoPlan(check_Act[1],undefined,1)
            }
            $("#nAct_obj_"+(parseInt(check_Act[1])+1)).html(objNewPA.Objetivos[check_Act[1]].Actividades.length)
        }else{
            objNewPA.Objetivos[check_Act[1]].SubObjetivos[check_Act[2]].Actividades.splice(check_Act[3],1)
            $('#'+idTarea).remove();
            if(objNewPA.Objetivos[check_Act[1]].SubObjetivos[check_Act[2]].Actividades.length>0){
                // for (let i = 0; i < objNewPA.Objetivos[check_Act[1]].SubObjetivos[check_Act[2]].Actividades.length; i++) {
                //     objNewPA.Objetivos[check_Act[1]].SubObjetivos[check_Act[2]].Actividades[i].Id=i;
                // }
                fnSp3ReordenarActividadesObjetivoPlan(check_Act[2],check_Act[1],0)
            }
            $("#nAct_subobj_"+(parseInt(check_Act[1])+1)+"_"+(parseInt(check_Act[2])+1)).html(objNewPA.Objetivos[check_Act[1]].SubObjetivos[check_Act[2]].Actividades.length)
        }
   console.log(objNewPA.Objetivos)
    })
}//------------------------------------- ini   fnSp3agregaCronogramaActividadObjetivoPlan() -------------------------------------


function fnSp3EliminarActividadPlanAnualEdit(idTarea)
{//------------------------------------- ini   fnSp3agregaCronogramaActividadObjetivoPlan() -------------------------------------
    swal({
        title: "Eliminar",
        text: "¿Desea eliminar la actividad?",
        type: "info",
        showCancelButton: true,
        confirmButtonClass: "btn-danger btn-sm btn-rounded rounded",
        cancelButtonClass: "btn-success btn-sm btn-rounded rounded",
        confirmButtonText: "Si",
        cancelButtonText: "No",
        closeOnConfirm: true,
        showLoaderOnConfirm: false
      },function(){ 
                  
    var check_Act = idTarea.split("_");
    console.log(check_Act)
        if(check_Act.length === 3){
            if(objNewPA.Objetivos[check_Act[1]].Actividades[check_Act[2]].Id != 0){
                fnSP3EliminarItemsPlanAnual(2,objNewPA.Objetivos[check_Act[1]].Actividades[check_Act[2]].Id)
            }
            objNewPA.Objetivos[check_Act[1]].Actividades.splice(check_Act[2],1)
            $('#'+idTarea).remove();
            console.log(objNewPA.Objetivos[check_Act[1]].Actividades)
            if(objNewPA.Objetivos[check_Act[1]].Actividades.length>0){

                fnSp3ReordenarActividadesObjetivoPlan(check_Act[1],undefined,1)
            }
            $("#nAct_obj_"+(parseInt(check_Act[1])+1)).html(objNewPA.Objetivos[check_Act[1]].Actividades.length)
        }else{
            if(objNewPA.Objetivos[check_Act[1]].SubObjetivos[check_Act[2]].Actividades[check_Act[3]].Id != 0){
                fnSP3EliminarItemsPlanAnual(2,objNewPA.Objetivos[check_Act[1]].SubObjetivos[check_Act[2]].Actividades[check_Act[3]].Id)
            }
            objNewPA.Objetivos[check_Act[1]].SubObjetivos[check_Act[2]].Actividades.splice(check_Act[3],1)
            $('#'+idTarea).remove();
            if(objNewPA.Objetivos[check_Act[1]].SubObjetivos[check_Act[2]].Actividades.length>0){
                // for (let i = 0; i < objNewPA.Objetivos[check_Act[1]].SubObjetivos[check_Act[2]].Actividades.length; i++) {
                //     objNewPA.Objetivos[check_Act[1]].SubObjetivos[check_Act[2]].Actividades[i].Id=i;
                // }
                fnSp3ReordenarActividadesObjetivoPlan(check_Act[2],check_Act[1],0)
            }
            $("#nAct_subobj_"+(parseInt(check_Act[1])+1)+"_"+(parseInt(check_Act[2])+1)).html(objNewPA.Objetivos[check_Act[1]].SubObjetivos[check_Act[2]].Actividades.length)
        }
   console.log(objNewPA.Objetivos)
    })
}//------------------------------------- ini   fnSp3agregaCronogramaActividadObjetivoPlan() -------------------------------------



function fnSp3ReordenarActividadesObjetivoPlan(ided,idPadre,tipo)
{//------------------------------------- ini   fnSp3EditarPlanAnual() -------------------------------------
    vw_principal.init();//para reiniciar tokes del buscador de nombres ************ ResponsableName

$("#Sp3VentanActividadPlan").modal("show").addClass("fade");
$("#ResponsableName").val('');
//alert('accPlanAnual = '+ided)
//limpiamos la tabla
       
         if(accPlanAnual == 0)
            {
              //  if(tipo ==1) //objetivo
              if( idPadre === undefined) //objetivo
                {
                        var pos = (ided-1);
                        var nn = ided+1;
                        var title = "Ingresar Actividades - Objetivo "+ nn +": "+ objNewPA.Objetivos[ided].Objetivo_Name+"";
                        //var title = "Ingresar Actividades - Objetivo "+ nn +": "+ objNewPA.Objetivos[pos].Objetivo_Name+"";
                        $("#lbTitleActividadPlanAnual").html(title);
                        $('#body-tabla-list-EvalAud2').html("     "); 
                        istObj = ided;
                        istSobj = null;
                        //alert(istSobj);
                        
                        //vamos a verificar si existen activiaddes para esta Actividad
                        var n = objNewPA.Objetivos[ided].Actividades.length;
                      //  var n = objNewPA.Objetivos[pos].Actividades.length;
                        for (var i = 0; i<n; i++)
                        {
                            
                            fnSp3ReordenarActividadObjetivoPlan( i, ided, objNewPA.Objetivos[ided].Actividades[i])
                           // fnSp3agregaActividadObjetivoPlan(i, objNewPA.Objetivos[pos].Code, objNewPA.Objetivos[pos].Actividades[i])
                            // $('#'+'itemAct'+i).css('background-color','#f2f2f2');
                            // $('#'+'itemPeso'+i).css('background-color','#f2f2f2');
                            // $('#'+'PaResponsableName'+i).css('background-color','#f2f2f2');

                            $('#'+'itemAct'+i).css('background-color','#fff');
                            $('#'+'itemPeso'+i).css('background-color','#fff');
                            $('#'+'PaResponsableName'+i).css('background-color','#fff');
                            

                        }
                        
                       

                }
                else 
               // if(tipo == 0)//subobjetivo
               if( idPadre >= 0)
                {
                        //alert('aaaaaaaaaaaaaaaaaaaaaaaaaa un subobjetivo');
                        var n1 = idPadre+1;
                        var nn = ided+1; 
                        nn = n1+'.'+nn;
                       // nn = idPadre+':'+nn;
                   //     var pos = (ided-1);
                   console.log(ided, objNewPA.Objetivos[idPadre])
                        var pos_ord = idPadre+"_"+ided

                        var title = "Ingresar Actividades - SubObjetivo "+ nn +":  "+ objNewPA.Objetivos[idPadre].SubObjetivos[ided].SubObjetivo_Name+"";
                     //   var title = "Ingresar Actividades - SubObjetivo "+ nn +"  "+ objNewPA.Objetivos[idPadre].SubObjetivos[pos].SubObjetivo_Name+"";
                        $("#lbTitleActividadPlanAnual").html(title);
                        $('#body-tabla-list-EvalAud2').html("     "); 
                        istObj = idPadre;
                        istSobj = ided;

                     var n = objNewPA.Objetivos[idPadre].SubObjetivos[ided].Actividades.length;
                        //var n = objNewPA.Objetivos[idPadre].SubObjetivos[pos].Actividades.length;
                        for (var i = 0; i<n; i++)
                        {
                            
                            fnSp3ReordenarActividadObjetivoPlan(i, pos_ord, objNewPA.Objetivos[idPadre].SubObjetivos[ided].Actividades[i])
                           // fnSp3agregaActividadObjetivoPlan(i, objNewPA.Objetivos[idPadre].SubObjetivos[pos].Code, objNewPA.Objetivos[idPadre].SubObjetivos[pos].Actividades[i])
                            // $('#'+'itemAct'+i).css('background-color','#f2f2f2');
                            // $('#'+'itemPeso'+i).css('background-color','#f2f2f2');
                            // $('#'+'PaResponsableName'+i).css('background-color','#f2f2f2');

                            $('#'+'itemAct'+i).css('background-color','#fff');
                            $('#'+'itemPeso'+i).css('background-color','#fff');
                            $('#'+'PaResponsableName'+i).css('background-color','#fff');
                            

                        }
                }
            }
            else
            {
                $('#body-tabla-list-EvalAud2').html("     ");

                var n = objNewPA.Objetivos[ided].Actividades.length;

                for (var i = 0; i<n; i++)
                {
                    
                    fnSp3ReordenarActividadObjetivoPlan( i, ided, objNewPA.Objetivos[ided].Actividades[i])
                   // fnSp3agregaActividadObjetivoPlan(i, objNewPA.Objetivos[pos].Code, objNewPA.Objetivos[pos].Actividades[i])
                    // $('#'+'itemAct'+i).css('background-color','#f2f2f2');
                    // $('#'+'itemPeso'+i).css('background-color','#f2f2f2');
                    // $('#'+'PaResponsableName'+i).css('background-color','#f2f2f2');

                    $('#'+'itemAct'+i).css('background-color','#fff');
                    $('#'+'itemPeso'+i).css('background-color','#fff');
                    $('#'+'PaResponsableName'+i).css('background-color','#fff');
                    

                }
                

                //var title = "Ingresar Actividades - SubObjetivo "+ 1 +" aaaaaaaaaaaaa "+ +"";
                $("#lbTitleActividadPlanAnual").html(title);

            }
            




  //$('#body-tabla-list-EvalAud2').html(" ");
  
  $("#ResponsableName").val('');
getPersonResponsable($("#ResponsableName"),1);


}//------------------------------------- ini   fnSp3EditarPlanAnual() -------------------------------------


function fnSp3ReordenarActividadObjetivoPlan(ii,idPlan, itemx )
{//------------------------------------- ini   fnSp3agregaObjetivoSubojetivo() -------------------------------------
  if(ii != -1)   
    {//###############################################################################################################################################################################

       //alert("ii = "+ii+ " idPlan = "+idPlan+" itemx = "+itemx)
         //vamos a meter una fila de prueba
        itemx.Actividad_Name;//: "Actividad IMportante aaaa"
        //item.Code: "ACT1"
        //item.Cronogramas: (12) [{…}, {…}, {…}, {…}, {…}, {…}, {…}, {…}, {…}, {…}, {…}, {…}]
        itemx.Id;//: 1
        itemx.Objetivo_PlanId;//: 1
        itemx.Peso;//: 15
        itemx.ResponsableCargo;//: "Almacenist"
        itemx.ResponsableCorreo;//: "caracas1348@gmail.com"
        itemx.ResponsableId;//: "1"
        itemx.ResponsableName;//: "Andy Vasquez"


           // Actividades[Actividades.length] = $('#txt_obj_subobj').val();
             //var objjt = "Objetivo "+Objetivos.length+" : "+$('#txt_obj_subobj').val();
             iddd2 = 'itemAct_'+idPlan+"_"+ii

        if(itemx.Actividad_Name === undefined){
            itemx.Actividad_Name="";
        }
        if(itemx.Peso === undefined){
            itemx.Peso="";
        }
        if(itemx.ResponsableName === undefined){
            itemx.ResponsableName="";
        }
        //var Id = 25;
        //var nAct = 10;
        var html2 = '     ';

        if(nActs == 0)
        {
            $('#body-tabla-list-EvalAud2').html("     "); nObjSub = 1;
        }

      var item = ii+1;
      var tx_act =  `
          <div class="form-group col-12 border text-left" style="  height: auto !important; width: 100% !important; !important; border-color:#DEE2E6 !important;  margin:0px 0px 0px !important; padding: 0px 0px !important;"  id = "divitem">
          <textarea class="text-justify textarea-fecha2 autocompletecollaborator" onBlur="AgregarinformacionObjActividad(1,$(this).val(),${istObj},${istSobj},${ii})"
              style="height: 36px; width:95%; margin: 8px 0px 8px 8px !important; padding: 0px 0px 0px 0px !important; font-size: 13px !important; font-weight: bold; color:#534b4b; background-color:#F2F2F2 !important;"  id="itemAct${ii}"  >${itemx.Actividad_Name}</textarea>
        </div>
          `;

        var tx_porc =  `
            <div class="d-flex justify-content-center align-items-center form-group col-12 border text-center" style="  height: auto !important; width: 92% !important; !important; border-color:#DEE2E6 !important;  margin:0px 0px 0px !important; padding: 0px 0px !important;"  id = "divitem">
            <input onkeyup="registraActividadNueva('itemPeso${ii}','peso',${ii})" onBlur="AgregarinformacionObjActividad(2,$(this).val(),${istObj},${istSobj},${ii},'itemPeso${ii}')" class="text-justify textarea-fecha2 autocompletecollaborator" value='${itemx.Peso}'
                style="height: 36px; text-align:center; width:85%; margin: 4px !important; padding: 0px 0px 0px 0px !important; font-size: 13px !important; font-weight: bold; color:#534b4b; background-color:#F2F2F2 !important;"  id="itemPeso${ii}"  name = "itemPeso${ii}"></input>
         
                <div class="input-group-append">
                <span class="input-group-text"> %</span>
              </div>
                     </div>
            `;

        var tx_resp =  `
        <div class="form-group col-12 border text-left" style="  height: auto !important; width: 98% !important; !important; border-color:#DEE2E6 !important;  margin:0px 0px 0px !important; padding: 0px 0px 0px 0px !important;"  id = "divTarea">
        <input id = 'PaResponsableName${ii}' class="text-justify textarea-fecha2 autocompletecollaborator" value = '${itemx.ResponsableName}' onchange="fnSp3onchangeColor('divf6')"
            style="height: 36px; width:90%; margin: 8px 0px 8px 8px !important; padding: 0px 0px 0px 0px !important; font-size: 13px !important; font-weight: bold; color: #534b4b; background-color:#F2F2F2 !important;"  "></input>
      </div>
            `;


        //var iddthis = "itemActs_"+nActs;
        var visible = '';
        if(objNewPA.Estado_PlanId == 1){
         visible = `style="display:none;"` ;
        }

            html2 += `

            <div id = "${iddd2}"  class="item-tabla p-2" style="z-index: 1;display:relative;  padding: 0px !important; margin: 10px 8px 0px !important; width: 1223px !important;">
            <div class="row m-0 justify-content-between align-items-center tbody_trainning">
                <div class="col-12 text-center" style="font-size: 15px; padding: 4px !important; ">
                    <div class="row">



                    <table width = "100%" border="0">
                        <tr >
                            <td width = "5%" align="center"><div id="c1TabGeny" class="text-left "  style='margin: 0px 0px 0px 18px !important;  font-size: 14px !important; '>${item}</div></td>
                            <td width = "38%" align="center"><div id="c3TabGeny" class="text-left "   style='color:#000;'>${tx_act}</div></td>
                            <td width = "8%" align="center"><div id="c3TabGeny" class="text-left "   style='color:#000;' >${tx_porc}</div></td>
                            <td width = "25%" align="center"><div id="c3TabGeny" class="text-left "  style='color:#000;'>${tx_resp}</div></td>


                            <td width = "6%" align="center"><div id="c4TabGeny" class="text-center lbCabezaTabla"  >
                                <button type='button' title='Crear Tareas de la Actividad' onclick="fnSp3NuevasTareaActividadesPlan(${itemx.Id})"   class='btn-circle btn_read border-0' style='background-color:#ff9f47 !important;' id='btn_ActividadPlan${itemx.Id}'>
                                    <img src='./images/iconos/test6.svg' class='ojo-1'  >
                                </button>
                            </td>

                            <td width = "6%" align="center"><div id="c4TabGeny" class="text-center lbCabezaTabla"  >
                                <button type='button' title='Crear Cronograma de Actividades' onclick="fnSp3agregaCronogramaActividadObjetivoPlan(${itemx.Id})"   class='btn-circle btn_read border-0' style='background-color:#05beee !important;' id='btn_ActividadPlan${itemx.Id}'>
                                    <img src='./images/iconos/calendar2.svg' class='ojo-1'  >
                                </button>
                            </td>

                            <td width = "6%" align="center"><div id="c4TabGeny" class="text-center lbCabezaTabla"  >
                                    <button type='button' title='Editar Responsable' onclick="fnSp3EditarActividadPlanAnual(${itemx.Id})"   class='btn-circle btn_read border-0' style='background-color:#58c25d !important;' id='btn_verPlanAnual${itemx.Id}'>
                                        <img src='./images/iconos/edit_1.svg' class='ojo-1'  >
                                    </button>
                            </td>

                            <td ${visible} width = "6%" align="center"><div id="c4TabGeny" class="text-center lbCabezaTabla"  >
                                    <button type='button' title='Eliminar Actividad${iddd2}' onclick="fnSp3EliminarActividadPlanAnual('${iddd2}')"   class='btn-circle btn_read border-0' style='background-color:#ff6767 !important;' id='btn_verEliminarPlan${itemx.Id}'>
                                        <img src='./images/iconos/delete.svg' class='ojo-1'  >
                                    </button>
                            </td>

                            <td width = "1%" align="center"><div id="c7TabGeny" class="text-center lbCabezaTabla"  >&nbsp</div></td>


                        </tr>
                    </table>





                        </div>
                    </div>
                </div>
            </div>


            `;
            $('#body-tabla-list-EvalAud2').append(html2);
    }//###############################################################################################################################################################################

    getPersonResponsablePa($("#PaResponsableName"+ii),ii,1,istObj, istSobj, ii);

console.log(objNewPA.Objetivos)

}//------------------------------------- fini   fnSp3agregaObjetivoSubojetivo() -------------------------------------






function fnSp3MostrarActividadObjetivoPlan(ii,idPlan, itemx )
{//------------------------------------- ini   fnSp3agregaObjetivoSubojetivo() -------------------------------------
    
  if(ii != -1)   
    {//###############################################################################################################################################################################

       //alert("ii = "+ii+ " idPlan = "+idPlan+" itemx = "+itemx)
         //vamos a meter una fila de prueba
        itemx.Actividad_Name;//: "Actividad IMportante aaaa"
        //item.Code: "ACT1"
        //item.Cronogramas: (12) [{…}, {…}, {…}, {…}, {…}, {…}, {…}, {…}, {…}, {…}, {…}, {…}]
        itemx.Id;//: 1
        itemx.Objetivo_PlanId;//: 1
        itemx.Peso;//: 15
        itemx.ResponsableCargo;//: "Almacenist"
        itemx.ResponsableCorreo;//: "caracas1348@gmail.com"
        itemx.ResponsableId;//: "1"
        itemx.ResponsableName;//: "Andy Vasquez"


           // Actividades[Actividades.length] = $('#txt_obj_subobj').val();
             //var objjt = "Objetivo "+Objetivos.length+" : "+$('#txt_obj_subobj').val();
             iddd2 = 'itemAct_'+idPlan+"_"+ii

        if(itemx.Actividad_Name === undefined){
            itemx.Actividad_Name="";
        }
        if(itemx.Peso === undefined){
            itemx.Peso="";
        }
        if(itemx.ResponsableName === undefined){
            itemx.ResponsableName="";
        }
        //var Id = 25;
        //var nAct = 10;
        var html2 = '     ';

        if(nActs == 0)
        {
            $('#body-tabla-list-EvalAud2').html("     "); nObjSub = 1;
        }

      var item = ii+1;
      var tx_act =  `
          <div class="form-group col-12 border text-left" style="  height: auto !important; width: 100% !important; !important; border-color:#DEE2E6 !important;  margin:0px 0px 0px !important; padding: 0px 0px !important;"  id = "divitem">
          <textarea class="text-justify textarea-fecha2 autocompletecollaborator" onBlur="AgregarinformacionObjActividad(1,$(this).val(),${istObj},${istSobj},${ii})"
              style="height: 36px; width:95%; margin: 8px 0px 8px 8px !important; padding: 0px 0px 0px 0px !important; font-size: 13px !important; font-weight: bold; color:#534b4b; background-color:#F2F2F2 !important;"  id="itemAct${ii}"  >${itemx.Actividad_Name}</textarea>
        </div>
          `;

        var tx_porc =  `
            <div class="d-flex justify-content-center align-items-center form-group col-12 border text-center" style="  height: auto !important; width: 92% !important; !important; border-color:#DEE2E6 !important;  margin:0px 0px 0px !important; padding: 0px 0px !important;"  id = "divitem">
            <input onkeyup="registraActividadNueva('itemPeso${ii}','peso',${ii})" onBlur="AgregarinformacionObjActividad(2,$(this).val(),${istObj},${istSobj},${ii},'itemPeso${ii}')" class="text-justify textarea-fecha2 autocompletecollaborator" value='${itemx.Peso}'
                style="height: 36px; text-align:center; width:85%; margin: 4px !important; padding: 0px 0px 0px 0px !important; font-size: 13px !important; font-weight: bold; color:#534b4b; background-color:#F2F2F2 !important;"  id="itemPeso${ii}"  name = "itemPeso${ii}"></input>
                <div class="input-group-append">
                <span class="input-group-text"> %</span>
              </div>   
                </div>
            `;

        var tx_resp =  `
        <div class="form-group col-12 border text-left" style="  height: auto !important; width: 98% !important; !important; border-color:#DEE2E6 !important;  margin:0px 0px 0px !important; padding: 0px 0px 0px 0px !important;"  id = "divTarea">
        <input id = 'PaResponsableName${ii}' class="text-justify textarea-fecha2 autocompletecollaborator" value = '${itemx.ResponsableName}' onchange="fnSp3onchangeColor('divf6')"
            style="height: 36px; width:90%; margin: 8px 0px 8px 8px !important; padding: 0px 0px 0px 0px !important; font-size: 13px !important; font-weight: bold; color: #534b4b; background-color:#F2F2F2 !important;"  "></input>
      </div>
            `;


        //var iddthis = "itemActs_"+nActs;
        var visible = '';
        if(objNewPA.Estado_PlanId == 1){
         visible = `style="display:none;"` ;
        }

            html2 += `

            <div id = "${iddd2}"  class="item-tabla p-2" style="z-index: 1;display:relative;  padding: 0px !important; margin: 10px 8px 0px !important; width: 1223px !important;">
            <div class="row m-0 justify-content-between align-items-center tbody_trainning">
                <div class="col-12 text-center" style="font-size: 15px; padding: 4px !important; ">
                    <div class="row">



                    <table width = "100%" border="0">
                        <tr >
                            <td width = "5%" align="center"><div id="c1TabGeny" class="text-left "  style='margin: 0px 0px 0px 18px !important;  font-size: 14px !important; '>${item}</div></td>
                            <td width = "35%" align="center"><div id="c3TabGeny" class="text-left "   style='color:#000;'>${tx_act}</div></td>
                            <td width = "8%" align="center"><div id="c3TabGeny" class="text-left "   style='color:#000;' >${tx_porc}</div></td>
                            <td width = "23%" align="center"><div id="c3TabGeny" class="text-left "  style='color:#000;'>${tx_resp}</div></td>

                            <td width="8%" align="center"><div id="c4TabGeny" class="text-center lbCabezaTabla">
                            <button type="button" title="Crear Tareas de la Actividad" onclick="fnSp3NuevasTareaActividadesPlan(0)" class="btn-circle btn_read border-0" style="background-color: #05beee !important;" id="btn_ActividadPlanundefined">
                                <img src="./images/iconos/test6.svg" class="ojo-1">
                            </button>
                        </div></td>
                            <td width = "6%" align="center"><div id="c4TabGeny" class="text-center lbCabezaTabla"  >
                                <button type='button' title='Crear Tareas de la Actividad' onclick="fnSp3NuevasTareaActividadesPlan(${itemx.Id})"   class='btn-circle btn_read border-0' style='background-color:#ff9f47 !important;' id='btn_ActividadPlan${itemx.Id}'>
                                    <img src='./images/iconos/test6.svg' class='ojo-1'  >
                                </button>
                            </td>

                            <td width = "6%" align="center"><div id="c4TabGeny" class="text-center lbCabezaTabla"  >
                                <button type='button' title='Crear Cronograma de Actividades' onclick="fnSp3agregaCronogramaActividadObjetivoPlan(${itemx.Id})"   class='btn-circle btn_read border-0' style='background-color:#05beee !important;' id='btn_ActividadPlan${itemx.Id}'>
                                    <img src='./images/iconos/calendar2.svg' class='ojo-1'  >
                                </button>
                            </td>

                            <td width = "6%" align="center"><div id="c4TabGeny" class="text-center lbCabezaTabla"  >
                                    <button type='button' title='Editar Responsable' onclick="fnSp3EditarActividadPlanAnual(${itemx.Id})"   class='btn-circle btn_read border-0' style='background-color:#58c25d !important;' id='btn_verPlanAnual${itemx.Id}'>
                                        <img src='./images/iconos/edit_1.svg' class='ojo-1'  >
                                    </button>
                            </td>

                            <td ${visible} width = "6%" align="center"><div id="c4TabGeny" class="text-center lbCabezaTabla"  >
                                    <button type='button' title='Eliminar Actividad${iddd2}' onclick="fnSp3EliminarActividadPlanAnual('${iddd2}')"   class='btn-circle btn_read border-0' style='background-color:#ff6767 !important;' id='btn_verEliminarPlan${itemx.Id}'>
                                        <img src='./images/iconos/delete.svg' class='ojo-1'  >
                                    </button>
                            </td>

                            <td width = "1%" align="center"><div id="c7TabGeny" class="text-center lbCabezaTabla"  >&nbsp</div></td>


                        </tr>
                    </table>





                        </div>
                    </div>
                </div>
            </div>


            `;
            $('#body-tabla-list-EvalAud2').append(html2);
    }//###############################################################################################################################################################################

    ($getPersonResponsablePa("#PaResponsableName"+ii),ii,1,istObj, istSobj, ii);

console.log(objNewPA.Objetivos)

}//------------------------------------- fini   fnSp3agregaObjetivoSubojetivo() -------------------------------------







//   getPersonResponsablePa(objeto,item,1,istObj, istSobj, nActsN);
var getPersonResponsablePa = function (obj,item,i, nobjj, nsobjj,nactt) 
{
    //console.log('obj=',obj, 'item=',item,'i=',i);
    //console.log(obj,item,i, nobjj, nsobjj,nactt) 
    obj.autocomplete({
        change: function (event, ui)
        {
            //alert('entra');
           //alert('Hola');
           //console.log('buscando.............',ui);
           
           
            //console.log( $("#hid_collaborator_id_"+i).val())
            if (ui.item === null &&  $("#hid_Name_id_1"+i).length>20)
            {

                 $("#hid_collaborator_id_"+i).val("");
                 $(this).val("");
                 $("#add_covid_lastname_"+i).val(""); 
            }
            else if(ui.item)
            {

                $("#PaResponsableName"+item).val(ui.item.firstname).trigger("change");
                //$("#add_covid_lastname_"+i).val(ui.item.lastname).trigger("change");
                // $("#add_covid_lastname_"+i).focus();
                // document.getElementById("add_covid_lastname_"+i).focus();
                //  document.getElementById("add_covid_lastname_"+i).focus();
            }

        },

        source: function( request, response )
        {
            var urlx = apiurlsecurity+"/api/Get-Collaborator?code="+GetCollaborator+"&httpmethod=objectlist";
            //console.log("tony",urlx);
            var filter = obj.val();
                          document.getElementById('loadRespPa').style.visibility = 'visible';
            //console.log("---[",filter);
            var param= {filter:filter};
            var headers = {"Authorization":TOKEN_CLIENT,"apiKey":"r$3#23516ewew5"}
            $("#add_firtnameload_1").show();
            $.ajax({
                url: apiurlsecurity+"/api/Get-Collaborator?code="+GetCollaborator+"&httpmethod=objectlist",
                //dataType: "json",
                method:"post",
                data : JSON.stringify(param),
                processData:false,
                crossDomain: true,
                async: true,
                headers : headers,
                success: function( data )
                {
                    document.getElementById('loadRespPa').style.visibility = 'hidden';
                    $("#add_firtnameload_1").hide();
                    var array =[];
                    data =  JSON.parse(data);
                    console.log("tony",data);

                    data.value.forEach(item =>
                    {
                        var json ={}
                        json.label      = item.displayName;
                        json.value      = item.givenName;
                        json.id         = item.objectId;
                        json.cargo      = item.jobTitle;
                        json.firstname  = item.displayName;
                        json.correo     = item.userPrincipalName;
                        array.push(json);
                    });
                    response(array);

                }
            });
        },
        minLength: 3,
        select: function( event, ui )
        { //alert(ui.item.id)
            $("#PaResponsableUserHash"+item).val(ui.item.id);//PaResponsableCargo
            $("#PaResponsableCargo"+item).val(ui.item.cargo);
            $("#PaResponsableCorreo"+item).val(ui.item.correo);

            if(istSobj == null)//es un objetivo
            {
                
                ty = 0;
   
                
                objNewPA.Objetivos[nobjj].Actividades[nactt].ResponsableId = ui.item.id;
                objNewPA.Objetivos[nobjj].Actividades[nactt].ResponsableName = ui.item.firstname;
                objNewPA.Objetivos[nobjj].Actividades[nactt].ResponsableCargo = ui.item.cargo;
                objNewPA.Objetivos[nobjj].Actividades[nactt].ResponsableCorreo = ui.item.correo;
            }
            else
            {//es un subobjetivo
               
                objNewPA.Objetivos[nobjj].SubObjetivos[nsobjj].Actividades[nactt].ResponsableId = ui.item.id;
                objNewPA.Objetivos[nobjj].SubObjetivos[nsobjj].Actividades[nactt].ResponsableName = ui.item.firstname;
                objNewPA.Objetivos[nobjj].SubObjetivos[nsobjj].Actividades[nactt].ResponsableCargo = ui.item.cargo;
                objNewPA.Objetivos[nobjj].SubObjetivos[nsobjj].Actividades[nactt].ResponsableCorreo = ui.item.correo;
            }
            console.log('el objteo con Actividad es', objNewPA)

        



           
            setTimeout(function(){
                $("#PaResponsableName"+item).val(ui.item.firstname);
               
            },300);
        },
        open: function() {
            $( this ).removeClass( "ui-corner-all" ).addClass( "ui-corner-top" );
        },
        close: function() {
            $( this ).removeClass( "ui-corner-top" ).addClass( "ui-corner-all" );

        },
        search: function () {
            $("#spinnerLoadColaborador").show();
        },
        response: function () {
            $("#spinnerLoadColaborador").hide();
            // document.getElementById("add_covid_lastname_"+i).focus();
        }
    });
}





var getNewResponsable = function (obj,item,i, nobjj, nsobjj,nactt) 
{
    //console.log('obj=',obj, 'item=',item,'i=',i);
    //console.log(obj,item,i, nobjj, nsobjj,nactt) 
    obj.autocomplete({
        change: function (event, ui)
        {
            //alert('entra');
           //alert('Hola');
           //console.log('buscando.............',ui);
           
           
            //console.log( $("#hid_collaborator_id_"+i).val())
            if (ui.item === null &&  $("#hid_Name_id_1"+i).length>20)
            {

                 $("#hid_collaborator_id_"+i).val("");
                 $(this).val("");
                 $("#add_covid_lastname_"+i).val(""); 
            }
            else if(ui.item)
            {

                $("#txt_New_ResponsableName").val(ui.item.firstname).trigger("change");
                //$("#add_covid_lastname_"+i).val(ui.item.lastname).trigger("change");
                // $("#add_covid_lastname_"+i).focus();
                // document.getElementById("add_covid_lastname_"+i).focus();
                //  document.getElementById("add_covid_lastname_"+i).focus();
            }

        },

        source: function( request, response )
        {
            var urlx = apiurlsecurity+"/api/Get-Collaborator?code="+GetCollaborator+"&httpmethod=objectlist";
            //console.log("tony",urlx);
            var filter = obj.val();
                          document.getElementById('loadRespPa').style.visibility = 'visible';
            //console.log("---[",filter);
            var param= {filter:filter};
            var headers = {"Authorization":TOKEN_CLIENT,"apiKey":"r$3#23516ewew5"}
            $("#add_firtnameload_1").show();
            $.ajax({
                url: apiurlsecurity+"/api/Get-Collaborator?code="+GetCollaborator+"&httpmethod=objectlist",
                //dataType: "json",
                method:"post",
                data : JSON.stringify(param),
                processData:false,
                crossDomain: true,
                async: true,
                headers : headers,
                success: function( data )
                {
                    document.getElementById('loadRespPa').style.visibility = 'hidden';
                    $("#add_firtnameload_1").hide();
                    var array =[];
                    data =  JSON.parse(data);
                    console.log("tony",data);

                    data.value.forEach(item =>
                    {
                        var json ={}
                        json.label      = item.displayName;
                        json.value      = item.givenName;
                        json.id         = item.objectId;
                        json.cargo      = item.jobTitle;
                        json.firstname  = item.displayName;
                        json.correo     = item.userPrincipalName;
                        array.push(json);
                    });
                    response(array);

                }
            });
        },
        minLength: 3,
        select: function( event, ui )
        { //alert(ui.item.id)
            $("#txt_New_ResponsableId").val(ui.item.id);//PaResponsableCargo
            $("#txt_New_ResponsableCargo").val(ui.item.cargo);
            $("#txt_New_ResponsableCorreo").val(ui.item.correo);

            if(istSobj == null)//es un objetivo
            {
                
                ty = 0;
   
                
                objNewPA.Objetivos[nobjj].Actividades[nactt].ResponsableId = ui.item.id;
                objNewPA.Objetivos[nobjj].Actividades[nactt].ResponsableName = ui.item.firstname;
                objNewPA.Objetivos[nobjj].Actividades[nactt].ResponsableCargo = ui.item.cargo;
                objNewPA.Objetivos[nobjj].Actividades[nactt].ResponsableCorreo = ui.item.correo;
            }
            else
            {//es un subobjetivo
               
                objNewPA.Objetivos[nobjj].SubObjetivos[nsobjj].Actividades[nactt].ResponsableId = ui.item.id;
                objNewPA.Objetivos[nobjj].SubObjetivos[nsobjj].Actividades[nactt].ResponsableName = ui.item.firstname;
                objNewPA.Objetivos[nobjj].SubObjetivos[nsobjj].Actividades[nactt].ResponsableCargo = ui.item.cargo;
                objNewPA.Objetivos[nobjj].SubObjetivos[nsobjj].Actividades[nactt].ResponsableCorreo = ui.item.correo;
            }
            console.log('el objteo con Actividad es', objNewPA)

        



           
            setTimeout(function(){
                $("#txt_New_ResponsableName").val(ui.item.firstname);
               
            },300);
        },
        open: function() {
            $( this ).removeClass( "ui-corner-all" ).addClass( "ui-corner-top" );
        },
        close: function() {
            $( this ).removeClass( "ui-corner-top" ).addClass( "ui-corner-all" );

        },
        search: function () {
            $("#spinnerLoadColaborador").show();
        },
        response: function () {
            $("#spinnerLoadColaborador").hide();
            // document.getElementById("add_covid_lastname_"+i).focus();
        }
    });
}

var confirmarGuardarNuevoResponsable = function () {
    $('#Sp3VentanaCambiarResponsable').modal('hide').removeClass('fade');
    var flag_empty = 1;
    var string_info = "";
    if($('#txt_motivo_cambio').val() === "" || $('#txt_motivo_cambio').val() === null)
    {
        flag_empty = 0;
        string_info ="el motivo "
    }

    if($('#txt_New_ResponsableName').val() === "" || $('#txt_New_ResponsableName').val() === null)
    {
        flag_empty = 0;
        if(string_info ===""){
            string_info ="el nuevo responsable "
   
        }else{
            string_info =string_info+"y el nuevo responsable"

        }
    }

    if(flag_empty == 1){
        $('#modalConfirmCambioResponsable').css('z-index','9999999');
        $("#modalConfirmCambioResponsable").modal("show").addClass("fade");
    }else{
        verModalError("Disculpe","Debe registrar "+string_info)
    setTimeout(function(){
        $("#Sp3VentanaCambiarResponsable").modal("show").addClass("fade");
       
    },400);
    }


    
}

var guardarNuevoResponsable = function () {
    $('#modalConfirmCambioResponsable').modal('hide').removeClass('fade');

    var body ={
        "Motivo": $('#txt_motivo_cambio').val(),
        "Actividad_PlanId":  $('#Actividad_PlanId').val(),
        "Created_By": getCookie("vtas_id_hash"+sessionStorage.tabVisitasa),
        "Old_ResponsableId": $('#txt_Old_ResponsableId').val(),
        "Old_ResponsableCorreo": $('#txt_Old_ResponsableCorreo').val(),
        "Old_ResponsableCargo": $('#txt_Old_ResponsableCargo').val(),
        "Old_ResponsableName":  $('#txt_Old_ResponsableName').val(),
        "New_ResponsableId": $('#txt_New_ResponsableId').val(),
        "New_ResponsableCorreo": $('#txt_New_ResponsableCorreo').val(),
        "New_ResponsableCargo": $('#txt_New_ResponsableCargo').val(),
        "New_ResponsableName":  $('#txt_New_ResponsableName').val(),

    }
    console.log(body)
    
    var url = apiUrlssoma+"/api/Post-Plan-Anual?code=ZnQh7E2Noeiv1emsJPTvXE5l/qClcMIjv3FNePN8XTRfTY5aOqmSAQ==&httpmethod=postResponsable";
     var headers ={
       "apikey":constantes.apiKey
       }
       $.ajax({
       method: "POST",
       url:  url,
       data: JSON.stringify(body),
       headers:headers,
       crossDomain: true,
       dataType: "json",
       })
       .done(function(data)
       {
       console.log(data)
       if(data.resul>0){
   console.log(data)
   $('#text_msj_confirm_exito_responsable').html('Se Realiz&oacute; el cambio de Manera Exitosa')
   $('#modalExitoCambioResponsableSp3').modal('show').addClass('fade') 
   $("#PaResponsableName"+istAct).val($('#txt_New_ResponsableName').val());

   setTimeout(function(){
    istAct = null;
   
},300);

       }
       })
       .fail(function( jqXHR, textStatus, errorThrown ) {
           $("#preloader").fadeOut();
   
       })
       .always(function( jqXHR, textStatus, errorThrown ) {
     
       });
   
}

var  fnSp3CC_Cronograma = function ()
{//------------------------------------- ini   fnSp3onchangeNecAnalisis() -------------------------------------
    console.log("hola")
    console.log(CC_Cronograma)

    if(CC_Cronograma == false)//si
    {
        $('#rbtn_no_CC').attr('src','./images/iconos/aprobarbien.svg');
        CC_Cronograma = true
    }
    else//no
    {
        $('#rbtn_no_CC').attr('src','./images/iconos/aprobarvoid.svg');
        CC_Cronograma = false
        
    }
    
   
}


var mostrarHistorialResponsable = function () {
    
    $('#Sp3VentanaHistorialResponsable').modal('show').addClass('fade') 
    $('#divListaHistorialResponsable').html('')
console.log(istAct)

if(istSobj == null)//es un objetivo
{
    $('#lbTitleHistorialResponsable').html('Historial de responsables - '+objNewPA.Objetivos[istObj].Actividades[istAct].Actividad_Name)

    console.log(objNewPA.Objetivos[istObj].Actividades[istAct].Responsable)

    objNewPA.Objetivos[istObj].Actividades[istAct].Responsable.forEach(function(Item){
        $('#divListaHistorialResponsable').append(
            ` <div class="header-tabla px-2 py-3" style="width: 910px !important; border-radius: 4px !important; border: solid 1px #cbcbcb !important; background-color: #f2f2f2 !important; margin-top: 1px !important ">
            <table width = "100%" border="0">
                <tr >
                        <td width="5%">
                            <div>&nbsp;</div>
                        </td>
                    <td width = "15%" align="center"><div id="archInicial" class="text-left lbCabezaTabla" style=" font-size: 14px !important ;  color: #000 !important;"> ${Item.Old_ResponsableName} </div></td>
                    <td width = "15%" align="center"><div id="archFinal" class="text-left lbCabezaTabla" style=" font-size: 14px !important; color: #000 !important;">${Item.Old_ResponsableName}</div></td>
        
                    <td width = "15%" align="center"><div id="motivoArch" onclick="mostrarmotivoCambioResp('${Item.Motivo}','${Item.Date}')" class="text-left lbCabezaTabla" style=" font-size: 14px !important; color: #000 !important;"><a href="#" style="color: black !important; text-decoration: underline !important;">Ver Motivo</a></div></td>
        
                    <td width = "15%" align="center" ><div id="fechaSubArch" class="text-left lbCabezaTabla" style=" font-size: 14px !important; color: #000 !important;"  >${Item.Date}</div></td>
                </tr>
            </table>
        </div>`)
    })

    
}
else
{//es un subobjetivo
    console.log(objNewPA.Objetivos[istObj].SubObjetivos[istSobj].Actividades[istAct].Responsable)
    $('#lbTitleHistorialResponsable').html('Historial de responsables - '+objNewPA.Objetivos[istObj].SubObjetivos[istSobj].Actividades[istAct].Actividad_Name)

    objNewPA.Objetivos[istObj].SubObjetivos[istSobj].Actividades[istAct].Responsable.forEach(function(Item){
        $('#divListaHistorialResponsable').append(
            ` <div class="header-tabla px-2 py-3" style="width: 910px !important; border-radius: 4px !important; border: solid 1px #cbcbcb !important; background-color: #f2f2f2 !important; margin-top: 1px !important ">
            <table width = "100%" border="0">
                <tr >
                        <td width="5%">
                            <div>&nbsp;</div>
                        </td>
                    <td width = "15%" align="center"><div id="archInicial" class="text-left lbCabezaTabla" style=" font-size: 14px !important ;  color: #000 !important;"> ${Item.Old_ResponsableName} </div></td>
                    <td width = "15%" align="center"><div id="archFinal" class="text-left lbCabezaTabla" style=" font-size: 14px !important; color: #000 !important;">${Item.Old_ResponsableName}</div></td>
        
                    <td width = "15%" align="center"><div id="motivoArch" onclick="mostrarmotivoCambioResp('${Item.Motivo}','${Item.Date}')" class="text-left lbCabezaTabla" style=" font-size: 14px !important; color: #000 !important;"><a href="#" style="color: black !important; text-decoration: underline !important;">Ver Motivo</a></div></td>
        
                    <td width = "15%" align="center" ><div id="fechaSubArch" class="text-left lbCabezaTabla" style=" font-size: 14px !important; color: #000 !important;"  >${Item.Date}</div></td>
                </tr>
            </table>
        </div>`)
    })

}
}


var mostrarmotivoCambioResp = function (motivo,date) {
    console.log(motivo)
    
    $('#lbTitleMotivoCambioResponsable').html('')
    if(istSobj == null)//es un objetivo
    {
        $('#lbTitleMotivoCambioResponsable').html('Motivo de Cambio del Responsable - '+objNewPA.Objetivos[istObj].Actividades[istAct].Actividad_Name+' - Fecha:'+date)    

    }else{
        $('#lbTitleMotivoCambioResponsable').html('Motivo de Cambio del Responsable - '+objNewPA.Objetivos[istObj].SubObjetivos[istSobj].Actividades[istAct].Actividad_Name+' - Fecha:'+date)    

    }

    $('#motivoCambioResponable').html('')
    $('#motivoCambioResponable').html(motivo)
    $('#Sp3VentanaMotivoCambioResponsable').modal('show').addClass('fade') 

}

var mostrarVentanaControlCambios = function (pos,item) {
    $('#listadoMotivosCC').html('')

    istAct = pos;
    if(istSobj == null)//es un objetivo
    {
        $('#txt_title_name_actividad').html(item+': '+objNewPA.Objetivos[istObj].Actividades[istAct].Actividad_Name)    

        objNewPA.Objetivos[istObj].Actividades[istAct].ControlCambios.forEach(function(Item){
            $('#listadoMotivosCC').append(
                ` <div class="header-tabla px-2 py-3" style="width: 1233px !important; border-radius: 4px !important; border: solid 1px #cbcbcb !important; background-color: #fff !important; margin-top: 1px !important ">
                <table width = "100%" border="0">
                    <tr >
        
                        <td width = "60%" align="center"><div id="archInicial" class="text-left lbCabezaTabla" style=" font-size: 14px !important ;  color: #000 !important;"><b> ${Item.Nombre}</b> </div></td>
                        <td width = "15%" align="center"><div id="archFinal" class="text-left lbCabezaTabla" style=" font-size: 14px !important; color: #000 !important;"><b>${Item.Date}</b></div></td>
                        <td width = "15%" align="center"><div id="archFinal" class="text-left lbCabezaTabla" style=" font-size: 14px !important; color: #000 !important;">${Item.Cronograma == true ? " <img src='./images/iconos/aprobarbien.svg' class='ojo-1'  >" : "<img src='./images/iconos/aprobarvoid.svg' class='ojo-1'  >"}</div></td>
            
            
                        <td width = "10%" align="center" ><div id="fechaSubArch" class="text-left lbCabezaTabla" style=" font-size: 14px !important; color: #000 !important;"  > 
                        <button type='button' title='Ver el Plan Anual' onclick="  fnSp3MostrarMostrarAdjuntoCCPlanAnual(${Item.Id})"   class='btn-circle btn_read border-0' style='background-color:#34559c !important;' id='btn_verHallago${Item.Id}'>
                        <img src='./images/iconos/ojo_1.svg' class='ojo-1'  >
                    </button>
                    </div></td>                    </tr>
                </table>
            </div>`)
        
        })
    }else{
        $('#txt_title_name_actividad').html(item+': '+objNewPA.Objetivos[istObj].SubObjetivos[istSobj].Actividades[istAct].Actividad_Name)    

        objNewPA.Objetivos[istObj].SubObjetivos[istSobj].Actividades[istAct].ControlCambios.forEach(function(Item){
            $('#listadoMotivosCC').append(
                ` <div class="header-tabla px-2 py-3" style="width: 1233px !important; border-radius: 4px !important; border: solid 1px #cbcbcb !important; background-color: #fff !important; margin-top: 1px !important ">
                <table width = "100%" border="0">
                    <tr >
        
                        <td width = "60%" align="center"><div id="archInicial" class="text-left lbCabezaTabla" style=" font-size: 14px !important ;  color: #000 !important;"> <b>${Item.Nombre}</b> </div></td>
                        <td width = "15%" align="center"><div id="archFinal" class="text-left lbCabezaTabla" style=" font-size: 14px !important; color: #000 !important;"><b>${Item.Date}</b></div></td>
                        <td width = "15%" align="center"><div id="archFinal" class="text-left lbCabezaTabla" style=" font-size: 14px !important; color: #000 !important;">${Item.Cronograma == true ? " <img src='./images/iconos/aprobarbien.svg' class='ojo-1'  >" : "<img src='./images/iconos/aprobarvoid.svg' class='ojo-1'  >"}</div></td>
            
            
                        <td width = "6%" align="center" ><div id="fechaSubArch" class="text-left lbCabezaTabla" style=" font-size: 14px !important; color: #000 !important;"  > 
                        <button type='button' title='Ver el Plan Anual' onclick="  fnSp3MostrarMostrarAdjuntoCCPlanAnual(${Item.Id})"   class='btn-circle btn_read border-0' style='background-color:#34559c !important;' id='btn_verHallago${Item.Id}'>
                                                        <img src='./images/iconos/ojo_1.svg' class='ojo-1'  >
                                                    </button>
                    </div></td>                    </tr>
                </table>
            </div>`)
        
        })
    }

    
    $('#modalIngresarControlCambiosSp3').modal('show').addClass('fade') 
    $('#Sp3VentanActividadPlan').modal('hide').removeClass('fade'); 

    var max_chars = 50;
    $('#max').html(max_chars);
    $('.textarea_formBody').keyup(function() {
        var chars = $(this).val().length;
        var diff = chars + 0;
        $('#contadorBody').html(diff);

    });



}

var confirmNuevoControlCambio = function () {
var file_control_cambio = document.getElementById("file_control_cambio").files[0];
    if(file_control_cambio)
    {
        toBase64CC(file_control_cambio?file_control_cambio:'').then(
            data => 
            {
                base64_CC =   data;
                console.log(base64_CC)
            }
                                                                    );
    }
else{

        base64_CC = ''

    }
      $('#modalIngresarControlCambiosSp3').modal('hide').removeClass('fade'); 
    $('#modalConfirmarCCPlanAnualSp3').modal('show').addClass('fade');
}

var agregarNuevoControlCambio = function () {

    console.log($('#txt_motivo_cc').val() )    
    var idActividadCC = 0;
    $('#listadoMotivosCC').html('')
if(istSobj == null)//es un objetivo
{
    idActividadCC = objNewPA.Objetivos[istObj].Actividades[istAct].Id;
}else{
    idActividadCC = objNewPA.Objetivos[istObj].SubObjetivos[istSobj].Actividades[istAct].Id;
}






    var body ={
        "IdActividad": idActividadCC,
        "Cronograma": CC_Cronograma,
        "Nombre": $('#txt_motivo_cc').val(),
        "Adjunto": base64_CC,
        "Created_by": getCookie("vtas_id_hash"+sessionStorage.tabVisitasa)

    }
    
    var url = apiUrlssoma+"/api/Post-Plan-Anual?code=ZnQh7E2Noeiv1emsJPTvXE5l/qClcMIjv3FNePN8XTRfTY5aOqmSAQ==&httpmethod=PostCC";
     var headers ={
       "apikey":constantes.apiKey
       }
       $.ajax({
       method: "POST",
       url:  url,
       data: JSON.stringify(body),
       headers:headers,
       crossDomain: true,
       dataType: "json",
       })
       .done(function(data)
       {
       if(data.Id>0){
   $('#modalConfirmarCCPlanAnualSp3').modal('hide').removeClass('fade')
   $('#modalExitoCCPlanAnualSp3').modal('show').addClass('fade');
   $('#txt_motivo_cc').val('')
   $('#contadorBody').html(0);

   data.ControlCambios.forEach(function(Item){
    $('#listadoMotivosCC').append(
        ` <div class="header-tabla px-2 py-3" style="width: 1233px !important; border-radius: 4px !important; border: solid 1px #cbcbcb !important; background-color: #fff !important; margin-top: 1px !important ">
        <table width = "100%" border="0">
            <tr >

                <td width = "60%" align="center"><div id="archInicial" class="text-left lbCabezaTabla" style=" font-size: 14px !important ;  color: #000 !important;"><b> ${Item.Nombre}</b> </div></td>
                <td width = "15%" align="center"><div id="archFinal" class="text-left lbCabezaTabla" style=" font-size: 14px !important; color: #000 !important;"><b>${Item.Date}</b></div></td>
                <td width = "15%" align="center"><div id="archFinal" class="text-left lbCabezaTabla" style=" font-size: 14px !important; color: #000 !important;">${Item.Cronograma == true ? " <img src='./images/iconos/aprobarbien.svg' class='ojo-1'  >" : "<img src='./images/iconos/aprobarvoid.svg' class='ojo-1'  >"}</div></td>
    
    
                <td width = "6%" align="center" ><div id="fechaSubArch" class="text-left lbCabezaTabla" style=" font-size: 14px !important; color: #000 !important;"  > 
                <button type='button' title='Ver el Plan Anual' onclick=" fnSp3MostrarMostrarAdjuntoCCPlanAnual(${Item.Id})"   class='btn-circle btn_read border-0' style='background-color:#34559c !important;' id='btn_verAdjuntoCC${Item.Id}'>
                <img src='./images/iconos/ojo_1.svg' class='ojo-1'  >
            </button>
            </div></td>
            </tr>
        </table>
    </div>`)

})
if(CC_Cronograma == true)
{
$("#btn_esdirCronograma_"+istAct).attr('disabled',false)
$("#btn_esdirCronograma_"+istAct).css('background-color','#ffd439');
}



if(istSobj == null)//es un objetivo
{
    idActividadCC = objNewPA.Objetivos[istObj].Actividades[istAct].ControlCambios = data.ControlCambios;
}else{
    idActividadCC = objNewPA.Objetivos[istObj].SubObjetivos[istSobj].Actividades[istAct].ControlCambios = data.ControlCambios;
}

       }
       })
       .fail(function( jqXHR, textStatus, errorThrown ) {
           $("#preloader").fadeOut();
   
       })
       .always(function( jqXHR, textStatus, errorThrown ) {

       });

}


const toBase64CC = file => new Promise((resolve, reject) => {
    const reader = new FileReader();
    reader.readAsDataURL(file);
    reader.onload = () => resolve(reader.result);
    reader.onerror = error => reject(error);
});


 var fnSp3MostrarMostrarAdjuntoCCPlanAnual = function (id) {
     console.log(id)
 }


 var confirmNuevoCronogramaControlCambio = function () {

    $('#Sp3VentanCronogramaActividadPlan').modal('hide').removeClass('fade'); 
    $('#modalConfirmarCronogramaCCPlanAnualSp3').modal('show').addClass('fade');


}

 var guardarCronogramaCC = function () {
        var body ={};

        if(istSobj == null)//es un objetivo
        {
            body = objNewPA.Objetivos[istObj].Actividades[isAcct].Cronogramas;
        }else{
            body = objNewPA.Objetivos[istObj].SubObjetivos[isAcct].Actividades[istAct].Cronogramas;
        }   
        console.log(body) 
    var url = apiUrlssoma+"/api/Post-Plan-Anual?code=ZnQh7E2Noeiv1emsJPTvXE5l/qClcMIjv3FNePN8XTRfTY5aOqmSAQ==&httpmethod=UpdateCronograma";
     var headers ={
       "apikey":constantes.apiKey
       }
       $.ajax({
       method: "POST",
       url:  url,
       data: JSON.stringify(body),
       headers:headers,
       crossDomain: true,
       dataType: "json",
       })
       .done(function(data)
       {
       if(data.Id>0){
   
console.log(data)
    $("#modalExitoCronoCCPlanAnualSp3").modal("show").addClass("fade");
    CC_Cronograma = false;
    $("#btn_esdirCronograma_"+istAct).attr('disabled',true)
$("#btn_esdirCronograma_"+istAct).css('background-color','#f2f2f2');
       }
       })
       .fail(function( jqXHR, textStatus, errorThrown ) {
           $("#preloader").fadeOut();
   
       })
       .always(function( jqXHR, textStatus, errorThrown ) {

       });

 }
/*
var getPersonResponsable = function (obj,i) {
    obj.autocomplete({
        change: function (event, ui)
        {
           // alert('entra');
           //alert('Hola');
           //console.log('buscando.............',ui);
           
           
            //console.log( $("#hid_collaborator_id_"+i).val())
            if (ui.item === null &&  $("#hid_Name_id_1"+i).length>20)
            {

                 $("#hid_collaborator_id_"+i).val("");
                 $(this).val("");
                 $("#add_covid_lastname_"+i).val(""); 
            }
            else if(ui.item)
            {

                $("#ResponsableName").val(ui.item.firstname).trigger("change");
                $("#add_covid_lastname_"+i).val(ui.item.lastname).trigger("change");
                // $("#add_covid_lastname_"+i).focus();
                // document.getElementById("add_covid_lastname_"+i).focus();
                //  document.getElementById("add_covid_lastname_"+i).focus();
            }

        },

        source: function( request, response )
        {
            var urlx = apiurlsecurity+"/api/Get-Collaborator?code="+GetCollaborator+"&httpmethod=objectlist";
            //console.log("tony",urlx);
            var filter = obj.val();
                          document.getElementById('loadResp').style.visibility = 'visible';
            console.log("---[",filter,"]---");
            var param= {filter:filter};
            var headers = {"Authorization":TOKEN_CLIENT,"apiKey":"r$3#23516ewew5"}
            $("#add_firtnameload_1").show();
            $.ajax({
                url: apiurlsecurity+"/api/Get-Collaborator?code="+GetCollaborator+"&httpmethod=objectlist",
                //dataType: "json",
                method:"post",
                data : JSON.stringify(param),
                processData:false,
                crossDomain: true,
                async: true,
                headers : headers,
                success: function( data )
                {
                    console.log("data", data);
                    document.getElementById('loadResp').style.visibility = 'hidden';
                    $("#add_firtnameload_1").hide();
                    var array =[];
                    data =  JSON.parse(data);
                    console.log("tony",data);

                    data.value.forEach(item =>
                    {
                        var json ={}
                        json.label      = item.displayName;
                        json.value      = item.givenName;
                        json.id         = item.objectId;
                        json.cargo      = item.jobTitle;
                        json.firstname  = item.displayName;//item.givenName+' '+item.surname;
                        json.correo     = item.userPrincipalName;
                        array.push(json);
                    });
                    response(array);

                }
            });
        },
        minLength: 3,
        select: function( event, ui )
        { alert(ui.item.id)
            $("#ResponsableUserHash").val(ui.item.id);
            $("#ResponsableCargo").val(ui.item.cargo);
            $("#ResponsableCorreo").val(ui.item.correo);
            
            if(guardarEnviar == 1)
            {
                $('#btGuardarModificar').html("<b>Guardar Enviar</b>");
            }
            else
            {
                $('#btGuardarModificar').html("<b>Guardar</b>");
            }
            //$("#ResponsableUserHash").val(ui.item.correo);

            //$("#add_covid_dni_"+i).trigger("focusout");
            //console.log(ui.item.label)
            setTimeout(function(){
                // alert(ui.item.firstname)
                // alert(ui.item.cargo)//correo
                // alert(ui.item.correo)
                $("#ResponsableName").val(ui.item.firstname);
                //alert($("#ResponsableCorreo").val())


                //$("#Cargo_"+i).val(ui.item.jobTitle);
                //$("#txt_correo_"+i).val(ui.item.userPrincipalName);
            },300);
        },
        open: function() {
            $( this ).removeClass( "ui-corner-all" ).addClass( "ui-corner-top" );
        },
        close: function() {
            $( this ).removeClass( "ui-corner-top" ).addClass( "ui-corner-all" );

        },
        search: function () {
            $("#spinnerLoadColaborador").show();
        },
        response: function () {
            $("#spinnerLoadColaborador").hide();
            // document.getElementById("add_covid_lastname_"+i).focus();
        }
    });
}
*/














//----------------------------------------------------------------- GESTION PLAN ANUAL CRONOGRAMAS ----------------------------------------------------
/****************************************************************************************
* VISUAL SAT - [2021]
* PROYECTO : SIGTASA
* ESQUEMA : SSOMA
* MODULO : GESTIÓN DE PLAN ANUAL.CRONOGRAMA Y TAREAS
* OPERADORES_________________________________________________________________________
* | # | PROGRAMADOR     |  |      FECHA   |  |   HORA   |           CORREO           |
* | 1 | Andy Vásquez    |  |  12/01/2021  |  | 14:13:50 |    caracas1348@gmail.com   |
* |___|_________________|__|______________|__|__________|____________________________|
*
* DESCRIPCION: ARCHIVO FRONT DE FUNCIONALIDAD EN CLIENTE DE LAS OPCIONES DEL CRONOGRAMA DEL PLAN 
*              ANUAL Y SUS TAREAS- (LISTADO, CREAR, MODIFICAR ELIMINAR, VALIDAR)
*
* ARCHIVOS DE SERVICIOS   ____________________________________
* | # |     MODULO             |  |         NOMBRE            |   
* | 1 |      SSOMA             |  |     Get-Plan-Anual        |**PENDIENTE VA A CAMBIAR
* |___________________________________________________________|
*
* VERSION: 0.1 Beta
*******************************************************************************************/

//alert('Cronogramas y Tareas');
function Cronograma()
{
   

     this.Id; 
     this.ActividadPlanId; 
     this.Year_Frecuencia; 
     this.Mes_Num; 
     this.Mes_Name;
     this.S1; 
     this.S2; 
     this.S3; 
     this.S4; 

     this.Fecha_S1_Ini; 
     this.Fecha_S1_Fin; 

     this.Fecha_S2_Ini; 
     this.Fecha_S2_Fin;

     this.Fecha_S3_Ini; 
     this.Fecha_S3_Fin;

     this.Fecha_S4_Ini; 
     this.Fecha_S4_Fin;
                  

            
}

var newCron = 0;// 0 no se a llamado a crear nuevo cronograma en el nuevo plan
               //  1 no se a llamado a crear nuevo cronograma en el nuevo plan

var varMes = ["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"];
var isAcct = 0;




function fnSp3CerrarNuevasTareasPlan()
{//------------------------------------- ini   fnSp3CerrarVentanaMostrarPlanAnual() -------------------------------------
    $("#Sp3VentanActividadPlan").modal("hide").removeClass("fade");
    $("#Sp3VentanaPlanAnualEditView").modal("show").addClass("fade");
}//------------------------------------- ini   fnSp3CerrarVentanaMostrarPlanAnual() -------------------------------------




function fnSp3CerrarNuevasTareasActividadesPlan()
{//------------------------------------- ini   fnSp3CerrarNuevasTareasActividadesPlan() -------------------------------------
    var flag_filaEmptyE = 0;
    console.log(objNewPA.Objetivos[istObj].Actividades[istAct].Tareas)
    if(objNewPA.Objetivos[istObj].Actividades[istAct].Tareas != undefined)
    {
        
     if(objNewPA.Objetivos[istObj].Actividades[istAct].Tareas.length > 0)
     {
        for (let d = 0; d < objNewPA.Objetivos[istObj].Actividades[istAct].Tareas.length; d++) {

        //console.log(Object.keys(objNewPA.Objetivos[istObj].Actividades[r].Tareas[d]))
            var check_inci = objNewPA.Objetivos[istObj].Actividades[istAct].Tareas[d].Evidencia_Name;
            if(check_inci === undefined || check_inci === "")
            {
                flag_filaEmptyE = 1;
         }
            
        }
    } 
 }

 if(flag_filaEmptyE == 0){
    $("#Sp3VentanTareaActividadPlan").modal("hide").removeClass("fade");
}
else{
    verModalError("","No puede dejar evicencias vacias")
}

}//------------------------------------- fin   fnSp3CerrarNuevasTareasActividadesPlan() -------------------------------------




function fnSp3NuevasTareaActividadesPlan(ided)
{//------------------------------------- ini   fnSp3NuevasTareaActividadesPlan() -------------------------------------

  //alert('vamos a crear las TAREAS DE LA ACTIVIDAD del plan = '+ided);

        var n;
        
        if(istSobj == null)
        {
               if(objNewPA.Objetivos[istObj].Actividades[ided].Cronogramas)
                {
                n = objNewPA.Objetivos[istObj].Actividades[ided].Cronogramas.length;
                }else{n=0;}
        }else{

            if(objNewPA.Objetivos[istObj].SubObjetivos[istSobj].Actividades[ided].Cronogramas)//objNewPA.Objetivos[istObj].SubObjetivos[istSobj].Actividades[ided]
                {
                n = objNewPA.Objetivos[istObj].SubObjetivos[istSobj].Actividades[ided].Cronogramas.length;
                }else{n=0;}
        }
        









    if(n == 0)
    {
            verModalError('No existe un Cronograma Definido para esta Actividad','Por favor revisar');
    }
    else
    {
        $("#Sp3VentanTareaActividadPlan").modal("show").addClass("fade");
        $('#body-tabla-list-EvalAud3').html('     '); 
  

  
        if(istSobj == null)//es un objetivo
               {
                  
                  var nTarea = objNewPA.Objetivos[istObj].Actividades[ided].Tareas.length; 
                  var resp = objNewPA.Objetivos[istObj].Actividades[ided].ResponsableName;
                  $('#respTareas').val(resp);
                  var Actt = objNewPA.Objetivos[istObj].Actividades[ided].Actividad_Name;
                  $("#lbTitleTareaActividadPlanAnual").html("Ingresar Tareas de Actividad -"+Actt);
                  istAct = ided;
                  

                  fnSp3agregaTareaActividadObjetivoPlan(-1, objNewPA.Objetivos[istObj].Actividades[ided])
                 
                
                   
               }
               else
               {//es un subobjetivo
      
                  //alert('tarera para un subobjetivo');
                  var nTarea = objNewPA.Objetivos[istObj].SubObjetivos[istSobj].Actividades[ided].Tareas.length; 
                  var resp =   objNewPA.Objetivos[istObj].SubObjetivos[istSobj].Actividades[ided].ResponsableName;
                  $('#respTareas').val(resp);
                  var Actt = objNewPA.Objetivos[istObj].SubObjetivos[istSobj].Actividades[ided].Actividad_Name;
                  $("#lbTitleTareaActividadPlanAnual").html("Ingresar Tareas de Actividad -"+Actt);
                  istAct = ided;
      
                  fnSp3agregaTareaActividadObjetivoPlan(-1,  objNewPA.Objetivos[istObj].SubObjetivos[istSobj].Actividades[ided])
                 
      
               }
    }

 

}//------------------------------------- ini   fnSp3NuevasTareaActividadesPlan() -------------------------------------


function fnSp3NuevasTareaActividadesPlanEditar(ided)
{//------------------------------------- ini   fnSp3NuevasTareaActividadesPlan() -------------------------------------


    console.log(ObjectUsing,istObj,istSobj)
  //alert('vamos a crear las TAREAS DE LA ACTIVIDAD del plan = '+ided);
console.log(objNewPA.Objetivos[istObj].Actividades)
        var n;
        
        if(istSobj == null)
        {
               if(objNewPA.Objetivos[istObj].Actividades[ided].Cronogramas)
                {
                n = objNewPA.Objetivos[istObj].Actividades[ided].Cronogramas.length;
                }else{n=0;}
        }else{

            if(objNewPA.Objetivos[istObj].SubObjetivos[istSobj].Actividades[ided].Cronogramas)//objNewPA.Objetivos[istObj].SubObjetivos[istSobj].Actividades[ided]
                {
                n = objNewPA.Objetivos[istObj].SubObjetivos[istSobj].Actividades[ided].Cronogramas.length;
                }else{n=0;}
        }
        

    if(n == 0)
    {
            verModalError('No existe un Cronograma Definido para esta Actividad','Por favor revisar');
    }
    else
    {
        $("#Sp3VentanTareaActividadPlan").modal("show").addClass("fade");
        $('#body-tabla-list-EvalAud3').html('     '); 
  

  
        if(istSobj == null)//es un objetivo
               {
                  
                  var nTarea = objNewPA.Objetivos[istObj].Actividades[ided].Tareas.length; 
                  var resp = objNewPA.Objetivos[istObj].Actividades[ided].ResponsableName;
                  $('#respTareas').val(resp);
                  var Actt = objNewPA.Objetivos[istObj].Actividades[ided].Actividad_Name;
                  $("#lbTitleTareaActividadPlanAnual").html("Ingresar Tareas de Actividad -"+Actt);
                  istAct = ided;
                  

                  fnSp3agregaTareaActividadObjetivoPlan(-1, objNewPA.Objetivos[istObj].Actividades[ided])
                 
                
                   
               }
               else
               {//es un subobjetivo
      
                  //alert('tarera para un subobjetivo');
                  var nTarea = objNewPA.Objetivos[istObj].SubObjetivos[istSobj].Actividades[ided].Tareas.length; 
                  var resp =   objNewPA.Objetivos[istObj].SubObjetivos[istSobj].Actividades[ided].ResponsableName;
                  $('#respTareas').val(resp);
                  var Actt = objNewPA.Objetivos[istObj].SubObjetivos[istSobj].Actividades[ided].Actividad_Name;
                  $("#lbTitleTareaActividadPlanAnual").html("Ingresar Tareas de Actividad -"+Actt);
                  istAct = ided;
      
                  fnSp3agregaTareaActividadObjetivoPlan(-1,  objNewPA.Objetivos[istObj].SubObjetivos[istSobj].Actividades[ided])
                 
      
               }
    }

 

}
var nTareas = 0;
var iddd3;
var Tareass = [];//manejarlo mejor con una clase
function fnSp3agregaTareaActividadObjetivoPlan(il, itemx)
{//------------------------------------- ini   fnSp3agregaObjetivoSubojetivo() -------------------------------------
 

    if(il != -1)
    {
        console.log('*****************PUBLICANDO TAREA = ',il,'tarea = ',itemx);
        $('#respTareas').val(itemx.ResponsableName);
     
          var ev = itemx.Evidencia_Name;
          var fe_prog =  itemx.Fecha_Programada_Ini+" - "+itemx.Fecha_Programada_Fin;
          var fe_e = itemx.Fecha_Ejecutada_Ini;
          var estt = itemx.Estado;
          var colorr = itemx.Color;
          //var evid = itemx.Evidencia_Name;

             Tareass[Tareass.length] = $('#txt_obj_subobj').val();
             //var otarr = "Objetivo "+Objetivos.length+" : "+$('#txt_obj_subobj').val();
             iddd3 = 'itemTar'+Tareass.length+"_"+SubObjetivos.length;

          if(ev){console.log(ev);}else{ev = ''}
        


        var tarr = itemx;
        var Id = 25;
        var nAct = 10;
        var html2 = '     ';

        if(nTareas == 0)
        {
            $('#body-tabla-list-EvalAud3').html("     "); nObjSub = 1;
        }

      var item = il+1;
      var tx_act =  `
          <div class="form-group col-12 border text-left" style="  height: auto !important; width: 496px !important; !important; border-color:#DEE2E6 !important;  margin:0px 0px 0px !important; padding: 0px 0px !important;"  id = "divitem">
          <textarea onchange="fnSp3cargaEvidenciaDin(${il})" class="text-justify textarea-fecha2 autocompletecollaborator"
              style="height: 36px; width:95%; margin: 8px 0px 8px 8px !important; padding: 0px 0px 0px 0px !important; font-size: 13px !important; font-weight: bold; color:#534b4b; background-color:#ffffff !important;"  id="itemEvid${il}"  name = "itemAct" >${ev}</textarea>
              <input type="hidden" id="itemFeProgIni${il}" value="${itemx.Fecha_Programada_Ini}">
              <input type="hidden" id="itemFeProgFin${il}" value="${itemx.Fecha_Programada_Fin}">
              </div>
          `;


        var tx_fe_programada =  `

        <input class="text-justify textarea-fecha2 autocompletecollaborator" value = '${fe_prog}'
            style="height: 36px; width:90%; margin: 8px 0px 8px 8px !important; padding: 0px 0px 0px 0px !important; font-size: 13px !important; font-weight: bold; color: #534b4b; background-color:#F2F2F2 !important;"  readonly></input>

            `;

            var tx_fe_ejecutada =  `

            <input class="text-justify textarea-fecha2 autocompletecollaborator" value = '${fe_e}'
                style="height: 36px; width:90%; margin: 8px 0px 8px 8px !important; padding: 0px 0px 0px 0px !important; font-size: 13px !important; font-weight: bold; color: #534b4b; background-color:#F2F2F2 !important;"  readonly></input>

                `;



          var tx_estado =  `
            <div class="text-center "
              style="height: 16px; width:80%; margin: 10px 20px 8px 8px !important; padding: 0px 00px 0px 0px !important; font-size: 13px !important; font-weight: bold; color:${colorr}; background-color:#F2F2F2 !important;"  ">

                ${estt}
            </div>

              `;


        var iddthis = "itemTar_"+nTareas;

            html2 += `

            <div id = "${iddthis}"  class="item-tabla p-2" style="z-index: 1;display:relative;  padding: 0px !important; margin: 10px 8px 0px !important; width: 1223px !important;">
            <div class="row m-0 justify-content-between align-items-center tbody_trainning">
                <div class="col-12 text-center" style="font-size: 15px; padding: 4px !important; ">
                    <div class="row">



                    <table width = "100%" border="0">
                        <tr >
                            <td width = "7%" align="center"><div id="c1TabGeny" class="text-left "  style='margin: 0px 0px 0px 18px !important;  font-size: 14px !important; '>${item}</div></td>
                            <td width = "46%" align="center"><div id="c3TabGeny" class="text-left "   style='color:#000;'>${tx_act}</div></td>
                            <td width = "15%" align="center"><div id="c3TabGeny" class="text-left "   style='color:#000;' >${tx_fe_programada}</div></td>
                            <td width = "15%" align="center"><div id="c3TabGeny" class="text-left "  style='color:#000;'>${tx_fe_ejecutada}</div></td>
                            <td width = "8%" align="center"><div id="c3TabGeny" class="text-center "  style='color:#000;'>${tx_estado}</div></td>
                            <td width = "8%" align="center" style="display:none;"><div id="c4TabGeny" class="text-center lbCabezaTabla"  >
                                    <button type='button' title='Editar del Hallazgo' onclick="fnSp3EliminarActividadPlanAnual('${iddthis}')"   class='btn-circle btn_read border-0' style='background-color:#ff6767 !important;' id='btn_verEliminarPlan${Id}'>
                                        <img src='./images/iconos/delete.svg' class='ojo-1'  >
                                    </button>
                            </td>

                            <td width = "1%" align="center"><div id="c7TabGeny" class="text-center lbCabezaTabla"  >&nbsp</div></td>


                        </tr>
                    </table>





                        </div>
                    </div>
                </div>
            </div>


            `;


    $('#body-tabla-list-EvalAud3').append(html2);

    nTareas++;
}
else
{
    //alert('es uno nuevo antes de agregar tarea debo verificar si el cronograma está creado, debe estarlo para poder asignar tareas si no validar');//esperar, primero se debe constr
    //itemx =  objNewPA.Objetivos[istObj].Actividades[ided]
    
    n = itemx.Cronogramas.length;

    var mTarea = -1;
    for(var i = 0; i<n;i++)
    {
        
                var objCr = itemx.Cronogramas[i];

                var mesx = i+1;
                if(objCr.S1 == 1)
                {
                    mTarea++; 
                    if(!itemx.Tareas[mTarea]){ itemx.Tareas[mTarea] = new Tarea();}
                    itemx.Tareas[mTarea].Id = 0;
//itemx.Tareas[mTarea].Id = mTarea;
                    itemx.Tareas[mTarea].ActividadId = istAct;
                    itemx.Tareas[mTarea].Color = '#000';
                    itemx.Tareas[mTarea].Estado = 'Pendiente';
                    itemx.Tareas[mTarea].IdEstado = 1;
                    itemx.Tareas[mTarea].Evidencia_Name;//se va acargar por un onchange
                    itemx.Tareas[mTarea].Fecha_Ejecutada_Fin = '-------';
                    itemx.Tareas[mTarea].Fecha_Ejecutada_Ini = '-----------------';
                    itemx.Tareas[mTarea].Fecha_Programada_Fin = objCr.Fecha_S1_Fin;    //se va a cargar dinamicamente del cronograma
                    itemx.Tareas[mTarea].Fecha_Programada_Ini = objCr.Fecha_S1_Ini;  //se va a cargar dinamicamente del cronograma;
                    itemx.Tareas[mTarea].ResponsableId = itemx.ResponsableId;
                    itemx.Tareas[mTarea].ResponsableName = itemx.ResponsableName;  
                    //alert(objCr.Fecha_S1_Ini);
                    fnSp3agregaTareaActividadObjetivoPlan(mTarea, itemx.Tareas[mTarea]);

                    
                    
                }

                if(objCr.S2 == 1)
                {
                    mTarea++; 
                    if(!itemx.Tareas[mTarea]){ itemx.Tareas[mTarea] = new Tarea();}
                    itemx.Tareas[mTarea].Id = 0;
//itemx.Tareas[mTarea].Id = mTarea;
                    itemx.Tareas[mTarea].ActividadId = istAct;
                    itemx.Tareas[mTarea].Color = '#000';
                    itemx.Tareas[mTarea].Estado = 'Pendiente';
                    itemx.Tareas[mTarea].IdEstado = 1;
                    itemx.Tareas[mTarea].Evidencia_Name;//se va acargar por un onchange
                    itemx.Tareas[mTarea].Fecha_Ejecutada_Fin = '-------';
                    itemx.Tareas[mTarea].Fecha_Ejecutada_Ini = '-----------------';
                    itemx.Tareas[mTarea].Fecha_Programada_Fin = objCr.Fecha_S2_Fin;    //se va a cargar dinamicamente del cronograma
                    itemx.Tareas[mTarea].Fecha_Programada_Ini = objCr.Fecha_S2_Ini;  //se va a cargar dinamicamente del cronograma;
                    itemx.Tareas[mTarea].ResponsableId = itemx.ResponsableId;
                    itemx.Tareas[mTarea].ResponsableName = itemx.ResponsableName;  
                    fnSp3agregaTareaActividadObjetivoPlan(mTarea, itemx.Tareas[mTarea]);
                    
                }

                if(objCr.S3 == 1)
                {
                   
                    mTarea++; 
                    if(!itemx.Tareas[mTarea]){ itemx.Tareas[mTarea] = new Tarea();}
                    itemx.Tareas[mTarea].Id = 0;
//itemx.Tareas[mTarea].Id = mTarea;
                    itemx.Tareas[mTarea].ActividadId = istAct;
                    itemx.Tareas[mTarea].Color = '#000';
                    itemx.Tareas[mTarea].Estado = 'Pendiente';
                    itemx.Tareas[mTarea].IdEstado = 1;
                    itemx.Tareas[mTarea].Evidencia_Name;//se va acargar por un onchange
                    itemx.Tareas[mTarea].Fecha_Ejecutada_Fin = '-------';
                    itemx.Tareas[mTarea].Fecha_Ejecutada_Ini = '-----------------';
                    itemx.Tareas[mTarea].Fecha_Programada_Fin = objCr.Fecha_S3_Fin;    //se va a cargar dinamicamente del cronograma
                    itemx.Tareas[mTarea].Fecha_Programada_Ini = objCr.Fecha_S3_Ini;  //se va a cargar dinamicamente del cronograma;
                    itemx.Tareas[mTarea].ResponsableId = itemx.ResponsableId;
                    itemx.Tareas[mTarea].ResponsableName = itemx.ResponsableName;  
                    fnSp3agregaTareaActividadObjetivoPlan(mTarea, itemx.Tareas[mTarea]);
                    
                }

                if(objCr.S4 == 1)
                {
                    
                    mTarea++; 
                    if(!itemx.Tareas[mTarea]){ itemx.Tareas[mTarea] = new Tarea();}
                    itemx.Tareas[mTarea].Id = 0;
//itemx.Tareas[mTarea].Id = mTarea;
                    itemx.Tareas[mTarea].ActividadId = istAct;
                    itemx.Tareas[mTarea].Color = '#000';
                    itemx.Tareas[mTarea].Estado = 'Pendiente';
                    itemx.Tareas[mTarea].IdEstado = 1;
                    itemx.Tareas[mTarea].Evidencia_Name;//se va acargar por un onchange
                    itemx.Tareas[mTarea].Fecha_Ejecutada_Fin = '-------';
                    itemx.Tareas[mTarea].Fecha_Ejecutada_Ini = '-----------------';
                    itemx.Tareas[mTarea].Fecha_Programada_Fin = objCr.Fecha_S4_Fin;    //se va a cargar dinamicamente del cronograma
                    itemx.Tareas[mTarea].Fecha_Programada_Ini = objCr.Fecha_S4_Ini;  //se va a cargar dinamicamente del cronograma;
                    itemx.Tareas[mTarea].ResponsableId = itemx.ResponsableId;
                    itemx.Tareas[mTarea].ResponsableName = itemx.ResponsableName;  
                    fnSp3agregaTareaActividadObjetivoPlan(mTarea, itemx.Tareas[mTarea]);

                }
                //console.log('tareassss:', itemx);

                
    }


}


}//------------------------------------- fini   fnSp3agregaObjetivoSubojetivo() -------------------------------------





function fnSp3cargaEvidenciaDin(il)
{
     //console.clear();
     
    
     if(istSobj == null)//es un objetivo
       {
        objNewPA.Objetivos[istObj].Actividades[istAct].Tareas[il].Evidencia_Name = $('#itemEvid'+il).val();
        objNewPA.Objetivos[istObj].Actividades[istAct].Tareas[il].Fecha_Programada_Ini = $('#itemFeProgIni'+il).val();
        objNewPA.Objetivos[istObj].Actividades[istAct].Tareas[il].Fecha_Programada_Fin = $('#itemFeProgFin'+il).val();

           console.log(il," = fnSp3cargaEvidenciaDin---OBJETIVO----- = ",  objNewPA.Objetivos[istObj].Actividades[istAct]);
       }
    else
       {
        objNewPA.Objetivos[istObj].SubObjetivos[istSobj].Actividades[istAct].Tareas[il].Evidencia_Name = $('#itemEvid'+il).val();
        objNewPA.Objetivos[istObj].SubObjetivos[istSobj].Actividades[istAct].Tareas[il].Fecha_Programada_Ini = $('#itemFeProgIni'+il).val();
        objNewPA.Objetivos[istObj].SubObjetivos[istSobj].Actividades[istAct].Tareas[il].Fecha_Programada_Fin = $('#itemFeProgFin'+il).val();

           console.log(il," = fnSp3cargaEvidenciaDin---SUBOBJETIVO----- = ",  objNewPA.Objetivos[istObj].SubObjetivos[istSobj].Actividades[istAct]);
       }


     

}






function sp3FnselecionaSemana(sem, mes)
{
  //siempre y cuando el año este seleccionado
  if($('#sel_year_frecuencia').val() != 0)
  {
    //alert(sem, mes)
    var bn = 'mes_'+mes+'_S'+sem;    
    var lb2 = 'lb_S'+sem+'_mes_'+mes;    
    console.log("btn= "+bn, "lb2= "+lb2,$("#"+lb2).is(":visible"))

    if($("#"+lb2).css("visibility") != "hidden"){

        $("#"+bn).css('background-color','#FFF'); 

        $("#"+lb2).css('visibility','hidden');
        //alert('me escogiste');
        if(istSobj == null)//es un objetivo
              {
                
                console.log('------------------------------------------------------------------------------------');
                var objCr = objNewPA.Objetivos[istObj].Actividades[isAcct].Cronogramas[mes-1];
                //console.log(objCr.Mes_Name);
                //console.log('------------------------------------------------------------------------------------');
                switch (sem) 
                        {//------------------------------------------------------------
                                case 1://semana1
                                    objCr.S1 = 0;
                                    objCr.Fecha_S1_Ini = null; //"00/00/0000";
                                    objCr.Fecha_S1_Fin = null; //"00/00/0000";//$('#sel_year_frecuencia').val()
                                    objCr.Year_Frecuencia = $('#sel_year_frecuencia').val();
    
    
                                    var lb = 'lb_S1_mes_'+objCr.Mes_Num+'_txt';
                                    var lb2 = 'lb_S1_mes_'+objCr.Mes_Num;
    
                                    console.log(objCr.Fecha_S1_Ini)
                                    dt = objCr.Fecha_S1_Ini.split('/');
                                    var dia= dt[0];
                                    var mes= parseInt(dt[1]);
                                    var anio= dt[2];
    
                                    diax = diaSemana(dia,mes,anio);
    
                                    dt1 = objCr.Fecha_S1_Fin.split('/');
                                    var dia1= dt1[0];
                                    var mes1= parseInt(dt1[1]);
                                    var anio1= dt1[2];
    
                                    diax1 = diaSemana(dia1,mes1,anio1);
    
    
                                    $("#"+lb).html('S1:&nbsp;&nbsp;'+diax+'&nbsp;'+dia+'&nbsp;-&nbsp;'+diax1+'&nbsp;'+dia1);
                                    $("#"+lb2).css('visibility','hidden');
    
                                    
                                break;
                                
                                case 2://semana2
                                    objCr.S2 = 0;
                                    objCr.Fecha_S2_Ini = null; //"00/00/0000";
                                    objCr.Fecha_S2_Fin = null; //"00/00/0000";
                                    objCr.Year_Frecuencia = $('#sel_year_frecuencia').val();
    
                                    var lb = 'lb_S2_mes_'+objCr.Mes_Num+'_txt';
                                    var lb2 = 'lb_S2_mes_'+objCr.Mes_Num;
    
    
                                    dt = objCr.Fecha_S2_Ini.split('/');
                                    var dia= dt[0];
                                    var mes= parseInt(dt[1]);
                                    var anio= dt[2];
    
                                    diax = diaSemana(dia,mes,anio);
    
                                    dt1 = objCr.Fecha_S2_Fin.split('/');
                                    var dia1= dt1[0];
                                    var mes1= parseInt(dt1[1]);
                                    var anio1= dt1[2];
    
                                    diax1 = diaSemana(dia1,mes1,anio1);
    
    
                                    $("#"+lb).html('S2:&nbsp;&nbsp;'+diax+'&nbsp;'+dia+'&nbsp;-&nbsp;'+diax1+'&nbsp;'+dia1);
                                    $("#"+lb2).css('visibility','hidden');
    
                                break;
                                
                                case 3://semana3
                                    objCr.S3 = 0;
                                    objCr.Fecha_S3_Ini = null; //"00/00/0000";
                                    objCr.Fecha_S3_Fin = null; //"00/00/0000";
                                    objCr.Year_Frecuencia = $('#sel_year_frecuencia').val();
    
                                    
    
                                    var lb = 'lb_S3_mes_'+objCr.Mes_Num+'_txt';
                                    var lb2 = 'lb_S3_mes_'+objCr.Mes_Num;
    
    
                                    dt = objCr.Fecha_S3_Ini.split('/');
                                    var dia= dt[0];
                                    var mes= parseInt(dt[1]);
                                    var anio= dt[2];
    
                                    diax = diaSemana(dia,mes,anio);
    
                                    dt1 = objCr.Fecha_S3_Fin.split('/');
                                    var dia1= dt1[0];
                                    var mes1= parseInt(dt1[1]);
                                    var anio1= dt1[2];
    
                                    diax1 = diaSemana(dia1,mes1,anio1);
    
    
                                    $("#"+lb).html('S3:&nbsp;&nbsp;'+diax+'&nbsp;'+dia+'&nbsp;-&nbsp;'+diax1+'&nbsp;'+dia1);
                                    $("#"+lb2).css('visibility','hidden');
    
                                break;
                                
                                case 4: //semana4
                                    objCr.S4 = 0;
                                    objCr.Fecha_S4_Ini = null; //"00/00/0000";
                                    objCr.Fecha_S4_Fin = null; //"00/00/0000";
                                    objCr.Year_Frecuencia = $('#sel_year_frecuencia').val();
    
                                    var lb = 'lb_S4_mes_'+objCr.Mes_Num+'_txt';
                                    var lb2 = 'lb_S4_mes_'+objCr.Mes_Num;
    
    
                                    dt = objCr.Fecha_S4_Ini.split('/');
                                    var dia= dt[0];
                                    var mes= parseInt(dt[1]);
                                    var anio= dt[2];
    
                                    diax = diaSemana(dia,mes,anio);
    
                                    dt1 = objCr.Fecha_S4_Fin.split('/');
                                    var dia1= dt1[0];
                                    var mes1= parseInt(dt1[1]);
                                    var anio1= dt1[2];
    
                                    diax1 = diaSemana(dia1,mes1,anio1);
    
    
                                    $("#"+lb).html('S4:&nbsp;&nbsp;'+diax+'&nbsp;'+dia+'&nbsp;-&nbsp;'+diax1+'&nbsp;'+dia1);
                                    $("#"+lb2).css('visibility','hidden');
    
    
                                break;
                               
                                
                                default:  
                        }//-----------------------------------------------------------
                
                        //console.log("viendo =", objNewPA.Objetivos[istObj].Actividades[isAcct]);
                        console.log("viendo =", objNewPA);
    
    
    
                
             }
             else
             {//es un subobjetivo
                
    
    
                console.log('------------------------------------------------------------------------------------');
                var objCr = objNewPA.Objetivos[istObj].SubObjetivos[istSobj].Actividades[isAcct].Cronogramas[mes-1];
                //console.log(objCr.Mes_Name);
                //console.log('------------------------------------------------------------------------------------');
                switch (sem) 
                        {//------------------------------------------------------------
                                case 1://semana1
                                    objCr.S1 = 0;
                                    objCr.Fecha_S1_Ini = null; //"00/00/0000";
                                    objCr.Fecha_S1_Fin = null; //"00/00/0000";//$('#sel_year_frecuencia').val()
                                    objCr.Year_Frecuencia = $('#sel_year_frecuencia').val();
    
    
                                    var lb = 'lb_S1_mes_'+objCr.Mes_Num+'_txt';
                                    var lb2 = 'lb_S1_mes_'+objCr.Mes_Num;
    
    
                                    dt = objCr.Fecha_S1_Ini.split('/');
                                    var dia= dt[0];
                                    var mes= parseInt(dt[1]);
                                    var anio= dt[2];
    
                                    diax = diaSemana(dia,mes,anio);
    
                                    dt1 = objCr.Fecha_S1_Fin.split('/');
                                    var dia1= dt1[0];
                                    var mes1= parseInt(dt1[1]);
                                    var anio1= dt1[2];
    
                                    diax1 = diaSemana(dia1,mes1,anio1);
    
    
                                    $("#"+lb).html('S1:&nbsp;&nbsp;'+diax+'&nbsp;'+dia+'&nbsp;-&nbsp;'+diax1+'&nbsp;'+dia1);
                                    $("#"+lb2).css('visibility','hidden');
    
                                    
                                break;
                                
                                case 2://semana2
                                    objCr.S2 = 0;
                                    objCr.Fecha_S2_Ini = null; //"00/00/0000";
                                    objCr.Fecha_S2_Fin = null; //"00/00/0000";
                                    objCr.Year_Frecuencia = $('#sel_year_frecuencia').val();
    
                                    var lb = 'lb_S2_mes_'+objCr.Mes_Num+'_txt';
                                    var lb2 = 'lb_S2_mes_'+objCr.Mes_Num;
    
    
                                    dt = objCr.Fecha_S2_Ini.split('/');
                                    var dia= dt[0];
                                    var mes= parseInt(dt[1]);
                                    var anio= dt[2];
    
                                    diax = diaSemana(dia,mes,anio);
    
                                    dt1 = objCr.Fecha_S2_Fin.split('/');
                                    var dia1= dt1[0];
                                    var mes1= parseInt(dt1[1]);
                                    var anio1= dt1[2];
    
                                    diax1 = diaSemana(dia1,mes1,anio1);
    
    
                                    $("#"+lb).html('S2:&nbsp;&nbsp;'+diax+'&nbsp;'+dia+'&nbsp;-&nbsp;'+diax1+'&nbsp;'+dia1);
                                    $("#"+lb2).css('visibility','hidden');
    
                                break;
                                
                                case 3://semana3
                                    objCr.S3 = 0;
                                    objCr.Fecha_S3_Ini = null; //"00/00/0000";
                                    objCr.Fecha_S3_Fin = null; //"00/00/0000";
                                    objCr.Year_Frecuencia = $('#sel_year_frecuencia').val();
    
                                    
    
                                    var lb = 'lb_S3_mes_'+objCr.Mes_Num+'_txt';
                                    var lb2 = 'lb_S3_mes_'+objCr.Mes_Num;
    
    
                                    dt = objCr.Fecha_S3_Ini.split('/');
                                    var dia= dt[0];
                                    var mes= parseInt(dt[1]);
                                    var anio= dt[2];
    
                                    diax = diaSemana(dia,mes,anio);
    
                                    dt1 = objCr.Fecha_S3_Fin.split('/');
                                    var dia1= dt1[0];
                                    var mes1= parseInt(dt1[1]);
                                    var anio1= dt1[2];
    
                                    diax1 = diaSemana(dia1,mes1,anio1);
    
    
                                    $("#"+lb).html('S3:&nbsp;&nbsp;'+diax+'&nbsp;'+dia+'&nbsp;-&nbsp;'+diax1+'&nbsp;'+dia1);
                                    $("#"+lb2).css('visibility','hidden');
    
                                break;
                                
                                case 4: //semana4
                                    objCr.S4 = 0;
                                    objCr.Fecha_S4_Ini = null; //"00/00/0000";
                                    objCr.Fecha_S4_Fin = null; //"00/00/0000";
                                    objCr.Year_Frecuencia = $('#sel_year_frecuencia').val();
    
                                    var lb = 'lb_S4_mes_'+objCr.Mes_Num+'_txt';
                                    var lb2 = 'lb_S4_mes_'+objCr.Mes_Num;
    
    
                                    dt = objCr.Fecha_S4_Ini.split('/');
                                    var dia= dt[0];
                                    var mes= parseInt(dt[1]);
                                    var anio= dt[2];
    
                                    diax = diaSemana(dia,mes,anio);
    
                                    dt1 = objCr.Fecha_S4_Fin.split('/');
                                    var dia1= dt1[0];
                                    var mes1= parseInt(dt1[1]);
                                    var anio1= dt1[2];
    
                                    diax1 = diaSemana(dia1,mes1,anio1);
    
    
                                    $("#"+lb).html('S4:&nbsp;&nbsp;'+diax+'&nbsp;'+dia+'&nbsp;-&nbsp;'+diax1+'&nbsp;'+dia1);
                                    $("#"+lb2).css('visibility','hidden');
    
    
                                break;
                               
                                
                                default:  
                        }//-----------------------------------------------------------
                
                        //console.log("viendo =", objNewPA.Objetivos[istObj].Actividades[isAcct]);
                        console.log("viendo =", objNewPA);
    
    
    
             }
      }
    else{
    $("#"+bn).css('background-color','#05BEEE'); 

    $("#"+lb2).css('visibility','visible');
    //alert('me escogiste');
    if(istSobj == null)//es un objetivo
          {
            
            console.log('------------------------------------------------------------------------------------');
            var objCr = objNewPA.Objetivos[istObj].Actividades[isAcct].Cronogramas[mes-1];
            //console.log(objCr.Mes_Name);
            //console.log('------------------------------------------------------------------------------------');
            switch (sem) 
                    {//------------------------------------------------------------
                            case 1://semana1
                                objCr.S1 = 1;
                                objCr.Fecha_S1_Ini = calcula_semana(sem, mes-1,'ini',$('#sel_year_frecuencia').val());
                                objCr.Fecha_S1_Fin = calcula_semana(sem, mes-1,'fin',$('#sel_year_frecuencia').val());//$('#sel_year_frecuencia').val()
                                objCr.Year_Frecuencia = $('#sel_year_frecuencia').val();


                                var lb = 'lb_S1_mes_'+objCr.Mes_Num+'_txt';
                                var lb2 = 'lb_S1_mes_'+objCr.Mes_Num;


                                dt = objCr.Fecha_S1_Ini.split('/');
                                var dia= dt[0];
                                var mes= parseInt(dt[1]);
                                var anio= dt[2];

                                diax = diaSemana(dia,mes,anio);

                                dt1 = objCr.Fecha_S1_Fin.split('/');
                                var dia1= dt1[0];
                                var mes1= parseInt(dt1[1]);
                                var anio1= dt1[2];

                                diax1 = diaSemana(dia1,mes1,anio1);


                                $("#"+lb).html('S1:&nbsp;&nbsp;'+diax+'&nbsp;'+dia+'&nbsp;-&nbsp;'+diax1+'&nbsp;'+dia1);
                                $("#"+lb2).css('visibility','visible');

                                
                            break;
                            
                            case 2://semana2
                                objCr.S2 = 1;
                                objCr.Fecha_S2_Ini = calcula_semana(sem, mes-1,'ini',$('#sel_year_frecuencia').val());
                                objCr.Fecha_S2_Fin = calcula_semana(sem, mes-1,'fin',$('#sel_year_frecuencia').val());
                                objCr.Year_Frecuencia = $('#sel_year_frecuencia').val();

                                var lb = 'lb_S2_mes_'+objCr.Mes_Num+'_txt';
                                var lb2 = 'lb_S2_mes_'+objCr.Mes_Num;


                                dt = objCr.Fecha_S2_Ini.split('/');
                                var dia= dt[0];
                                var mes= parseInt(dt[1]);
                                var anio= dt[2];

                                diax = diaSemana(dia,mes,anio);

                                dt1 = objCr.Fecha_S2_Fin.split('/');
                                var dia1= dt1[0];
                                var mes1= parseInt(dt1[1]);
                                var anio1= dt1[2];

                                diax1 = diaSemana(dia1,mes1,anio1);


                                $("#"+lb).html('S2:&nbsp;&nbsp;'+diax+'&nbsp;'+dia+'&nbsp;-&nbsp;'+diax1+'&nbsp;'+dia1);
                                $("#"+lb2).css('visibility','visible');

                            break;
                            
                            case 3://semana3
                                objCr.S3 = 1;
                                objCr.Fecha_S3_Ini = calcula_semana(sem, mes-1,'ini',$('#sel_year_frecuencia').val());
                                objCr.Fecha_S3_Fin = calcula_semana(sem, mes-1,'fin',$('#sel_year_frecuencia').val());
                                objCr.Year_Frecuencia = $('#sel_year_frecuencia').val();

                                

                                var lb = 'lb_S3_mes_'+objCr.Mes_Num+'_txt';
                                var lb2 = 'lb_S3_mes_'+objCr.Mes_Num;


                                dt = objCr.Fecha_S3_Ini.split('/');
                                var dia= dt[0];
                                var mes= parseInt(dt[1]);
                                var anio= dt[2];

                                diax = diaSemana(dia,mes,anio);

                                dt1 = objCr.Fecha_S3_Fin.split('/');
                                var dia1= dt1[0];
                                var mes1= parseInt(dt1[1]);
                                var anio1= dt1[2];

                                diax1 = diaSemana(dia1,mes1,anio1);


                                $("#"+lb).html('S3:&nbsp;&nbsp;'+diax+'&nbsp;'+dia+'&nbsp;-&nbsp;'+diax1+'&nbsp;'+dia1);
                                $("#"+lb2).css('visibility','visible');

                            break;
                            
                            case 4: //semana4
                                objCr.S4 = 1;
                                objCr.Fecha_S4_Ini = calcula_semana(sem, mes-1,'ini',$('#sel_year_frecuencia').val());
                                objCr.Fecha_S4_Fin = calcula_semana(sem, mes-1,'fin',$('#sel_year_frecuencia').val()); 
                                objCr.Year_Frecuencia = $('#sel_year_frecuencia').val();

                                var lb = 'lb_S4_mes_'+objCr.Mes_Num+'_txt';
                                var lb2 = 'lb_S4_mes_'+objCr.Mes_Num;


                                dt = objCr.Fecha_S4_Ini.split('/');
                                var dia= dt[0];
                                var mes= parseInt(dt[1]);
                                var anio= dt[2];

                                diax = diaSemana(dia,mes,anio);

                                dt1 = objCr.Fecha_S4_Fin.split('/');
                                var dia1= dt1[0];
                                var mes1= parseInt(dt1[1]);
                                var anio1= dt1[2];

                                diax1 = diaSemana(dia1,mes1,anio1);

                                if(mes != mes1){
                                    dia1 = dia1+'/'+mes1
                                }


                                $("#"+lb).html('S4:&nbsp;&nbsp;'+diax+'&nbsp;'+dia+'&nbsp;-&nbsp;'+diax1+'&nbsp;'+dia1);
                                $("#"+lb2).css('visibility','visible');


                            break;
                           
                            
                            default:  
                    }//-----------------------------------------------------------
            
                    //console.log("viendo =", objNewPA.Objetivos[istObj].Actividades[isAcct]);
                    console.log("viendo =", objNewPA);



            
         }
         else
         {//es un subobjetivo
            


            console.log('------------------------------------------------------------------------------------');
            var objCr = objNewPA.Objetivos[istObj].SubObjetivos[istSobj].Actividades[isAcct].Cronogramas[mes-1];
            //console.log(objCr.Mes_Name);
            //console.log('------------------------------------------------------------------------------------');
            switch (sem) 
                    {//------------------------------------------------------------
                            case 1://semana1
                                objCr.S1 = 1;
                                objCr.Fecha_S1_Ini = calcula_semana(sem, mes-1,'ini',$('#sel_year_frecuencia').val());
                                objCr.Fecha_S1_Fin = calcula_semana(sem, mes-1,'fin',$('#sel_year_frecuencia').val());//$('#sel_year_frecuencia').val()
                                objCr.Year_Frecuencia = $('#sel_year_frecuencia').val();


                                var lb = 'lb_S1_mes_'+objCr.Mes_Num+'_txt';
                                var lb2 = 'lb_S1_mes_'+objCr.Mes_Num;


                                dt = objCr.Fecha_S1_Ini.split('/');
                                var dia= dt[0];
                                var mes= parseInt(dt[1]);
                                var anio= dt[2];

                                diax = diaSemana(dia,mes,anio);

                                dt1 = objCr.Fecha_S1_Fin.split('/');
                                var dia1= dt1[0];
                                var mes1= parseInt(dt1[1]);
                                var anio1= dt1[2];

                                diax1 = diaSemana(dia1,mes1,anio1);


                                $("#"+lb).html('S1:&nbsp;&nbsp;'+diax+'&nbsp;'+dia+'&nbsp;-&nbsp;'+diax1+'&nbsp;'+dia1);
                                $("#"+lb2).css('visibility','visible');

                                
                            break;
                            
                            case 2://semana2
                                objCr.S2 = 1;
                                objCr.Fecha_S2_Ini = calcula_semana(sem, mes-1,'ini',$('#sel_year_frecuencia').val());
                                objCr.Fecha_S2_Fin = calcula_semana(sem, mes-1,'fin',$('#sel_year_frecuencia').val());
                                objCr.Year_Frecuencia = $('#sel_year_frecuencia').val();

                                var lb = 'lb_S2_mes_'+objCr.Mes_Num+'_txt';
                                var lb2 = 'lb_S2_mes_'+objCr.Mes_Num;


                                dt = objCr.Fecha_S2_Ini.split('/');
                                var dia= dt[0];
                                var mes= parseInt(dt[1]);
                                var anio= dt[2];

                                diax = diaSemana(dia,mes,anio);

                                dt1 = objCr.Fecha_S2_Fin.split('/');
                                var dia1= dt1[0];
                                var mes1= parseInt(dt1[1]);
                                var anio1= dt1[2];

                                diax1 = diaSemana(dia1,mes1,anio1);


                                $("#"+lb).html('S2:&nbsp;&nbsp;'+diax+'&nbsp;'+dia+'&nbsp;-&nbsp;'+diax1+'&nbsp;'+dia1);
                                $("#"+lb2).css('visibility','visible');

                            break;
                            
                            case 3://semana3
                                objCr.S3 = 1;
                                objCr.Fecha_S3_Ini = calcula_semana(sem, mes-1,'ini',$('#sel_year_frecuencia').val());
                                objCr.Fecha_S3_Fin = calcula_semana(sem, mes-1,'fin',$('#sel_year_frecuencia').val());
                                objCr.Year_Frecuencia = $('#sel_year_frecuencia').val();

                                

                                var lb = 'lb_S3_mes_'+objCr.Mes_Num+'_txt';
                                var lb2 = 'lb_S3_mes_'+objCr.Mes_Num;


                                dt = objCr.Fecha_S3_Ini.split('/');
                                var dia= dt[0];
                                var mes= parseInt(dt[1]);
                                var anio= dt[2];

                                diax = diaSemana(dia,mes,anio);

                                dt1 = objCr.Fecha_S3_Fin.split('/');
                                var dia1= dt1[0];
                                var mes1= parseInt(dt1[1]);
                                var anio1= dt1[2];

                                diax1 = diaSemana(dia1,mes1,anio1);


                                $("#"+lb).html('S3:&nbsp;&nbsp;'+diax+'&nbsp;'+dia+'&nbsp;-&nbsp;'+diax1+'&nbsp;'+dia1);
                                $("#"+lb2).css('visibility','visible');

                            break;
                            
                            case 4: //semana4
                                objCr.S4 = 1;
                                objCr.Fecha_S4_Ini = calcula_semana(sem, mes-1,'ini',$('#sel_year_frecuencia').val());
                                objCr.Fecha_S4_Fin = calcula_semana(sem, mes-1,'fin',$('#sel_year_frecuencia').val()); 
                                objCr.Year_Frecuencia = $('#sel_year_frecuencia').val();

                                var lb = 'lb_S4_mes_'+objCr.Mes_Num+'_txt';
                                var lb2 = 'lb_S4_mes_'+objCr.Mes_Num;


                                dt = objCr.Fecha_S4_Ini.split('/');
                                var dia= dt[0];
                                var mes= parseInt(dt[1]);
                                var anio= dt[2];

                                diax = diaSemana(dia,mes,anio);

                                dt1 = objCr.Fecha_S4_Fin.split('/');
                                var dia1= dt1[0];
                                var mes1= parseInt(dt1[1]);
                                var anio1= dt1[2];

                                diax1 = diaSemana(dia1,mes1,anio1);


                                $("#"+lb).html('S4:&nbsp;&nbsp;'+diax+'&nbsp;'+dia+'&nbsp;-&nbsp;'+diax1+'&nbsp;'+dia1);
                                $("#"+lb2).css('visibility','visible');


                            break;
                           
                            
                            default:  
                    }//-----------------------------------------------------------
            
                    //console.log("viendo =", objNewPA.Objetivos[istObj].Actividades[isAcct]);
                    console.log("viendo =", objNewPA);



         }
  } 
    
}
  else
  {
    //verModalError("Por favor Revise","Debe seleccionar el año del Plan Anual");
    //$('#divf1_frecuencia').css('border-color', '#ff6767');
    //document.getElementById('divf1_frecuencia').style.setProperty('border-color', '#ff6767', 'important');
    //$('#divf1_frecuencia').focus();
  }
}


function sp3FnselecionaSemanaEdit(sem, mes)
{
  //siempre y cuando el año este seleccionado
  if($('#sel_year_frecuencia').val() != 0)
  {
    //alert(sem, mes)
    var bn = 'mes_'+mes+'_S'+sem;    
    var lb2 = 'lb_S'+sem+'_mes_'+mes;    
    console.log("btn= "+bn, "lb2= "+lb2,$("#"+lb2).is(":visible"))

    if($("#"+lb2).css("visibility") != "hidden"){

        $("#"+bn).css('background-color','#FFF'); 

        $("#"+lb2).css('visibility','hidden');
        //alert('me escogiste');
        if(istSobj == null)//es un objetivo
              {
                
                console.log('------------------------------------------------------------------------------------');
                var objCr = objNewPA.Objetivos[istObj].Actividades[isAcct].Cronogramas[mes-1];
                //console.log(objCr.Mes_Name);
                //console.log('------------------------------------------------------------------------------------');
                switch (sem) 
                        {//------------------------------------------------------------
                                case 1://semana1
                                      
    
                                    var lb = 'lb_S1_mes_'+objCr.Mes_Num+'_txt';
                                    var lb2 = 'lb_S1_mes_'+objCr.Mes_Num;
    
    
                                    dt = objCr.Fecha_S1_Ini.split('/');
                                    var dia= dt[0];
                                    var mes= parseInt(dt[1]);
                                    var anio= dt[2];
    
                                    diax = diaSemana(dia,mes,anio);
    
                                    dt1 = objCr.Fecha_S1_Fin.split('/');
                                    var dia1= dt1[0];
                                    var mes1= parseInt(dt1[1]);
                                    var anio1= dt1[2];
    
                                    diax1 = diaSemana(dia1,mes1,anio1);
    
    
                                    $("#"+lb).html('S1:&nbsp;&nbsp;'+diax+'&nbsp;'+dia+'&nbsp;-&nbsp;'+diax1+'&nbsp;'+dia1);
                                    $("#"+lb2).css('visibility','hidden');
    
                                    
                                break;
                                
                                case 2://semana2
                                
                                    var lb = 'lb_S2_mes_'+objCr.Mes_Num+'_txt';
                                    var lb2 = 'lb_S2_mes_'+objCr.Mes_Num;
    
    
                                    dt = objCr.Fecha_S2_Ini.split('/');
                                    var dia= dt[0];
                                    var mes= parseInt(dt[1]);
                                    var anio= dt[2];
    
                                    diax = diaSemana(dia,mes,anio);
    
                                    dt1 = objCr.Fecha_S2_Fin.split('/');
                                    var dia1= dt1[0];
                                    var mes1= parseInt(dt1[1]);
                                    var anio1= dt1[2];
    
                                    diax1 = diaSemana(dia1,mes1,anio1);
    
    
                                    $("#"+lb).html('S2:&nbsp;&nbsp;'+diax+'&nbsp;'+dia+'&nbsp;-&nbsp;'+diax1+'&nbsp;'+dia1);
                                    $("#"+lb2).css('visibility','hidden');
    
                                break;
                                
                                case 3://semana3                                                                  
    
                                    var lb = 'lb_S3_mes_'+objCr.Mes_Num+'_txt';
                                    var lb2 = 'lb_S3_mes_'+objCr.Mes_Num;
    
    
                                    dt = objCr.Fecha_S3_Ini.split('/');
                                    var dia= dt[0];
                                    var mes= parseInt(dt[1]);
                                    var anio= dt[2];
    
                                    diax = diaSemana(dia,mes,anio);
    
                                    dt1 = objCr.Fecha_S3_Fin.split('/');
                                    var dia1= dt1[0];
                                    var mes1= parseInt(dt1[1]);
                                    var anio1= dt1[2];
    
                                    diax1 = diaSemana(dia1,mes1,anio1);
    
    
                                    $("#"+lb).html('S3:&nbsp;&nbsp;'+diax+'&nbsp;'+dia+'&nbsp;-&nbsp;'+diax1+'&nbsp;'+dia1);
                                    $("#"+lb2).css('visibility','hidden');
    
                                break;
                                
                                case 4: //semana4
                                     
                                    var lb = 'lb_S4_mes_'+objCr.Mes_Num+'_txt';
                                    var lb2 = 'lb_S4_mes_'+objCr.Mes_Num;
    
    
                                    dt = objCr.Fecha_S4_Ini.split('/');
                                    var dia= dt[0];
                                    var mes= parseInt(dt[1]);
                                    var anio= dt[2];
    
                                    diax = diaSemana(dia,mes,anio);
    
                                    dt1 = objCr.Fecha_S4_Fin.split('/');
                                    var dia1= dt1[0];
                                    var mes1= parseInt(dt1[1]);
                                    var anio1= dt1[2];
    
                                    diax1 = diaSemana(dia1,mes1,anio1);
    
    
                                    $("#"+lb).html('S4:&nbsp;&nbsp;'+diax+'&nbsp;'+dia+'&nbsp;-&nbsp;'+diax1+'&nbsp;'+dia1);
                                    $("#"+lb2).css('visibility','hidden');
    
    
                                break;
                               
                                
                                default:  
                        }//-----------------------------------------------------------
                
                        //console.log("viendo =", objNewPA.Objetivos[istObj].Actividades[isAcct]);
                        console.log("viendo =", ObjectUsing);
    
    
    
                
             }
             else
             {//es un subobjetivo
                
    
    
                console.log('------------------------------------------------------------------------------------');
                var objCr = objNewPA.Objetivos[istObj].SubObjetivos[istSobj].Actividades[isAcct].Cronogramas[mes-1];

                //console.log(objCr.Mes_Name);
                //console.log('------------------------------------------------------------------------------------');
                switch (sem) 
                        {//------------------------------------------------------------
                                case 1://semana1                                     
    
                                    var lb = 'lb_S1_mes_'+objCr.Mes_Num+'_txt';
                                    var lb2 = 'lb_S1_mes_'+objCr.Mes_Num;
    
    
                                    dt = objCr.Fecha_S1_Ini.split('/');
                                    var dia= dt[0];
                                    var mes= parseInt(dt[1]);
                                    var anio= dt[2];
    
                                    diax = diaSemana(dia,mes,anio);
    
                                    dt1 = objCr.Fecha_S1_Fin.split('/');
                                    var dia1= dt1[0];
                                    var mes1= parseInt(dt1[1]);
                                    var anio1= dt1[2];
    
                                    diax1 = diaSemana(dia1,mes1,anio1);
    
    
                                    $("#"+lb).html('S1:&nbsp;&nbsp;'+diax+'&nbsp;'+dia+'&nbsp;-&nbsp;'+diax1+'&nbsp;'+dia1);
                                    $("#"+lb2).css('visibility','hidden');
    
                                    
                                break;
                                
                                case 2://semana2
                                
    
                                    var lb = 'lb_S2_mes_'+objCr.Mes_Num+'_txt';
                                    var lb2 = 'lb_S2_mes_'+objCr.Mes_Num;
    
    
                                    dt = objCr.Fecha_S2_Ini.split('/');
                                    var dia= dt[0];
                                    var mes= parseInt(dt[1]);
                                    var anio= dt[2];
    
                                    diax = diaSemana(dia,mes,anio);
    
                                    dt1 = objCr.Fecha_S2_Fin.split('/');
                                    var dia1= dt1[0];
                                    var mes1= parseInt(dt1[1]);
                                    var anio1= dt1[2];
    
                                    diax1 = diaSemana(dia1,mes1,anio1);
    
    
                                    $("#"+lb).html('S2:&nbsp;&nbsp;'+diax+'&nbsp;'+dia+'&nbsp;-&nbsp;'+diax1+'&nbsp;'+dia1);
                                    $("#"+lb2).css('visibility','hidden');
    
                                break;
                                
                                case 3://semana3
                                  
    
                                    
    
                                    var lb = 'lb_S3_mes_'+objCr.Mes_Num+'_txt';
                                    var lb2 = 'lb_S3_mes_'+objCr.Mes_Num;
    
    
                                    dt = objCr.Fecha_S3_Ini.split('/');
                                    var dia= dt[0];
                                    var mes= parseInt(dt[1]);
                                    var anio= dt[2];
    
                                    diax = diaSemana(dia,mes,anio);
    
                                    dt1 = objCr.Fecha_S3_Fin.split('/');
                                    var dia1= dt1[0];
                                    var mes1= parseInt(dt1[1]);
                                    var anio1= dt1[2];
    
                                    diax1 = diaSemana(dia1,mes1,anio1);
    
    
                                    $("#"+lb).html('S3:&nbsp;&nbsp;'+diax+'&nbsp;'+dia+'&nbsp;-&nbsp;'+diax1+'&nbsp;'+dia1);
                                    $("#"+lb2).css('visibility','hidden');
    
                                break;
                                
                                case 4: //semana4
                                   
                                    var lb = 'lb_S4_mes_'+objCr.Mes_Num+'_txt';
                                    var lb2 = 'lb_S4_mes_'+objCr.Mes_Num;
    
    
                                    dt = objCr.Fecha_S4_Ini.split('/');
                                    var dia= dt[0];
                                    var mes= parseInt(dt[1]);
                                    var anio= dt[2];
    
                                    diax = diaSemana(dia,mes,anio);
    
                                    dt1 = objCr.Fecha_S4_Fin.split('/');
                                    var dia1= dt1[0];
                                    var mes1= parseInt(dt1[1]);
                                    var anio1= dt1[2];
    
                                    diax1 = diaSemana(dia1,mes1,anio1);
    
    
                                    $("#"+lb).html('S4:&nbsp;&nbsp;'+diax+'&nbsp;'+dia+'&nbsp;-&nbsp;'+diax1+'&nbsp;'+dia1);
                                    $("#"+lb2).css('visibility','hidden');
    
    
                                break;
                               
                                
                                default:  
                        }//-----------------------------------------------------------
                
                        //console.log("viendo =", objNewPA.Objetivos[istObj].Actividades[isAcct]);
                        console.log("viendo =", ObjectUsing);
    
    
    
             }
      }
    else{
    $("#"+bn).css('background-color','#05BEEE'); 

    $("#"+lb2).css('visibility','visible');
    //alert('me escogiste');
    if(istSobj == null)//es un objetivo
          {
            
            console.log('------------------------------------------------------------------------------------');
            var objCr = objNewPA.Objetivos[istObj].Actividades[isAcct].Cronogramas[mes-1];
            //console.log(objCr.Mes_Name);
            //console.log('------------------------------------------------------------------------------------');
            switch (sem) 
                    {//------------------------------------------------------------
                            case 1://semana1
                                var lb = 'lb_S1_mes_'+objCr.Mes_Num+'_txt';
                                var lb2 = 'lb_S1_mes_'+objCr.Mes_Num;


                                dt = objCr.Fecha_S1_Ini.split('/');
                                var dia= dt[0];
                                var mes= parseInt(dt[1]);
                                var anio= dt[2];

                                diax = diaSemana(dia,mes,anio);

                                dt1 = objCr.Fecha_S1_Fin.split('/');
                                var dia1= dt1[0];
                                var mes1= parseInt(dt1[1]);
                                var anio1= dt1[2];

                                diax1 = diaSemana(dia1,mes1,anio1);


                                $("#"+lb).html('S1:&nbsp;&nbsp;'+diax+'&nbsp;'+dia+'&nbsp;-&nbsp;'+diax1+'&nbsp;'+dia1);
                                $("#"+lb2).css('visibility','visible');

                                
                            break;
                            
                            case 2://semana2
                                var lb = 'lb_S2_mes_'+objCr.Mes_Num+'_txt';
                                var lb2 = 'lb_S2_mes_'+objCr.Mes_Num;


                                dt = objCr.Fecha_S2_Ini.split('/');
                                var dia= dt[0];
                                var mes= parseInt(dt[1]);
                                var anio= dt[2];

                                diax = diaSemana(dia,mes,anio);

                                dt1 = objCr.Fecha_S2_Fin.split('/');
                                var dia1= dt1[0];
                                var mes1= parseInt(dt1[1]);
                                var anio1= dt1[2];

                                diax1 = diaSemana(dia1,mes1,anio1);


                                $("#"+lb).html('S2:&nbsp;&nbsp;'+diax+'&nbsp;'+dia+'&nbsp;-&nbsp;'+diax1+'&nbsp;'+dia1);
                                $("#"+lb2).css('visibility','visible');

                            break;
                            
                            case 3://semana3
                                var lb = 'lb_S3_mes_'+objCr.Mes_Num+'_txt';
                                var lb2 = 'lb_S3_mes_'+objCr.Mes_Num;


                                dt = objCr.Fecha_S3_Ini.split('/');
                                var dia= dt[0];
                                var mes= parseInt(dt[1]);
                                var anio= dt[2];

                                diax = diaSemana(dia,mes,anio);

                                dt1 = objCr.Fecha_S3_Fin.split('/');
                                var dia1= dt1[0];
                                var mes1= parseInt(dt1[1]);
                                var anio1= dt1[2];

                                diax1 = diaSemana(dia1,mes1,anio1);


                                $("#"+lb).html('S3:&nbsp;&nbsp;'+diax+'&nbsp;'+dia+'&nbsp;-&nbsp;'+diax1+'&nbsp;'+dia1);
                                $("#"+lb2).css('visibility','visible');

                            break;
                            
                            case 4: //semana4
                                var lb = 'lb_S4_mes_'+objCr.Mes_Num+'_txt';
                                var lb2 = 'lb_S4_mes_'+objCr.Mes_Num;


                                dt = objCr.Fecha_S4_Ini.split('/');
                                var dia= dt[0];
                                var mes= parseInt(dt[1]);
                                var anio= dt[2];

                                diax = diaSemana(dia,mes,anio);

                                dt1 = objCr.Fecha_S4_Fin.split('/');
                                var dia1= dt1[0];
                                var mes1= parseInt(dt1[1]);
                                var anio1= dt1[2];

                                diax1 = diaSemana(dia1,mes1,anio1);


                                $("#"+lb).html('S4:&nbsp;&nbsp;'+diax+'&nbsp;'+dia+'&nbsp;-&nbsp;'+diax1+'&nbsp;'+dia1);
                                $("#"+lb2).css('visibility','visible');


                            break;
                           
                            
                            default:  
                    }//-----------------------------------------------------------
            
                    //console.log("viendo =", objNewPA.Objetivos[istObj].Actividades[isAcct]);
                    console.log("viendo =", ObjectUsing);



            
         }
         else
         {//es un subobjetivo
            


            console.log('------------------------------------------------------------------------------------');
            var objCr = objNewPA.Objetivos[istObj].SubObjetivos[istSobj].Actividades[isAcct].Cronogramas[mes-1];
            //console.log(objCr.Mes_Name);
            //console.log('------------------------------------------------------------------------------------');
            switch (sem) 
                    {//------------------------------------------------------------
                            case 1://semana1
                                var lb = 'lb_S1_mes_'+objCr.Mes_Num+'_txt';
                                var lb2 = 'lb_S1_mes_'+objCr.Mes_Num;


                                dt = objCr.Fecha_S1_Ini.split('/');
                                var dia= dt[0];
                                var mes= parseInt(dt[1]);
                                var anio= dt[2];

                                diax = diaSemana(dia,mes,anio);

                                dt1 = objCr.Fecha_S1_Fin.split('/');
                                var dia1= dt1[0];
                                var mes1= parseInt(dt1[1]);
                                var anio1= dt1[2];

                                diax1 = diaSemana(dia1,mes1,anio1);


                                $("#"+lb).html('S1:&nbsp;&nbsp;'+diax+'&nbsp;'+dia+'&nbsp;-&nbsp;'+diax1+'&nbsp;'+dia1);
                                $("#"+lb2).css('visibility','visible');

                                
                            break;
                            
                            case 2://semana2
                               var lb = 'lb_S2_mes_'+objCr.Mes_Num+'_txt';
                                var lb2 = 'lb_S2_mes_'+objCr.Mes_Num;


                                dt = objCr.Fecha_S2_Ini.split('/');
                                var dia= dt[0];
                                var mes= parseInt(dt[1]);
                                var anio= dt[2];

                                diax = diaSemana(dia,mes,anio);

                                dt1 = objCr.Fecha_S2_Fin.split('/');
                                var dia1= dt1[0];
                                var mes1= parseInt(dt1[1]);
                                var anio1= dt1[2];

                                diax1 = diaSemana(dia1,mes1,anio1);


                                $("#"+lb).html('S2:&nbsp;&nbsp;'+diax+'&nbsp;'+dia+'&nbsp;-&nbsp;'+diax1+'&nbsp;'+dia1);
                                $("#"+lb2).css('visibility','visible');

                            break;
                            
                            case 3://semana3
                                var lb = 'lb_S3_mes_'+objCr.Mes_Num+'_txt';
                                var lb2 = 'lb_S3_mes_'+objCr.Mes_Num;


                                dt = objCr.Fecha_S3_Ini.split('/');
                                var dia= dt[0];
                                var mes= parseInt(dt[1]);
                                var anio= dt[2];

                                diax = diaSemana(dia,mes,anio);

                                dt1 = objCr.Fecha_S3_Fin.split('/');
                                var dia1= dt1[0];
                                var mes1= parseInt(dt1[1]);
                                var anio1= dt1[2];

                                diax1 = diaSemana(dia1,mes1,anio1);


                                $("#"+lb).html('S3:&nbsp;&nbsp;'+diax+'&nbsp;'+dia+'&nbsp;-&nbsp;'+diax1+'&nbsp;'+dia1);
                                $("#"+lb2).css('visibility','visible');

                            break;
                            
                            case 4: //semana4
                               var lb = 'lb_S4_mes_'+objCr.Mes_Num+'_txt';
                                var lb2 = 'lb_S4_mes_'+objCr.Mes_Num;


                                dt = objCr.Fecha_S4_Ini.split('/');
                                var dia= dt[0];
                                var mes= parseInt(dt[1]);
                                var anio= dt[2];

                                diax = diaSemana(dia,mes,anio);

                                dt1 = objCr.Fecha_S4_Fin.split('/');
                                var dia1= dt1[0];
                                var mes1= parseInt(dt1[1]);
                                var anio1= dt1[2];

                                diax1 = diaSemana(dia1,mes1,anio1);


                                $("#"+lb).html('S4:&nbsp;&nbsp;'+diax+'&nbsp;'+dia+'&nbsp;-&nbsp;'+diax1+'&nbsp;'+dia1);
                                $("#"+lb2).css('visibility','visible');


                            break;
                           
                            
                            default:  
                    }//-----------------------------------------------------------
            
                    //console.log("viendo =", objNewPA.Objetivos[istObj].Actividades[isAcct]);
                    console.log("viendo =", ObjectUsing);



         }
  } 
    
}
  else
  {
    //verModalError("Por favor Revise","Debe seleccionar el año del Plan Anual");
    //$('#divf1_frecuencia').css('border-color', '#ff6767');
    //document.getElementById('divf1_frecuencia').style.setProperty('border-color', '#ff6767', 'important');
    //$('#divf1_frecuencia').focus();
  }
}


function cronogramaEstadoNatural()
{//------------------------------------- ini   cronogramaEstadoNatural() -------------------------------------

  //alert('quien me llama cronogramaEstadoNatural ');
   for(var i = 1; i<=12 ;i++)
   {
         
     //var bn = 'mes_'+i+'_S1';    
     //$("#"+bn).css('background-color','#ffffff'); 
    //$("#"+bn).css('background-color','#05BEEE'); 
     

    var lb = 'lb_S1_mes_'+i+'_txt';
    var lb2 = 'lb_S1_mes_'+i;
    $("#"+lb).html('S1:');
    var bn = 'mes_'+i+'_S1';  
    $("#"+bn).css('background-color','#ffffff'); 
    $("#"+lb2).css('visibility','hidden');
  

    var lb = 'lb_S2_mes_'+i+'_txt';
    var lb2 = 'lb_S2_mes_'+i;
    $("#"+lb).html('S2:');
    var bn = 'mes_'+i+'_S2'; 
    $("#"+bn).css('background-color','#ffffff');
    $("#"+lb2).css('visibility','hidden');



    var lb = 'lb_S3_mes_'+i+'_txt';
    var lb2 = 'lb_S3_mes_'+i;
    $("#"+lb).html('S3:');
    var bn = 'mes_'+i+'_S3'; 
    $("#"+bn).css('background-color','#ffffff');
    $("#"+lb2).css('visibility','hidden');



    var lb = 'lb_S4_mes_'+i+'_txt';
    var lb2 = 'lb_S4_mes_'+i;
    $("#"+lb).html('S4:');
    var bn = 'mes_'+i+'_S4'; 
    $("#"+bn).css('background-color','#ffffff');
    $("#"+lb2).css('visibility','hidden');


   }


}//------------------------------------- ini   cronogramaEstadoNatural() -------------------------------------




















function fnSp3agregaTareasActividadObjetivoPlan(idActividad)
{//------------------------------------- ini   fnSp3agregaTareasActividadObjetivoPlan() -------------------------------------

 // alert('Agragando las tareas de la Actividad ('+ idActividad +') plan');
}//------------------------------------- ini   fnSp3agregaTareasActividadObjetivoPlan() -------------------------------------

function fnSp3agregaCronogramaActividadObjetivoPlan(idActividad)
{//------------------------------------- ini   fnSp3agregaCronogramaActividadObjetivoPlan() -------------------------------------
  isAcct = idActividad;
  $("#Sp3VentanCronogramaActividadPlan").modal("show").addClass("fade");
 
  cronogramaEstadoNatural();
  

   //alert(objNewPA.Objetivos[istObj].Actividades[idActividad].Cronogramas.length);

 

    
        if(istSobj == null)//es un objetivo
        {
            //var m = objNewPA.Objetivos[istObj].Actividades.length; 

            
            var Actt = objNewPA.Objetivos[istObj].Actividades[idActividad].Actividad_Name;
            $("#lbTitleCronogramaActividadPlanAnual").html("Ingresar Cronograma de Actividad: "+ Actt +" )");
            //sel_year_frecuencia
            
            if(objNewPA.Objetivos[istObj].Actividades[idActividad].Cronogramas.length >0)
            {
                //alert('si es existeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee');
                newCron = 1;
            }
            else
            {
                newCron = 0;
            }
          
          
          

             for(var i = 0; i<12;i++)
                {//--------------------------------------------------------------------------------------------------------------------
                    if(newCron == 0)
                    {

                    
                            objNewPA.Objetivos[istObj].Actividades[idActividad].Cronogramas[i] = new Cronograma;//esto si es nuevo
                            var objCr = objNewPA.Objetivos[istObj].Actividades[idActividad].Cronogramas[i];
                            objCr.Id = 0;
 objCr.IdPos2 = i;

 objCr.IdPos = idActividad+'_'+i; 
                            objCr.ActividadPlanId = idActividad; 
                            objCr.Year_Frecuencia = $('#sel_year_frecuencia').val();
                            objCr.Mes_Num = i+1; 
                            objCr.Mes_Name = varMes[i];
                            objCr.S1 = 0; 
                            objCr.S2 = 0;  
                            objCr.S3 = 0; 
                            objCr.S4 = 0; 
                        
                            objCr.Fecha_S1_Ini = null; //"00/00/0000"; 
                            objCr.Fecha_S1_Fin = null; //"00/00/0000"; 
                        
                            objCr.Fecha_S2_Ini = null; //"00/00/0000";  
                            objCr.Fecha_S2_Fin = null; //"00/00/0000"; 
                        
                            objCr.Fecha_S3_Ini = null; //"00/00/0000";  
                            objCr.Fecha_S3_Fin = null; //"00/00/0000"; 
                        
                            objCr.Fecha_S4_Ini = null; //"00/00/0000"; 
                            objCr.Fecha_S4_Fin = null; //"00/00/0000"; 

                    }
                    else
                    {
                        if(newCron == 1)
                            {
                              //primero la fecha
                              
                              //vamos a graficar objCr.Mes_Num = i+1; 
                              var objCr = objNewPA.Objetivos[istObj].Actividades[idActividad].Cronogramas[i];
                            //  console.log('************************************(',i,') = ', objCr);

                                //alert('semana1 = '+objCr.S1);
                                var mesx = i+1;
                                    if(objCr.S1 == 1)
                                    {
                                        sp3FnselecionaSemana(1, mesx)  
                                        
                                    }

                                    if(objCr.S2 == 1)
                                    {
                                        sp3FnselecionaSemana(2, mesx)  
                                        
                                    }

                                    if(objCr.S3 == 1)
                                    {
                                        sp3FnselecionaSemana(3, mesx)  
                                       
                                    }

                                    if(objCr.S4 == 1)
                                    {
                                        sp3FnselecionaSemana(4, mesx)  
                                        
                                    }
                          
                                    
                                    
                            }
                    }
                    //pero si ya existe solo debemos dibujarlo
                }//--------------------------------------------------------------------------------------------------------------------

            

            console.log('** se acaba de crear el cronograma **', objNewPA);
        }
        else
        {//es un subobjetivo

            if(objNewPA.Objetivos[istObj].SubObjetivos[istSobj].Actividades[idActividad].Cronogramas.length >0)
            {
                //alert('si es existeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee');
                newCron = 1;
            }
            else
            {
                newCron = 0;
            }
          


            for(var i = 0; i<12;i++)
                {//--------------------------------------------------------------------------------------------------------------------
                    if(newCron == 0)
                    {
                        objNewPA.Objetivos[istObj].SubObjetivos[istSobj].Actividades[idActividad].Cronogramas[i] = new Cronograma;
                        var objCr = objNewPA.Objetivos[istObj].SubObjetivos[istSobj].Actividades[idActividad].Cronogramas[i];
                        objCr.Id = 0;
 objCr.IdPos2 = i;

 objCr.IdPos = idActividad+'_'+i; 
                        objCr.ActividadPlanId = idActividad; 
                        objCr.Year_Frecuencia = $('#sel_year_frecuencia').val();
                        objCr.Mes_Num = i+1; 
                        objCr.Mes_Name = varMes[i];
                        objCr.S1 = 0; 
                        objCr.S2 = 0;  
                        objCr.S3 = 0; 
                        objCr.S4 = 0; 
                    
                        objCr.Fecha_S1_Ini = null; //"00/00/0000"; 
                        objCr.Fecha_S1_Fin = null; //"00/00/0000"; 
                    
                        objCr.Fecha_S2_Ini = null; //"00/00/0000";  
                        objCr.Fecha_S2_Fin = null; //"00/00/0000"; 
                    
                        objCr.Fecha_S3_Ini = null; //"00/00/0000";  
                        objCr.Fecha_S3_Fin = null; //"00/00/0000"; 
                    
                        objCr.Fecha_S4_Ini = null; //"00/00/0000"; 
                        objCr.Fecha_S4_Fin = null; //"00/00/0000"; 
                    }
                    else
                    {

                        if(newCron == 1)
                        {
                          //primero la fecha
                          
                          //vamos a graficar objCr.Mes_Num = i+1; 
                          var objCr = objNewPA.Objetivos[istObj].SubObjetivos[istSobj].Actividades[idActividad].Cronogramas[i];
                        //  console.log('************************************(',i,') = ', objCr);

                            //alert('semana1 = '+objCr.S1);
                            var mesx = i+1;
                                if(objCr.S1 == 1)
                                {
                                    sp3FnselecionaSemana(1, mesx)  
                                    
                                }

                                if(objCr.S2 == 1)
                                {
                                    sp3FnselecionaSemana(2, mesx)  
                                    
                                }

                                if(objCr.S3 == 1)
                                {
                                    sp3FnselecionaSemana(3, mesx)  
                                   
                                }

                                if(objCr.S4 == 1)
                                {
                                    sp3FnselecionaSemana(4, mesx)  
                                    
                                }
                      
                                
                                
                        }

                    }



                }//--------------------------------------------------------------------------------------------------------------------

            

            console.log('** se acaba de crear el cronograma **', objNewPA);
        }

 

}//------------------------------------- ini   fnSp3agregaCronogramaActividadObjetivoPlan() -------------------------------------

function fnSp3agregaCronogramaActividadObjetivoPlanEditar(idActividad)
{//------------------------------------- ini   fnSp3agregaCronogramaActividadObjetivoPlan() -------------------------------------
  isAcct = idActividad;
  $("#Sp3VentanCronogramaActividadPlan").modal("show").addClass("fade");
 
  cronogramaEstadoNatural();
  

   //alert(objNewPA.Objetivos[istObj].Actividades[idActividad].Cronogramas.length);

 

    
        if(istSobj == null)//es un objetivo
        {
            //var m = objNewPA.Objetivos[istObj].Actividades.length; 

            
            var Actt = objNewPA.Objetivos[istObj].Actividades[idActividad].Actividad_Name;
            $("#lbTitleCronogramaActividadPlanAnual").html("Ingresar Cronograma de Actividad: "+ Actt +" )");
            //sel_year_frecuencia
            
            if(objNewPA.Objetivos[istObj].Actividades[idActividad].Cronogramas.length >0)
            {
                //alert('si es existeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee');
                newCron = 1;
            }
            else
            {
                newCron = 0;
            }
          
          
          

             for(var i = 0; i<12;i++)
                {//--------------------------------------------------------------------------------------------------------------------
                    if(newCron == 0)
                    {

                    
                            objNewPA.Objetivos[istObj].Actividades[idActividad].Cronogramas[i] = new Cronograma;//esto si es nuevo
                            var objCr = objNewPA.Objetivos[istObj].Actividades[idActividad].Cronogramas[i];
                            objCr.Id = 0;
                        objCr.IdPos2 = i;

                            objCr.IdPos = idActividad+'_'+i; 
                            objCr.ActividadPlanId = idActividad; 
                            objCr.Year_Frecuencia = $('#sel_year_frecuencia').val();
                            objCr.Mes_Num = i+1; 
                            objCr.Mes_Name = varMes[i];
                            objCr.S1 = 0; 
                            objCr.S2 = 0;  
                            objCr.S3 = 0; 
                            objCr.S4 = 0; 
                        
                            objCr.Fecha_S1_Ini = null; //"00/00/0000"; 
                            objCr.Fecha_S1_Fin = null; //"00/00/0000"; 
                        
                            objCr.Fecha_S2_Ini = null; //"00/00/0000";  
                            objCr.Fecha_S2_Fin = null; //"00/00/0000"; 
                        
                            objCr.Fecha_S3_Ini = null; //"00/00/0000";  
                            objCr.Fecha_S3_Fin = null; //"00/00/0000"; 
                        
                            objCr.Fecha_S4_Ini = null; //"00/00/0000"; 
                            objCr.Fecha_S4_Fin = null; //"00/00/0000"; 

                    }
                    else
                    {
                        if(newCron == 1)
                            {
                              //primero la fecha
                              
                              //vamos a graficar objCr.Mes_Num = i+1; 
                              var objCr = objNewPA.Objetivos[istObj].Actividades[idActividad].Cronogramas[i];
                            //  console.log('************************************(',i,') = ', objCr);
                                console.log(objCr)
                                //alert('semana1 = '+objCr.S1);
                                var mesx = i+1;
                                   

                                    if(CC_Cronograma == true){
                                        objCr.S1 = 0; 
                                        objCr.S2 = 0;  
                                        objCr.S3 = 0; 
                                        objCr.S4 = 0; 
                                    
                                        objCr.Fecha_S1_Ini = null; //"00/00/0000"; 
                                        objCr.Fecha_S1_Fin = null; //"00/00/0000"; 
                                    
                                        objCr.Fecha_S2_Ini = null; //"00/00/0000";  
                                        objCr.Fecha_S2_Fin = null; //"00/00/0000"; 
                                    
                                        objCr.Fecha_S3_Ini = null; //"00/00/0000";  
                                        objCr.Fecha_S3_Fin = null; //"00/00/0000"; 
                                    
                                        objCr.Fecha_S4_Ini = null; //"00/00/0000"; 
                                        objCr.Fecha_S4_Fin = null; //"00/00/0000"; 
                                    }else{
                                        if(objCr.S1 == 1)
                                        {
                                            sp3FnselecionaSemanaEdit(1, objCr.Mes_Num)  
                                            
                                        }
    
                                        if(objCr.S2 == 1)
                                        {
                                            sp3FnselecionaSemanaEdit(2, objCr.Mes_Num)  
                                            
                                        }
    
                                        if(objCr.S3 == 1)
                                        {
                                            sp3FnselecionaSemanaEdit(3, objCr.Mes_Num)  
                                           
                                        }
    
                                        if(objCr.S4 == 1)
                                        {
                                            sp3FnselecionaSemanaEdit(4, objCr.Mes_Num)  
                                            
                                        }
                                    }
                                    
                                    
                                    
                            }
                    }
                    //pero si ya existe solo debemos dibujarlo
                }//--------------------------------------------------------------------------------------------------------------------

            

            console.log('** se acaba de crear el cronograma **', ObjectUsing);
        }
        else
        {//es un subobjetivo

            if(objNewPA.Objetivos[istObj].SubObjetivos[istSobj].Actividades[idActividad].Cronogramas.length >0)
            {
                //alert('si es existeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee');
                newCron = 1;
            }
            else
            {
                newCron = 0;
            }
          


            for(var i = 0; i<12;i++)
                {//--------------------------------------------------------------------------------------------------------------------
                    if(newCron == 0)
                    {
                        objNewPA.Objetivos[istObj].SubObjetivos[istSobj].Actividades[idActividad].Cronogramas[i] = new Cronograma;
                        var objCr = objNewPA.Objetivos[istObj].SubObjetivos[istSobj].Actividades[idActividad].Cronogramas[i];
                        objCr.Id = 0;
 objCr.IdPos2 = i;

 objCr.IdPos = idActividad+'_'+i; 
                        objCr.ActividadPlanId = idActividad; 
                        objCr.Year_Frecuencia = $('#sel_year_frecuencia').val();
                        objCr.Mes_Num = i+1; 
                        objCr.Mes_Name = varMes[i];
                        objCr.S1 = 0; 
                        objCr.S2 = 0;  
                        objCr.S3 = 0; 
                        objCr.S4 = 0; 
                    
                        objCr.Fecha_S1_Ini = null; //"00/00/0000"; 
                        objCr.Fecha_S1_Fin = null; //"00/00/0000"; 
                    
                        objCr.Fecha_S2_Ini = null; //"00/00/0000";  
                        objCr.Fecha_S2_Fin = null; //"00/00/0000"; 
                    
                        objCr.Fecha_S3_Ini = null; //"00/00/0000";  
                        objCr.Fecha_S3_Fin = null; //"00/00/0000"; 
                    
                        objCr.Fecha_S4_Ini = null; //"00/00/0000"; 
                        objCr.Fecha_S4_Fin = null; //"00/00/0000"; 
                    }
                    else
                    {

                        if(newCron == 1)
                        {
                          //primero la fecha
                          
                          //vamos a graficar objCr.Mes_Num = i+1; 
                          var objCr = objNewPA.Objetivos[istObj].SubObjetivos[istSobj].Actividades[idActividad].Cronogramas[i];
                        //  console.log('************************************(',i,') = ', objCr);

                            //alert('semana1 = '+objCr.S1);
                            var mesx = i+1;

                            if(CC_Cronograma == false){
                                if(objCr.S1 == 1)
                                {
                                    sp3FnselecionaSemanaEdit(1, mesx)  
                                    
                                }

                                if(objCr.S2 == 1)
                                {
                                    sp3FnselecionaSemanaEdit(2, mesx)  
                                    
                                }

                                if(objCr.S3 == 1)
                                {
                                    sp3FnselecionaSemanaEdit(3, mesx)  
                                   
                                }

                                if(objCr.S4 == 1)
                                {
                                    sp3FnselecionaSemanaEdit(4, mesx)  
                                    
                                }
                            }else{
                                objCr.S1 = 0; 
                                objCr.S2 = 0;  
                                objCr.S3 = 0; 
                                objCr.S4 = 0; 
                            
                                objCr.Fecha_S1_Ini = null; //"00/00/0000"; 
                                objCr.Fecha_S1_Fin = null; //"00/00/0000"; 
                            
                                objCr.Fecha_S2_Ini = null; //"00/00/0000";  
                                objCr.Fecha_S2_Fin = null; //"00/00/0000"; 
                            
                                objCr.Fecha_S3_Ini = null; //"00/00/0000";  
                                objCr.Fecha_S3_Fin = null; //"00/00/0000"; 
                            
                                objCr.Fecha_S4_Ini = null; //"00/00/0000"; 
                                objCr.Fecha_S4_Fin = null; //"00/00/0000"; 
                            }

                                
                      

                                
                        }

                    }



                }//--------------------------------------------------------------------------------------------------------------------

            

            console.log('** se acaba de crear el cronograma **', ObjectUsing);
        }

 

}//------------------------------------- ini   fnSp3agregaCronogramaActividadObjetivoPlan() -------------------------------------





function fnSp3CerrarNuevasCronogramaPlan()
{//------------------------------------- ini   fnSp3CerrarVentanaMostrarPlanAnual() -------------------------------------
    $("#Sp3VentanCronogramaActividadPlan").modal("hide").removeClass("fade");
}//------------------------------------- ini   fnSp3CerrarVentanaMostrarPlanAnual() -------------------------------------


function fnSp3verCronogramaPlan(ij, itemx)
{//------------------------------------- ini   fnSp3CerrarVentanaMostrarPlanAnual() -------------------------------------

//Year_Frecuencia    <option selected value='0'> 2021 </option>
$('#sel_year_frecuencia').html("<option selected value='"+itemx.Year_Frecuencia+"'> "+itemx.Year_Frecuencia+" </option>");
//alert(itemx.S1+'<---->'+itemx.Fecha_S1_Ini);
var  mex = ["January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December"];

if(itemx.S1 == 1) 
{ 
  
    var bn = 'mes_'+itemx.Mes_Num+'_S1';    
    $("#"+bn).css('background-color','#05BEEE'); 

    var lb = 'lb_S1_mes_'+itemx.Mes_Num+'_txt';
    var lb2 = 'lb_S1_mes_'+itemx.Mes_Num;


    dt = itemx.Fecha_S1_Ini.split('/');
    var dia= dt[0];
    var mes= parseInt(dt[1]);
    var anio= dt[2];

    diax = diaSemana(dia,mes,anio);

     dt1 = itemx.Fecha_S1_Fin.split('/');
    var dia1= dt1[0];
    var mes1= parseInt(dt1[1]);
    var anio1= dt1[2];

    diax1 = diaSemana(dia1,mes1,anio1);


    $("#"+lb).html('S1:&nbsp;&nbsp;'+diax+'&nbsp;'+dia+'&nbsp;-&nbsp;'+diax1+'&nbsp;'+dia1);
    $("#"+lb2).css('visibility','visible');

    //alert(itemx.Mes_Name+" = "+itemx.Fecha_S1_Ini+" = "+lb2);

    
}


if(itemx.S2 == 1) 
{ 
    var bn = 'mes_'+itemx.Mes_Num+'_S2';    
    $("#"+bn).css('background-color','#05BEEE'); 

    var lb = 'lb_S2_mes_'+itemx.Mes_Num+'_txt';
    var lb2 = 'lb_S2_mes_'+itemx.Mes_Num;


    dt = itemx.Fecha_S2_Ini.split('/');
    var dia= dt[0];
    var mes= parseInt(dt[1]);
    var anio= dt[2];

    diax = diaSemana(dia,mes,anio);

     dt1 = itemx.Fecha_S2_Fin.split('/');
    var dia1= dt1[0];
    var mes1= parseInt(dt1[1]);
    var anio1= dt1[2];

    diax1 = diaSemana(dia1,mes1,anio1);



    $("#"+lb).html('S2: '+diax+'  '+dia+' - '+diax1+'  '+dia1);
    $("#"+lb2).css('visibility','visible');
}


if(itemx.S3 == 1) 
{ 
    var bn = 'mes_'+itemx.Mes_Num+'_S3';    
    $("#"+bn).css('background-color','#05BEEE'); 

    var lb = 'lb_S3_mes_'+itemx.Mes_Num+'_txt';
    var lb2 = 'lb_S3_mes_'+itemx.Mes_Num;


    dt = itemx.Fecha_S3_Ini.split('/');
    var dia= dt[0];
    var mes= parseInt(dt[1]);
    var anio= dt[2];

    diax = diaSemana(dia,mes,anio);

     dt1 = itemx.Fecha_S3_Fin.split('/');
    var dia1= dt1[0];
    var mes1= parseInt(dt1[1]);
    var anio1= dt1[2];

    diax1 = diaSemana(dia1,mes1,anio1);



    $("#"+lb).html('S3: '+diax+'  '+dia+' - '+diax1+'  '+dia1);
    $("#"+lb2).css('visibility','visible');
}

if(itemx.S4 == 1) 
{ 
    var bn = 'mes_'+itemx.Mes_Num+'_S3';    
    $("#"+bn).css('background-color','#05BEEE'); 

    var lb = 'lb_S4_mes_'+itemx.Mes_Num+'_txt';
    var lb2 = 'lb_S4_mes_'+itemx.Mes_Num;


    dt = itemx.Fecha_S4_Ini.split('/');
    var dia= dt[0];
    var mes= parseInt(dt[1]);
    var anio= dt[2];

    diax = diaSemana(dia,mes,anio);

     dt1 = itemx.Fecha_S4_Fin.split('/');
    var dia1= dt1[0];
    var mes1= parseInt(dt1[1]);
    var anio1= dt1[2];

    diax1 = diaSemana(dia1,mes1,anio1);



    $("#"+lb).html('S3: '+diax+'  '+dia+' - '+diax1+'  '+dia1);
    $("#"+lb2).css('visibility','visible');
}








    /*
    ActividadPlanId: 1
    Fecha_S1_Fin: "09/01/2021"
    Fecha_S1_Ini: "04/01/2021"
    Fecha_S2_Fin: null
    Fecha_S2_Ini: null
    Fecha_S3_Fin: "24/01/2021"
    Fecha_S3_Ini: "18/01/2021"
    Fecha_S4_Fin: null
    Fecha_S4_Ini: null
    Id: 1
    Mes_Name: "Enero"
    Mes_Num: 1
    S1: "1"
    S2: "0"
    S3: "1"
    S4: "0"
    */

}//------------------------------------- ini   fnSp3CerrarVentanaMostrarPlanAnual() -------------------------------------


function diaSemana(dia,mes,anio){
    console.log(dia,mes,anio)
    var dias=["Dom", "Lun", "Mar", "Mié", "Jue", "Vie", "Sab"];
    var dt = new Date(mes+' '+dia+', '+anio+' 12:00:00');
    return dias[dt.getUTCDay()];    
};









function calcula_semana(sem, mes, ini_fin,y)
{
        var i = mes;
        var date = new Date(), 
       // y = date.getFullYear(),
        m = date.getMonth(); 
        var firstDay = new Date(y, i, 1); 
        var lastDay = new Date(y, i + 1, 0);


     console.log('-------------------------------MES(',i+1,')-------------------------------- ');
     var resp = calcula_SEM(firstDay,sem,ini_fin);
     return resp;

}





var SEM1 = [];
var SEM2 = [];
var SEM3 = [];
var SEM4 = [];
function calcula_SEM(fe,sem,ini_fin)
{//-------------------------------------------------------------
     
     /*var dia = parseInt(fe.getDay());// 0Domingo
     var mes = parseInt(fe.getMonth()); mes = mes+1;
     var diaNum = parseInt(fe.getDate());
     var year = parseInt(fe.getFullYear());


     var SEM1i = [];   var SEM1f = [];
     var SEM2i = [];   var SEM2f = [];
     var SEM3i = [];   var SEM3f = [];
     var SEM4i = [];   var SEM4f = [];


     switch (dia) 
     {//------------------------------------------------------------
               case 0://domingo
                  diaNum = diaNum +1;
               break;
               
               
               case 2://Martes
                    diaNum = diaNum +6;
               break;
            
               case 3://miercoles
                    diaNum = diaNum +5;
               break;
            
               case 4: //Jueves
                    diaNum = diaNum +4;
               break;
            
               case 5://Viernes
                  diaNum = diaNum +3;
               break;

               case 6://Sabado
                  diaNum = diaNum +2;
               break;
            
            
               default:  
     }//-----------------------------------------------------------

    

     var diai = diaNum; var diaf = diai+4;
     SEM1i[mes-1] = diai+'/'+mes+'/'+year;
     SEM1f[mes-1] = diaf+'/'+mes+'/'+year;
     //console.log(SEM1[mes-1]);
     diaNum = diaNum +7;


     var diai = diaNum;var diaf = diai+4;
     SEM2i[mes-1] = diai+'/'+mes+'/'+year;
     SEM2f[mes-1] = diaf+'/'+mes+'/'+year;
     diaNum = diaNum +7;


     var diai = diaNum;var diaf = diai+4;
     SEM3i[mes-1] = diai+'/'+mes+'/'+year;
     SEM3f[mes-1] = diaf+'/'+mes+'/'+year;
     diaNum = diaNum +7;


     var diai = diaNum;var diaf = diai+4;
     SEM4i[mes-1] = diai+'/'+mes+'/'+year;
     SEM4f[mes-1] = diaf+'/'+mes+'/'+year;
     diaNum = diaNum +7;
     

     //sem,ini_fin

     switch (sem) 
     {//------------------------------------------------------------
               case 1://ini_fin
                  if(ini_fin = 'ini') { return SEM1i[mes-1];}
                  else if(ini_fin = 'fin') { return SEM1f[mes-1];}
               break;
            
               case 2:
                if(ini_fin = 'ini') { return SEM2i[mes-1];}
                else if(ini_fin = 'fin') { return SEM2f[mes-1];}
               break;
            
               case 3:
                if(ini_fin = 'ini') { return SEM3i[mes-1];}
                else if(ini_fin = 'fin') { return SEM3f[mes-1];}
               break;
            
               case 4:
                if(ini_fin = 'ini') { return SEM4i[mes-1];}
                else if(ini_fin = 'fin') { return SEM4f[mes-1];}
               break;
            
               
               default:  
     }//-----------------------------------------------------------

*/



var dia = parseInt(fe.getDay());// 0Domingo
var mes = parseInt(fe.getMonth()); mes = mes+1;
var diaNum = parseInt(fe.getDate());
var year = parseInt(fe.getFullYear());


// console.log('dia = '+daysIndex[dia]+'');
// console.log('dia_Num = '+diaNum+']');
// console.log('Mes = '+mes+']');


switch (dia) 
{//------------------------------------------------------------
          case 0://domingo
             diaNum = diaNum +1;
          break;
       
          case 2://Martes
               diaNum = diaNum +6;
          break;
       
          case 3://miercoles
               diaNum = diaNum +5;
          break;
       
          case 4: //Jueves
               diaNum = diaNum +4;
          break;
       
          case 5://Viernes
                  diaNum = diaNum +3;
          break;

          case 6://Sabado
                  diaNum = diaNum +2;
          break;
       
       
          default:  
}//-----------------------------------------------------------

var diai = diaNum;var diaf = diai+4;
if(sem == 1){if(ini_fin == 'ini'){var k = diai+'/'+mes+'/'+year; return k;}else{var k = diaf+'/'+mes+'/'+year; return k;}}
//SEM1[mes-1] = ' SEMANA1 DEL MES = '+diai+'/'+mes+'/2021   al  '+diaf+'/'+mes+'/2021';
//console.log(SEM1[mes-1]);
diaNum = diaNum +7;


var diai = diaNum;var diaf = diai+4;
if(sem == 2){if(ini_fin == 'ini'){var k = diai+'/'+mes+'/'+year; return k;}else{var k = diaf+'/'+mes+'/'+year; return k;}}
//SEM1[mes-1] = ' SEMANA2 DEL MES = '+diai+'/'+mes+'/2021   al  '+diaf+'/'+mes+'/2021';
//console.log(SEM1[mes-1]);
diaNum = diaNum +7;


var diai = diaNum;var diaf = diai+4;
if(sem == 3){if(ini_fin == 'ini'){var k = diai+'/'+mes+'/'+year; return k;}else{var k = diaf+'/'+mes+'/'+year; return k;}}
//SEM1[mes-1] = ' SEMANA3 DEL MES = '+diai+'/'+mes+'/2021   al  '+diaf+'/'+mes+'/2021';
//console.log(SEM1[mes-1]);
diaNum = diaNum +7;


var diai = diaNum;
var mesF=mes;
var x =new Date(year, mesF, 0);
console.log(new Date(year, mesF, 0));
console.log(x.getDate());
var diaf = diai+4;
if(diaf > x.getDate()){
    diaf = diaf - x.getDate();
    if(mesF < 12)
    {
        mesF = mesF +1;
    }else{
        mesF = 1;
        year = year +1;
    }
}
if(sem == 4){if(ini_fin == 'ini'){var k = diai+'/'+mes+'/'+year; return k;}else{var k = diaf+'/'+mesF+'/'+year; return k;}}
//SEM1[mes-1] = ' SEMANA4 DEL MES = '+diai+'/'+mes+'/2021   al  '+diaf+'/'+mes+'/2021';
//console.log(SEM1[mes-1]);
diaNum = diaNum +7;

}//-------------------------------------------------------------








































// /**
//  *  invir plan de auditoria
//  * @param {int} idAud 
//  */
//  function enviarPlanPDF2(idAud)
//  {//vamos a programarlo directo sin datos primeramente para diseñarlo 
//      var auditor = 1;
//      var xRecAuditor= 9;
//      var xtxtAuditor= 12;
//      var yRecAuditor= 183;
//      var ytxtAuditor= 191;
//      var Observador = 1; 
//      var xRecObservador= 9;
//      var xtxtObservador= 12;
//      var yRecObservador= 0;
//      var ytxtObservador= 0;
//      var ytituloObservador = 0;
//      var resto = 0;
//      var Responsable="";
//      var anio = (new Date).getFullYear();
 
 
//      var fec_plan_inicial = formatDate(objAuditoria[idAud].Inicio_Plan);
//      var fec_plan_fin = formatDate(objAuditoria[idAud].Fin_Plan);
 
 
//      var fec_ejec_inicial = formatDate(objAuditoria[idAud].Inicio);
//      var fec_ejec_fin = formatDate(objAuditoria[idAud].Fin);
 
//      var fec_create_plan = formatDate(objAuditoria[idAud].Fecha_Creacion_Plan)
     
 
//      var doc = new jsPDF();
//      var img_sup = new Image();
//      img_sup.src = './images/img_superior_pdf.png';
 
//      var img_log = new Image();
//      img_log.src = './images/Logo_tasa_pdf.png';
 
//      var img_inf = new Image();
//      img_inf.src = './images/img_inferior_pdf.png';
 
//      var img_header = new Image();
//      img_header.src = './images/img_header.png';
 
//      var img_logo_header = new Image();
//      img_logo_header.src = './images/img_logo_header.png';
 
//      var img_letras = new Image();
//      img_letras.src = './images/img_letras.png';
 
 
//      doc.addImage(img_sup, 'PNG', 0, 0, 210, 128)
//      doc.addImage(img_inf, 'PNG', 0, 186, 210, 110)
//      doc.addImage(img_log, 'PNG', 49, 115, 110, 37)
//      doc.setFontType('bold')
//      doc.setTextColor(52,85,156); 
//      doc.text(85, 160, 'Informe de Auditoría');
//      doc.setTextColor(178,178,178); 
//      doc.text(96, 162, '________');
//      doc.text(105, 172, ''+anio);
 
 
 
//      doc.addPage();//...................................................      agregamos una pagina
 
//      //------------------------------------------------------------------    encabezado documento    -------------------------------------------------
//      doc.addImage(img_header, 'PNG', 0, 0, 210, 21)
//      doc.addImage(img_logo_header, 'PNG', 6, 5, 23, 8)
 
//      doc.setTextColor(255,255,255);
//      doc.setFontSize(12)
//      doc.setFontType('bolditalic')
//      doc.text(140, 15, 'Informe de Auditoría Interna');
//      doc.text(168, 17, '____________');
 
 
//      doc.addImage(img_sup, 'PNG', 0, 22, 210, 128)
//      doc.addImage(img_inf, 'PNG', 0, 186, 210, 110)
//  //------------------------------------------------------------------    encabezado documento    -------------------------------------------------
 
 
 
 
//      doc.setFontSize(10)
//      doc.setFontType('bold')
//      doc.setTextColor(0,0,0); 
//      doc.text(9, 34, 'Datos Principales');
//      doc.setTextColor(200,200,200); 
//      //doc.text(44, 32, '___________________________________________________________________________');
//      var img_menu = new Image();
//      img_menu.src = './images/img_menu.png';
 
//      doc.addImage(img_menu, 'PNG', 195, 30, 5, 5)
 
 
 
 
 
 
//      var img_gps = new Image();
//      img_gps.src = './images/img_gps.png';
 
//      var img_calendar_gray = new Image();
//      img_calendar_gray.src = './images/img_calendar_gray.png';
 
//      var img_goal = new Image();
//      img_goal.src = './images/img_goal.png';
 
//      var img_calendar_check = new Image();
//      img_calendar_check.src = './images/img_calendar_check.png';
 
//      var img_calendar_blue = new Image();
//      img_calendar_blue.src = './images/img_calendar_blue.png';
 
//  //------------------------------    Fecha Planificada      ---------------------------------   
//      var img_calendar_green = new Image();
//      img_calendar_green.src = './images/img_calendar_green.png';
 
//      doc.setFontType('normal')
//      doc.addImage(img_calendar_green, 'PNG', 9, 48, 4, 4)
//      doc.setTextColor(52,85,156); 
//      doc.text(15, 52, 'Fecha Planificada');
//      doc.setDrawColor(200,200,200);
//      doc.setFillColor(255, 255, 255);
//      doc.rect(9, 56, 41, 14);//(x1,y1,x2,y2)
//      doc.setTextColor(0,0,0); 
//      doc.text(''+fec_plan_inicial,22, 64);
     
//  //------------------------------    Fecha Planificada      ---------------------------------   
 
//  //------------------------------    Norma/Estándar(Criteriode Auditoría)      ---------------------------------   
//  var img_copia = new Image();
//  img_copia.src = './images/img_copia.png';
 
//  doc.setFontType('normal')
//  doc.addImage(img_copia, 'PNG', 56, 48, 4, 4)
//  doc.setTextColor(52,85,156); 
//  doc.text(61, 52, 'Norma/Estándar(Criteriode Auditoría)');
//  doc.setDrawColor(200,200,200);
//  doc.setFillColor(255, 255, 255);
//  doc.rect(56, 56, 70, 14);//(x1,y1,x2,y2)
//  doc.setTextColor(0,0,0); 
//  var NORMAx=objAuditoria[idAud].Code_Normas;
//  doc.text(''+NORMAx,65, 64);
 
//  //------------------------------    Norma/Estándar(Criteriode Auditoría)a      ---------------------------------   
 
//  //------------------------------             Código Auditoría             ---------------------------------   
//  var img_copia = new Image();
//  img_copia.src = './images/img_copia.png';
 
//  doc.setFontType('normal')
//  doc.addImage(img_calendar_green, 'PNG', 133, 48, 4, 4)
//  doc.setTextColor(52,85,156); 
//  doc.text(139, 52, 'Código Auditoría');
//  doc.setDrawColor(200,200,200);
//  doc.setFillColor(255, 255, 255);
//  doc.rect(133, 56, 60, 14);//(x1,y1,x2,y2)
//  doc.setTextColor(0,0,0); 
//  CODENORMA=objAuditoria[idAud].Code;
//  doc.text(''+CODENORMA,139, 64);
 
//  //------------------------------              Código Auditoría          ---------------------------------   
 
 
//  //------------------------------    UnidaddeNegocio      ---------------------------------   
 
 
//  doc.setFontType('normal')
//  doc.addImage(img_copia, 'PNG', 9, 75, 4, 4)
//  doc.setTextColor(52,85,156); 
//  doc.text(15, 78, 'Unidad de Negocio');
//  doc.setDrawColor(200,200,200);
//  doc.setFillColor(255, 255, 255);
//  doc.rect(9, 83, 41, 14);//(x1,y1,x2,y2)
//  doc.setTextColor(0,0,0); 
//  doc.text(''+objAuditoria[idAud].DescriptionUnidadNegocio,22, 91);//DescriptionUnidadNegocio
 
//  //------------------------------    UnidaddeNegocio      ---------------------------------   
 
 
//  //------------------------------    Sede      ---------------------------------   
//  var img_copia = new Image();
//  img_copia.src = './images/img_gps.png';
 
//  doc.setFontType('normal')
//  doc.addImage(img_copia, 'PNG', 56, 75, 4, 4)
//  doc.setTextColor(52,85,156); 
//  doc.text(61, 78, 'Sede');
//  doc.setDrawColor(200,200,200);
//  doc.setFillColor(255, 255, 255);
//  doc.rect(56, 83, 50, 14); //(x1,y1,x2,y2)
//  doc.setTextColor(0,0,0); 
//  //CODENORMA=objAuditoria[idAud].Code_Normas;
//  Sede_L = objAuditoria[idAud].DescriptionSede;
//  doc.text(''+Sede_L,65, 91);   
 
//  //------------------------------    Sede      ---------------------------------  
 
 
 
//  objAuditoria[idAud].AuditoresPDF.map(function(item)
//  {
 
//      if(item.Selected>0)
//      {
//          if(item.Tipo_Id == 1)
//          {  
//              Responsable = toCapitalize(item.Name);
//              // Name_AuditorL = Responsable;
//              // Cargo_AuditorL = toCapitalize(item.Cargo);
//          }
//      }
//  })
 
//  //------------------------------    Auditor Lider      ---------------------------------   
//  var img_copia = new Image();
//  img_copia.src = './images/img_user.png';
 
//  doc.setFontType('normal')
//  doc.addImage(img_copia, 'PNG',113, 75, 4, 4)
//  doc.setTextColor(52,85,156); 
//  doc.text(120, 78, 'Auditor Líder');
//  doc.setDrawColor(200,200,200);
//  doc.setFillColor(255, 255, 255);
//  doc.rect(113, 83, 80, 14);//(x1,y1,x2,y2)
//  doc.setTextColor(0,0,0); 
//  //CODENORMA=objAuditoria[idAud].Code_Normas;
//  doc.text(''+Responsable,120, 91);   
 
//  //------------------------------   Auditor Lider      ---------------------------------  
 
 
 
 
 
 
 
 
//  //-------------------------   **   Equipo Auditor  ** --------------------------------- 
//  var img_group = new Image();
//  img_group.src = './images/img_Group.png';
//  doc.addImage(img_group, 'PNG', 9, 103, 4, 4)//img_Group
//  doc.setTextColor(52,85,156); 
//  doc.setDrawColor(200,200,200);
//  doc.setFillColor(255, 255, 255);
 
//  objAuditoria[idAud].AuditoresPDF.map(function(item)
//      {
 
//          if(item.Selected>0)
//          {
//              if(item.Tipo_Id == 2)
//              {  
//                  doc.setFontSize(10)
 
//                  doc.setDrawColor(200,200,200);
//                  doc.setFillColor(255, 255, 255);
//                  console.log('#################################### rectangulos  ###################################')
//                  console.log('doc.rect(',xRecAuditor,',',yRecAuditor,', 43, 14)')
//                  console.log('#################################### rectangulos  ###################################')
//                  doc.rect(xRecAuditor, 110, 43, 14);
//                  doc.setTextColor(0,0,0); 
//                  doc.text(toCapitalize(item.Name),xtxtAuditor, 116,{maxWidth:30});
//                  auditor = auditor + 1;
//                  resto = auditor % 4;   
//                  if ( resto == 0 ){
//                      xRecAuditor= 9;
//                      xtxtAuditor= 12;    
//                      yRecAuditor = yRecAuditor + 16; 
//                      ytxtAuditor = ytxtAuditor +16;         
//                  }else{
//                      xRecAuditor = xRecAuditor + 48; 
//                      xtxtAuditor = xtxtAuditor + 48;
//                  }
 
//              }
//          }
//      })
 
 
//      doc.setFontSize(10)
//      auditor = auditor - 1;
//      doc.setTextColor(52,85,156); 
 
//      //doc.text(15, 180, 'Auditor ('+auditor+')');
//      doc.text(15, 107, 'Equipo Auditor ('+auditor+')');
//  //-------------------------   **   Equipo Auditor  ** --------------------------------- 
 
 
 
 
 
 
//  //-------------------------   **   Resultado de la Auditoría  ** ---------------------------------img_calendar_check
//  var img_calendar_checkx = new Image();
//  img_calendar_checkx.src = './images/img_calendar_check.png';
//  doc.text(15, 135, ' Resultado de la Auditoría ');
//  doc.addImage(img_calendar_checkx, 'PNG', 9, 132, 4, 4)
 
 
//  var img_TH = new Image();
//  img_TH.src = './images/totalHallazgos.png';
//  doc.setTextColor(0,0,0); doc.setFontSize(10)
 
//  var val = objAuditoria[idAud].NoConformidadCritica; if(val<=9) val = '0'+val;
//  doc.addImage(img_TH, 'PNG', 12, 140, 30, 11)//
//  doc.text(14, 147, 'NC Crítico:');doc.text(36, 147, val);
 
//  var sepp = 6;
 
//  val = objAuditoria[idAud].NoConformidadMayor; if(val<=9) val = '0'+val;
//  doc.addImage(img_TH, 'PNG', 50, 140, 30, 11)
//  doc.text(53, 147, 'NC Mayor:');doc.text(74, 147, val);// +2    +22X        Y32
 
//  val = objAuditoria[idAud].NoConformidadMenor; if(val<= 9) val = '0'+val;  //alert(val)
//  doc.addImage(img_TH, 'PNG', 90, 140, 30, 11)//NoConformidadMenor
//  doc.text(93, 147, 'NC Menor:');  doc.text(114, 147, val);
 
//  val = objAuditoria[idAud].Observaciones; if(val<=9) val = '0'+val;
//  doc.addImage(img_TH, 'PNG', 129, 140, 30, 11)//Observaciones
//  doc.text(132, 147, 'OBS:');doc.text(153, 147, val);
 
//  val = objAuditoria[idAud].OportunidadMejora; if(val<=9) val = '0'+val;
//  doc.addImage(img_TH, 'PNG', 168, 140, 30, 11)//OportunidadMejora
//  doc.text(171, 147, 'OM:');doc.text(191, 147, val);
 
//  //val = objAuditoria[idAud].Conformidad; if(val<=9) val = '0'+val;
//  //doc.addImage(img_TH, 'PNG', 172, 140, 30, 11)//Conformidad
//  //doc.text(174, 147, 'C:');doc.text(196, 147, val);
 
 
 
 
 
//  //-------------------------   **   Resultado de la Auditoría  ** ---------------------------------
 
 
 
//  //-------------------------   **   Resultado de la Auditoría  ** ---------------------------------
//  doc.setTextColor(52,85,156); 
//  doc.text(15, 166, ' Descripción Sucinta de los Resultados ');
//  doc.addImage(img_calendar_checkx, 'PNG', 9, 163, 4, 4)
 
 
//  doc.setFontSize(9)
//  doc.setTextColor(0,0,0); 
//  doc.text(15, 171, ' (Breve comentario del nivel de implementación del sistema de gestión, principales puntos fuertes y oportunidades)');
 
//  doc.setDrawColor(200,200,200);
//  doc.setFillColor(255, 255, 255);
//  doc.rect(16, 177, 180, 105);
//  doc.setFontSize(10)
 
//  var result = objAuditoria[idAud].Resumen_Auditoria;
//  doc.text(20, 187, result,{maxWidth:170});
 
 
 
 
 
//      doc.addPage();
//      //------------------------------------------------------------------    encabezado documento    -------------------------------------------------
//      doc.addImage(img_header, 'PNG', 0, 0, 210, 21)
//      doc.addImage(img_logo_header, 'PNG', 6, 5, 23, 8)
 
//      doc.setTextColor(255,255,255);
//      doc.setFontSize(12)
//      doc.setFontType('bolditalic')
//      doc.text(140, 15, 'Informe de Auditoría Interna');
//      doc.text(168, 17, '____________');
 
 
//      doc.addImage(img_sup, 'PNG', 0, 22, 210, 128)
//      doc.addImage(img_inf, 'PNG', 0, 186, 210, 110)
//  //------------------------------------------------------------------    encabezado documento    -------------------------------------------------
 
//  doc.setFontSize(10)
//  doc.setFontType('bold')
//  doc.setTextColor(0,0,0); 
//  doc.text(9, 34, 'Datos Principales');
//  doc.setTextColor(200,200,200); 
//  var img_menu = new Image();
//  img_menu.src = './images/img_menu.png';
 
//  doc.addImage(img_menu, 'PNG', 195, 30, 5, 5)
 
 
 
//  // //----------------TABLA DINAMICA--------------   Descripción de los Hallazgos Identificados Durante el Proceso de Auditoría      ---------------------------------   
//  var img_copia = new Image();
//  img_copia.src = './images/img_copia.png';
//  doc.setFontType('normal')
//  doc.addImage(img_copia, 'PNG', 9, 48, 4, 4)
//  doc.setTextColor(52,85,156); 
//  doc.text(15, 52, 'Descripción de los Hallazgos Identificados Durante el Proceso de Auditoría');
//  doc.setDrawColor(200,200,200);
 
//      var img_user_gray = new Image();
//      img_user_gray.src = './images/img_user_gray.png';
//      if(objAuditoria[idAud].Code_Normas.includes(',')){
//          var normas = objAuditoria[idAud].Code_Normas.replace(',',' / ')
//      }else{
//          var normas = objAuditoria[idAud].Code_Normas;
//      }
 
   
//      CODENORMA=objAuditoria[idAud].Code_Normas;
//      var yprocesstitle=42;
//      var yprocessRec=45;
//      var yprocesstxt=53;
//      var yprocessimg=38;
 
//      console.log('En el reporte',objAuditoria[idAud].Procesos)
//      var i = 0;
 
 
//      yprocessimg = yprocessimg + 23;
//      yprocesstitle = yprocesstitle + 23;
//      yprocessRec = yprocessRec + 23;
//      yprocesstxt = yprocesstxt + 23;
 
//      doc.setFontType('normal')
//      doc.setTextColor(52,85,156); 
//      doc.text(10, 66, 'Norma');
//      doc.text(30, 66, 'Tipo');
//      doc.text(54, 66, 'Descripción de la No Conformidad');  //
//      doc.text(130, 66, 'Punto de la Norma o Procedimiento incumplido'); 
 
//      var grosor = 50;
//      var itt = 0;
//      var pxl = 0;
//      objAuditoria[idAud].Procesos.map(function(item)
//      {
//          console.log('=============================(',yprocesstitle,')=============================================(',yprocesstitle,')');
//          if(item.Selected>0)
//          {
          
            
//              item.Requisitos.map(function(dat)
//              {
                 
//                 if(dat.TipoHallazgoId != 7)
//                 {
                    
//                 /* SECCION PARA NUEVA HOJA EN CASO DE SUPERAR LAS Y*/
//             //-----------------------------------------------------------------------------------------------------------------------
                
 
//             //-----------------------------------------------------------------------------------------------------
 
//                     var nFilas = Math.floor(dat.Hallazgo.length/grosor);
//                         nFilas = parseInt(nFilas)
//                     if(nFilas == 0){nFilas = 1;}
//                     pxl = nFilas*3;
                    
 
//                      doc.setTextColor(200,200,200); 
//                      doc.setFontSize(10)
//                      yprocessimg = yprocessimg + 8;
//                      yprocesstitle = yprocesstitle + 8 + itt;
//                      yprocessRec = yprocessRec + 8;
//                      yprocesstxt = yprocesstxt + 8;
//                      doc.text(9, yprocesstitle, '.__________________________________________________________________________________________________');
 
//                      doc.setTextColor(0,0,0); 
//                      doc.setFontSize(8)
//                      yprocessimg = yprocessimg + 7;
//                      yprocesstitle = yprocesstitle + 7;
//                      yprocessRec = yprocessRec + 7;
//                      yprocesstxt = yprocesstxt + 7;
 
//                      doc.text(11, yprocesstitle, ''+NORMAx,{maxWidth:25});
//                      doc.text(32, yprocesstitle, ''+dat.Code_Hallazgo,{maxWidth:25});
//                      var as = toCapitalize(dat.Hallazgo);
//                      doc.text(54, yprocesstitle-1, ''+as,{maxWidth:72, align:'justify'});
//                      var bs = dat.Code+' '+toCapitalize(dat.Description);
//                      doc.text(134, yprocesstitle, ''+bs,{maxWidth:54, align:'justify'});
 
                     
                    
//                      console.log('**********************************************************(',yprocesstitle,')');
//                      console.log('dat.Code_Hallazgo(',bs,')');//Code
//                      console.log('er codigo(',dat.Code,')');
//                      console.log('**********************************************************(',i,')');
                   
 
//                      if( yprocesstitle > 210)
//                      {//--------------------------------------------------------------------------------------------------
//                          //alert("aagregar primero hoja y reiniciar = "+yprocesstitle);
//                          doc.addPage();
//                          //------------------------------------------------------------------    encabezado documento    -------------------------------------------------
//                          doc.addImage(img_header, 'PNG', 0, 0, 210, 21)
//                          doc.addImage(img_logo_header, 'PNG', 6, 5, 23, 8)
                     
//                          doc.setTextColor(255,255,255);
//                          doc.setFontSize(12)
//                          doc.setFontType('bolditalic')
//                          doc.text(140, 15, 'Informe de Auditoría Interna');
//                          doc.text(168, 17, '____________');
                     
                     
//                          doc.addImage(img_sup, 'PNG', 0, 22, 210, 128)
//                          doc.addImage(img_inf, 'PNG', 0, 186, 210, 110)
//                          //------------------------------------------------------------------    encabezado documento    -------------------------------------------------
 
//                              doc.setFontSize(10)
//                              doc.setFontType('bold')
//                              doc.setTextColor(0,0,0); 
//                              doc.text(9, 34, 'Datos Principales');
//                              doc.setTextColor(200,200,200); 
//                              //doc.text(44, 32, '___________________________________________________________________________');
//                              var img_menu = new Image();
//                              img_menu.src = './images/img_menu.png';
 
//                              doc.addImage(img_menu, 'PNG', 195, 30, 5, 5)
 
 
 
//                              //----------------TABLA DINAMICA--------------   Descripción de los Hallazgos Identificados Durante el Proceso de Auditoría      ---------------------------------   
//                              var img_copia = new Image();
//                              img_copia.src = './images/img_copia.png';
//                              doc.setFontType('normal')
//                              doc.addImage(img_copia, 'PNG', 9, 48, 4, 4)
//                              doc.setTextColor(52,85,156); 
//                              doc.text(15, 52, 'Descripción de los Hallazgos Identificados Durante el Proceso de Auditoría');
//                              doc.setDrawColor(200,200,200);
 
//                                  var img_user_gray = new Image();
//                                  img_user_gray.src = './images/img_user_gray.png';
//                                  if(objAuditoria[idAud].Code_Normas.includes(','))
//                                  {
//                                      var normas = objAuditoria[idAud].Code_Normas.replace(',',' / ')
//                                  }else{
//                                      var normas = objAuditoria[idAud].Code_Normas;
//                                  }
 
                             
//                                  CODENORMA=objAuditoria[idAud].Code_Normas;
//                                   yprocesstitle=42;
//                                   yprocessRec=45;
//                                   yprocesstxt=53;
//                                   yprocessimg=38;
//                                   pxl = 16;
 
//                                  // console.log('En el reporte',objAuditoria[idAud].Procesos)
//                                   i = 0;
 
 
//                                  //  yprocessimg = yprocessimg + 23;
//                                  //  yprocesstitle = yprocesstitle + 23;
//                                  //  yprocessRec = yprocessRec + 23;
//                                  //  yprocesstxt = yprocesstxt + 23;
 
//                                  doc.setFontType('normal')
//                                  doc.setTextColor(52,85,156); 
//                                  doc.text(10, 66, 'Norma');
//                                  doc.text(30, 66, 'Tipo');
//                                  doc.text(54, 66, 'Descripción de la No Conformidad');  //
//                                  doc.text(130, 66, 'Punto de la Norma o Procedimiento incumplido'); 
 
 
                         
//                      }//-------------------------------------------******************-------------------------------------------------------
//                 }
                
//                  //grosor para el proxima iteracion
//                 itt = pxl;
 
 
 
//                  i++;
//              })
           
//          }
//      })
 
 
     
 
//      doc.addPage();
 
//      doc.addImage(img_sup, 'PNG', 0, 0, 210, 128)
//      doc.addImage(img_inf, 'PNG', 0, 186, 210, 110)
//      doc.addImage(img_log, 'PNG', 49, 115, 110, 37)
//      doc.addImage(img_letras, 'PNG', 0, 241, 210, 45)
 
//      doc.setFontSize(8)
//      doc.setTextColor(52,85,156); 
 
//      doc.text(90, 284, 'Copyright © '+anio+' TASA');
//      doc.text(6, 290, 'Todos los derechos reservados. Política de Privacidad Jirón Carpaccio #250, Piso 11 - San Borja, Lima 41 - Perú. (51+1) 611-1400 | (51+1) 611-1401');
 
//      base64SP3 = doc.output('datauristring') //aqui generamos el pdf e base 64 cpara enviarlo al servidor
//      var x = base64SP3.split(',');
  
 
 
//      var rawdata = doc.output();
 
//      var len = rawdata.length,
//          ab = new ArrayBuffer(len),
//          u8 = new Uint8Array(ab);
 
//          while(len--) u8[len] = rawdata.charCodeAt(len);
 
//      var blob = new Blob([ab], { type : "application/pdf" });
 
//      saveAs(blob, 'InformeAuditoria.pdf');
 
//      var iframe = document.getElementById('miIframeMuestraPdf');
//      //iframe.style.width = '60%';
//      //iframe.style.height = '650px';
//      iframe.src = URL.createObjectURL(blob);
     
//      //$("#lbGenerarInforme").html("Generar Informe")
  
//  }
 
 
 
//  function contarCaracteresV1(str) {
//      let letra = str[0].toLowerCase();
//      let arreglo=[]
//      str= str.split('');
 
//      str.map(n => {
//          if(n.toLowerCase() === letra){
//              arreglo.push(n)
//          } 
             
//      })
 
 
//      return arreglo.length;
//  }
 
//                                                                         


 function fnSp3ResponsiveAdmHallazgos()
{//--------------------- ini   fnSp3ResponsiveAdmHallazgos() -------------------------------------
    //console.log("fnSp3ResponsiveAdmHallazgos............................");
  var f1 = '10px';
  var f2 = '11px';
  var f3 = '12px';
  var f4 = '12px';
 
  //alert('tamaño '+screen.width);
  

    for(var i = 1; i<15; i++)
    {
      var id = 'c'+i+'TabGenyx';//c1TabGeny  id="c9TabGenyx"
      id1 = id;
      id = "#"+id;
     
  
      if (screen.width <= 1024) 
      {
          document.getElementById(id1).style.setProperty( 'font-size',f1, 'important' );

      }
      else
          {
           if (screen.width <= 1280) 
             {
               document.getElementById(id1).style.setProperty( 'font-size',f2, 'important' );
              //$(id).css('font-size',f2)
             }
            else 
             {
                if (screen.width <= 1390) 
                 {
                   document.getElementById(id1).style.setProperty( 'font-size',f3, 'important' );
                  //$(id).css('font-size',f2)
                 }
                 else
                {
                      // console.log("iteracionxxxx a =",i);
                       document.getElementById(id1).style.setProperty( 'font-size',f4, 'important' );
                      //$(id).css('font-size',f2)
                     
              
                }
             }
          }
    }
 

}//------------------- fini   fnSp3ResponsiveAdmHallazgos() -------------------------------------


 function fnSp3ResponsiveAdmHallazgos2()
{//--------------------- ini   fnSp3ResponsiveAdmHallazgos() -------------------------------------
    //console.log("fnSp3ResponsiveAdmHallazgos............................");

//"style = 'font-size:12px !important;'";

  var f1 = '10px';
  var f2 = '11px';
  var f3 = '12px';
  var f4 = '12px';
 
  
  

    for(var i = 1; i<15; i++)
    {
      var id = 'c'+i+'TabGenyx';//c1TabGeny  id="c9TabGenyx"
      id1 = id;
      id = "#"+id;
      //c8TabGeny
     
      
      if (screen.width <= 1024) 
      {
          
          return "style = 'font-size:"+f1+" !important; ";
         

      }
      else
          {
           if (screen.width <= 1280) 
             {
             return "style = 'font-size:"+f2+" !important; ";
              
             }
            else 
             {
                if (screen.width <= 1390) 
                 {
                  return "style = 'font-size:"+f3+" !important; ";
                   
                  
                 }
                 else
                {
                    return "style = 'font-size:"+f4+" !important;";
                       
                      
                     
              
                }
             }
          }
    }
 

}//------------------- fini   fnSp3ResponsiveAdmHallazgos() -------------------------------------



































































function fnSp3CargaFiltroEstadoInicialPlanAnualDG()
{//------------------------------------- ini   fnSp3CargaFiltroEstadoInicialPlanAnual() -------------------------------------

    ///alert("primero verificamos que tipo de incidente si es ambiental o personal"+istAud);

         
    console.log("Arrancamos.................con listado de datos generaless.......... fnSp3CargaFiltroEstadoInicialPlanAnual");
    //$('#modalMsgError').modal("show").addClass("fade")

    showLoading();
    guardarEnviarDG = 0;
    
//alert(paObj[istAud].a.GrupoEvento);

           

                    var url = apiUrlssoma+"/api/Get-DatosGeneralesIncidenteAllWeb?code=Prn05k4OKIR0llgBFSg2maSLuat0dgeqJAvzQtPhFs4VmDpuheYrnQ==&httpmethod=objectlist&IdTipoEvento="+istAud+"&IdEmpresa=3&dSede=0&FechaInicio&FechaFin&IdEmbarcacion=0";

                    console.log("URL",url )
                    var headers ={
                        "apikey":constantes.apiKey
                    }

                    var settings = {
                        "url": url,
                        "method": "GET",
                        "timeout": 0,
                        "crossDomain": true,
                        "dataType": "json",
                        "headers": headers,
                    };

                    $.ajax(settings).done(function (response) 
                    {
                        console.log("**todos**",response);
                        mayorIdDG = 0;

                                    response.PlanAnual.map(function(item)
                                        {  
                                            if(item.Id > mayorIdDG) 
                                               {
                                                   mayorIdDG  = item.Id;
                                               }
                                        });


                                    $("#cant_adm_plan_anualDG").html('<b> '+ response.PlanAnual.length+'</b> ');
                                    //objNewPA2 = response.PlanAnual;

                                    var t = 1;
                      
                                      if(response.PlanAnual.length > 0)
                                            {
                                                //-------------------------------------------       QUIERE DECIR QUE SI TIENE DATOS GENERALES      --------------------------------
                                                //------------------ ANDY PON AQUI LA BANDERA EN 1 
                                                AccionBD_DG = 1; //VAMOS A MODIFICAR


                                                $('#bodyTablaSinAuditorias').css('display','none');// comentar momentaneamente activa en la logica anterior a incidentes

                                                      $('#pagination-container-EvalAud_es').pagination //pagination-container-EvalAud_es
                                                      ({
                                                              dataSource: response.PlanAnual,
                                                              pageSize: 4,
                                                              callback: function(data, pagination) 
                                                               {//--------------------------------------------------------------------------------------------------------
                                                                          var html = fnSp3ListarTablaGeneralHDG(data);
                                                                          $('#body-tabla-list-EvalAud_es').html(html); //body-tabla-list-EvalAud_es

                                                               }//--------------------------------------------------------------------------------------------------------
                                                       })

                                               
                           
                                        }
                                  else
                                        {   //-------------------------------------------       NO HAY DATOS GENERALES DATOS GENERALES      --------------------------------
                                          //------- ANDYU PON AQUI LA BANDERA EN CERO
                                          AccionBD_DG = 0; //VAMOS A INSERTAR DEBEMOS RESTABLECER EL FORMULARIO A SU ESTADO NATURAL CON LOS DATOS GENERALES OJO

                                          //alert('registro para INSERT  BD, LINEA = 14922') 


                                          $('#body-tabla-list-EvalAud_es').html("<div style='text-align:center; '><br/><b>No Existen Eventos Registrados</b></div>");
                                          $('#bodyTablaSinAuditorias_es').css('display','block');


                                          
                                          hideLoading();
                                        }





                    });

        

}//------------------------------------- fin   fnSp3CargaFiltroEstadoInicialPlanAnual() -------------------------------------


function fnSp3CargaFiltroEstadoInicialPlanAnualDG2()
{//------------------------------------- ini   fnSp3CargaFiltroEstadoInicialPlanAnual() -------------------------------------

    //alert("datos de caso ambiental ========************================================= "+istAud);


    console.log("Arrancamos.................con listado de datos generaless.......... fnSp3CargaFiltroEstadoInicialPlanAnual");
   

    showLoading();
    guardarEnviarDG = 0;
    


           

                    // var url = apiUrlssoma+"/api/Get-DatosGeneralesIncidenteAllWeb?code=Prn05k4OKIR0llgBFSg2maSLuat0dgeqJAvzQtPhFs4VmDpuheYrnQ==&httpmethod=objectlist&IdTipoEvento="+istAud+"&IdEmpresa=3&dSede=0&FechaInicio&FechaFin&IdEmbarcacion=0";

                      var url = apiUrlssoma+"/api/Get-DatosGeneralesAmbienteIncidenteAllWeb?code=j7NxgaWjUR4FaZUvi8gl9LQ11CQpMUTT2T1uIxrb0WjaEfCR7EZdTg==&httpmethod=objectlist&IdTipoEvento="+istAud+"&IdEmpresa=3&dSede=0&FechaInicio&FechaFin&IdEmbarcacion=0";

                    console.log("URL",url )
                    var headers ={
                        "apikey":constantes.apiKey
                    }

                    var settings = {
                        "url": url,
                        "method": "GET",
                        "timeout": 0,
                        "crossDomain": true,
                        "dataType": "json",
                        "headers": headers,
                    };

                    $.ajax(settings).done(function (response) 
                    {
                        //console.log("**todos**",response);
                        mayorIdDG = 0;

                                  
                      
                                      if(response.PlanAnual.length > 0)
                                            {
                                                //-------------------------------------------       QUIERE DECIR QUE SI TIENE DATOS GENERALES      --------------------------------
                                                //------------------ ANDY PON AQUI LA BANDERA EN 1 
                                                AccionBD_DG = 1; //VAMOS A MODIFICAR

                                                 response.PlanAnual.forEach((Item)=>
                                                    {
                                                           // console.log(Item)
                                                     
                                                           paObjDG[Item.Id] = new PlanAnualDG();
                                                           paObjDG[Item.Id].cargarData(Item);
                                                           sp4FnEditarDatoGeneral2(Item.Id);

                                                    });

                                                  //console.log("paObjDG = ",paObjDG);

                                                   hideLoading();
                           
                                        }
                                  else
                                        {   //-------------------------------------------       NO HAY DATOS GENERALES DATOS GENERALES      --------------------------------
                                          //------- ANDYU PON AQUI LA BANDERA EN CERO
                                          AccionBD_DG = 0; //VAMOS A INSERTAR DEBEMOS RESTABLECER EL FORMULARIO A SU ESTADO NATURAL CON LOS DATOS GENERALES OJO

                                         
                                          hideLoading();
                                        }





                    });

       

}//------------------------------------- fin   fnSp3CargaFiltroEstadoInicialPlanAnual() -------------------------------------






function fnSp3CargaFiltroEstadoInicialPlanAnualDGK()
{//------------------------------------- ini   fnSp3CargaFiltroEstadoInicialPlanAnual() -------------------------------------

    ///alert("primero verificamos que tipo de incidente si es ambiental o personal"+istAud);

         
    console.log("Arrancamos.................con listado de datos generaless MATERIALES.......... fnSp3CargaFiltroEstadoInicialPlanAnual");
    //$('#modalMsgError').modal("show").addClass("fade")

    showLoading();
    guardarEnviarDG = 0;
    
//alert(istAud);

           

                    //var url = apiUrlssoma+"/api/Get-DatosGeneralesIncidenteMaterialAllWeb?code=Prn05k4OKIR0llgBFSg2maSLuat0dgeqJAvzQtPhFs4VmDpuheYrnQ==&httpmethod=objectlist&IdTipoEvento="+istAud+"&IdEmpresa=3&dSede=0&FechaInicio&FechaFin&IdEmbarcacion=0";
                    var url = apiUrlssoma+"/api/Get-DatosGeneralesIncidenteMaterialAllWeb?code=tnOXAKZEtAzzs2JJaZNMcIX7Q7ezrgWu19DO2Q4HTOvKUu8a55j5vg==&httpmethod=objectlist&IdTipoEvento="+istAud+"&IdEmpresa=3&dSede=0&FechaInicio&FechaFin&IdEmbarcacion=0";
                    console.log("URL",url )
                    var headers ={
                        "apikey":constantes.apiKey
                    }

                    var settings = {
                        "url": url,
                        "method": "GET",
                        "timeout": 0,
                        "crossDomain": true,
                        "dataType": "json",
                        "headers": headers,
                    };

                    $.ajax(settings).done(function (response) 
                    {
                        console.log("**todos*17506*",response);
                        mayorIdDG = 0;

                                    response.PlanAnual.map(function(item)
                                        {  
                                            if(item.Id > mayorIdDG) 
                                               {
                                                   mayorIdDG  = item.Id;
                                               }
                                        });


                                    $("#cant_adm_plan_anualDG").html('<b> '+ response.PlanAnual.length+'</b> ');
                                    //objNewPA2 = response.PlanAnual;

                                    var t = 1;
                      
                                      if(response.PlanAnual.length > 0)
                                            {
                                                //-------------------------------------------       QUIERE DECIR QUE SI TIENE DATOS GENERALES      --------------------------------
                                                //------------------ ANDY PON AQUI LA BANDERA EN 1 
                                                AccionBD_DG = 1; //VAMOS A MODIFICAR


                                                $('#bodyTablaSinAuditorias').css('display','none');// comentar momentaneamente activa en la logica anterior a incidentes

                                                      $('#pagination-container-EvalAud_es').pagination //pagination-container-EvalAud_es
                                                      ({
                                                              dataSource: response.PlanAnual,
                                                              pageSize: 4,
                                                              callback: function(data, pagination) 
                                                               {//--------------------------------------------------------------------------------------------------------
                                                                         var html = fnSp3ListarTablaGeneralHDG(data, 1);
                                                                        $('#body-tabla-list-EvalAud_es').html(html); //body-tabla-list-EvalAud_es

                                                               }//--------------------------------------------------------------------------------------------------------
                                                       })

                                               
                           
                                        }
                                  else
                                        {   //-------------------------------------------       NO HAY DATOS GENERALES DATOS GENERALES      --------------------------------
                                          //------- ANDYU PON AQUI LA BANDERA EN CERO
                                          AccionBD_DG = 0; //VAMOS A INSERTAR DEBEMOS RESTABLECER EL FORMULARIO A SU ESTADO NATURAL CON LOS DATOS GENERALES OJO

                                          //alert('registro para INSERT  BD, LINEA = 14922') 


                                          $('#body-tabla-list-EvalAud_es').html("<div style='text-align:center; '><br/><b>No Existen Eventos Registrados</b></div>");
                                          $('#bodyTablaSinAuditorias_es').css('display','block');


                                          
                                          hideLoading();
                                        }





                    });

        

}//------------------------------------- fin   fnSp3CargaFiltroEstadoInicialPlanAnual() -------------------------------------



//alert('ALERTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTXXXXXXXXXXX');

var istAud_DG = 0;

function fnSp3ListarTablaGeneralHDG(data, axion)
{//------------------------------------------------------- ini   fnSp3ListarTablaGeneralH() -----------------------------------


    var html = '';
    var o = 0;
    var primeraCargap =0;
    var ItenIdBD = 0; //Item.Id

    var indiceGerencia = 0;
    var indicePrograma = 0;
    var indiceSede = 0;
    selGerencia = [];
    selPrograma = [];
    selSede = [];



//aqui vamos a ver que tipo de formulario es ........................................
    data.forEach((Item)=>
    {
            console.log(Item)
     
           paObjDG[Item.Id] = new PlanAnualDG();
           paObjDG[Item.Id].cargarData(Item);
           

                if(primeraCargap==1)
                    {
                    
                    var btNew  ='';
                    if(Item.Id == mayorId){btNew = "<div  class='check-blue text-center'>Nuevo</div>";}
                        
                        
                        


                        html += `

                       


                            `;
                    }
                    else
                    {
                        var btEdit = 'style="background-color:#b2b2b2 !important;"';
                        if(Item.Estado_PlanId == 1){
                            btEdit=`onclick="accPlanAnual = 1; fnSp3VentanaMostrarPlanAnual(${Item.Id})" style="background-color:#58c25d !important;"} `;                        }
                        
                            //btNew = "<div   ></div>";}

                        var ttitle = '';
                        var ttitle2 = '';
                        var ccolor = '';
                        var rreadonly = '';

                      

                        //if(Item.yIdAlerta> 0) {ttitle = 'Visualizar Alerta Generada (1)';}else{ttitle = 'Generar Alerta';}
                           var ffx = date_AAAA_MM_DD_T_HH_MM_S_to_DD_MM_AAAA(Item.Fecha);

                           //var respF = fnSp3ResponsiveAdmHallazgos2();

                           //OJO LO ASIGNAMOS Y LO AGREGAMOS AL LISTADO

                           $('#sel_f_dg_gv_1').val(Item.IdTipoEvento);   //IdTipoEvento
                           var bal1 = $('#sel_f_dg_gv_1 option:selected').text();

                             $('#sel_f_dg_gv_2').val(Item.Potencial);
                           var bal2 = $('#sel_f_dg_gv_2 option:selected').text();


                           $('#sel_f_dg_gv_3').val(Item.AccidenteProceso);   //IdTipoEvento
                           var bal3 = $('#sel_f_dg_gv_3 option:selected').text();


                           var bal4 = date_AAAA_MM_DD_T_HH_MM_S_to_DD_MM_AAAA(Item.Fecha);
                           var bal5 = Item.Hora;
                            
                            
                           $('#txtt_f_dg_gv_5').val(bal5); 
                            //alert(Item.Hora);
                           var bal6 = //sel_f_dg_gv_6

                           $('#sel_f_dg_gv_6').val(Item.IdSede);   //IdTipoEvento
                           var bal6 = $('#sel_f_dg_gv_6 option:selected').text();

                            $('#sel_f_dg_gv_7').val(Item.IdEmbarcacion);   //IdTipoEvento
                           var bal7 = $('#sel_f_dg_gv_7 option:selected').text();

                            var bal8= ''; var bal8text = 'Tasa';
                           if(Item.HayPersonalAfectado == 0){bal8 = 'De Tasa';}else{bal8 = 'De Tercero (Contratista, Visitante/ Proveedor)';}

                           //alert('Si aqui vamos a cargar la empresa');
                           //$('#sel_f_dg_gv_10').val(Item.IdEmpresaCompany);   //IdTipoEvento
                            $('#sel_f_dg_gv_10').val(paObj[istAud].a.NombreEmpresa);
                           var bal9 = $('#sel_f_dg_gv_10 option:selected').text();
                          
                           var bal10 = Item.Descripcion;


                           $('#sel_f_dg_gv_12').val(Item.IdCondicionEP);   //IdTipoEvento
                           var bal11 = $('#sel_f_dg_gv_12 option:selected').text();

                            $('#sel_f_dg_gv_13').val(Item.IdProcesoOperacion);   //IdTipoEvento
                           var bal12 = $('#sel_f_dg_gv_13 option:selected').text();


                            $('#sel_f_dg_gv_14').val(Item.IdSubProceso);   //IdTipoEvento
                           var bal13 = $('#sel_f_dg_gv_14 option:selected').text();


                             $('#sel_f_dg_gv_15').val(Item.IdProbRecurrencia);   //IdTipoEvento
                           var bal14 = $('#sel_f_dg_gv_15 option:selected').text();

                            $('#sel_f_dg_gv_16').val(Item.IdAreaAccidente);   //IdTipoEvento
                           var bal15= $('#sel_f_dg_gv_16 option:selected').text();


                            $('#sel_f_dg_gv_17').val(Item.IdZonaAccidente);   //IdTipoEvento
                           var bal16 = $('#sel_f_dg_gv_17 option:selected').text();

                            $('#sel_f_dg_gv_18').val(Item.LugarEspTarea);   //IdTipoEvento
                           var bal17 = $('#sel_f_dg_gv_18 option:selected').text();

                           var bal18 =  Item.NombrePersonalAccidentado;

                           var bal19 =  Item.CodTrabjador;

                           var bal20 =  Item.DNIAccidentado;

                           var bal21 =  Item.EdadAccidentado;

                           var bal22 =  Item.PuestoCargoAccidentado;

                           var bal23 =  Item.PuestoCargoAccidentado2;

                           var bal24 =  Item.Expiencia_Yaer;

                           var bal25 =  Item.Expiencia_Month;


                            $('#sel_f_dg_gv_27').val(Item.LesionDannio);   //IdTipoEvento
                           var bal26 = $('#sel_f_dg_gv_27').val();


                            $('#sel_f_dg_gv_28').val(Item.ParteCuerpoLesionada);   //IdTipoEvento
                           var bal27 = $('#sel_f_dg_gv_28 option:selected').text();

                          var bal28 =  Item.Dias_Descanza;

                            // alert('16.807 Descanso estado = '+ Item.Descanso_estado);
                           $('#sel_f_dg_gv_30').val(Item.Descanso_estado);   //IdTipoEvento
                           var bal29 = $('#sel_f_dg_gv_30 option:selected').text();




                          var bal30 =  Item.NombreRespInvestigar;

                          $('#sel_f_dg_gv_32').val(Item.IdAreaRespInvestigar);   //IdTipoEvento
                          var bal31 = $('#sel_f_dg_gv_32 option:selected').text();

                          $('#sel_f_dg_gv_33').val(Item.IdAsesorInvestigacion);   //IdTipoEvento
                          var bal32 = $('#sel_f_dg_gv_33 option:selected').text();

                          var bal33 =  Item.Puerto_Arrivo;

                          
                           var bal34= '';
                           if(Item.InformeInvestigacion == 0){bal34 = 'No';}else{bal34 = 'Si';}

                           var bal35 =  date_AAAA_MM_DD_T_HH_MM_S_to_DD_MM_AAAA(Item.FechaInvestigacionIni); 
                           var bal36 =  date_AAAA_MM_DD_T_HH_MM_S_to_DD_MM_AAAA(Item.FechaInvestigacionFin);
                           var bal37 =  Item.TiempoTranscurrido;


                          var bal38= '';
                           if(Item.HechoAtiempo == 0){bal38 = 'Destiempo';}else{bal38 = 'A tiempo';}

                            $('#sel_f_dg_gv_42').val(Item.IdGerencia);   //IdTipoEvento
                          var bal39 = $('#sel_f_dg_gv_42 option:selected').text();

                           $('#sel_f_dg_gv_44').val(Item.IdRegion);   //IdTipoEvento
                          var bal40 = $('#sel_f_dg_gv_44 option:selected').text();

                           $('#sel_f_dg_gv_45').val(Item.IdSeCargaAccidente);   //IdTipoEvento
                          var bal41 = $('#sel_f_dg_gv_45 option:selected').text();


                            var btNew  ='';
                            if(Item.Id == mayorIdDG){
                            btNew = "<div  class='check-blue text-center' style=' font-size:10px !important; width:8px; !important; heigth:14px; !important;  margin-left 3px !important;' >Nuevo</div>";}
                             
                             //alert('mayorIdDG = '+mayorIdDG);


                             ItenIdBD = Item.Id;

                            html += `

                            <div  onclick="AccionBD_DG = 1;  sp4FnEditarDatoGeneral(${Item.Id})"   onmouseover=" this.style.background = '#A4A4A4';  "  onmouseout=" this.style.background = '#f2f2f2';  "  title='Clic para Editar' class="item-tabla p-2" style="z-index: 1; display:relative; width: 9000px !important; margin-left:15px !important;"> 
                                <div class="row m-0 justify-content-between align-items-center tbody_trainning">
                                    <div class="col-12 text-center" style="font-size: 13px; padding: 4px !important; ">
                                        <div class="row"  style='cursor:pointer; /*background:cyan !important;*/  margin-left:0px !important;'>${btNew}
                                                <table width='100%' border="0">
                                                                  <tr style="color: #000000 !important; font-size: 13px !important;" >

                                                                      <td style='width: 200px;' ><div>&nbsp;&nbsp;${bal1}</div></td>
                                                                      <td style='width: 150px;'><div>${bal2}</div></td>
                                                                      <td style='width: 200px;'><div>${bal3}</div></td>
                                                                      <td style='width: 100px;'><div>${bal4}</div></td>
                                                                      <td style='width: 100px;'><div>${bal5}</div></td>

                                                                      <td style='width: 200px;'><div>${bal6}</div></td>
                                                                      <td style='width: 200px;'><div>${bal7}</div></td>
                                                                      <td style='width: 300px;'><div>${bal8}</div></td>
                                                                      <td style='width: 250px;'><div>${bal9}</div></td>
                                                                      <td style='width: 500px;'><div>${bal10}</div></td>

                                                                      <td style='width: 200px;'><div>${bal11}</div></td>
                                                                      <td style='width: 300px;'><div>${bal12}</div></td>
                                                                      <td style='width: 200px;'><div>${bal13}</div></td>
                                                                      <td style='width: 200px;'><div>${bal14}</div></td>
                                                                      <td style='width: 200px;'><div>${bal15}</div></td>

                                                                      <td style='width: 200px;'><div>${bal16}</div></td>
                                                                      <td style='width: 300px;'><div>${bal17}</div></td>
                                                                      <td style='width: 200px;'><div>${bal18}</div></td>
                                                                      <td style='width: 150px;'><div>${bal19}</div></td>
                                                                      <td style='width: 150px;'><div>${bal20}</div></td>

                                                                      <td style='width: 50px;'><div>${bal21}</div></td>
                                                                      <td style='width: 300px;'><div>${bal22}</div></td>
                                                                      <td style='width: 300px;'><div>${bal23}</div></td>
                                                                      <td style='width: 150px;'><div>${bal24}</div></td>
                                                                      <td style='width: 150px;'><div>${bal25}</div></td>

                                                                      <td style='width: 300px;'><div>${bal26}</div></td>
                                                                      <td style='width: 300px;'><div>${bal27}</div></td>
                                                                      <td style='width: 200px;'><div>${bal28}</div></td>
                                                                      <td style='width: 150px;'><div>${bal29}</div></td>
                                                                      <td style='width: 300px;'><div>${bal30}</div></td>

                                                                      <td style='width: 300px;'><div>${bal31}</div></td>
                                                                      <td style='width: 300px;'><div>${bal32}</div></td>
                                                                      <td style='width: 300px;'><div>${bal33}</div></td>
                                                                      <td style='width: 200px;'><div>${bal34}</div></td>
                                                                      <td style='width: 200px;'><div>${bal35}</div></td>

                                                                      <td style='width: 200px;'><div>${bal36}</div></td>
                                                                      <td style='width: 200px;'><div>${bal37}</div></td>
                                                                      <td style='width: 200px;'><div>${bal38}</div></td>
                                                                      <td style='width: 200px;'><div>${bal39}</div></td>
                                                                      <td style='width: 200px;'><div>${bal40}</div></td>

                                                                      <td style='width: 200px;'><div>${bal41}</div></td>
                                                                  </tr>
                                                  </table>
                                        </div>
                                    </div>
                                </div>
                            </div>


                                `;          


                    }





           
        })

hideLoading();
//console.log(html);
//alert("CARGA LOS DATOS PUES = "+ItenIdBD);
if( ItenIdBD > 0 ){// FUNCIONALIDAD OCASIONADA POR LA ´SUPRESION DE LA LISTA DE DATOS GENERALES

              if(axion == 1)
              {
                    //alert('EDITAR kk');
                    sp4FnEditarDatoGeneralk(ItenIdBD);
              }
              else
              { sp4FnEditarDatoGeneral(ItenIdBD);}
  

}
// else
// {
//                            var bal18 =  Itemx.NombrePersonalAccidentado;
//                            $('#ReportanteNameDG_119').val(bal18);// alert(bal18);

//                            $('#ReportanteUserHashDG_119').val(Itemx.IdPersonalAccidentado);//IdHash



//                            var bal19 =  Itemx.CodTrabjador;
//                            $('#txta_f_dg_gv_20').val(bal19);



//                            var bal20 =  Itemx.DNIAccidentado;
//                            $('#txta_f_dg_gv_21').val(bal20);

// }
return html;





}
//------------------------------------- fin   fnSp3ListarTablaGeneralH() -------------------------------------


function sp4FnEditarDatoGeneral(idDatosGeneral)
{//------------------------------------- ini   sp4FnEditarDatoGeneral() -------------------------------------

  
  

   istAud_DG = idDatosGeneral;
   paObjDG[istAud_DG]

   console.log("Datos a Editar = ", paObjDG[istAud_DG]);


   $('#sel_f_dg_gv_1').focus();

   $('#sp3BtFiltroPlanAnualBtEnviarDG')[0].scrollIntoView();

   //***********************   AHORA VAMOS A CARGAR LOS DATOS ***********************************/
           //alert(paObjDG[istAud_DG].a.Id);
           var Itemx = paObjDG[istAud_DG].a;
   //***********************   AHORA VAMOS A CARGAR LOS DATOS ***********************************/

   //2 = En Atencion, quiere decir que ya se finalizó

                           $('#sel_f_dg_gv_1').val(Itemx.IdTipoEvento);   //IdTipoEvento
                           var bal1 = $('#sel_f_dg_gv_1 option:selected').text();

                             $('#sel_f_dg_gv_2').val(Itemx.Potencial);
                           var bal2 = $('#sel_f_dg_gv_2 option:selected').text();


                           $('#sel_f_dg_gv_3').val(Itemx.AccidenteProceso);   //IdTipoEvento
                           var bal3 = $('#sel_f_dg_gv_3 option:selected').text();


                           var bal4 = date_AAAA_MM_DD_T_HH_MM_S_to_DD_MM_AAAA(Itemx.Fecha);
                           var bal5 = Itemx.Hora;

                           var bal6 = //sel_f_dg_gv_6
                            
                           // alert('bal5 = '+bal5);

                           $('#sel_f_dg_gv_6').val(Itemx.IdSede);   //IdTipoEvento
                           var bal6 = $('#sel_f_dg_gv_6 option:selected').text();

                           //alert('IdEmbarcacion = '+Itemx.IdEmbarcacion);

                            $('#sel_f_dg_gv_7').val(Itemx.IdEmbarcacion);   //IdTipoEvento
                           var bal7 = $('#sel_f_dg_gv_7 option:selected').text();

                            var bal8= '';
                           if(Itemx.HayPersonalAfectado == 0){bal8 = 'De Tasa'; fnSp3onchangeObjetivoSubojetitiv2('si', 'rbtn_si_8', 'rbtn_no_9')
                           }else{bal8 = 'De Tercero (Contratista, Visitante/ Proveedor)'; fnSp3onchangeObjetivoSubojetitiv2('no', 'rbtn_si_8', 'rbtn_no_9') }

                           //alert('aqui voy a sel_f_dg_gv_10');
                           //$('#sel_f_dg_gv_10').val(Itemx.IdEmpresaCompany);   //IdTipoEvento

                            $('#sel_f_dg_gv_10').val(paObj[istAud].a.NombreEmpresa);
                           var bal9 = $('#sel_f_dg_gv_10 option:selected').text();
                          
                           var bal10 = Itemx.Descripcion;
                            $('#txta_f_dg_gv_11').val(bal10);

                            //alert($('#txta_f_dg_gv_11').val())
                             sp4MaxText('txta_f_dg_gv_11','lb_cant_desc1' ,500);
                           


                           $('#sel_f_dg_gv_12').val(Itemx.IdCondicionEP);   //IdTipoEvento
                           var bal11 = $('#sel_f_dg_gv_12 option:selected').text();

                            $('#sel_f_dg_gv_13').val(Itemx.IdProcesoOperacion);   //IdTipoEvento
                           var bal12 = $('#sel_f_dg_gv_13 option:selected').text();


                            $('#sel_f_dg_gv_14').val(Itemx.IdSubProceso);   //IdTipoEvento
                           var bal13 = $('#sel_f_dg_gv_14 option:selected').text();


                             $('#sel_f_dg_gv_15').val(Itemx.IdProbRecurrencia);   //IdTipoEvento
                           var bal14 = $('#sel_f_dg_gv_15 option:selected').text();

                            $('#sel_f_dg_gv_16').val(Itemx.IdAreaAccidente);   //IdTipoEvento
                           var bal15= $('#sel_f_dg_gv_16 option:selected').text();


                            $('#sel_f_dg_gv_17').val(Itemx.IdZonaAccidente);   //IdTipoEvento
                           var bal16 = $('#sel_f_dg_gv_17 option:selected').text();

                            $('#sel_f_dg_gv_18').val(Itemx.LugarEspTarea);   //IdTipoEvento
                           var bal17 = $('#sel_f_dg_gv_18 option:selected').text();

                            $('#sel_f_dg_gv_18_0').val(Itemx.TemporadaVeda);   //IdTipoEvento
                           var bal17_0 = $('#sel_f_dg_gv_18_0 option:selected').text();


                           //*************AQUI ESTOY

                           var bal18 =  Itemx.NombrePersonalAccidentado;
                           $('#ReportanteNameDG_119').val(bal18);// alert(bal18);

                           $('#ReportanteUserHashDG_119').val(Itemx.IdPersonalAccidentado);//IdHash



                           var bal19 =  Itemx.CodTrabjador;
                           $('#txta_f_dg_gv_20').val(bal19);



                           var bal20 =  Itemx.DNIAccidentado;
                           $('#txta_f_dg_gv_21').val(bal20);



                           var bal21 =  Itemx.EdadAccidentado;
                           $('#txta_f_dg_gv_22').val(bal21);

                           var bal22 =  Itemx.PuestoCargoAccidentado;
                           $('#txta_f_dg_gv_23').val(bal22);



                           var bal23 =  Itemx.PuestoCargoAccidentado2;
                           $('#txta_f_dg_gv_24').val(bal23);



                           var bal24 =  Itemx.Expiencia_Yaer;
                           $('#txta_f_dg_gv_25').val(bal24);


                           var bal25 =  Itemx.Expiencia_Month;
                           $('#txta_f_dg_gv_26').val(bal25);




                            $('#sel_f_dg_gv_27').val(Itemx.LesionDannio);   //IdTipoEvento
                           var bal26 = $('#sel_f_dg_gv_27').val();


                            $('#sel_f_dg_gv_28').val(Itemx.ParteCuerpoLesionada);   //IdTipoEvento
                           var bal27 = $('#sel_f_dg_gv_28 option:selected').text();

                          var bal28 =  Itemx.Dias_Descanza;
                           $('#txt_f_dg_gv_29').val(bal28); //alert(bal28);



                           //alert('17.090 Descanso estado = '+ Itemx.Descanso_estado);
                           $('#sel_f_dg_gv_30').val(Itemx.Descanso_estado);   //IdTipoEvento
                           var bal29 = $('#sel_f_dg_gv_30 option:selected').text();
             
                              //aqui


                          //--------------------------------------------------------------
                          var bal29_ini = Itemx.fecha_Descanso_Ini;
                          var bal29_fin = Itemx.fecha_Descanso_Fin;

                          $('#date_range').daterangepicker({
                            "locale": {
                                "timePicker": true,
                                "format": "YYYY-MM-DD",
                                "separator": " - ",
                                "applyLabel": "Aceptar",
                                "cancelLabel": "Cancelar",
                                "fromLabel": "Desde",
                                "toLabel": "Hasta",
                                "customRangeLabel": "Personalizar",
                                "daysOfWeek": [
                                    "Do",
                                    "Lu",
                                    "Ma",
                                    "Mi",
                                    "Ju",
                                    "Vi",
                                    "Sa"
                                ],
                                "monthNames": [
                                    "Enero",
                                    "Febrero",
                                    "Marzo",
                                    "Abril",
                                    "Mayo",
                                    "Junio",
                                    "Julio",
                                    "Agosto",
                                    "Setiembre",
                                    "Octubre",
                                    "Noviembre",
                                    "Diciembre"
                                ],
                                "firstDay": 1
                            },
                            "startDate": bal29_ini,
                            "endDate": bal29_fin,
                            "minDate": "2020-12-20",
                            "alwaysShowCalendars": true,
                            "opens": "center"
                        });


                          //----------------------fecha_Descanso_Fin----------------------------------------fecha_Descanso_Ini   







                          var bal30 =  Itemx.NombreRespInvestigar;
                          $('#ReportanteNameDG_311').val(bal30);

                          var bal30_1 =  Itemx.IdRespInvestigar;
                          $('#ReportanteUserHashDG_311').val(bal30_1);


                          $('#sel_f_dg_gv_32').val(Itemx.IdAreaRespInvestigar);   //IdTipoEvento
                          var bal31 = $('#sel_f_dg_gv_32 option:selected').text();

                          $('#sel_f_dg_gv_33').val(Itemx.IdAsesorInvestigacion);   //IdTipoEvento
                          var bal32 = $('#sel_f_dg_gv_33 option:selected').text();

                          var bal33 =  Itemx.Puerto_Arrivo;
                          $('#txt_f_dg_gv_34').val(bal33);  
                          
                           var bal34= '';
                           if(Itemx.InformeInvestigacion == 0){bal34 = 'No';  fnSp3onchangeObjetivoSubojetitiv2('si', 'rbtn_si_35', 'rbtn_no_36');}else{bal34 = 'Si'; fnSp3onchangeObjetivoSubojetitiv2('no', 'rbtn_si_35', 'rbtn_no_36');}

                           var bal35 =  date_AAAA_MM_DD_T_HH_MM_S_to_DD_MM_AAAA(Itemx.FechaInvestigacionIni); 
                            $('#txtd_f_dg_gv_37').val(bal35); 

                           var bal36 =  date_AAAA_MM_DD_T_HH_MM_S_to_DD_MM_AAAA(Itemx.FechaInvestigacionFin);
                            $('#txtd_f_dg_gv_38').val(bal36); 

                           var bal37 =  Itemx.TiempoTranscurrido;
                              $('#txt_f_dg_gv_39').val(bal37);

                            //  alert(bal37);

                           sp4FbTiempoTrascurridoInv();

                           var fx = bal35.split('/');

                            if(bal37 != 0)
                            {
                                 $("#txtd_f_dg_gv_38").datetimepicker({
                                            timepicker:false,
                                            format:'d/m/Y',
                                            minDate: new Date(fx[2], fx[1]-1, fx[0], 8, 30),
                                            maxDate: new Date(2032, 01, 01, 12, 0)
                                            });
                            }
                            else 
                            {
                                  $("#txtd_f_dg_gv_38").val('');
                            }
                           

                              // alert("fecha ini 17213 = "+bal35);
                              // alert("fecha Fin 17213 = "+bal36);
                              // alert("dias transcurridos = "+bal37);
                           


                          var bal38= '';
                           if(Itemx.HechoAtiempo == 0){bal38 = 'Destiempo'; fnSp3onchangeObjetivoSubojetitiv2('no', 'rbtn_si_40', 'rbtn_no_41'); }else{bal38 = 'A tiempo'; fnSp3onchangeObjetivoSubojetitiv2('si', 'rbtn_si_40', 'rbtn_no_41'); }

                            $('#sel_f_dg_gv_42').val(Itemx.IdGerencia);   //IdTipoEvento
                          var bal39 = $('#sel_f_dg_gv_42 option:selected').text();

                           $('#sel_f_dg_gv_44').val(Itemx.IdRegion);   //IdTipoEvento
                          var bal40 = $('#sel_f_dg_gv_44 option:selected').text();

                           $('#sel_f_dg_gv_45').val(Itemx.IdSeCargaAccidente);   //IdTipoEvento
                         // var bal41 = $('#sel_f_dg_gv_45 option:selected').text();


                           
                           //$("#"+'sel_f_dg_gv_45').html(" "); $("#"+'sel_f_dg_gv_45').css('font-size','13px');
                           //$("#"+'sel_f_dg_gv_45').html("<option selected value='"+ Itemx.IdGerencia+"'>"+bal39+"</option>");




    //alert('aaaaaaaaaaaaaaaaaaaaaa editarrrrrrrrrrr = '+idDatosGeneral); .scrollIntoView();



     //alert(paObj[istAud].a.InformeInvestigacion);//0 no tiene, 1 si tiene, se bloquea para no permitir editarlo y calcula dias trasnscurrido si son mas de 7 automaticamente a destiempo
     //alert(paObj[istAud].a.IdEstadoIncidente);

 console.log("======INI======================================================== VALIDANDO SI HAY EXPEDIOENTE Y SI ESTAMOS A TIEMPOM O NO ===================")
//alert('aaaaaaaaaaaaaaqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqeeeeeeeeeeeeeeeeeeeeee iiiiiiiiii'+paObj[istAud].a.FinalizadoSSO);
    //if((paObj[istAud].a.FinalizadoSSO == 1)||(paObj[istAud].a.FinalizadoA == 1))
   if((paObj[istAud].a.FinalizadoSSO == 1)||(paObj[istAud].a.FinalizadoA == 1)||(paObj[istAud].a.FinalizadoMat == 1))
     {
        $('#sp3BtFiltroPlanAnualDG').css('visibility', 'hidden');
        $('#sp3BtFiltroPlanAnualBtEnviarDG').css('visibility', 'hidden');

         var a = $('#titleModalDatosGenerales').html();

        $('#titleModalDatosGenerales').html(""+a+" - Registro Finalizado ");
     }
     else
     {
          $('#sp3BtFiltroPlanAnualDG').css('visibility', 'visible');
          $('#sp3BtFiltroPlanAnualBtEnviarDG').css('visibility', 'visible');
     }

     if(paObj[istAud].a.InformeInvestigacion == 1)
     {
           // alert('tiene informe')
        
        var dia = $('#txt_f_dg_gv_39').val();

        if(dia >= 7)
        {//destiempo
            fnSp3onchangeObjetivoSubojetitiv2('no', 'rbtn_si_40', 'rbtn_no_41'); 
            
             document.getElementById('rbtn_si_40').style.visibility = 'hidden' ;
             document.getElementById('rbtn_no_41').style.visibility = 'visible' ;

        }
        else
        {//a tiempo
             fnSp3onchangeObjetivoSubojetitiv2('si', 'rbtn_si_40', 'rbtn_no_41');
             document.getElementById('rbtn_si_40').style.visibility = 'visible' ;
             document.getElementById('rbtn_no_41').style.visibility = 'hidden' ;

        }

        
         
     }
 console.log("======INI======================================================== VALIDANDO SI HAY EXPEDIOENTE Y SI ESTAMOS A TIEMPOM O NO ===================")

















}//------------------------------------- fin   sp4FnEditarDatoGeneral() -------------------------------------



function sp4FnEditarDatoGeneral2(idDatosGeneral)
{//------------------------------------- ini   sp4FnEditarDatoGeneral() -------------------------------------

//alert(idDatosGeneral);

   istAud_DG = idDatosGeneral;
   paObjDG[istAud_DG]

   console.log("Datos a Editar = ", paObjDG[istAud_DG]);


   $('#sel_f_dg_gv_1').focus();

   $('#sp3BtFiltroPlanAnualBtEnviarDG')[0].scrollIntoView();

   //***********************   AHORA VAMOS A CARGAR LOS DATOS ***********************************/
           //alert(paObjDG[istAud_DG].a.Id);
           var Item = paObjDG[istAud_DG].a;
   //***********************   AHORA VAMOS A CARGAR LOS DATOS ***********************************/

                           $('#dat_x_clasificacion').val(Item.IdTipoEvento);  
                          
                             var f1 = date_AAAA_MM_DD_T_HH_MM_S_to_DD_MM_AAAA(Item.Fecha)  
                             $('#txtd_f_dg_gv_4y').val(f1)

                             $('#txtt_f_dg_gv_5y').val(Item.Hora);     

                             //var InformeInvestigacion = Item.ReporteExterno; 

                              if(Item.ReporteExterno == 0){ fnSp3onchangeObjetivoSubojetitiv2('no', 'rbtn_si_8x', 'rbtn_no_9x')
                           }else{ fnSp3onchangeObjetivoSubojetitiv2('si', 'rbtn_si_8x', 'rbtn_no_9x') }


                             $('#sel_f_dg_gv_3y').val(Item.IdGerencia);                                                                 
                             $('#sel_f_dg_gv_6y').val(Item.IdSede);                                                                 
                             $('#sel_f_dg_gv_7y').val(Item.IdZonaUbicacion);                                                                 
                             //var HayPersonalAfectado = Item.HayPersonalAfectado;   

                              if(Item.HayPersonalAfectado == 0){fnSp3onchangeObjetivoSubojetitiv2('si', 'rbtn_si_8y', 'rbtn_no_9y')
                           }else{fnSp3onchangeObjetivoSubojetitiv2('no', 'rbtn_si_8y', 'rbtn_no_9y') }

                                                              
                              $('#sel_f_dg_gv_10y').val(Item.IdEmpresa1);    
                              $('#sel_f_dg_gv_10').val(paObj[istAud].a.NombreEmpresa);                                                             
                             $('#txta_f_dg_gv_11y').val(Item.Descripcion);   

                             $('#txta_f_dg_gv_11y').val(Item.Descripcion);
                             var ct = Item.Descripcion.length;
                             if(ct <= 500){$('#lb_cant_desc2').html(ct+'/500');}


                             $('#dat_x_accion_inmediata').val(Item.AcccionesInmediatas);                                                                 
                             $('#dat_x_contaminante').val(Item.IdContaminante);                                                                 
                             $('#dat_x_valumen').val(Item.Volumen);                                                                 
                             $('#dat_x_unidad').val(Item.UnidadVolumen);                                                                 
                             $('#dat_x_area_inpactada').val(Item.AreaImpactada);                                                                 
                             $('#dat_x_impacto_ambiental').val(Item.IdImpactoAmbiental);    
                             $('#sel_f_dg_gv_18_3').val(Item.TemporadaVeda);
                                                                              

                             $('#dat_x_descripcion_evento').val(Item.xIdDescripcionEvento);                                                                 
                             $('#dat_x_impacto_ambiental2').val(Item.xImpactoAmbiental);                                                                 
                             $('#dat_x_reaccion_publica').val(Item.xReaccionPublica);                                                                 
                             $('#dat_x_relacion_comunidad').val(Item.xRelacionComunidad);                                                                 
                             $('#dat_x_legal').val(Item.xLegal);                                                                 
                             $('#dat_x_calificacion').val(Item.xCalificacion);                                                                 
                             $('#dat_x_nivel_severidad').val(Item.xNivelSeveridad);                                                                 

                             $('#dat_x_iia_unidad').val(Item.xIIAUnidad);                                                                 
                             $('#dat_x_iia_corporativo').val(Item.xIIACorporativo);                                                                 
                             $('#dat_x_meta_corporativa').val(Item.xMetaCorporativa);                                                                 
                             $('#dat_x_iia_unidad_pesca').val(Item.xIIAUnidadPesca);                                                                 
                             $('#dat_x_iia_corporativo_pesca').val(Item.xIIACoporativoPesca);                                                                 
                             $('#dat_x_meta_pesac').val(Item.xMetaPesac);                                                                 
                             $('#dat_x_ii_operaciones').val(Item.xIIAOperaciones);                                                                 
                             $('#dat_x_iia_corp_operaciones').val(Item.xIIACoporativoOperaciones);                                                                 

                             $('#dat_x_iia_meta_operaciones').val(Item.xMetaOperaciones);                                                                 
                             $('#dat_x_iia_adm_finanza').val(Item.xIIAdminFinanzas);                                                                 
                             $('#dat_x_iia_corp_adm_finanza').val(Item.xIIACoporAdmiFinanzas);                                                                 
                             $('#dat_x_meta_adm_finanza').val(Item.xMetaAdminFinanazas);                                                                 

                             $('#dat_x_num_colaboradores').val(Item.yNumColaboradores);                                                                 
                             $('#dat_x_num_horas').val(Item.yNumHora);                                                                 
                             $('#dat_x_costo_mo').val(Item.yCostoMOS);                                                                 
                             $('#dat_x_num_colaborador_2').val(Item.yNumColaboradores2);                                                                 
                             $('#dat_x_num_hora_2').val(Item.yNumHora2);                                                                 
                             $('#dat_x_costo_mo_s').val(Item.yCostoMOS2);                                                                 

                             $('#dat_x_cant_producto').val(Item.yCantProducto);                                                                 
                             $('#dat_x_costo_producto').val(Item.yCostoProductoS);                                                                 
                             $('#dat_x_costo_producto_s').val(Item.yCostoProductoS2);                                                                 

                             $('#dat_x_costo_materiales_s').val(Item.ycostoMateriales);                                                            

                             $('#dat_x_costo_servicio_s2').val(Item.yCostoServicioS);                                                                 
                             $('#dat_x_costo_multas_s').val(Item.yCostoMultaS);                                                                 
                             $('#dat_x_otros').val(Item.yOtroS);                                                                 

                             $('#dat_x_costo_total_s').val(Item.yCostoTotalS);                                                                 
                             $('#dat_x_costo_total_dolar').val(Item.yCostoTotalUSD);                                                                 

                             $('#dat_x_oefa_uit').val(Item.yOefaUit);                                                                 
                             $('#dat_x_oefa_s').val(Item.yOefaS);                                                                 
                             $('#dat_x_oefa_usd').val(Item.yOefaUSD);                                                                 

                             $('#dat_x_dicapi_uit').val(Item.yDicapiUit);                                                                 
                             $('#dat_x_dicapi_s').val(Item.yDicapiS);                                                                 
                             $('#dat_x_dicapi_usd').val(Item.yDicapiUSD);  

  //if((paObj[istAud].a.FinalizadoSSO == 1)||(paObj[istAud].a.FinalizadoA == 1))
    if((paObj[istAud].a.FinalizadoSSO == 1)||(paObj[istAud].a.FinalizadoA == 1)||(paObj[istAud].a.FinalizadoMat == 1))
     {
        $('#sp3BtFiltroPlanAnualDG').css('visibility', 'hidden');
        $('#sp3BtFiltroPlanAnualBtEnviarDG').css('visibility', 'hidden');

        var a = $('#titleModalDatosGenerales').html();

        $('#titleModalDatosGenerales').html(""+a+" - Registro Finalizado ");
     }
     else
     {
          $('#sp3BtFiltroPlanAnualDG').css('visibility', 'visible');
          $('#sp3BtFiltroPlanAnualBtEnviarDG').css('visibility', 'visible');
     }                                                               


    //alert('aaaaaaaaaaaaaaaaaaaaaa editarrrrrrrrrrr = '+idDatosGeneral); .scrollIntoView();
}//------------------------------------- fin   sp4FnEditarDatoGeneral() -------------------------------------


function sp4FnEditarDatoGeneralk(idDatosGeneral)
{//------------------------------------- ini   sp4FnEditarDatoGeneral() -------------------------------------

  
  //alert("kkkk"+idDatosGeneral);

   istAud_DG = idDatosGeneral;
   paObjDG[istAud_DG]

   console.log("Datos a Editar MATERIAL = ", paObjDG[istAud_DG]);
   //sel_f_dg_gv_17_1k

   $('#sel_f_dg_gv_1k').focus();



   $('#sp3BtFiltroPlanAnualBtEnviarDG')[0].scrollIntoView();

   //***********************   AHORA VAMOS A CARGAR LOS DATOS ***********************************/
           //alert(paObjDG[istAud_DG].a.Id);
           var Itemx = paObjDG[istAud_DG].a;
   //***********************   AHORA VAMOS A CARGAR LOS DATOS ***********************************/

   //2 = En Atencion, quiere decir que ya se finalizó

                           $('#sel_f_dg_gv_1k').val(Itemx.IdTipoEvento);   //IdTipoEvento
                           var bal1 = $('#sel_f_dg_gv_1k option:selected').text();

                           $('#sel_f_dg_gv_18_1k').val(Itemx.Potencial);
                           var bal2 = $('#sel_f_dg_gv_18_1k option:selected').text();//temporada veda


                           // $('#sel_f_dg_gv_3').val(Itemx.AccidenteProceso);   //IdTipoEvento
                           // var bal3 = $('#sel_f_dg_gv_3 option:selected').text();


                           var bal4 = date_AAAA_MM_DD_T_HH_MM_S_to_DD_MM_AAAA(Itemx.Fecha);
                           var bal5 = Itemx.Hora;

                           var bal6 = //sel_f_dg_gv_6
                            
                           // alert('bal5 = '+bal5);

                           $('#sel_f_dg_gv_6k').val(Itemx.IdSede);   //IdTipoEvento
                           var bal6 = $('#sel_f_dg_gv_6k option:selected').text();

                           //alert('IdEmbarcacion = '+Itemx.IdEmbarcacion);

                            $('#sel_f_dg_gv_7k').val(Itemx.IdEmbarcacion);   //IdTipoEvento
                           var bal7 = $('#sel_f_dg_gv_7k option:selected').text();

                            var bal8= '';
                           if(Itemx.HayPersonalAfectado == 0){bal8 = 'De Tasa'; fnSp3onchangeObjetivoSubojetitiv2('si', 'rbtn_si_8k', 'rbtn_no_9k')
                           }else{bal8 = 'De Tercero (Contratista, Visitante/ Proveedor)'; fnSp3onchangeObjetivoSubojetitiv2('no', 'rbtn_si_8k', 'rbtn_no_9k') }

                           //alert('aqui voy a sel_f_dg_gv_10');
                           //$('#sel_f_dg_gv_10').val(Itemx.IdEmpresaCompany);   //IdTipoEvento

                            $('#sel_f_dg_gv_10k').val(paObj[istAud].a.NombreEmpresa);
                           var bal9 = $('#sel_f_dg_gv_10k option:selected').text();
                          
                           var bal10 = Itemx.Descripcion;
                            $('#txta_f_dg_gv_11k').val(bal10);

                            //alert($('#txta_f_dg_gv_11').val())
                             sp4MaxText('txta_f_dg_gv_11k','lb_cant_desc1k' ,500);
                           


                           $('#sel_f_dg_gv_12k').val(Itemx.IdCondicionEP);   //IdTipoEvento
                           var bal11 = $('#sel_f_dg_gv_12k option:selected').text();

                            $('#sel_f_dg_gv_13k').val(Itemx.IdProcesoOperacion);   //IdTipoEvento
                           var bal12 = $('#sel_f_dg_gv_13k option:selected').text();


                            $('#sel_f_dg_gv_14k').val(Itemx.IdSubProceso);   //IdTipoEvento
                           var bal13 = $('#sel_f_dg_gv_14k option:selected').text();


                             $('#sel_f_dg_gv_15k').val(Itemx.IdProbRecurrencia);   //IdTipoEvento
                           var bal14 = $('#sel_f_dg_gv_15k option:selected').text();

                            $('#sel_f_dg_gv_16k').val(Itemx.IdAreaAccidente);   //IdTipoEvento
                           var bal15= $('#sel_f_dg_gv_16k option:selected').text();


                            $('#sel_f_dg_gv_17k').val(Itemx.IdZonaAccidente);   //IdTipoEvento
                           var bal16 = $('#sel_f_dg_gv_17k option:selected').text();

                            $('#sel_f_dg_gv_18k').val(Itemx.LugarEspTarea);   //IdTipoEvento
                           var bal17 = $('#sel_f_dg_gv_18k option:selected').text();


                           //*************AQUI ESTOY

                           var bal18 =  Itemx.NombrePersonalAccidentado;
                           //$('#ReportanteNameDG_119k').val(bal18);// alert(bal18);
                           $('#sel_f_dg_gv_17_1k').val(bal18);





                           $('#ReportanteUserHashDG_119k').val(Itemx.IdPersonalAccidentado);//IdHash



                           var bal19 =  Itemx.CodTrabjador;
                           $('#txta_f_dg_gv_20k').val(bal19);



                           var bal20 =  Itemx.DNIAccidentado;
                           $('#txta_f_dg_gv_21k').val(bal20);



                           var bal21 =  Itemx.EdadAccidentado;
                           $('#txta_f_dg_gv_22k').val(bal21);

                           var bal22 =  Itemx.PuestoCargoAccidentado;
                           $('#txta_f_dg_gv_23k').val(bal22);



                           var bal23 =  Itemx.PuestoCargoAccidentado2;
                           $('#txta_f_dg_gv_24k').val(bal23);



                           var bal24 =  Itemx.Expiencia_Yaer;
                           $('#txta_f_dg_gv_25k').val(bal24);


                           var bal25 =  Itemx.Expiencia_Month;
                           $('#txta_f_dg_gv_26k').val(bal25);




                            $('#sel_f_dg_gv_27k').val(Itemx.LesionDannio);   //IdTipoEvento
                           var bal26 = $('#sel_f_dg_gv_27k').val();


                            $('#sel_f_dg_gv_28k').val(Itemx.ParteCuerpoLesionada);   //IdTipoEvento
                           var bal27 = $('#sel_f_dg_gv_28k option:selected').text();

                          var bal28 =  Itemx.Dias_Descanza;
                           $('#txt_f_dg_gv_29k').val(bal28); //alert(bal28);



                           //alert('17.090 Descanso estado = '+ Itemx.Descanso_estado);
                           $('#sel_f_dg_gv_30k').val(Itemx.Descanso_estado);   //IdTipoEvento
                           var bal29 = $('#sel_f_dg_gv_30k option:selected').text();
             
                              //aqui


                          //--------------------------------------------------------------
                          var bal29_ini = Itemx.fecha_Descanso_Ini;
                          var bal29_fin = Itemx.fecha_Descanso_Fin;

                          $('#date_range').daterangepicker({
                            "locale": {
                                "timePicker": true,
                                "format": "YYYY-MM-DD",
                                "separator": " - ",
                                "applyLabel": "Aceptar",
                                "cancelLabel": "Cancelar",
                                "fromLabel": "Desde",
                                "toLabel": "Hasta",
                                "customRangeLabel": "Personalizar",
                                "daysOfWeek": [
                                    "Do",
                                    "Lu",
                                    "Ma",
                                    "Mi",
                                    "Ju",
                                    "Vi",
                                    "Sa"
                                ],
                                "monthNames": [
                                    "Enero",
                                    "Febrero",
                                    "Marzo",
                                    "Abril",
                                    "Mayo",
                                    "Junio",
                                    "Julio",
                                    "Agosto",
                                    "Setiembre",
                                    "Octubre",
                                    "Noviembre",
                                    "Diciembre"
                                ],
                                "firstDay": 1
                            },
                            "startDate": bal29_ini,
                            "endDate": bal29_fin,
                            "minDate": "2020-12-20",
                            "alwaysShowCalendars": true,
                            "opens": "center"
                        });


                          //----------------------fecha_Descanso_Fin----------------------------------------fecha_Descanso_Ini   







                          var bal30 =  Itemx.NombreRespInvestigar;
                          $('#ReportanteNameDG_311k').val(bal30);

                          var bal30_1 =  Itemx.IdRespInvestigar;
                          $('#ReportanteUserHashDG_311k').val(bal30_1);


                          $('#sel_f_dg_gv_32k').val(Itemx.IdAreaRespInvestigar);   //IdTipoEvento
                          var bal31 = $('#sel_f_dg_gv_32k option:selected').text();

                          $('#sel_f_dg_gv_33k').val(Itemx.IdAsesorInvestigacion);   //IdTipoEvento
                          var bal32 = $('#sel_f_dg_gv_33k option:selected').text();

                          var bal33 =  Itemx.Puerto_Arrivo;
                          $('#txt_f_dg_gv_34k').val(bal33);  
                          
                           var bal34= '';
                           if(Itemx.InformeInvestigacion == 0){bal34 = 'No';  fnSp3onchangeObjetivoSubojetitiv2('si', 'rbtn_si_35k', 'rbtn_no_36k');}else{bal34 = 'Si'; fnSp3onchangeObjetivoSubojetitiv2('no', 'rbtn_si_35k', 'rbtn_no_36k');}

                           var bal35 =  date_AAAA_MM_DD_T_HH_MM_S_to_DD_MM_AAAA(Itemx.FechaInvestigacionIni); 
                            $('#txtd_f_dg_gv_37k').val(bal35); 

                           var bal36 =  date_AAAA_MM_DD_T_HH_MM_S_to_DD_MM_AAAA(Itemx.FechaInvestigacionFin);
                            $('#txtd_f_dg_gv_38k').val(bal36); 
// alert("18839");
                           var bal37 =  Itemx.TiempoTranscurrido;
                              $('#txt_f_dg_gv_39k').val(bal37);

                            //  alert(bal37);

                           sp4FbTiempoTrascurridoInvk();

                           var fx = bal35.split('/');

                            if(bal37 != 0)
                            {
                                 $("#txtd_f_dg_gv_38k").datetimepicker({
                                            timepicker:false,
                                            format:'d/m/Y',
                                            minDate: new Date(fx[2], fx[1]-1, fx[0], 8, 30),
                                            maxDate: new Date(2032, 01, 01, 12, 0)
                                            });
                            }
                            else 
                            {
                                  $("#txtd_f_dg_gv_38k").val('');
                            }
                           

                              // alert("fecha ini 17213 = "+bal35);
                              // alert("fecha Fin 17213 = "+bal36);
                              // alert("dias transcurridos = "+bal37);
                           


                          var bal38= '';
                           if(Itemx.HechoAtiempo == 0){bal38 = 'Destiempo'; fnSp3onchangeObjetivoSubojetitiv2('no', 'rbtn_si_40k', 'rbtn_no_41k'); }else{bal38 = 'A tiempo'; fnSp3onchangeObjetivoSubojetitiv2('si', 'rbtn_si_40k', 'rbtn_no_41k'); }

                            $('#sel_f_dg_gv_42k').val(Itemx.IdGerencia);   //IdTipoEvento
                          var bal39 = $('#sel_f_dg_gv_42k option:selected').text();

                           $('#sel_f_dg_gv_44k').val(Itemx.IdRegion);   //IdTipoEvento
                          var bal40 = $('#sel_f_dg_gv_44k option:selected').text();

                           $('#sel_f_dg_gv_45k').val(Itemx.IdSeCargaAccidente);   //IdTipoEvento
                         // var bal41 = $('#sel_f_dg_gv_45 option:selected').text();


                           
                           //$("#"+'sel_f_dg_gv_45').html(" "); $("#"+'sel_f_dg_gv_45').css('font-size','13px');
                           //$("#"+'sel_f_dg_gv_45').html("<option selected value='"+ Itemx.IdGerencia+"'>"+bal39+"</option>");




    //alert('aaaaaaaaaaaaaaaaaaaaaa editarrrrrrrrrrr = '+idDatosGeneral); .scrollIntoView();



     //alert(paObj[istAud].a.InformeInvestigacion);//0 no tiene, 1 si tiene, se bloquea para no permitir editarlo y calcula dias trasnscurrido si son mas de 7 automaticamente a destiempo
     //alert(paObj[istAud].a.IdEstadoIncidente);

 console.log("======INI======================================================== VALIDANDO SI HAY EXPEDIOENTE Y SI ESTAMOS A TIEMPOM O NO ===================")
//lert('aaaaaaaaaaaaaaqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqeeeeeeeeeeeeeeeeeeeeee iiiiiiiiii'+paObj[istAud].a.FinalizadoSSO);

console.clear();
console.log("valores::",paObj[istAud].a)
    if((paObj[istAud].a.FinalizadoSSO == 1)||(paObj[istAud].a.FinalizadoA == 1)||(paObj[istAud].a.FinalizadoMat == 1))
     {
        $('#sp3BtFiltroPlanAnualDG').css('visibility', 'hidden');
        $('#sp3BtFiltroPlanAnualBtEnviarDG').css('visibility', 'hidden');

         var a = $('#titleModalDatosGenerales').html();

        $('#titleModalDatosGenerales').html(""+a+" - Registro Finalizado ");
     }
     else
     {
          $('#sp3BtFiltroPlanAnualDG').css('visibility', 'visible');
          $('#sp3BtFiltroPlanAnualBtEnviarDG').css('visibility', 'visible');
     }

     if(paObj[istAud].a.InformeInvestigacion == 1)
     {
           // alert('tiene informe')
        
        var dia = $('#txt_f_dg_gv_39k').val();

        if(dia >= 7)
        {//destiempo
            fnSp3onchangeObjetivoSubojetitiv2('no', 'rbtn_si_40k', 'rbtn_no_41k'); 
            
             document.getElementById('rbtn_si_40k').style.visibility = 'hidden' ;
             document.getElementById('rbtn_no_41k').style.visibility = 'visible' ;

        }
        else
        {//a tiempo
             fnSp3onchangeObjetivoSubojetitiv2('si', 'rbtn_si_40k', 'rbtn_no_41k');
             document.getElementById('rbtn_si_40k').style.visibility = 'visible' ;
             document.getElementById('rbtn_no_41k').style.visibility = 'hidden' ;

        }

        
         
     }
 console.log("======INI======================================================== VALIDANDO SI HAY EXPEDIOENTE Y SI ESTAMOS A TIEMPOM O NO ===================")

















}//------------------------------------- fin   sp4FnEditarDatoGeneral() -------------------------------------




function bloqueaBtns(si_no)
{
  //alert('vamos a bloquear los botonexxxs = '+si_no);
  var countAdjuntosX = 10;
  if(countAdjuntos < 49){countAdjuntosX = 50;}

         if(si_no == 'si')
         {
 
                $('#btSubirFormato').attr("disabled", true);
                $('#agregarEvidencia').attr("disabled", true);
                  


                for(var i = 0; i< countAdjuntosX; i++)
                {
                     if($('#adjuntarDocs_'+i)){$('#adjuntarDocs_'+i).attr("disabled", true);                }
                     if($('#eliminarDoc_0'+i)){$('#eliminarDoc_'+i).attr("disabled", true);               }
                }
         }
         else
         {
             if(si_no == 'no')
             {
                $('#btSubirFormato').attr("disabled", false);
                $('#agregarEvidencia').attr("disabled", false);

                for(var i = 0; i< countAdjuntosX; i++)
                {
                     if($('#adjuntarDocs_'+i)){$('#adjuntarDocs_'+i).attr("disabled", false);}
                     if($('#eliminarDoc_0'+i)){$('#eliminarDoc_'+i).attr("disabled", false);}
                }
             }
         }



}


function roar1(idd)
{
    //countAdjuntos
    
    //alert($('#lbLoadRepoA5').css('visibility'));

    // if($('#lbLoadRepoA5').css('visibility') == 'hidden'){console.clear(); console.log('NO esta adjuntando.. por lo tanto debo desbloquear');bloqueaBtns('no'); }
    // else{if($('#lbLoadRepoA5').css('visibility') == 'visible'){console.clear(); console.log('SI esta adjuntando.. por lo tanto debo desbloquear');bloqueaBtns('si');}
    
    // var a = document.getElementById(idd).value;
    // alert("-"+a.length+"-");

    // if(a == 0)
    //     {
    //           console.clear(); console.log('NO esta adjuntando.. por lo tanto debo desbloquear');bloqueaBtns('no'); 
    //     }
    // else{
    //        if(a > 0)
    //            {
    //               console.clear(); console.log('SI esta adjuntando.. por lo tanto debo desbloquear');bloqueaBtns('si');
    //            }
    //     }
   

   // var ii = parseInt(countAdjuntos-1);
   // console.log("idd = "+idd);
   // console.log("countAdjuntos = "+countAdjuntos);
   // console.log("ii = "+ii);
   // console.log("adjuntarFile_'+ii)("+document.getElementById('adjuntarFile_'+ii).value+")");

   //  let fileInput     = document.getElementById('adjuntarFile_'+ii);
   //  if(fileInput.value == '')
   //  {
   //      bloqueaBtns('no');
   //      console.log("bloqueaBtns = NO");
   //  }
   //  else
   //  {
   //        bloqueaBtns('si');
   //        console.log("bloqueaBtns = SI");
   //  }
     
}


function sp4MaxText(id,llabel, limiteTexto)
{//------------------------------------------------------------------------------------------------------

       var texto = $('#'+id).val();
       var ct = texto.length;

       var lim = limiteTexto +2;
       if(ct <= lim)
        {
            $('#'+llabel).html(ct+'/'+limiteTexto);
            
        }


}//------------------------------------------------------------------------------------------------------



function sp4FnCancelarGuardarIncidente()
{
    $('#modalVerPlanAnualSP3').modal('hide').removeClass('fade');
}

//·################################################### LECCIONES APRENDIDAS ANDY 27-06-2021 #############################################################
//·######################################################################################################################################################
//·######################################################################################################################################################






function sp4FnVentanaLeccionAprendidada(idIncidente)
{
    //verModalError('EN CONSTRUCCION', 'LECCIÒN APRENDIDA = '+idIncidente)

    //alert("20463 inicio:::"+idIncidente);
       $('#exportarLeccion_LA').css('visibility', 'hidden');
       showLoading();
       istAud = idIncidente;
       
       dImgLA = [];//reiniciamos el array


       //vamos  a emprendfer la busqueda de los datos
       console.log("leccion aprendida de ::",paObj[istAud].a);
       console.log('datos de alerta::', paObj[istAud].a.yDetalle);



       //=====================================================================================================================================================================//
                   
                    var url = apiUrlssoma+"/api/Get-Lecciones_Aprendidas?code=lBqb6BPmM8OONq3fdB2N5nSZSBR2z8mRgD/d8XLUtu2OQEF6NWQXtg==&httpmethod=objectlist&IdTipoEvento="+istAud+"&IdEmpresa=0&IdSede=0&FechaInicio=''&FechaFin=''&IdEmbarcacion=0"
                    console.log("URLeccion Aprendida",url )
                    var headers ={
                        "apikey":constantes.apiKey
                    }
                
                    var settings = {
                        "url": url,
                        "method": "GET",
                        "timeout": 0,
                        "crossDomain": true,
                        "dataType": "json",
                        "headers": headers,
                    };
                
                
                    
                   
                
                    $.ajax(settings).done(function (response) 
                    {
                        console.log("**todos**",response);

                        response.PlanAnual.map(function(item)
                        {
                          


                          paObj[istAud].a.LA[item.Id] = item;

                            $("#"+'dat_la_codigo').val(item.Codigo);
                            $("#"+'lbTitleLeccionesAprendidas').html('Lección Aprendida - '+item.Codigo);

                            $("#"+'dat_la_tipo').val(item.IdTipoEvento_);

                            var ffg =  date_AAAA_MM_DD_T_HH_MM_S_to_DD_MM_AAAA(item.Fecha); 

                            $("#"+'dat_la_fecha').val(ffg);
                            $("#"+'dat_la_sede').val(item.IdSede);
                            $("#"+'dat_la_frase').val(item.FraseCorta);

                            //alert('20518 = '+item.Potencial+" ========================="+idIncidente);

                            $("#"+'dat_la_potencial').val(parseInt(item.Potencial));

                            $("#"+'dat_la_tipo_lesion').val(item.TipoLesionDanio);

                            $("#"+'dat_la_impacto_ambiental').val(item.B_Contaminante);//
                            $("#"+'dat_la_impacto_ambiental2').val(item.B_Impacto_Ambiental);

                            if(item.B_Contaminante  == 0)// >
                              {
                                    $('#divBorde_x_2cc_la').css('background-color','#EFEFEF');//sel_tipo_evento2
                                    $('#dat_la_impacto_ambiental').css('background-color','#EFEFEF');
                                    $('#dat_la_impacto_ambiental').prop('disabled', true);//divf1cont
                              }

                              if(item.B_Impacto_Ambiental  == 0)// >
                              {
                                    $('#divBorde_x_2ia_la').css('background-color','#EFEFEF');//sel_tipo_evento2
                                    $('#dat_la_impacto_ambiental2').css('background-color','#EFEFEF');
                                    $('#dat_la_impacto_ambiental2').prop('disabled', true);//divf1cont
                              }


                            $("#"+'dat_la_descripcion').val(item.Descripcion);
                                
                                istLA = item.Id;
                            
                                                                     //==========================================       HORA MANDAMOS A BUSCAR LAS IMAGENES     ==============================================================//
                                                                        var url1 = apiUrlssoma+"/api/Get-Lecciones_Aprendidas?code=lBqb6BPmM8OONq3fdB2N5nSZSBR2z8mRgD/d8XLUtu2OQEF6NWQXtg==&httpmethod=imagenes&IdTipoEvento="+item.Id+"&IdEmpresa=0&IdSede=0&FechaInicio=''&FechaFin=''&IdEmbarcacion=0"
                                                                        console.log("URLeccion Aprendida imagenes XXXXXXXXXXXX",url1 )
                                                                        var headers1 ={
                                                                            "apikey":constantes.apiKey
                                                                        }
                                                                    
                                                                        var settings1 = {
                                                                            "url": url1,
                                                                            "method": "GET",
                                                                            "timeout": 0,
                                                                            "crossDomain": true,
                                                                            "dataType": "json",
                                                                            "headers": headers1,
                                                                        };
                                                                    
                                                                    
                                                                        
                                                                       
                                                                        $('#lbLoadRepoA_la').css('visibility','visible');
                                                                        $('#loadRepoA_la').css('visibility','visible');

                                                                        $.ajax(settings1).done(function (response1) 
                                                                        {
                                                                            console.log("**todos imagen**",response1);

                                                                           
                                                                           if((response1.Imagenes[0].EvidenciaFile != "")&&(response1.Imagenes[0].EvidenciaFile !='A0064'))
                                                                           {
                                                                                $('#btn_file_control_cambio_la').html("&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Ver Foto (1)")
                                                                                $('#btn_file_control_cambio_la').attr('title','Ver Foto de la Evidencia ('+response1.Imagenes[0].NombreEvidencia+') - Clic para Cambiar Imagen');
                                                                                $('#imgAdjuntoAlerta1_1').prop('src', response1.Imagenes[0].EvidenciaFile); 
                                                                                dImgLA[0]=response1.Imagenes[0].Id
                                                                                paObj[istAud].a.LA[item.Id].Adjunto1 =  response1.Imagenes[0].EvidenciaFile;
                                                                           }else{ $('#imgAdjuntoAlerta1_1').prop('src', ' ');  $('#btn_file_control_cambio_la').attr('title','Clic para Agregar Imagen');dImgLA[0]=response1.Imagenes[0].Id}



                                                                               
                                                                          if((response1.Imagenes[1].EvidenciaFile != "")&&(response1.Imagenes[1].EvidenciaFile !='A0064'))
                                                                           {
                                                                                $('#btn_file_control_cambio_la2').html("&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Ver Foto (1)")
                                                                                $('#btn_file_control_cambio_la2').attr('title','Ver Foto de la Evidencia ('+response1.Imagenes[1].NombreEvidencia+') - Clic para Cambiar Imagen');
                                                                                $('#imgAdjuntoAlerta1_2').prop('src', response1.Imagenes[1].EvidenciaFile); 
                                                                                dImgLA[1]=response1.Imagenes[1].Id
                                                                                paObj[istAud].a.LA[item.Id].Adjunto2 =  response1.Imagenes[1].EvidenciaFile;
                                                                           }else{ $('#imgAdjuntoAlerta1_2').prop('src', ' ');  $('#btn_file_control_cambio_la2').attr('title','Clic para Agregar Imagen');dImgLA[1]=response1.Imagenes[1].Id}


                                                                               
                                                                           if((response1.Imagenes[2].EvidenciaFile != "")&&(response1.Imagenes[2].EvidenciaFile !='A0064'))
                                                                           {
                                                                                $('#btn_file_control_cambio_la3').html("&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Ver Foto (1)")
                                                                                $('#btn_file_control_cambio_la3').attr('title','Ver Foto de la Evidencia ('+response1.Imagenes[2].NombreEvidencia+') - Clic para Cambiar Imagen');
                                                                                $('#imgAdjuntoAlerta1_3').prop('src', response1.Imagenes[2].EvidenciaFile); 
                                                                                dImgLA[2]=response1.Imagenes[2].Id
                                                                                paObj[istAud].a.LA[item.Id].Adjunto3 =  response1.Imagenes[2].EvidenciaFile;
                                                                           }else{ $('#imgAdjuntoAlerta1_3').prop('src', ' ');  $('#btn_file_control_cambio_la3').attr('title','Clic para Agregar Imagen'); dImgLA[2]=response1.Imagenes[2].Id}
                                                                                
                                                                            

                                                                        $('#lbLoadRepoA_la').css('visibility','hidden');
                                                                        $('#loadRepoA_la').css('visibility','hidden');

                                                                            hideLoading();

                                                                            $('#exportarLeccion_LA').css('visibility', 'visible');





                                                                        });
                                                                           

                                                                   //==========================================       HORA MANDAMOS A BUSCAR LAS IMAGENES     ==============================================================//

                        });


                        
                          $("#"+'fila1Documentosla').html(" ");
                            LA_NQFALL = [];
                            LA_CMDACT = [];
                            LA_ID = [];
                        response.Programas.map(function(item1)
                        {
                          
                            $("#"+'dat_la_en_q_fallamos').val(item1.EnQueFallamos);
                           
                            $("#"+'dat_la_como_actuar').val(item1.ComoActuar);

                            //$('#btAgregaLA').trigger('click');

                           fnSp4AgregarLeccionAprendida(item1.Id)

                            
                        });

                        hideLoading();


                        console.log('LA::',  paObj[istAud]); 

                    });


       //====================================================================================================================================================================//

             



    $('#divBordeDG_4_la').css('background-color','#EFEFEF');//sel_tipo_evento2
    $('#dat_la_codigo').css('background-color','#EFEFEF');
    $('#dat_la_codigo').prop('disabled', true);//divf1cont
    

    $('#divBorde_x_2_la').css('background-color','#EFEFEF');//sel_tipo_evento2
    $('#dat_la_sede').css('background-color','#EFEFEF');
    $('#dat_la_sede').prop('disabled', true);//divf1cont

    $('#divBordeDG_4fe_la').css('background-color','#EFEFEF');//sel_tipo_evento2
    $('#dat_la_fecha').css('background-color','#EFEFEF');
    $('#dat_la_fecha').prop('disabled', true);//divf1cont


    


       $('#modalLeccionesAprendidas').modal('show').addClass('fade');

}


var LA_NQFALL = [];//EN QUE FALLAMOS
var LA_CMDACT = [];//COMO DEBEMOS ACTUAR
var LA_ID = [];//COMO DEBEMOS ACTUAR

function fnSp4AgregarLeccionAprendida(idBD)
{


 var nqfall = ""; 
 var cdactuar = "";

nqfall   = $('#dat_la_en_q_fallamos').val();
cdactuar = $('#dat_la_como_actuar').val();

//primero verificamos si se a INSERTAR  o MODIFICAR
if((nqfall !='')&&(cdactuar !=''))
{
        if(idBD == 0)
        { //insertamos, si y solo si se inserto procedemos a agregar la fila en html
            showLoading();
                   var url = apiUrlssoma+"/api/Post-ListaLeccionAprendida?code=jpY5H0NXPdl1EqkBDhD3eKY62Tsn70qyNqRoPI4XJGA9G25s3eJZHQ==&httpmethod=post";

                    var headers ={
                                   "apikey":constantes.apiKey
                                 }

                    let body = {

                        "Id1": 0,
                        "AccionBD":0,//2 PARA MODIFICAR WEB, 3 MODIFICAR APP
                        "Leccion_AprendidaId": istLA,
                        "EnQueFallamos": nqfall,
                        "ComoActuar": cdactuar,
                        "Create_Date": "2021-12-12",
                        "Created_By": getCookie("vtas_id_hash"+sessionStorage.tabVisitasa),
                        "Active": 1
                             }

                             console.log('20257 lista::',body);
                      $.ajax({
                        method: "POST",
                        url:  url,
                        data: JSON.stringify(body),
                        headers:headers,
                        crossDomain: true,
                        dataType: "json",
                            })

                    .done(function(data)
                    {
                        console.info("data20270:::",data)
                         // resultado Exitoso


                        if(data.Id>0)
                        {//--------------------------------------------------------------------------------------------------------------------//--------------------------------------//----------
                            
                                    var ni = LA_NQFALL.length;
                                    var lbni = ni+1;

                                    
                                        LA_NQFALL.push(nqfall); 
                                        LA_CMDACT.push(cdactuar);
                                        LA_ID.push(idBD);

                                                     $("#fila1Documentosla").append(`
                                                    <div id = "docActividad_la${ni}"  class="item-tabla p-2" style="z-index: 1;display:relative; background-color: white !important;  padding: 0px !important; margin: 8 px 0px 0px !important; width: 100% !important;">
                                                            <div class="row m-0 justify-content-between align-items-center tbody_trainning">
                                                                <div class="col-12 text-center" style="font-size: 15px; padding: 4px !important; ">
                                                                    <div class="row">
                                                                        <table width = "100%" border='0'>
                                                                            <tr >
                                                                                <td width = "4%" align="center"><div id="estadoDoc_la${ni}" class="text-center "  style='color:#000000;'>${lbni}</div></td> 
                                                                                  <td width="4%">&nbsp;</td>

                                                                                <td width = "38%" align="center"><div id="nombreDoc${ni}" class="text-left "  style='margin: 0px 0px 0px 18px !important; font-size: 14px !important; font-weight: bold !important; '>
                                                                                    
                                                                                  <div class="form-group col-12 border text-left"  id="divBordeDG_x9${ni}" style="height: 50px;  border-color:#ffffff !important;  margin:0px 0px 6px !important; padding: 10px 0px !important;"  id = "div_lista_0">
                                            <textarea class=" textarea-fecha2" ); "  
                                            style="height: 33px;  font-size: 12px !important;  color:#534b4b; text-align: left !important;"  id="dat_la_en_q_fallamos_lista_${ni}" maxlength='500'  name = "dat_la_en_q_fallamos_lista_${ni}"
                                             readonly>${nqfall}</textarea>
                                                                                  </div>

                                                                                </td>


                                                                                <td width = "38%" align="center"><div id="nombreDocii${ni}" class="text-left "  style='margin: 0px 0px 0px 18px !important; font-size: 14px !important; font-weight: bold !important; '>

                                                                                    <div class="form-group col-12 border text-left"  id="divBordeDG_x10${ni}" style="height: 50px;  border-color:#ffffff !important;  margin:0px 0px 6px !important; padding: 10px 0px !important;"  id = "div_lista_0">
                                                                                          <textarea class=" textarea-fecha2"  "  
                                                                                          style="height: 33px;  font-size: 12px !important;  color:#534b4b; text-align: left !important;"  id="dat_la_como_actuar_${ni}" maxlength='500'  
                                                                                          name = "dat_la_como_actuar_${ni}" readonly>${cdactuar}</textarea>
                                                                                  </div>

                                                                                </td>




                                                                                <td width = "8%" align="center"><div class="text-center lbCabezaTabla"  >
                                                                                    <button type='button' id = 'btEditLa_${ni}' title='Editar Lección' onclick="fnSp4EditarLweccion(${ni}, ${idBD})"   class='btn-circle btn_read border-0' style='background-color:#58c25d !important;' id='adjuntarDoc_la${ni}'>
                                                                                        <img id = 'imagenEdit${ni}' src='./images/iconos/edit_1.svg' class=''  >
                                                                                    </button>
                                                                                </td>


                                                                                <td width = "8%" align="center"><div class="text-center lbCabezaTabla"  >
                                                                                    <button type='button' title='Eliminar Lección' onclick="fnSp3EliminarLeccionAprendida(${ni},${idBD})"   class='btn-circle btn_read border-0' style='background-color:#ff6767 !important;' id='verDoc_la1'>
                                                                                        <img src='./images/iconos/delete.svg' class='ojo-1'  >
                                                                                    </button>
                                                                                </td>


                                                                            </tr>
                                                                        </table>
                                                                    </div>
                                                                  </div>
                                                            </div>
                                                        </div>
                                                `);

                                                     $('#dat_la_en_q_fallamos').val(' ');

                                                      $('#dat_la_como_actuar').val(' ');
                                            
                             hideLoading();
                        }//--------------------------------------------------------------------------------------------------------------------//----------------------------------------//----------
                        else
                        {
                            verModalError("Lo Sentimos","No se Pudo Agregar La Lección.");
                            hideLoading();
                        }
                    })
                    .fail(function( jqXHR, textStatus, errorThrown ) {
                        console.error("fail ",textStatus,errorThrown)
                    })
                    .always(function( jqXHR, textStatus, errorThrown ) {
                        // // DESBLOQUEMAOS EL BOTON ENVIAR
                        // $("#btnGuardarDocs").attr("disabled",false)
                        // $("#btnCancelarDoc").attr("disabled",false)
                        // $("#agregarEvidencia").attr("disabled",false)
                        // $("#preloader").hide()
                        // console.info("alwaisxxxxxxxxxxxx ",textStatus)
                        hideLoading();


                       
                    });






        }
        else
        {
            if(idBD > 0)
            {       //modificamos, si y solo si se modifico procedemos a agregar la fila en html

                 var ni = LA_NQFALL.length;
                                    var lbni = ni+1;

                                    
                                        LA_NQFALL.push(nqfall); 
                                        LA_CMDACT.push(cdactuar);
                                        LA_ID.push(idBD);

                                                     $("#fila1Documentosla").append(`
                                                    <div id = "docActividad_la${ni}"  class="item-tabla p-2" style="z-index: 1;display:relative; background-color: white !important;  padding: 0px !important; margin: 8 px 0px 0px !important; width: 100% !important;">
                                                            <div class="row m-0 justify-content-between align-items-center tbody_trainning">
                                                                <div class="col-12 text-center" style="font-size: 15px; padding: 4px !important; ">
                                                                    <div class="row">
                                                                        <table width = "100%" border='0'>
                                                                            <tr >
                                                                                <td width = "4%" align="center"><div id="estadoDoc_la${ni}" class="text-center "  style='color:#000000;'>${lbni}</div></td> 
                                                                                  <td width="4%">&nbsp;</td>

                                                                                <td width = "38%" align="center"><div id="nombreDoc${ni}" class="text-left "  style='margin: 0px 0px 0px 18px !important; font-size: 14px !important; font-weight: bold !important; '>
                                                                                    
                                                                                  <div class="form-group col-12 border text-left"  id="divBordeDG_x9${ni}" style="height: 50px;  border-color:#ffffff !important;  margin:0px 0px 6px !important; padding: 10px 0px !important;"  id = "div_lista_0">
                                            <textarea class=" textarea-fecha2"  
                                            style="height: 33px;  font-size: 12px !important;  color:#534b4b; text-align: left !important;"  id="dat_la_en_q_fallamos_lista_${ni}" maxlength='500'  name = "dat_la_en_q_fallamos_lista_${ni}"
                                             readonly>${nqfall}</textarea>
                                                                                  </div>

                                                                                </td>


                                                                                <td width = "38%" align="center"><div id="nombreDocii${ni}" class="text-left "  style='margin: 0px 0px 0px 18px !important; font-size: 14px !important; font-weight: bold !important; '>

                                                                                    <div class="form-group col-12 border text-left"  id="divBordeDG_x10${ni}" style="height: 50px;  border-color:#ffffff !important;  margin:0px 0px 6px !important; padding: 10px 0px !important;"  id = "div_lista_0">
                                                                                          <textarea class=" textarea-fecha2"   
                                                                                          style="height: 33px;  font-size: 12px !important;  color:#534b4b; text-align: left !important;"  id="dat_la_como_actuar_${ni}" maxlength='500'  
                                                                                          name = "dat_la_como_actuar_${ni}" readonly>${cdactuar}</textarea>
                                                                                  </div>

                                                                                </td>




                                                                                <td width = "8%" align="center"><div class="text-center lbCabezaTabla"  >
                                                                                    <button type='button' id = 'btEditLa_${ni}' title='Editar Lección' onclick="fnSp4EditarLweccion(${ni}, ${idBD})"   class='btn-circle btn_read border-0' style='background-color:#58c25d !important;' id='adjuntarDoc_la${ni}'>
                                                                                        <img id = 'imagenEdit${ni}' src='./images/iconos/edit_1.svg' class=''  >
                                                                                    </button>
                                                                                </td>


                                                                                <td width = "8%" align="center"><div class="text-center lbCabezaTabla"  >
                                                                                    <button type='button' title='Eliminar Lección' onclick="fnSp3EliminarLeccionAprendida(${ni},${idBD})"   class='btn-circle btn_read border-0' style='background-color:#ff6767 !important;' id='verDoc_la1'>
                                                                                        <img src='./images/iconos/delete.svg' class='ojo-1'  >
                                                                                    </button>
                                                                                </td>


                                                                            </tr>
                                                                        </table>
                                                                    </div>
                                                                  </div>
                                                            </div>
                                                        </div>
                                                `);

                                                     $('#dat_la_en_q_fallamos').val(' ');

                                                      $('#dat_la_como_actuar').val(' ');


            }
        }

}
else
{
  verModalError("Agregar Lección","Ingrese todos los valores")
}

           

            //alert('a = '+nqfall);
            //alert('b = '+cdactuar);
 
           
       
}



























function fnSp3EliminarLeccionAprendida(ip, idBD)
{


            showLoading();
             var url = apiUrlssoma+"/api/Post-ListaLeccionAprendida?code=jpY5H0NXPdl1EqkBDhD3eKY62Tsn70qyNqRoPI4XJGA9G25s3eJZHQ==&httpmethod=post";

                    var headers ={
                                   "apikey":constantes.apiKey
                                 }

                    let body = {

                        "Id1": idBD,
                        "AccionBD":2,//2 eliminar, 3 MODIFICAR 
                        "Leccion_AprendidaId": istLA,
                        "EnQueFallamos": " ",
                        "ComoActuar": " ",
                        "Create_Date": "2021-12-12",
                        "Created_By": getCookie("vtas_id_hash"+sessionStorage.tabVisitasa),
                        "Active": 0
                             }

                      console.log('20257 lista2::',body);
                      $.ajax({
                        method: "POST",
                        url:  url,
                        data: JSON.stringify(body),
                        headers:headers,
                        crossDomain: true,
                        dataType: "json",
                            })

                    .done(function(data)
                    {
                        console.info("data20528:::",data)
                         // resultado Exitoso


                        if(data.Id>0)
                        {//--------------------------------------------------------------------------------------------------------------------//--------------------------------------//----------
                            
                                         LA_NQFALL.splice(ip, 1);
                                         LA_CMDACT.splice(ip, 1);
                                         LA_ID.splice(ip, 1);


                                         var n = LA_NQFALL.length;
                                         $("#fila1Documentosla").html(' ');

                                         for(var ni = 0; ni<n; ni++)
                                                {
                                                            var lbni = ni+1;
                                                            var nqfall = LA_NQFALL[ni];
                                                            var cdactuar = LA_CMDACT[ni];
                                                            var idBD = LA_ID[ni];
                                                            $("#fila1Documentosla").append(`
                                                                 <div id = "docActividad_la${ni}"  class="item-tabla p-2" style="z-index: 1;display:relative; background-color: white !important;  padding: 0px !important; margin: 8 px 0px 0px !important; width: 100% !important;">
                                                                 <div class="row m-0 justify-content-between align-items-center tbody_trainning">
                                                                        <div class="col-12 text-center" style="font-size: 15px; padding: 4px !important; ">
                                                                            <div class="row">
                                                                        <table width = "100%" border='0'>
                                                                         <tr >
                                                                             <td width = "4%" align="center"><div id="estadoDoc_la${ni}" class="text-center "  style='color:#000000;'>${lbni}</div></td> 
                                                                                <td width="4%">&nbsp;</td>

                                                                                <td width = "38%" align="center"><div id="nombreDoc${ni}" class="text-left "  style='margin: 0px 0px 0px 18px !important; font-size: 14px !important; font-weight: bold !important; '>
                                                    
                                                                                        <div class="form-group col-12 border text-left"  id="divBordeDG_x9${ni}" style="height: 50px;  border-color:#ffffff !important;  margin:0px 0px 6px !important; padding: 10px 0px !important;"  id = "div_lista_0">
                                                                                    <textarea class=" textarea-fecha2" 
                                                                                         style="height: 33px;  font-size: 12px !important;  color:#534b4b; text-align: left !important;"  id="dat_la_en_q_fallamos_lista_${ni}" maxlength='500'  name = "dat_la_en_q_fallamos_lista_${ni}"
                                                                                    >${nqfall}</textarea>
                                                                                        </div>

                                                                                             </td>


                                                                                    <td width = "38%" align="center"><div id="nombreDoc1" class="text-left "  style='margin: 0px 0px 0px 18px !important; font-size: 14px !important; font-weight: bold !important; '>

                                                                                    <div class="form-group col-12 border text-left"  id="divBordeDG_x10${ni}" style="height: 50px;  border-color:#ffffff !important;  margin:0px 0px 6px !important; padding: 10px 0px !important;"  id = "div_lista_0">
                                                                                        <textarea class=" textarea-fecha2"  "  
                                                                                         style="height: 33px;  font-size: 12px !important;  color:#534b4b; text-align: left !important;"  id="dat_la_como_actuar_${ni}" maxlength='500'  
                                                                                        name = "dat_la_como_actuar_${ni}">${cdactuar}</textarea>
                                                                                        </div>

                                                                                    </td>




                                                                                <td width = "8%" align="center"><div class="text-center lbCabezaTabla"  >
                                                                                    <button type='button' id = 'btEditLa_${ni}' title='Editar Lección' onclick="fnSp4EditarLweccion(${ni},${idBD})"   class='btn-circle btn_read border-0' style='background-color:#58c25d !important;' id='adjuntarDoc_la${ni}'>
                                                                                        <img id = 'imagenEdit${ni}' src='./images/iconos/edit_1.svg' class=''  >
                                                                                    </button>
                                                                                </td>


                                                                                <td width = "8%" align="center"><div class="text-center lbCabezaTabla"  >
                                                                                    <button type='button' title='Eliminar Lección' onclick="fnSp3EliminarLeccionAprendida(${ni},${idBD})"   class='btn-circle btn_read border-0' style='background-color:#ff6767 !important;' id='verDoc_la1'>
                                                                                        <img src='./images/iconos/delete.svg' class='ojo-1'  >
                                                                                </button>
                                                                                </td>


                                                                            </tr>
                                                                     </table>
                                                                    </div>
                                                                </div>
                                                             </div>
                                                        </div>
                                                      `);

                                            }

                                             hideLoading();
                             
                        }//--------------------------------------------------------------------------------------------------------------------//----------------------------------------//----------
                        else
                        {
                            hideLoading();
                            verModalError("Lo Sentimos","No se pudo Guardar la Edición");
                        }
                    })
                    .fail(function( jqXHR, textStatus, errorThrown ) {
                        console.error("fail ",textStatus,errorThrown)
                    })
                    .always(function( jqXHR, textStatus, errorThrown ) {
                        // // DESBLOQUEMAOS EL BOTON ENVIAR
                        // $("#btnGuardarDocs").attr("disabled",false)
                        // $("#btnCancelarDoc").attr("disabled",false)
                        // $("#agregarEvidencia").attr("disabled",false)
                        // $("#preloader").hide()
                        // console.info("alwaisxxxxxxxxxxxx ",textStatus)
                        hideLoading();


                       
                    });






}



var enEdicion = 0;
function fnSp4EditarLweccion(ip, idBD)
{
    if(enEdicion == 0)
    {
        $('#divBordeDG_x9'+ip).css('border-color', '#DEE2E6');
        $('#divBordeDG_x10'+ip).css('border-color', '#DEE2E6');

         //$('#btEditLa_'+ip).css('background-color', '#58c25d ');
         
        const $elemx = $('#btEditLa_'+ip);
        $elemx[0].style.setProperty('background-color', '#f9bc61', 'important'); 


        $('#dat_la_en_q_fallamos_lista_'+ip).prop('readonly', false);
        $('#dat_la_como_actuar_'+ip).prop('readonly', false);
        enEdicion = 1;

        $('#btEditLa_'+ip).attr('title','Guardar Cambios');
        $('#imagenEdit'+ip).attr('src','./images/iconos/Vector.svg');//Vector.svg
        //src='./images/iconos/edit_1.svg' 
    }
    else 
    {

        //------------------------AQUI ES DONDE VAMOS A MODIFICAR EN BASE DE DATOS -------------------
             var nqfall   = $('#dat_la_en_q_fallamos_lista_'+ip).val();
             var cdactuar = $('#dat_la_como_actuar_'+ip).val();

             showLoading();
             var url = apiUrlssoma+"/api/Post-ListaLeccionAprendida?code=jpY5H0NXPdl1EqkBDhD3eKY62Tsn70qyNqRoPI4XJGA9G25s3eJZHQ==&httpmethod=post";

                    var headers ={
                                   "apikey":constantes.apiKey
                                 }

                    let body = {

                        "Id1": idBD,
                        "AccionBD":3,//2 eliminar, 3 MODIFICAR 
                        "Leccion_AprendidaId": istLA,
                        "EnQueFallamos": nqfall,
                        "ComoActuar": cdactuar,
                        "Create_Date": "2021-12-12",
                        "Created_By": getCookie("vtas_id_hash"+sessionStorage.tabVisitasa),
                        "Active": 1
                             }

                      console.log('20257 lista2::',body);
                      $.ajax({
                        method: "POST",
                        url:  url,
                        data: JSON.stringify(body),
                        headers:headers,
                        crossDomain: true,
                        dataType: "json",
                            })

                    .done(function(data)
                    {
                        console.info("data20270:::",data)
                         // resultado Exitoso


                        if(data.Id>0)
                        {//--------------------------------------------------------------------------------------------------------------------//--------------------------------------//----------
                            
                                            const $elem = $('#divBordeDG_x9'+ip);
                                            $elem[0].style.setProperty('border-color', '#ffffff', 'important'); 

                                            const $elem1 = $('#divBordeDG_x10'+ip);
                                            $elem1[0].style.setProperty('border-color', '#ffffff', 'important');


                                            const $elemx = $('#btEditLa_'+ip);
                                            $elemx[0].style.setProperty('background-color', '#58c25d', 'important'); 


                                            $('#dat_la_en_q_fallamos_lista_'+ip).prop('readonly', true);
                                            $('#dat_la_como_actuar_'+ip).prop('readonly', true);
                                            enEdicion = 0;

                                            $('#btEditLa_'+ip).attr('title','Editar Lección');
                                            $('#imagenEdit'+ip).attr('src','./images/iconos/edit_1.svg');//Vector.svg


                                             var nqfall   = $('#dat_la_en_q_fallamos_lista_'+ip).val();

                                             var cdactuar = $('#dat_la_como_actuar_'+ip).val();

                                             LA_NQFALL[ip] = nqfall;

                                             LA_CMDACT[ip] = cdactuar; 

                                             hideLoading();
                             
                        }//--------------------------------------------------------------------------------------------------------------------//----------------------------------------//----------
                        else
                        {
                            hideLoading();
                            verModalError("Lo Sentimos","No se pudo Guardar la Edición");
                        }
                    })
                    .fail(function( jqXHR, textStatus, errorThrown ) {
                        console.error("fail ",textStatus,errorThrown)
                    })
                    .always(function( jqXHR, textStatus, errorThrown ) {
                        // // DESBLOQUEMAOS EL BOTON ENVIAR
                        // $("#btnGuardarDocs").attr("disabled",false)
                        // $("#btnCancelarDoc").attr("disabled",false)
                        // $("#agregarEvidencia").attr("disabled",false)
                        // $("#preloader").hide()
                        // console.info("alwaisxxxxxxxxxxxx ",textStatus)
                        hideLoading();


                       
                    });





       


    }
    
}



function fnSpExportarLeccionAprendidaPDF()
{
   
      $('#modalLeccionesAprendidas').modal('hide').removeClass('fade');
      $('#modalAlertaIncidentePDF2').modal('show').addClass('fade');
      sp4MostrarPreviewAlertaPDF_LA();

}



//·################################################### LECCIONES APRENDIDAS ANDY 27-06-2021 #############################################################


function Pdf_la_hoja(doc)
{
   
    var img_fondo = new Image();
    img_fondo.src = './images/Background_PDF_Alerta.png';

    var img_sup = new Image();
    img_sup.src = './images/img_superior_pdf.png';

    var img_log = new Image();
    img_log.src = './images/Logo_tasa_pdf.png';

    var img_inf = new Image();
    img_inf.src = './images/img_inferior_pdf.png';

    var img_header = new Image();
    img_header.src = './images/img_header.png';

    var img_logo_header = new Image();
    img_logo_header.src = './images/logopdf.png';
    // doc.addImage(img_logo_header, 'PNG', 4, 6, 22,14)
    var img_letras = new Image();
    img_letras.src = './images/img_letras.png';

   
    
    





    //doc.addPage();
    doc.addImage(img_fondo, 'PNG', 0, 0, 595, 842)
    
    
    //doc.ellipse(0, 0, 40, 40);
    

    //doc.setLineWidth(1);
    doc.setDrawColor(0);
    doc.setFillColor(255,255,255);
    doc.circle(0, 0, 40, 'F');
    doc.addImage(img_logo_header, 'PNG', 4, 6, 22,14)

    doc.setFontSize(25);
    doc.setFontType('bold');
    //doc.setTextColor(255,0,0); 
    doc.setTextColor(0,0,128);
    doc.text(120, 14, 'LECCIONES APRENDIDAS POR INCIDENTES O ACCIDENTES DE TRABAJO',{maxWidth:160, maxHeight:40, align:'center'});//

    //doc.setDrawColor(0, 0, 0);

//----------------------------------------------------------------------------------------------------------CODIGO
    doc.setFillColor(0,26,102);
    doc.triangle(4, 53, 7, 53, 10, 56, 'F');//tringulo sombra


    doc.setDrawColor(0,122,195);    
    doc.setFillColor(253, 253, 253);    
    doc.rect(6, 48, 198, 42, 'FD'); // filled red square 


    doc.setDrawColor(0);
    doc.setFillColor(0,122,195);
    doc.rect(4, 45,45,8, 'F');//(x1,y1,x2,y2) AZUL DE CODIGO
  

    doc.setFontSize(16);
    doc.setFontType('bold'); 
    doc.setTextColor(255,255,255);

    var dat = 'N°:  '+paObj[istAud].a.Code;
    doc.text(6, 51, dat);  ;

  
   //+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++# EVENTO
    doc.setFontSize(10);
    doc.setFontType('bold'); 
    doc.setTextColor(0,122,195);
    var dat = 'Evento:';
    doc.text(9, 59, dat);
    // paObj[istAud].a.LA[istLA].
     

    doc.setFontSize(10);
    doc.setFontType('normal'); 
    doc.setTextColor(0,0,0);
    var dat = paObj[istAud].a.LA[istLA].FraseCorta
    doc.text(22, 59, dat,{maxWidth:76, maxHeight:17, align:'left'});
    //+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++#


   //+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++#  SEDE
    doc.setFontSize(10);
    doc.setFontType('bold'); 
    doc.setTextColor(0,122,195);
    var dat = 'Sede/ Embarcacion :';
    doc.text(100, 59, dat);
    // paObj[istAud].a.LA[istLA].
     

    doc.setFontSize(10);
    doc.setFontType('normal'); 
    doc.setTextColor(0,0,0);
    var dat =  $('#dat_la_sede option:selected').text();//+'aaa aaaaaa sssssssssss';
    doc.text(136, 59, dat,{maxWidth:36, maxHeight:17, align:'left'});
    //+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++#



   //+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++#  FECHA
    doc.setFontSize(10);
    doc.setFontType('bold'); 
    doc.setTextColor(0,122,195);
    var dat = 'Fecha:';
    doc.text(173, 59, dat);
    // paObj[istAud].a.LA[istLA].
     

    doc.setFontSize(10);
    doc.setFontType('normal'); 
    doc.setTextColor(0,0,0);
    var dat =  $('#dat_la_fecha').val();
    doc.text(185, 59, dat,{maxWidth:76, maxHeight:17, align:'left'});
    //+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++#




    //+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++# MARCAR (X)
    doc.setFontSize(10);
    doc.setFontType('bold'); 
    doc.setTextColor(0,122,195);
    var dat = 'Marcar Aspa (X)';
    doc.text(9, 70, dat);
    // paObj[istAud].a.LA[istLA].
    //+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++#



     var clave = [];
console.log('LINEA 21295:: LTE_LA1', LTE_LA1);
     if( paObj[istAud].a.GrupoEvento == 1)//PERSONAL
     {

       let i = 1;

        LTE_LA1.map(function(texto, Id) {

            

               if(i == 1)
               {
                doc.setDrawColor(0,0,0);    
                doc.setFillColor(255, 255, 255);   
                doc.rect(40, 65,5,5, 'FD');//(x1,y1,x2,y2) AZUL DE CODIGO
                doc.setFontSize(9);

                
                doc.setFontType('normal');
                doc.setFontType('italic'); 
                doc.setTextColor(0,0,0);
                var dat =  texto;
                doc.text(46, 68, dat,{maxWidth:40, maxHeight:10, align:'left'});

                if(Id == $('#dat_la_tipo').val())
                    {
                //********************** */
                doc.setFontSize(13);
                doc.setFontType('bold'); 
                doc.text(41, 69, 'X');
                    }
                
               }

               if(i == 2)
               {
                 doc.setDrawColor(0,0,0);    
                 doc.setFillColor(255, 255, 255);   
                 doc.rect(92, 65,5,5, 'FD');//(x1,y1,x2,y2) AZUL DE CODIGO
   
                doc.setFontSize(9);

                
                doc.setFontType('normal');
                doc.setFontType('italic'); 
                doc.setTextColor(0,0,0);
                var dat =  texto;
                doc.text(98, 68, dat,{maxWidth:40, maxHeight:10, align:'left'});

                 //********************** */
                 if(Id == $('#dat_la_tipo').val())
                    {
                 doc.setFontSize(13);
                 doc.setFontType('bold'); 
                 doc.text(93, 69, 'X');
                    }

               }

               if(i == 3)
               {
                 doc.setDrawColor(0,0,0);    
                 doc.setFillColor(255, 255, 255);   
                 doc.rect(144, 65,5,5, 'FD');//(x1,y1,x2,y2) AZUL DE CODIGO
   
                doc.setFontSize(9);

                
                doc.setFontType('normal');
                doc.setFontType('italic'); 
                doc.setTextColor(0,0,0);
                var dat =  texto;
                doc.text(150, 68, dat,{maxWidth:40, maxHeight:10, align:'left'});

                    if(Id == $('#dat_la_tipo').val())
                    {
                        //alert('es ='+i);
                        doc.setFontSize(13);
                        doc.setFontType('bold'); 
                        doc.text(145, 69, 'X');
                    }
               }


               if(i == 4)
               {
                doc.setDrawColor(0,0,0);    
                doc.setFillColor(255, 255, 255);   
                doc.rect(40, 72,5,5, 'FD');//(x1,y1,x2,y2) AZUL DE CODIGO
                doc.setFontSize(9);

                
                doc.setFontType('normal');
                doc.setFontType('italic'); 
                doc.setTextColor(0,0,0);
                var dat =  texto;
                doc.text(46, 75, dat,{maxWidth:40, maxHeight:10, align:'left'});

                //*************************************** */
                if(Id == $('#dat_la_tipo').val())
                    {
                doc.setFontSize(13);
                doc.setFontType('bold'); 
                doc.text(41,76, 'X');
                    }
                
               }

               if(i == 5)
               {
                doc.setDrawColor(0,0,0);    
                doc.setFillColor(255, 255, 255);   
                doc.rect(92, 72,5,5, 'FD');//(x1,y1,x2,y2) AZUL DE CODIGO
  
               doc.setFontSize(9);

               
               doc.setFontType('normal');
               doc.setFontType('italic'); 
               doc.setTextColor(0,0,0);
               var dat =  texto;
               doc.text(98,75, dat,{maxWidth:40, maxHeight:10, align:'left'});

                  //********************** */
                  if(Id == $('#dat_la_tipo').val())
                    {
                  doc.setFontSize(13);
                  doc.setFontType('bold'); 
                  doc.text(93, 76, 'X');
                    }
                
               }

               if(i == 6)
               {
                doc.setDrawColor(0,0,0);    
                 doc.setFillColor(255, 255, 255);   
                 doc.rect(144, 72,5,5, 'FD');//(x1,y1,x2,y2) AZUL DE CODIGO
   
                doc.setFontSize(9);

                
                doc.setFontType('normal');
                doc.setFontType('italic'); 
                doc.setTextColor(0,0,0);
                var dat = texto;
                doc.text(150, 75, dat,{maxWidth:40, maxHeight:10, align:'left'});
                        if(Id == $('#dat_la_tipo').val())
                        {
                            doc.setFontSize(13);
                            doc.setFontType('bold'); 
                            doc.text(151, 76, 'X');
                        }
                
               }
               i++;
            });
           
        }

               if( paObj[istAud].a.GrupoEvento == 2)//PERSONAL
               {
          
                 let i = 1;
          
                  LTE_LA2.map(function(texto,Id) {
          
                         if(i == 1)
                         {
                          doc.setDrawColor(0,0,0);    
                          doc.setFillColor(255, 255, 255);   
                          doc.rect(40, 65,5,5, 'FD');//(x1,y1,x2,y2) AZUL DE CODIGO
                          doc.setFontSize(9);
          
                          
                          doc.setFontType('normal');
                          doc.setFontType('italic'); 
                          doc.setTextColor(0,0,0);
                          var dat =  texto;
                          doc.text(46, 68, dat,{maxWidth:40, maxHeight:10, align:'left'});
                          if(Id == $('#dat_la_tipo').val())
                          {
                                //********************** */
                                doc.setFontSize(13);
                                doc.setFontType('bold'); 
                                doc.text(41, 69, 'X');
                          }
                         }
          
                         if(i == 2)
                         {
                           doc.setDrawColor(0,0,0);    
                           doc.setFillColor(255, 255, 255);   
                           doc.rect(92, 65,5,5, 'FD');//(x1,y1,x2,y2) AZUL DE CODIGO
             
                          doc.setFontSize(9);
          
                          
                          doc.setFontType('normal');
                          doc.setFontType('italic'); 
                          doc.setTextColor(0,0,0);
                          var dat =  texto;
                          doc.text(98, 68, dat,{maxWidth:40, maxHeight:10, align:'left'});

                            //********************** */
                                if(Id == $('#dat_la_tipo').val())
                                {
                            doc.setFontSize(13);
                            doc.setFontType('bold'); 
                            doc.text(93, 69, 'X');
                                }

                         }
          
                         if(i == 3)
                         {
                           doc.setDrawColor(0,0,0);    
                           doc.setFillColor(255, 255, 255);   
                           doc.rect(144, 65,5,5, 'FD');//(x1,y1,x2,y2) AZUL DE CODIGO
             
                          doc.setFontSize(9);
          
                          
                          doc.setFontType('normal');
                          doc.setFontType('italic'); 
                          doc.setTextColor(0,0,0);
                          var dat =  texto;
                          doc.text(150, 68, dat,{maxWidth:42, maxHeight:10, align:'left'});

                          if(Id == $('#dat_la_tipo').val())
                          {
                              //alert('es ='+i);
                              doc.setFontSize(13);
                              doc.setFontType('bold'); 
                              doc.text(145, 69, 'X');
                          }
          
                         }
          
          
                         if(i == 4)
                         {
                          doc.setDrawColor(0,0,0);    
                          doc.setFillColor(255, 255, 255);   
                          doc.rect(40, 72,5,5, 'FD');//(x1,y1,x2,y2) AZUL DE CODIGO
                          doc.setFontSize(9);
          
                          
                          doc.setFontType('normal');
                          doc.setFontType('italic'); 
                          doc.setTextColor(0,0,0);
                          var dat =  texto;
                          doc.text(46, 74, dat,{maxWidth:40, maxHeight:10, align:'left'});
                          if(Id == $('#dat_la_tipo').val())
                          {
                      doc.setFontSize(13);
                      doc.setFontType('bold'); 
                      doc.text(41,76, 'X');
                          }
                          
                         }
          
                         if(i == 5)
                         {
                          doc.setDrawColor(0,0,0);    
                          doc.setFillColor(255, 255, 255);   
                          doc.rect(92, 72,5,5, 'FD');//(x1,y1,x2,y2) AZUL DE CODIGO
            
                         doc.setFontSize(9);
          
                         
                         doc.setFontType('normal');
                         doc.setFontType('italic'); 
                         doc.setTextColor(0,0,0);
                         var dat =  texto;
                         doc.text(98,74, dat,{maxWidth:40, maxHeight:10, align:'left'});

                         if(Id == $('#dat_la_tipo').val())
                         {
                       doc.setFontSize(13);
                       doc.setFontType('bold'); 
                       doc.text(93, 76, 'X');
                         }
                          
                         }
          
                         if(i == 6)
                         {
                          doc.setDrawColor(0,0,0);    
                           doc.setFillColor(255, 255, 255);   
                           doc.rect(144, 72,5,5, 'FD');//(x1,y1,x2,y2) AZUL DE CODIGO
             
                          doc.setFontSize(9);
          
                          
                          doc.setFontType('normal');
                          doc.setFontType('italic'); 
                          doc.setTextColor(0,0,0);
                          var dat = texto;
                          doc.text(150, 74, dat,{maxWidth:40, maxHeight:10, align:'left'});
                          if(Id == $('#dat_la_tipo').val())
                          {
                              doc.setFontSize(13);
                              doc.setFontType('bold'); 
                              doc.text(151, 76, 'X');
                          }
                          
                        }
                        i++;
                   });
                
                }

     if( paObj[istAud].a.GrupoEvento == 3)//PERSONAL
     {

       let i = 1;

        LTE_LA3.map(function(texto, Id) {

               if(i == 1)
               {
                doc.setDrawColor(0,0,0);    
                doc.setFillColor(255, 255, 255);   
                doc.rect(40, 65,5,5, 'FD');//(x1,y1,x2,y2) AZUL DE CODIGO
                doc.setFontSize(10);

                
                doc.setFontType('normal');
                doc.setFontType('italic'); 
                doc.setTextColor(0,0,0);
                var dat =  texto;
                doc.text(46, 69, dat,{maxWidth:40, maxHeight:10, align:'left'});

                if(Id == $('#dat_la_tipo').val())
                {
                      //********************** */
                      doc.setFontSize(13);
                      doc.setFontType('bold'); 
                      doc.text(41, 69, 'X');
                }
               }

               if(i == 2)
               {
                 doc.setDrawColor(0,0,0);    
                 doc.setFillColor(255, 255, 255);   
                 doc.rect(92, 65,5,5, 'FD');//(x1,y1,x2,y2) AZUL DE CODIGO
   
                doc.setFontSize(10);

                
                doc.setFontType('normal');
                doc.setFontType('italic'); 
                doc.setTextColor(0,0,0);
                var dat =  texto;
                doc.text(98, 69, dat,{maxWidth:40, maxHeight:10, align:'left'});
                 //********************** */
                 if(Id == $('#dat_la_tipo').val())
                 {
             doc.setFontSize(13);
             doc.setFontType('bold'); 
             doc.text(93, 69, 'X');
                 }
               }

               if(i == 3)
               {
                 doc.setDrawColor(0,0,0);    
                 doc.setFillColor(255, 255, 255);   
                 doc.rect(144, 65,5,5, 'FD');//(x1,y1,x2,y2) AZUL DE CODIGO
   
                doc.setFontSize(10);

                
                doc.setFontType('normal');
                doc.setFontType('italic'); 
                doc.setTextColor(0,0,0);
                var dat =  texto;
                doc.text(150, 69, dat,{maxWidth:40, maxHeight:10, align:'left'});
                if(Id == $('#dat_la_tipo').val())
                {
                    //alert('es ='+i);
                    doc.setFontSize(13);
                    doc.setFontType('bold'); 
                    doc.text(145, 69, 'X');
                }

               }


               if(i == 4)
               {
                doc.setDrawColor(0,0,0);    
                doc.setFillColor(255, 255, 255);   
                doc.rect(40, 72,5,5, 'FD');//(x1,y1,x2,y2) AZUL DE CODIGO
                doc.setFontSize(10);

                
                doc.setFontType('normal');
                doc.setFontType('italic'); 
                doc.setTextColor(0,0,0);
                var dat =  texto;
                doc.text(46, 76, dat,{maxWidth:40, maxHeight:10, align:'left'});

                if(Id == $('#dat_la_tipo').val())
                {
            doc.setFontSize(13);
            doc.setFontType('bold'); 
            doc.text(41,76, 'X');
                }
                
               }

               if(i == 5)
               {
                doc.setDrawColor(0,0,0);    
                doc.setFillColor(255, 255, 255);   
                doc.rect(92, 72,5,5, 'FD');//(x1,y1,x2,y2) AZUL DE CODIGO
  
               doc.setFontSize(10);

               
               doc.setFontType('normal');
               doc.setFontType('italic'); 
               doc.setTextColor(0,0,0);
               var dat =  texto;
               doc.text(98,76, dat,{maxWidth:40, maxHeight:10, align:'left'});

               if(Id == $('#dat_la_tipo').val())
               {
             doc.setFontSize(13);
             doc.setFontType('bold'); 
             doc.text(93, 76, 'X');
               }


                
               }

               if(i == 6)
               {
                doc.setDrawColor(0,0,0);    
                 doc.setFillColor(255, 255, 255);   
                 doc.rect(144, 72,5,5, 'FD');//(x1,y1,x2,y2) AZUL DE CODIGO
   
                doc.setFontSize(10);

                
                doc.setFontType('normal');
                doc.setFontType('italic'); 
                doc.setTextColor(0,0,0);
                var dat = texto;
                doc.text(150, 76, dat,{maxWidth:40, maxHeight:10, align:'left'});

                if(Id == $('#dat_la_tipo').val())
                {
                    doc.setFontSize(13);
                    doc.setFontType('bold'); 
                    doc.text(151, 76, 'X');
                }


               }
               i++;
       });
    
    }




  //+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++# MARCAR (X)
  doc.setFontSize(10);
  doc.setFontType('bold'); 
  doc.setTextColor(0,122,195);
  var dat = 'Potencial de Consecuencia de la Lesión:';
  doc.text(9, 81, dat);
 

  doc.setFontType('normal');
  doc.setFontType('italic'); 
  doc.setTextColor(0,0,0);

  if($('#dat_la_potencial').val() == 1){ var dat = 'Alto';}
  if($('#dat_la_potencial').val() == 2){ var dat = 'Medio';}
  if($('#dat_la_potencial').val() == 3){ var dat = 'Bajo';}
  if( paObj[istAud].a.GrupoEvento != 1)//PERSONAL
   {
    var dat = 'No Aplica';
   }

 
  doc.text(79, 81, dat,{maxWidth:40, maxHeight:10, align:'left'});


  //+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++#


  //+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++# MARCAR (X)
  doc.setFontSize(10);
  doc.setFontType('bold'); 
  doc.setTextColor(0,122,195);
  var dat = 'Marcar Aspa (X)';
  doc.text(9,87, dat);
  // paObj[istAud].a.LA[istLA].
  //+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++#

  doc.setDrawColor(0,0,0);    
  doc.setFillColor(255, 255, 255);   
  doc.rect(40, 83,5,5, 'FD');//(x1,y1,x2,y2) AZUL DE CODIGO
  doc.setFontSize(10);

  
  doc.setFontType('normal');
  doc.setFontType('italic'); 
  doc.setTextColor(0,0,0);
  var dat =  'Alto';
  doc.text(46, 87, dat,{maxWidth:40, maxHeight:10, align:'left'});

  if($('#dat_la_potencial').val() == 1)
  {
  doc.setFontSize(13);
  doc.setFontType('bold'); 
  doc.text(41, 87, 'X');}
//------------------------------------------------------------------------
  doc.setDrawColor(0,0,0);    
  doc.setFillColor(255, 255, 255);   
  doc.rect(60, 83,5,5, 'FD');//(x1,y1,x2,y2) AZUL DE CODIGO
  doc.setFontSize(10);

  
  doc.setFontType('normal');
  doc.setFontType('italic'); 
  doc.setTextColor(0,0,0);
  var dat =  'Medio';
  doc.text(66, 87, dat,{maxWidth:40, maxHeight:10, align:'left'});

  if($('#dat_la_potencial').val() == 2)
  {
  doc.setFontSize(13);
  doc.setFontType('bold'); 
  doc.text(61, 87, 'X');
  }

  //-------------------------------------------------------------------------
  doc.setDrawColor(0,0,0);    
  doc.setFillColor(255, 255, 255);   
  doc.rect(80, 83,5,5, 'FD');//(x1,y1,x2,y2) AZUL DE CODIGO
  doc.setFontSize(10);

  
  doc.setFontType('normal');
  doc.setFontType('italic'); 
  doc.setTextColor(0,0,0);
  var dat =  'Bajo';
  doc.text(86, 87, dat,{maxWidth:40, maxHeight:10, align:'left'});

  if($('#dat_la_potencial').val() == 3)
  {
      doc.setFontSize(13);
      doc.setFontType('bold'); 
      doc.text(81, 87, 'X');
  }

   //-------------------------------------------------------------------------
   doc.setDrawColor(0,0,0);    
   doc.setFillColor(255, 255, 255);   
   doc.rect(100, 83,5,5, 'FD');//(x1,y1,x2,y2) AZUL DE CODIGO
   doc.setFontSize(10);
 
   
   doc.setFontType('normal');
   doc.setFontType('italic'); 
   doc.setTextColor(0,0,0);
   var dat =  'No Aplica';
   doc.text(106, 87, dat,{maxWidth:40, maxHeight:10, align:'left'});


     


   if( paObj[istAud].a.GrupoEvento != 1)//PERSONAL
   {
    doc.setFontSize(13);
    doc.setFontType('bold'); 
    doc.text(101, 87, 'X');
   }

   
//-----------------------------------------------------------------------------------------------------------


//---------------------------------------------------------------------------------------------------------- IMAGENES
    // doc.setDrawColor(0,122,195);    
    // doc.setFillColor(253, 253, 253);    
    // doc.rect(6, 48, 198, 40, 'FD'); // filled red square 

    doc.setFillColor(0,26,102);
    doc.triangle(4, 101, 7, 101, 10, 104, 'F');//tringulo s
    

    doc.setDrawColor(0,122,195);    
    doc.setFillColor(253, 253, 253);    
    doc.rect(6,98, 60, 187, 'FD'); // filled red square 

     


    doc.setDrawColor(0);
    doc.setFillColor(157,157,157);
    doc.rect(4, 93,45,8, 'F');//(x1,y1,x2,y2) AZUL DE CODIGO
  

    

    doc.setFontSize(18);
    doc.setFontType('bold'); 
    doc.setTextColor(255,255,255);


    var dat = 'Imágenes';
    doc.text(17, 99, dat);


    var icono1 = new Image();
    icono1.src = './images/iconos/la_icono1.png';
    doc.addImage(icono1, 'PNG', 7, 94)




  //************************************************************************** IMAGEN_1
      var ext =  paObj[istAud].a.LA[istLA].Adjunto1.split(';base64,');
       ext = ext[0].split('data:image/');
      var xtend = ext[1].toUpperCase();
      console.log("EXTENSION = ",xtend);
      doc.addImage(paObj[istAud].a.LA[istLA].Adjunto1, xtend, 9, 108, 53, 53)
 //_____________________________________________________________________________________]



 //************************************************************************** IMAGEN_2
      var ext =  paObj[istAud].a.LA[istLA].Adjunto2.split(';base64,');
       ext = ext[0].split('data:image/');
      var xtend = ext[1].toUpperCase();
      console.log("EXTENSION = ",xtend);
      doc.addImage(paObj[istAud].a.LA[istLA].Adjunto2, xtend, 9, 167, 53, 53)
 //_____________________________________________________________________________________]


  //************************************************************************** IMAGEN_3
      var ext =  paObj[istAud].a.LA[istLA].Adjunto3.split(';base64,');
       ext = ext[0].split('data:image/');
      var xtend = ext[1].toUpperCase();
      console.log("EXTENSION = ",xtend);
      doc.addImage(paObj[istAud].a.LA[istLA].Adjunto3, xtend, 9, 226, 53, 53)




 //_____________________________________________________________________________________]

     
//-----------------------------------------------------------------------------------------------------------



//---------------------------------------------------------------------------------------------------------- DESCRIPCIÓN DEL EVENTO
    

    doc.setFillColor(0,26,102);
    doc.triangle(70, 101, 73, 101, 80, 104, 'F');//tringulo s

     doc.setDrawColor(0,122,195);    
     doc.setFillColor(253, 253, 253);    
     doc.rect(73,98, 131, 40, 'FD'); // filled red square 


    doc.setDrawColor(0);
    doc.setFillColor(153,196,63);
    doc.rect(70, 93,95,8, 'F');//(x1,y1,x2,y2) AZUL DE CODIGO
  

    doc.setFontSize(18);
    doc.setFontType('bold'); 
    doc.setTextColor(255,255,255);
    var dat = 'Descripción del Evento';
    doc.text(85, 99, dat);


    var icono2 = new Image();
    icono2.src = './images/iconos/la_icono2.png';
    doc.addImage(icono2, 'PNG', 73, 94)

    doc.setFontSize(10);
    doc.setFontType('normal');
    doc.setTextColor(0,0,0);
    var dat =  paObj[istAud].a.LA[istLA].Descripcion;
    doc.text(78, 106, dat,{maxWidth:120, maxHeight:48, align:'justify'});
     
//-----------------------------------------------------------------------------------------------------------




//---------------------------------------------------------------------------------------------------------- TIPO DE LECCION
    
   
    doc.setFillColor(0,26,102);
    doc.triangle(70, 150, 73, 150, 80,153, 'F');//tringulo s

     doc.setDrawColor(0,122,195);    
     doc.setFillColor(253, 253, 253);    
     doc.rect(73,145, 131, 22, 'FD'); // filled red square 

    

    doc.setDrawColor(0);
    doc.setFillColor(48,190,238);
    doc.rect(70, 142,134,8, 'F');//(x1,y1,x2,y2) AZUL DE CODIGO

     
  

    doc.setFontSize(18);
    doc.setFontType('bold'); //doc.setFontType('normal');
    doc.setTextColor(255,255,255);
    var dat = 'Tipo_de_Lesión_pérdida_incidente';
    doc.text(85, 148, dat,{maxWidth:130, maxHeight:15});




    var icono3 = new Image();
    icono3.src = './images/iconos/la_icono3.png';
    doc.addImage(icono3, 'PNG', 73, 143)
    

    doc.setFontSize(10);
    doc.setFontType('normal');
    doc.setTextColor(0,0,0);
    var dat =  paObj[istAud].a.LA[istLA].TipoLesionDanio;
    doc.text(78, 156, dat,{maxWidth:120, maxHeight:48, align:'left'});
//-----------------------------------------------------------------------------------------------------------


//---------------------------------------------------------------------------------------------------------- LECCION APRENDIDA
    
      doc.setFillColor(0,26,102);
     doc.triangle(70, 178, 73, 178, 80,183, 'F');//tringulo s

     doc.setDrawColor(0,122,195);    
     doc.setFillColor(253, 253, 253);    
     doc.rect(73,173, 131, 112, 'FD'); // filled red square 

   

    doc.setDrawColor(0);
    doc.setFillColor(0,122,195);
    doc.rect(70, 170,115,8, 'F');//(x1,y1,x2,y2) AZUL DE CODIGO



    doc.setFontSize(18);
    doc.setFontType('bold'); 
    doc.setTextColor(255,255,255);

    doc.setDrawColor(0);
    doc.setFillColor(200, 200, 200);    
    doc.rect(73, 180,62,11, 'F');//(x1,y1,x2,y2) gris en que fallamos





     doc.setDrawColor(0);
    doc.setFillColor(200, 200, 200);    
    doc.rect(142, 180,62,11, 'F');//(x1,y1,x2,y2) gris como actuar


    var dat = 'Lección_aprendida';
    doc.text(85, 176, dat);


    var icono4 = new Image();
    icono4.src = './images/iconos/la_icono4.png';
    doc.addImage(icono4, 'PNG', 73, 172)


    


    doc.setFontSize(12);
    doc.setFontType('bold'); 
    doc.setTextColor(0,122,195);
    var dat = '¿En_que_fallamos?';
    doc.text(83, 187, dat);




    
    doc.setFontSize(12);
    doc.setFontType('bold'); 
    doc.setTextColor(0,122,195);
    var dat = '¿Cómo_debemos_actuar?';
    doc.text(147, 186, dat);

    doc.setFontSize(10);
    doc.setFontType('bolditalic');
    doc.setTextColor(20,71,121); 
    var dat = 'La_prevención_de_accidentes_es_tarea_de_todos._¡Tu_participación_es_Importante!'
    doc.text(105, 292, dat ,{maxWidth:160, align:'center'});//aqui va el detalle de la ---------- alerta







}

function sp4MostrarPreviewAlertaPDF_LA()     //)adjunto1_64, extAdj1, adjunto2_64, extAdj2, idBD)
{
    
     //ocultamos el formulario de alerta
     $('#modalAlertaIncidente').css('visibility','hidden');
     //$('#modalAlertaIncidente').modal('show').addClass('fade')

    //$('#modalAlertaIncidente').modal('hide').removeClass('fade');

    var dataPDF= "";


   


    var doc = new jsPDF();


    
    
//=========================================================================================

    var nn = LA_NQFALL.length;
    var paso = 196;
    var ii = 1;
    var jj = 0;

       Pdf_la_hoja(doc);

    var XA = [];
    var XB = [];
    LA_NQFALL.map(function(texto)
     {
           //=========================================================================================
            XA[jj] = texto; 
            jj++;
            // doc.setFontSize(10.5);
                
            // doc.setFontType('normal');

            // doc.setTextColor(0,0,0);
            // var dat =  ii+'. '+texto
            // doc.text(75, paso, dat,{maxWidth:59, maxHeight:22, align:'justify'});
// //=========================================================================================


            //=========================================================================================
            ii++;
            // paso = paso+24;
     });
    
     


     var paso = 196;
     var ii = 1;
     var jj = 0;
     LA_CMDACT.map(function(texto1)
     {
        XB[jj] = texto1;
         jj++;
           //=========================================================================================
//             doc.setFontSize(10.5);
                
//             doc.setFontType('normal');

//             doc.setTextColor(0,0,0);
//             var dat =  ii+'. '+texto1
//             //var dat =  '1- bbbbbbb bbbbb bbbbbb b bbbbb bb bbb bb bbbbb b bbbbb bb bbb bb bbbbb b  bb bbb bb bb bbb bb bbbbb b bbbbb bb bbb bb bbaxx.';//paObj[istAud].a.LA[istLA].TipoLesionDanio;
//             doc.text(142, paso, dat,{maxWidth:59, maxHeight:22, align:'justify'});
// // //=========================================================================================


            //=========================================================================================
            ii++;
            // paso = paso+24;
     });



var i4 = 1;
for(var k = 0; k< jj; k++)
{

            if(i4 == 5)
            {
            var i4 = 1; 
            var paso = 196;
            doc.addPage();
            Pdf_la_hoja(doc);
            }



            doc.setFontSize(10);
                
            doc.setFontType('normal');

            doc.setTextColor(0,0,0);
            var dat =  (k+1)+'._'+ XA[k]
           doc.text(75, paso, dat,{maxWidth:59, maxHeight:22, align:'justify'});
// //=========================================================================================


            doc.setFontSize(10);
                            
            doc.setFontType('normal');

            doc.setTextColor(0,0,0);
            var dat =  (k+1)+'._'+ XB[k];
            //var dat =  '1- bbbbbbb bbbbb bbbbbb b bbbbb bb bbb bb bbbbb b bbbbb bb bbb bb bbbbb b  bb bbb bb bb bbb bb bbbbb b bbbbb bb bbb bb bbaxx.';//paObj[istAud].a.LA[istLA].TipoLesionDanio;
            doc.text(142, paso, dat,{maxWidth:59, maxHeight:22, align:'justify'});
// //=========================================================================================
paso = paso+24;
i4++;


}


















// //=========================================================================================

// doc.setFontSize(10.5);
    
// doc.setFontType('normal');

// doc.setTextColor(0,0,0);
// var dat =  '1- aaaaaaa aaaaa aaaaaa a aaaaa aa aaa aa aaaaa a aaaaa aa aaa aa aaaaa a  aa aaa aa aa aaa aa aaaaa a aaaaa aa aaa aa aaaxx.';//paObj[istAud].a.LA[istLA].TipoLesionDanio;
// doc.text(75, 196, dat,{maxWidth:59, maxHeight:22, align:'justify'});
// //=========================================================================================




//      doc.setFontSize(12);
//     doc.setFontType('bold'); 
//     doc.setTextColor(0,122,195);
//     var dat = '¿Cómo debemos actuar?';
//     doc.text(149, 186, dat);
// //=========================================================================================
// doc.setFontSize(10.5);
    
// doc.setFontType('normal');

// doc.setTextColor(0,0,0);
// var dat =  '1- bbbbbbb bbbbb bbbbbb b bbbbb bb bbb bb bbbbb b bbbbb bb bbb bb bbbbb b  bb bbb bb bb bbb bb bbbbb b bbbbb bb bbb bb bbaxx.';//paObj[istAud].a.LA[istLA].TipoLesionDanio;
// doc.text(142, 196, dat,{maxWidth:59, maxHeight:22, align:'justify'});
// //=========================================================================================



// //========================================= calcula paso ======================= 24 ========================
// doc.setFontSize(10.5);
    
// doc.setFontType('normal');

// doc.setTextColor(0,0,0);
// var dat =  '2- aaaaaaa aaaaa aaaaaa a aaaaa aa aaa aa aaaaa a aaaaa aa aaa aa aaaaa a  aa aaa aa aa aaa aa aaaaa a aaaaa aa aaa aa aaaxx.';//paObj[istAud].a.LA[istLA].TipoLesionDanio;
// doc.text(75, 220, dat,{maxWidth:59, maxHeight:22, align:'justify'});
// //=========================================================================================


// //========================================= calcula paso ======================= 22 ========================
// doc.setFontSize(10.5);
    
// doc.setFontType('normal');

// doc.setTextColor(0,0,0);
// var dat =  '3- aaaaaaa aaaaa aaaaaa a aaaaa aa aaa aa aaaaa a aaaaa aa aaa aa aaaaa a  aa aaa aa aa aaa aa aaaaa a aaaaa aa aaa aa aaaxx.';//paObj[istAud].a.LA[istLA].TipoLesionDanio;
// doc.text(75, 244, dat,{maxWidth:59, maxHeight:22, align:'justify'});
// //=========================================================================================
     


// //========================================= calcula paso ======================= 22 ========================
// doc.setFontSize(10.5);
    
// doc.setFontType('normal');

// doc.setTextColor(0,0,0);
// var dat =  '4- aaaaaaa aaaaa aaaaaa a aaaaa aa aaa aa aaaaa a aaaaa aa aaa aa aaaaa a  aa aaa aa aa aaa aa aaaaa a aaaaa aa aaa aa aaaxx.';//paObj[istAud].a.LA[istLA].TipoLesionDanio;
// doc.text(75, 268, dat,{maxWidth:59, maxHeight:22, align:'justify'});
// //=========================================================================================


// //-----------------------------------------------------------------------------------------------------------










    // doc.setFontSize(18);
    // doc.setFontType('normal'); 
    // doc.setTextColor(0,0,128);
    // //var dat = 'Callao';//------------------------------------------------------------------------planta ----pendiente traer desde datos generales

    // // var dat =paObj[istAud].a.Code; 
    // //  dataPDF= dataPDF+ "2#"+dat;
    // // doc.text(50, 50, dat);//aqui va el detalle de la alerta


    // doc.setFontSize(18);
    // doc.setFontType('bold'); 
    // doc.setTextColor(0,0,128);
    // doc.text(133, 50, 'FECHA:');//----------------------------------------------------------------fecha

    // doc.setFontSize(18);
    // doc.setFontType('normal'); 
    // doc.setTextColor(0,0,128);
    // //var dat = '19/01/2021';
    // var dat ="CCCCCCCCCCCCCCC"
    // dataPDF= dataPDF+ "3#"+dat;
    // doc.text(160, 50, dat);//---------------------------------------------------------------------fecha




    // doc.setFontSize(18);
    // doc.setFontType('bold'); 
    // doc.setTextColor(0,0,128);
    // doc.text(20, 60, 'ZONA:');//---------------------------------------------------------------zona

   

    // doc.setFontSize(17);
    // doc.setFontType('normal'); 
    // doc.setTextColor(0,0,128);
    // //var dat = 'Callao';//------------------------------------------------------------------------zona
    // var dat = "DDDDDDDDDDDDD"
    //  dataPDF= dataPDF+ "4#"+dat;
    // doc.text(41, 60, dat,{maxWidth:85, align:'left'});//aqui va el detalle de la alerta



    // doc.setFontSize(18);
    // doc.setFontType('bold'); 
    // doc.setTextColor(0,0,128);
    // doc.text(133, 60, 'HORA:');//----------------------------------------------------------------hora

    // doc.setFontSize(18);
    // doc.setFontType('normal'); 
    // doc.setTextColor(0,0,128);
    // //var dat = '11:25:00';
    // var dat = "EEEEEEEEEEEEEEEEEEE"
    // dataPDF= dataPDF+ "5#"+dat;
    // doc.text(160, 60, dat);//---------------------------------------------------------------------hora

    // doc.setTextColor(135,206,250); 
    // doc.text(5, 64, '________________________________________________________');

    // doc.setFontSize(16);
    // doc.setFontType('normal'); 
    // doc.setTextColor(0,0,128);
    // //var dat = 'El próximo domingo, los ciudadanos tendrán ocasión de hacer política, de participar en la toma de decisiones públicas, cuando depositen su voto para elegir a 194 diputados de mayoría y tal vez cincuenta de partido. La democracia electoral les permite, de ese modo ejercer  funciones de gobierno. Fuente: https://www.ejemplode.com/12-clases_de_espanol/362-ejemplo_de_parrafo.html#ixzz6q6EAdYst';
    // var dat = "EEEEEEEEEEEEEEEEEE" 
    //  dataPDF= dataPDF+ "6#"+dat;

    //-------------------------------------------------------------------descripcion
    //doc.text(5, 75, dat,{maxWidth:197, align:'justify'});//aqui va el detalle de la alerta


    // doc.setTextColor(135,206,250); 
    // doc.text(5, 113, '_______________________________________________________________');

    // doc.setFontSize(18);
    // doc.setFontType('bold'); 
    // doc.setTextColor(0,0,128);
    // doc.text(5, 126, 'COMPROMISOS:');

    // //---------------------------------
    // doc.setFontSize(16);
    // doc.setFontType('normal'); 
    // doc.setTextColor(0,0,128);
    // //var dat = '1 - te: https://www.ejemplode.com/12-clases_de_espanol/362-ejemplo_de_parrafo.html#ixzz6q6EAdYstDFSDFS    2 - te: https://www.ejemplode.com/12-clases_de_espanol/362-ejemplo_de_parrafo.html#ixzz6q6EAdYstDFSDFS. 3 - te: https://www.ejemplode.com/12-clases_de_espanol/362-ejemplo_de_parrafo.html#ixzz6q6EAdYstDFSDFS. 4 - te: https://www.ejemplode.com/12-clases_de_espanol/362-ejemplo_de_parrafo.html#ixzz6q6EAdYstDFSDFS.';
    // var dat = "FFFFFFFFFFFFFF" 
    //  dataPDF= dataPDF+ "7#"+dat;

   
    // doc.text(5, 137, dat,{maxWidth:197, align:'justify'});//aqui va el detalle de la alerta----------------------COMPROMISOS
    // doc.setTextColor(135,206,250); 
    // doc.text(5, 176, '_______________________________________________________________');

    // doc.setFontSize(18);
    // doc.setFontType('bold'); 
    // doc.setTextColor(0,0,128);
    // doc.text(5, 190, 'TIPO:');
    // doc.setTextColor(0,0,128); 
    // doc.text(5, 191, '_____');

    // //---------------------------------
    // doc.setFontSize(15);
    // doc.setFontType('normal'); 
    // doc.setTextColor(0,0,128);
    // //var dat = 'ACCIDENTE  INCAPACITANTE';
    // var dat = "GGGGGGGGGGGGGGGGG"
    //  dataPDF= dataPDF+ "8#"+dat;
   
    // doc.text(5, 205, dat,{maxWidth:50, align:'left'});//aqui va el detalle de la alerta----------------------TIPO DE INCIDENTE
    // doc.setTextColor(135,206,250); 



    // doc.setFontSize(18);
    // doc.setFontType('bold'); 
    // doc.setTextColor(0,0,128);
    // doc.text(5, 230, 'DIAGNÓSTICO:');
    // doc.setTextColor(0,0,128); 
    // doc.text(5, 231, '_____________');

    // //---------------------------------
    // doc.setFontSize(14);
    // doc.setFontType('normal'); 
    // doc.setTextColor(0,0,128);
    // //var dat = 'CONTUSIÓN DE DEDO PULGAR DE MANO IZQUIERDA';
    // var dat ="HHHHHHHHHHHHH" 
    //  dataPDF= dataPDF+ "9#"+dat;
   
    // doc.text(5, 239, dat,{maxWidth:55, align:'justify'});//aqui va el detalle de la alerta----------------------TIPO DE INCIDENTE
    // doc.setTextColor(135,198,250); 
   

    


    // var imd_adjunto1 = new Image();
    // imd_adjunto1.src = './images/alertaImg1.gif';
    // doc.addImage(imd_adjunto1, 'GIF', 64, 181, 65, 96)

    //  dataPDF= dataPDF+ "10#"+imd_adjunto1+'#extAdj1 = '+'gif';

    //  doc.addImage(imd_adjunto1, 'GIF', 134, 181, 65, 96)
    //  dataPDF= dataPDF+ "11#"+imd_adjunto1+'#extAdj2 =  '+'gif';

    // if(adjunto2_64 != '')
    // {
    //      var imd_adjunto2 = new Image();
    // //imd_adjunto2.src = './images/alertaImg2.gif';
    // doc.addImage(adjunto2_64, extAdj2, 134, 181, 65, 96)

    //  dataPDF= dataPDF+ "11#"+adjunto2_64+'#extAdj2 = '+extAdj2;
    // }
   








   

    // doc.setTextColor(135,206,250); 
    // doc.text(5, 280, '__________________________________________________________________');
//alertaImg1.gif




    base64SP3 = doc.output('datauristring');
    //$('#pdfHideAlerta').html(base64SP3);
    rawdata = doc.output();

    var len = rawdata.length,
        ab = new ArrayBuffer(len),
        u8 = new Uint8Array(ab);

        while(len--) u8[len] = rawdata.charCodeAt(len);

    pdfFileAlerta_LA = new Blob([ab], { type : "application/pdf" });

    var iframe = document.getElementById('miIframeMuestraPdf1_la');
    iframe.src = URL.createObjectURL(pdfFileAlerta_LA);
    
   // saveAs(pdfFileAlerta_LA, 'InformeAuditoria.pdf');

    //pdfFileAlerta_LA = blob;





    //console.log("ER PDFx = ", base64SP3);
    // $('#txt_describe_compromisoAlerta2').val(base64SP3);
    //console.log("ER PDF = ", pdfFileAlerta); // no funciona

   

     //mostramos el visor de pdf
     $('#modalAlertaIncidentePDF2').modal('show').addClass('fade');
       //$('#titleModalAlertaIncidentePdf').html('.  .                                 Alerta PDF - '+paObj[istAud].a.Code);
      $('#titleModalAlertaIncidentePdf2').html('&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp  Lección Aprendida PDF - '+paObj[istAud].a.Code);
     //$('#miIframeMuestraPdf1').prop('src','./view/ssoma/incidente-accidente/reportes/Reporte1.pdf')
     
  

    //alert('idBD'+idBD);

    // var body = {
    //             "Id1": idBD,
    //             "AccionBD":4,
    //             "IdIncidenteAccidente": 0,
    //             "Detalle":"",
    //             "IdSede":0,
    //             "IdZona": 0,
    //             "IdTipoEvento": 0,//tipo de incidente
    //             "Fecha":'2021-01-01',//datos en tabla incidente pregunar si es la data de hoy
    //             "Hora":'12:00:00',//datos en tabla incidente
    //             "Diagnostico": " ",
    //             "Descripcion": " ",
    //             "Compromiso": " ",
    //             "Adjunto1": "  ",
    //             "Adjunto2": "  ",
    //             "Pdf": dataPDF
    //         }
    //          var url = apiUrlssoma+"/api/Post-Alerta-IncidenteAccidenteWeb?code=aWwcwuIdveNpO4vo3UtZtkbATnLp8DpmPYRWuTircB4wn9Du3Rfdcg==&httpmethod=post";


            // var headers ={
            // "apikey":constantes.apiKey,
            // "Content-Type": "application/json",
            // }
            // console.log("bodyxxIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIII:",body);
            // $.ajax({
            //     method: 'POST',
            //     url:  url,
            //     headers:headers,
            //     data: JSON.stringify(body),
            //     crossDomain: true,
            //     dataType: "json",
            // })
            // .done(function (data) 
            //   {

            //     console.log('despues insertar ************',data);
            //     if(data.Id > 0)
            //     {
            //         //alert('IdAlerta ='+data.Id)
            //         paObj[istAud].a.IdAlerta = idBD;
            //         console.log('SE SUBIO CORRECTAMENTE EL PDF');

            //         $('#sp3BtFiltroPlanAnualBtEnviar').attr("disabled", false);
            //          $('#sp3BtFiltroPlanAnualBtEnviar').css("backgroud", 'red');

            //     }else{verModalError('Al Subir el PDF', 'Intente Nuevamente');}

            //     //fnEnviarInformeAuditoriaOk()

            // })
            // .fail(function( jqXHR, textStatus, errorThrown ) {

            //     verModalError('Al Subir el PDF', 'Intente Nuevamente');
                
            // })
            // .always(function( jqXHR, textStatus, errorThrown ) {

            // });


}

function fnSp4DescargaLeccionAprendidaPDF()
{
 //alert('descargar pdf');

  // var blob = new Blob([ab], { type : "application/pdf" });pdfFileAlerta_LA
//saveAs(blob, 'InformeAuditoria.pdf');
saveAs(pdfFileAlerta_LA, 'LeccionAprendidaPDF_'+paObj[istAud].a.Code+'.pdf');

//saveAs(pdfFileAlerta_LA, 'InformeAuditoria.pdf');
//var iframe = document.getElementById('miIframeMuestraPdf1_la');
    //iframe.src
    //downloadPDF_LA(base64SP3);
}


function downloadPDF_LA(pdf) {
    const linkSource = `data:application/pdf;base64,${pdf}`;
    const downloadLink = document.createElement("a");
    const fileName = "vct_illustration.pdf";

    downloadLink.href = linkSource;
    downloadLink.download = fileName;
    downloadLink.click();
}





//·#_INI_################################################# INFORME DE INVESTIGACIÓN ANDY 12-07-2021 #####################################################
//·######################################################################################################################################################
//·######################################################################################################################################################

function sp4FnVentanaInformeInvestigacion(idIncidente)
{


$('#modalInformeInvestigacion').modal('show').addClass('fade');
}



//·################################################### INFORME DE INVESTIGACIÓN ANDY 12-07-2021 #########################################################
//·######################################################################################################################################################
//·################################################################################################################################################_FIN_#