<link rel="stylesheet" href="./view/ssoma/ssoma.css">
<link rel="stylesheet" href="./css/pagination.css">
<link rel="stylesheet" href="./css/auditorLiderList.css">
<div class="row justify-content-center">
    <div class="col-12">

        <!-- start filtro -->
        <div class="row mt-4 align-items-center"  >
           <table width = "100%" border="0" >
                 <tr>
                     <td id='col1' width ="60%">
                        <table width = "100%" border="0">
                            <tr>
                                <td id='col1-1-1' width ="20%"><label for="sel_filter_unidad_organizativa" class="textoLabelFiltrosCA">Sede </label></td>
                                <td id='col1-1-6' width ="5%">&nbsp;</td>
                                <td id='col1-1-2' width ="15%"> <label for="sel_filter_sede" class="textoLabelFiltrosCA">Norma</label></td>
                                <td id='col1-1-6' width ="5%">&nbsp;</td>
                                <td id='col1-1-3' width ="15%"><label for="txt_date_start_evaluacion" class="textoLabelFiltrosCA">Fecha Desde</label></td>
                                <td id='col1-1-4' width ="5%">&nbsp;</td>
                                <td id='col1-1-5' width ="15%"> <label for="txt_date_end_evaluacion" class="textoLabelFiltrosCA">Fecha Hasta</label></td>
                            </tr>
                            <tr>
                                <td id='col1-1-1' width ="20%">
                                    <select name="sel_filter_sedep" class="form-control select-filtroCA Patch_selectCA" id="sel_filter_sedep" onchange="vw_listado_asistentes.buscarNormasListaAsit(this.value)" style="padding: 0px !important;" required>
                                        <option value="" selected disabled>Seleccionar</option>
                                    </select>
                                </td>
                                <td id='col1-1-6' width ="5%">&nbsp;</td>
                                <td id='col1-1-2' width ="15%">
                                    <select name="sel_filter_normap" class="form-control select-filtroCA Patch_selectCA" id="sel_filter_normap" style="padding: 0px !important;" required>
                                        <option value="" selected disabled>Seleccionar</option>
                                    </select>
                                </td>
                                <td id='col1-1-6' width ="5%">&nbsp;</td>
                                <td id='col1-1-3' width ="15%">
                                    <input  type="text" id="txt_date_start_evaluacion" name="txt_date_start_evaluacion" class="form-control bg-white" readonly onChange="vw_listado_asistentes.validarFechas(3)">
                                </td>
                                <td id='col1-1-4' width ="5%">
                                    <img src="images/iconos/calendario-3.svg"  style="cursor: pointer;" onclick="$('#txt_date_start_evaluacion').val('');">
                                </td>
                                <td id='col1-1-5' width ="15%">
                                    <input  type="text" id="txt_date_end_evaluacion" name="txt_date_end_evaluacion" class="form-control bg-white" readonly onChange="vw_listado_asistentes.validarFechas(3)">
                                </td>
                                <td id='col1-1-6' width ="5%">
                                    <img src="images/iconos/calendario-3.svg"  style="cursor: pointer;" onclick="$('#txt_date_end_evaluacion').val('');">
                                </td>
                            </tr>
                        </table>


                    </td>


                     <td id='col2' width ="2%">&nbsp;</td>
                     <td id='col10'  width ="8%">
                        <button type="button"  name="jesus" onClick="vw_listado_asistentes.filtroTablaDivsAsistentes();" id="buscarAuditorias" class="btn btn-system-green">Buscar</button>
                     </td>
                     <td id='col3' width ="9%">
                        &nbsp;
                     </td>
                     <td id='col4'  width ="2%">&nbsp;</td>

                     <td id='col8'  width ="10%">
                        &nbsp;
                     </td>

                     <td id='col6'  width ="10%">
                        <div class="form-group border-right" id="cant_asistentes" style="font-size: 25px;font-weight: bold;">
                            <img src="images/iconos/copia-1.svg" class="mb-3"  >
                            <span class="cantidad ml-3" id="cant_asistentes">0</span>
                        </div>
                     </td>

                     <td width="10%">

                                <button class="btn btn-system-celeste" id='idAudit'  onclick="vw_listado_asistentes.AgregarLista();">
                                    <img src="./images/iconos/plus_.svg" alt="">
                                    <span class="ml-3">Nueva Lista</span> <!-- Abre Modal  -->
                                </button>
                     </td>

                 </tr>
           </table>

        </div>
        <!-- end filtro -->

    </div>
</div>
        <!-- Listado -->
        <input type="hidden" id="searchBox">

        <div class="row justify-content-center mt-5">
            <div class="col-md-12">
                <div class="header-tabla px-2 py-3">
                    <div class="row m-0 justify-content-between text-left">
                        <div class="col-2 text-left">ID Lista</div>
                        <div class="col-2 text-left">Sede</div>
                        <div class="col-2 text-left">Norma</div>
                        <div class="col-2 text-left">Fecha</div>
                        <div class="col-1 text-left"></div>
                        <div class="col-1 text-right">Apertura</div>
                        <div class="col-1 text-right">Cierre</div>
                        <div class="col-1 text-right">Ver</div>
                    </div>
                </div>

                <div class="body-tabla mt-4" id="bodyTablaSinListado" style="display: block">
                    <div class="content-registros-no-encontrados">
                        <div>
                            <img src="./images/iconos/escritura-1.svg" alt="">
                            <p class="mt-4">No tienes listas asistentes ingresadas</p>
                        </div>
                    </div>
                </div>

                <div class="body-tabla-list-asistentes" id="body-tabla-list-asistentes">

                </div>
                <div id="pagination-container-asist" class="mt-3"></div>
            </div>
        </div>


        <div class="modal_confirmacion" id="modal-listado-asistente" style="overflow: auto !important;">
            <div class="modal_confirmacion__content" style="width: 85% !important; transform: translate3d(-50%,-40%,0);" >
        <div class="modal_confirmacion__head">
            <h5>Registro de Lista de Asistentes <span id="metodo"></span></h5>
        </div>
        <div class="modal_confirmacion__body px-5 pb-4">
            <div class="d-flex align-items-center pt-4 pb-4">
                <div class="col-md-2">
                    <h4 class="text-left"><strong>Datos</strong></h4>
                </div>
                <div class="col-md-9 pr-0">
                    <div class="franja"></div>
                </div>
                <div class="col-md-1">
                    <img src="./images/newsistema/iconos/menu.svg" alt="" class="img-fluid">
                </div>
            </div>
            <!-- SELECT AUDITORIA -->
        <div class="d-flex mt-10 form-group text-left">
            <div class="form-group col-12 text-left" >
                   <div class="Rectangle-trainnig-2 text-left">
                <div class="form-group p-2 text-left" >
                    <label for="sel_audit" class="bmd-label-static titleInput3 text-left"><b>Auditor&iacute;a</b> </label>
                    <div class="input-group">
                        <select id="sel_audit" name="sel_audit" class="form-control form-control2 bg-white unborder">
                            <option value="0">Seleccione</option>
                        </select>
                    </div>
                    </div>
                </div>
            </div>
        </div>

            <div class="card-body2">
                <div class="row">
                    <div class="form-group col-4">
                     <div class="Rectangle-trainnig-2 disabled2">
                        <div class="form-group p-2 text-left" >
                                    <label for="txt_fechaApertura" class="bmd-label-static titleInput2"><b> Fecha de Apertura</b> </label>
                            <div class="input-group">
                                <input  type="text" name="txt_fechaApertura" id="txt_fechaApertura" aria-describedby="sizing-addon2" class="form-control form-control2 bg-white fechasA disabled2"  readonly disabled maxlength="10"  autocomplete="off" >
                            </div>
                            </div>
                        </div>
                    </div>
                    <div class="form-group col-4">
                    <div class="Rectangle-trainnig-2 disabled2">
                    <div class="form-group p-2 text-left">
                                <label for="txt_fechaCierre" class="bmd-label-static titleInput2"><b> Fecha de Cierre</b> </label>
                        <div class="input-group">
                            <input  type="text" name="txt_fechaCierre" id="txt_fechaCierre" aria-describedby="sizing-addon2" class="form-control form-control2 bg-white fechasA disabled2"  readonly disabled maxlength="10"  autocomplete="off" >
                        </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>




            <div class="row justify-content-between">
                <div class="col-4">
                    <h5 class="text-left"><strong>Lista de Asistentes <b id="contadorrow"></b></strong></h5>
                </div>
                <div class="col-2 text-right">
                    <button class="btn verde2 add-trainning" id="add-trainning"><span class="">Agregar</span></button>
                </div>
            </div>

            <div class="row justify-content-between mt-3 mb-3"  >
                <div class="col-12">
                    <div id="tb_trainning" class="header-tabla p-3" name="tb_trainning3">
                        <div class="row m-0 justify-content-between" >
                            <div class="col-3 text-left">Nombres</div>
                            <div class="col-3 text-left">Cargo</div>
                            <div class="col-2 text-left">Asistencia</div>
                            <div class="col-2 text-left" style="font-size: 14px;">Hora Asistencia</div>
                            <div class="col-2 eliminar">Eliminar</div>
                        </div>
                    </div>

                    <div id="tbody_trainning" class="body-tabla-list tbody_trainning scroll-blue" style="overflow-y:scroll;height: 140px;">

                    </div>

                </div>
            </div>

            <div class="d-flex mt-4 mb-3 justify-content-center">
                <div class="col-md-4 pl-0">
                    <button class="btn_confirmar_modal bg-green-lime-modal" id="guardarAsistentes" >Guardar</button>
                    <button class="btn_confirmar_modal bg-green-lime-modal" id="guardarAsistentesA" style="display: none">Guardar</button>
                </div>
                <div class="col-md-4 pl-0">
                    <button class="btn_cerrar_modal" onclick="cerrarModal('modal-listado-asistente')">Cerrar</button>
                </div>
            </div>

        </div>


        </div>
    </div>

<!-- alert confirmar HALLAZGO-->
    <div class="modal fade "  id="modalGuardarAsistentes" tabindex="-1" role="dialog" aria-labelledby="modalAddCompanyTitle" aria-hidden="true" >
        <div class="modal-dialog modal-dialog-centered rounded " role="document" style="max-width: 472px; z-index: 1030; ">
            <div class="modal-content rounded " style="border: 0px !important; background-color:rgba(0,0,0,.0001) !important; box-shadow: none;">

                <div style="overflow: hidden;height: 500px;overflow-x: hidden; ">
                    <div class="modal-body" id="">
                        <div class="col-sm-12 col-md-12" style="color:#575757c9;">

                            <div class="card " style=" border-radius: 10px; box-shadow: none;">
                                <div class="card-header text-center text-white  " style=" border-radius: 10px 10px 0px 0px; background:#05beee; height: 95px;"><img src="images/iconos/informacio1.svg"><span><b><br><br>&nbsp;&nbsp;&nbsp;&nbsp;</b></span></div>

                                <div class="card-body">
                                    <div class="row p-0 d-flex justify-content-center">
                                        <div class="col-sm-10 align-self-center text-center" style="color: #000000 !important; font-family: ProductSans;" >
                                            <h4> <b>Se guardar&aacute; la lista de Asistencia</b></h4>
                                        </div>
                                    </div>
                                </div>


                                <div class="espacio"></div>
                                <div class="card-body">
                                    <div class="row p-0 d-flex justify-content-center">
                                        <div class="col-sm-10 align-self-center text-center" style="color: #000000 !important; font-family: ProductSans;font-size: 15px;" >
                                            <h5><b>¿Desea confirmar?</b>
                                        </div>

                                    </div>
                                </div>

                                <div class="card-body">
                                    <div class="row p-0 d-flex justify-content-center">
                                        <div class="col-sm-10 align-self-center text-center error1" id="error" style="color: #000000 !important; font-family: ProductSans;font-size: 12px; display: none;" >
                                        <p>ERROR! No se ha podido conectar. error occurred while establishing a connection to SQL Server."</p>
                                        </div>
                                    </div>
                                </div>

                                <div class="espacio"></div>
                                <div class="card-body">
                                    <div class="row p-0 d-flex justify-content-center">
                                        <div class="col-sm-12 align-self-center text-center" style="color: #000000 !important; font-family: ProductSans;font-size: 15px;" >
                                            <div class="card-body2">
                                            <div class="row justify-content-around align-items-center">
                                                <div class="col-6">
                                                    <button type="button" class="btn_confirmar_modal bg-green-lime-modal confirm" id="btn-guardar-asistentes"><b>Confirmar</b></button>
                                                </div>
                                                <div class="col-6">
                                                    <button class="btn_cerrar_modal btn-cerrar-fecha" id="btn-cancelar-asistentes"><b>Cerrar</b></button>
                                                </div>
                                            </div>
                                            </div>
                                         </div>

                                    </div>
                                </div>
                                <div>
                            </div>
                        </div>
                    </div>
                </div>



                </div>
            </div>
        </div>
    </div><!-- fin -->


    <!-- alert datos Guardados enviar-->
<div class="modal fade "  id="modalConfirmGuardarAsistentes" tabindex="-1" role="dialog" aria-labelledby="modalAddCompanyTitle" aria-hidden="true" >
    <div class="modal-dialog modal-dialog-centered rounded " role="document" style="max-width: 472px; z-index: 1030; ">
        <div class="modal-content rounded " style="border: 0px !important; background-color:rgba(0,0,0,.0001) !important; box-shadow: none;">

            <div style="overflow: hidden;height: 500px;overflow-x: hidden; ">
                <div class="modal-body" id="">
                    <div class="col-sm-12 col-md-12" style="color:#575757c9;">

                        <div class="card " style=" border-radius: 10px; box-shadow: none;">
                            <div class="card-header text-center text-white  " style=" border-radius: 10px 10px 0px 0px; background:#d2d97b; height: 95px;"><img src="images/iconos/correct_1.svg"><span><b><br><br>&nbsp;&nbsp;&nbsp;&nbsp;</b></span></div>

                            <div class="card-body">
                                <div class="row p-0 d-flex justify-content-center">
                                    <div class="col-sm-10 align-self-center text-center" style="color: #000000 !important; font-family: ProductSans;" >
                                        <h4> <b>Se realiz&oacute; la lista de asistentes con &eacute;xito</b></h4>
                                    </div>
                                </div>
                            </div>
                            <div class="espacio"></div>
                            <div class="card-body">
                                <div class="row p-0 d-flex justify-content-center">
                                    <div class="col-sm-10 align-self-center text-center" style="color: #000000 !important; font-family: ProductSans;font-size: 15px;" >
                                        <b>Puede revisar la lista en tu bandeja de entrada</b>
                                    </div>
                                    <br>
                                    <b id="txt_lista" style="font-size: 27px;"></b>

                                </div>
                            </div>
                            <div class="espacio"></div>
                             <div class="card-body2">
                                <div class="row justify-content-around align-items-center">
                                    <div class="col-10">
                                        <button type="button" class="btn_confirmar_modal bg-green-lime-modal confirm btn-confirmar-plan-end" id="btn-confirm-asistentes"><b>Confirmar</b></button>
                                    </div>
                                </div>
                            </div>

                            <div ></div>
                        </div>
                    </div>
                </div>



            </div>
        </div>


    </div>
</div>
<!-- alert Datos Guardados-->

<!-- alert confirmar HALLAZGO-->
    <div class="modal fade "  id="modalGuardarAsistentesA" tabindex="-1" role="dialog" aria-labelledby="modalAddCompanyTitle" aria-hidden="true" >
        <div class="modal-dialog modal-dialog-centered rounded " role="document" style="max-width: 472px; z-index: 1030; ">
            <div class="modal-content rounded " style="border: 0px !important; background-color:rgba(0,0,0,.0001) !important; box-shadow: none;">

                <div style="overflow: hidden;height: 500px;overflow-x: hidden; ">
                    <div class="modal-body" id="">
                        <div class="col-sm-12 col-md-12" style="color:#575757c9;">

                            <div class="card " style=" border-radius: 10px; box-shadow: none;">
                                <div class="card-header text-center text-white  " style=" border-radius: 10px 10px 0px 0px; background:#05beee; height: 95px;"><img src="images/iconos/informacio1.svg"><span><b><br><br>&nbsp;&nbsp;&nbsp;&nbsp;</b></span></div>

                                <div class="card-body">
                                    <div class="row p-0 d-flex justify-content-center">
                                        <div class="col-sm-10 align-self-center text-center" style="color: #000000 !important; font-family: ProductSans;" >
                                            <h4> <b>Se guardar&aacute; la lista de Asistencia</b></h4>
                                        </div>
                                    </div>
                                </div>


                                <div class="espacio"></div>
                                <div class="card-body">
                                    <div class="row p-0 d-flex justify-content-center">
                                        <div class="col-sm-10 align-self-center text-center" style="color: #000000 !important; font-family: ProductSans;font-size: 15px;" >
                                            <h5><b>¿Desea confirmar?</b>
                                        </div>

                                    </div>
                                </div>

                                <div class="card-body">
                                    <div class="row p-0 d-flex justify-content-center">
                                        <div class="col-sm-10 align-self-center text-center error1" id="error" style="color: #000000 !important; font-family: ProductSans;font-size: 12px; display: none;" >
                                        <p>ERROR! No se ha podido conectar. error occurred while establishing a connection to SQL Server."</p>
                                        </div>
                                    </div>
                                </div>

                                <div class="espacio"></div>
                                <div class="card-body">
                                    <div class="row p-0 d-flex justify-content-center">
                                        <div class="col-sm-12 align-self-center text-center" style="color: #000000 !important; font-family: ProductSans;font-size: 15px;" >
                                            <div class="card-body2">
                                            <div class="row justify-content-around align-items-center">
                                                <div class="col-6">
                                                    <button type="button" class="btn_confirmar_modal bg-green-lime-modal confirm" id="btn-guardar-asistentesA"><b>Confirmar</b></button>
                                                </div>
                                                <div class="col-6">
                                                    <button class="btn_cerrar_modal btn-cerrar-fecha" id="btn-cancelar-asistentesA"><b>Cerrar</b></button>
                                                </div>
                                            </div>
                                            </div>
                                         </div>

                                    </div>
                                </div>
                                <div>
                            </div>
                        </div>
                    </div>
                </div>



                </div>
            </div>
        </div>
    </div><!-- fin -->


    <!-- alert datos Guardados enviar-->
<div class="modal fade "  id="modalConfirmGuardarAsistentesA" tabindex="-1" role="dialog" aria-labelledby="modalAddCompanyTitle" aria-hidden="true" >
    <div class="modal-dialog modal-dialog-centered rounded " role="document" style="max-width: 472px; z-index: 1030; ">
        <div class="modal-content rounded " style="border: 0px !important; background-color:rgba(0,0,0,.0001) !important; box-shadow: none;">

            <div style="overflow: hidden;height: 500px;overflow-x: hidden; ">
                <div class="modal-body" id="">
                    <div class="col-sm-12 col-md-12" style="color:#575757c9;">

                        <div class="card " style=" border-radius: 10px; box-shadow: none;">
                            <div class="card-header text-center text-white  " style=" border-radius: 10px 10px 0px 0px; background:#d2d97b; height: 95px;"><img src="images/iconos/correct_1.svg"><span><b><br><br>&nbsp;&nbsp;&nbsp;&nbsp;</b></span></div>

                            <div class="card-body">
                                <div class="row p-0 d-flex justify-content-center">
                                    <div class="col-sm-10 align-self-center text-center" style="color: #000000 !important; font-family: ProductSans;" >
                                        <h4> <b>Se realiz&oacute; la lista de asistentes con &eacute;xito</b></h4>
                                    </div>
                                </div>
                            </div>
                            <div class="espacio"></div>
                            <div class="card-body">
                                <div class="row p-0 d-flex justify-content-center">
                                    <div class="col-sm-10 align-self-center text-center" style="color: #000000 !important; font-family: ProductSans;font-size: 15px;" >
                                        <b>Puede revisar la lista en tu bandeja de entrada</b>
                                    </div>
                                    <br>
                                    <b id="txt_lista" style="font-size: 27px;"></b>

                                </div>
                            </div>
                            <div class="espacio"></div>
                             <div class="card-body2">
                                <div class="row justify-content-around align-items-center">
                                    <div class="col-10">
                                        <button type="button" class="btn_confirmar_modal bg-green-lime-modal confirm btn-confirmar-plan-end" id="btn-confirm-asistentesA"><b>Confirmar</b></button>
                                    </div>
                                </div>
                            </div>

                            <div ></div>
                        </div>
                    </div>
                </div>



            </div>
        </div>


    </div>
</div>
<!-- alert Datos Guardados-->

<div class="modal fade"  id="modalMsgError" tabindex="-1" role="dialog" aria-labelledby="ExitoIngresarAuditoriaModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered rounded" role="document" style="max-width: 300px; z-index: 1030; ">

        <div class="modal-content rounded border-0" style=" background-color:rgba(0,0,0,.0001) !important; box-shadow: none;">
            <div style="overflow: hidden;height: 360px;overflow-x: hidden; ">
                <div class="modal-body" id="" style="padding: 0px;">
                    <div class="col-sm-12 col-md-12" style="color:#575757c9; width: 100%; padding: 0px;">

                        <div class="card border-o" style="padding-top:0px; box-shadow: none; width: 100%;">
                            <div class="card-header text-white" style="background:#ff5a5a; height: 95px;">
                                    <div class="d-flex justify-content-center">
                                        <img src="images/iconos/informacion3.svg">
                                    </div>
                            </div>
                                <div class="card-body" style="background: white;">
                                  <table align="center" width= "100%" border="0" >
                                      <tr>
                                          <td width="5%" >&nbsp;</td>
                                               <td width="80%" >
                                                <div class="d-flex justify-content-center titulo-exito-ingreso-auditoriaCA" style="font-size: 18px;">
                                                    <b>ERROR!</b>
                                                </div>

                                               </td>
                                          <td width="5%">&nbsp;</td>
                                      </tr>

                                      <tr>
                                        <td width="5%" >&nbsp;</td>
                                             <td width="80%" >
                                                 <div id="subTituloError" class="d-flex mb-2 justify-content-center titulo-confirmar-ingreso-auditoriaCA" style="font-size: 18px;">
                                                       <b>auditorías con éxito</b>
                                                 </div>
                                             </td>
                                        <td width="5%">&nbsp;</td>
                                       </tr>

                                        <tr>
                                            <td width="5%" >&nbsp;</td>
                                                <td width="80%" align="center" >
                                                    <div id="mensajeError" class="d-flex mx-0 px-0 justify-content-center pregunta-exito-ingreso-auditoriaCA">
                                                        El código de la programación es:aaaaaaaaad dfdsfsdfdsf
                                                        dsfsdfdsfsdfdsfdfdsfdf
                                                        dfsdfsdfds
                                                     </div>
                                                </td>
                                            <td width="5%">&nbsp;</td>
                                        </tr>


                                        <tr>
                                            <td width="5%" >&nbsp;</td>
                                                <td width="80%" >
                                                    <div class="d-flex mx-0 px-0 justify-content-center pregunta-exito-ingreso-auditoriaCA">
                                                        &nbsp;
                                                     </div>
                                                </td>
                                            <td width="5%">&nbsp;</td>
                                        </tr>

                                        <tr>
                                            <td width="5%" >&nbsp;</td>
                                                <td width="80%" >
                                                    <div  class="d-flex mb-3 mx-0 justify-content-center titulo-exito-ingreso-auditoriaCA" >
                                                        <button type="button" onClick="$('#modalMsgError').modal('hide');" class="btn_confirmar_modal bg-danger" style="color: #fff" >De Acuerdo</button>
                                                    </div>
                                                </td>
                                            <td width="5%">&nbsp;</td>
                                        </tr>



                                  </table>
                                </div>

                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

</div>


<script src="./js/paginator/pagination.js"></script>


<script>

    // INICIALIZAMOS LOS SELECT E IMPUTS CON LA FUNCION LABEL




    function cerrarModal(id){
      $(`#${id}`).removeClass('modal_confirmacion__active')
    }

    function saveLista(){
    $('#modal-confirmacion').addClass('modal_confirmacion__active')
    //$('#modal-programar-inspeccion').removeClass('modal_confirmacion__active')
    }







</script>





